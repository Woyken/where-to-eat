const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DayEyMmt.js","assets/text-field-Nf2lsdrT.js","assets/trash-2-qdjD-DOU.js","assets/wheel._connectionId-BMSrg6Hp.js","assets/UserSelectionDialog-Bx_iE_wS.js","assets/settings._connectionId-DfQCK66L.js"])))=>i.map(i=>d[i]);
function Cd(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Y={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Oi(this.context.count)},getNextContextId(){return Oi(this.context.count++)}};function Oi(e){const t=String(e),n=t.length-1;return Y.context.id+(n?String.fromCharCode(96+n):"")+t}function Vn(e){Y.context=e}const wd=!1,_d=(e,t)=>e===t,tt=Symbol("solid-proxy"),ic=typeof Proxy=="function",Jo=Symbol("solid-track"),$r={equals:_d};let Xn=null,ac=pc;const Je=1,er=2,cc={owned:null,cleanups:null,context:null,owner:null},_o={};var Z=null;let $=null,Pd=null,se=null,Ie=null,xe=null,ro=0;function xn(e,t){const n=se,r=Z,o=e.length===0,s=t===void 0?r:t,i=o?cc:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=o?e:()=>e(()=>ge(()=>Bt(i)));Z=i,se=null;try{return ze(a,!0)}finally{se=n,Z=r}}function z(e,t){t=t?Object.assign({},$r,t):$r;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&($&&$.running&&$.sources.has(n)?o=o(n.tValue):o=o(n.value)),hc(n,o));return[fc.bind(n),r]}function Fr(e,t,n){const r=lr(e,t,!0,Je);En(r)}function Fe(e,t,n){const r=lr(e,t,!1,Je);En(r)}function G(e,t,n){ac=Ad;const r=lr(e,t,!1,Je),o=Qt&&ue(Qt);o&&(r.suspense=o),(!n||!n.render)&&(r.user=!0),xe?xe.push(r):En(r)}function W(e,t,n){n=n?Object.assign({},$r,n):$r;const r=lr(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,En(r),fc.bind(r)}function kd(e){return e&&typeof e=="object"&&"then"in e}function Gn(e,t,n){let r,o,s;typeof t=="function"?(r=e,o=t,s={}):(r=!0,o=e,s=t||{});let i=null,a=_o,c=null,l=!1,u=!1,d="initialValue"in s,f=typeof r=="function"&&W(r);const h=new Set,[p,m]=(s.storage||z)(s.initialValue),[g,y]=z(void 0),[v,b]=z(void 0,{equals:!1}),[C,w]=z(d?"ready":"unresolved");Y.context&&(c=Y.getNextContextId(),s.ssrLoadFrom==="initial"?a=s.initialValue:Y.load&&Y.has(c)&&(a=Y.load(c)));function R(O,A,H,F){return i===O&&(i=null,F!==void 0&&(d=!0),(O===a||A===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(F,{value:A})),a=_o,$&&O&&l?($.promises.delete(O),l=!1,ze(()=>{$.running=!0,T(A,H)},!1)):T(A,H)),A}function T(O,A){ze(()=>{A===void 0&&m(()=>O),w(A!==void 0?"errored":d?"ready":"unresolved"),y(A);for(const H of h.keys())H.decrement();h.clear()},!1)}function S(){const O=Qt&&ue(Qt),A=p(),H=g();if(H!==void 0&&!i)throw H;return se&&!se.user&&O&&Fr(()=>{v(),i&&(O.resolved&&$&&l?$.promises.add(i):h.has(O)||(O.increment(),h.add(O)))}),A}function P(O=!0){if(O!==!1&&u)return;u=!1;const A=f?f():r;if(l=$&&$.running,A==null||A===!1){R(i,ge(p));return}$&&i&&$.promises.delete(i);let H;const F=a!==_o?a:ge(()=>{try{return o(A,{value:p(),refetching:O})}catch(ee){H=ee}});if(H!==void 0){R(i,void 0,kr(H),A);return}else if(!kd(F))return R(i,F,void 0,A),F;return i=F,"v"in F?(F.s===1?R(i,F.v,void 0,A):R(i,void 0,kr(F.v),A),F):(u=!0,queueMicrotask(()=>u=!1),ze(()=>{w(d?"refreshing":"pending"),b()},!1),F.then(ee=>R(F,ee,void 0,A),ee=>R(F,void 0,kr(ee),A)))}Object.defineProperties(S,{state:{get:()=>C()},error:{get:()=>g()},loading:{get(){const O=C();return O==="pending"||O==="refreshing"}},latest:{get(){if(!d)return S();const O=g();if(O&&!i)throw O;return p()}}});let L=Z;return f?Fr(()=>(L=Z,P(!1))):P(!1),[S,{refetch:O=>lc(L,()=>P(O)),mutate:m}]}function Rd(e){return ze(e,!1)}function ge(e){if(se===null)return e();const t=se;se=null;try{return e()}finally{se=t}}function it(e,t,n){const r=Array.isArray(e);let o,s=n&&n.defer;return i=>{let a;if(r){a=Array(e.length);for(let l=0;l<e.length;l++)a[l]=e[l]()}else a=e();if(s)return s=!1,i;const c=ge(()=>t(a,o,i));return o=a,c}}function Vt(e){G(()=>ge(e))}function q(e){return Z===null||(Z.cleanups===null?Z.cleanups=[e]:Z.cleanups.push(e)),e}function Td(e,t){Xn||(Xn=Symbol("error")),Z=lr(void 0,void 0,!0),Z.context={...Z.context,[Xn]:[t]},$&&$.running&&$.sources.add(Z);try{return e()}catch(n){ur(n)}finally{Z=Z.owner}}function Xo(){return se}function Zo(){return Z}function lc(e,t){const n=Z,r=se;Z=e,se=null;try{return ze(t,!0)}catch(o){ur(o)}finally{Z=n,se=r}}function uc(e){if($&&$.running)return e(),$.done;const t=se,n=Z;return Promise.resolve().then(()=>{se=t,Z=n;let r;return Qt&&(r=$||($={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),r.done||(r.done=new Promise(o=>r.resolve=o)),r.running=!0),ze(e,!1),se=Z=null,r?r.done:void 0})}const[Id,Ai]=z(!1);function Ed(){return[Id,uc]}function Md(e){xe.push.apply(xe,e),e.length=0}function me(e,t){const n=Symbol("context");return{id:n,Provider:Dd(n),defaultValue:e}}function ue(e){let t;return Z&&Z.context&&(t=Z.context[e.id])!==void 0?t:e.defaultValue}function dc(e){const t=W(e),n=W(()=>Qo(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Qt;function Ld(){return Qt||(Qt=me())}function fc(){const e=$&&$.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===Je)En(this);else{const t=Ie;Ie=null,ze(()=>Br(this),!1),Ie=t}if(se){const t=this.observers?this.observers.length:0;se.sources?(se.sources.push(this),se.sourceSlots.push(t)):(se.sources=[this],se.sourceSlots=[t]),this.observers?(this.observers.push(se),this.observerSlots.push(se.sources.length-1)):(this.observers=[se],this.observerSlots=[se.sources.length-1])}return e&&$.sources.has(this)?this.tValue:this.value}function hc(e,t,n){let r=$&&$.running&&$.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(r,t)){if($){const o=$.running;(o||!n&&$.sources.has(e))&&($.sources.add(e),e.tValue=t),o||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&ze(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],i=$&&$.running;i&&$.disposed.has(s)||((i?!s.tState:!s.state)&&(s.pure?Ie.push(s):xe.push(s),s.observers&&gc(s)),i?s.tState=Je:s.state=Je)}if(Ie.length>1e6)throw Ie=[],new Error},!1)}return t}function En(e){if(!e.fn)return;Bt(e);const t=ro;Di(e,$&&$.running&&$.sources.has(e)?e.tValue:e.value,t),$&&!$.running&&$.sources.has(e)&&queueMicrotask(()=>{ze(()=>{$&&($.running=!0),se=Z=e,Di(e,e.tValue,t),se=Z=null},!1)})}function Di(e,t,n){let r;const o=Z,s=se;se=Z=e;try{r=e.fn(t)}catch(i){return e.pure&&($&&$.running?(e.tState=Je,e.tOwned&&e.tOwned.forEach(Bt),e.tOwned=void 0):(e.state=Je,e.owned&&e.owned.forEach(Bt),e.owned=null)),e.updatedAt=n+1,ur(i)}finally{se=s,Z=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?hc(e,r,!0):$&&$.running&&e.pure?($.sources.add(e),e.tValue=r):e.value=r,e.updatedAt=n)}function lr(e,t,n,r=Je,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Z,context:Z?Z.context:null,pure:n};return $&&$.running&&(s.state=0,s.tState=r),Z===null||Z!==cc&&($&&$.running&&Z.pure?Z.tOwned?Z.tOwned.push(s):Z.tOwned=[s]:Z.owned?Z.owned.push(s):Z.owned=[s]),s}function Nr(e){const t=$&&$.running;if((t?e.tState:e.state)===0)return;if((t?e.tState:e.state)===er)return Br(e);if(e.suspense&&ge(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ro);){if(t&&$.disposed.has(e))return;(t?e.tState:e.state)&&n.push(e)}for(let r=n.length-1;r>=0;r--){if(e=n[r],t){let o=e,s=n[r+1];for(;(o=o.owner)&&o!==s;)if($.disposed.has(o))return}if((t?e.tState:e.state)===Je)En(e);else if((t?e.tState:e.state)===er){const o=Ie;Ie=null,ze(()=>Br(e,n[0]),!1),Ie=o}}}function ze(e,t){if(Ie)return e();let n=!1;t||(Ie=[]),xe?n=!0:xe=[],ro++;try{const r=e();return Od(n),r}catch(r){n||(xe=null),Ie=null,ur(r)}}function Od(e){if(Ie&&(pc(Ie),Ie=null),e)return;let t;if($){if(!$.promises.size&&!$.queue.size){const r=$.sources,o=$.disposed;xe.push.apply(xe,$.effects),t=$.resolve;for(const s of xe)"tState"in s&&(s.state=s.tState),delete s.tState;$=null,ze(()=>{for(const s of o)Bt(s);for(const s of r){if(s.value=s.tValue,s.owned)for(let i=0,a=s.owned.length;i<a;i++)Bt(s.owned[i]);s.tOwned&&(s.owned=s.tOwned),delete s.tValue,delete s.tOwned,s.tState=0}Ai(!1)},!1)}else if($.running){$.running=!1,$.effects.push.apply($.effects,xe),xe=null,Ai(!0);return}}const n=xe;xe=null,n.length&&ze(()=>ac(n),!1),t&&t()}function pc(e){for(let t=0;t<e.length;t++)Nr(e[t])}function Ad(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Nr(r)}if(Y.context){if(Y.count){Y.effects||(Y.effects=[]),Y.effects.push(...e.slice(0,n));return}Vn()}for(Y.effects&&(Y.done||!Y.count)&&(e=[...Y.effects,...e],n+=Y.effects.length,delete Y.effects),t=0;t<n;t++)Nr(e[t])}function Br(e,t){const n=$&&$.running;n?e.tState=0:e.state=0;for(let r=0;r<e.sources.length;r+=1){const o=e.sources[r];if(o.sources){const s=n?o.tState:o.state;s===Je?o!==t&&(!o.updatedAt||o.updatedAt<ro)&&Nr(o):s===er&&Br(o,t)}}}function gc(e){const t=$&&$.running;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(t?!r.tState:!r.state)&&(t?r.tState=er:r.state=er,r.pure?Ie.push(r):xe.push(r),r.observers&&gc(r))}}function Bt(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Bt(e.tOwned[t]);delete e.tOwned}if($&&$.running&&e.pure)mc(e,!0);else if(e.owned){for(t=e.owned.length-1;t>=0;t--)Bt(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}$&&$.running?e.tState=0:e.state=0}function mc(e,t){if(t||(e.tState=0,$.disposed.add(e)),e.owned)for(let n=0;n<e.owned.length;n++)mc(e.owned[n])}function kr(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function $i(e,t,n){try{for(const r of t)r(e)}catch(r){ur(r,n&&n.owner||null)}}function ur(e,t=Z){const n=Xn&&t&&t.context&&t.context[Xn],r=kr(e);if(!n)throw r;xe?xe.push({fn(){$i(r,n,t)},state:Je}):$i(r,n,t)}function Qo(e){if(typeof e=="function"&&!e.length)return Qo(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Qo(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Dd(e,t){return function(r){let o;return Fe(()=>o=ge(()=>(Z.context={...Z.context,[e]:r.value},dc(()=>r.children))),void 0),o}}const $d=Symbol("fallback");function Fi(e){for(let t=0;t<e.length;t++)e[t]()}function Fd(e,t,n={}){let r=[],o=[],s=[],i=0,a=t.length>1?[]:null;return q(()=>Fi(s)),()=>{let c=e()||[],l=c.length,u,d;return c[Jo],ge(()=>{let h,p,m,g,y,v,b,C,w;if(l===0)i!==0&&(Fi(s),s=[],r=[],o=[],i=0,a&&(a=[])),n.fallback&&(r=[$d],o[0]=xn(R=>(s[0]=R,n.fallback())),i=1);else if(i===0){for(o=new Array(l),d=0;d<l;d++)r[d]=c[d],o[d]=xn(f);i=l}else{for(m=new Array(l),g=new Array(l),a&&(y=new Array(l)),v=0,b=Math.min(i,l);v<b&&r[v]===c[v];v++);for(b=i-1,C=l-1;b>=v&&C>=v&&r[b]===c[C];b--,C--)m[C]=o[b],g[C]=s[b],a&&(y[C]=a[b]);for(h=new Map,p=new Array(C+1),d=C;d>=v;d--)w=c[d],u=h.get(w),p[d]=u===void 0?-1:u,h.set(w,d);for(u=v;u<=b;u++)w=r[u],d=h.get(w),d!==void 0&&d!==-1?(m[d]=o[u],g[d]=s[u],a&&(y[d]=a[u]),d=p[d],h.set(w,d)):s[u]();for(d=v;d<l;d++)d in m?(o[d]=m[d],s[d]=g[d],a&&(a[d]=y[d],a[d](d))):o[d]=xn(f);o=o.slice(0,i=l),r=c.slice(0)}return o});function f(h){if(s[d]=h,a){const[p,m]=z(d);return a[d]=m,t(c[d],p)}return t(c[d])}}}function x(e,t){return ge(()=>e(t||{}))}function mr(){return!0}const es={get(e,t,n){return t===tt?n:e.get(t)},has(e,t){return t===tt?!0:e.has(t)},set:mr,deleteProperty:mr,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:mr,deleteProperty:mr}},ownKeys(e){return e.keys()}};function Po(e){return(e=typeof e=="function"?e():e)?e:{}}function Nd(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function N(...e){let t=!1;for(let i=0;i<e.length;i++){const a=e[i];t=t||!!a&&tt in a,e[i]=typeof a=="function"?(t=!0,W(a)):a}if(ic&&t)return new Proxy({get(i){for(let a=e.length-1;a>=0;a--){const c=Po(e[a])[i];if(c!==void 0)return c}},has(i){for(let a=e.length-1;a>=0;a--)if(i in Po(e[a]))return!0;return!1},keys(){const i=[];for(let a=0;a<e.length;a++)i.push(...Object.keys(Po(e[a])));return[...new Set(i)]}},es);const n={},r=Object.create(null);for(let i=e.length-1;i>=0;i--){const a=e[i];if(!a)continue;const c=Object.getOwnPropertyNames(a);for(let l=c.length-1;l>=0;l--){const u=c[l];if(u==="__proto__"||u==="constructor")continue;const d=Object.getOwnPropertyDescriptor(a,u);if(!r[u])r[u]=d.get?{enumerable:!0,configurable:!0,get:Nd.bind(n[u]=[d.get.bind(a)])}:d.value!==void 0?d:void 0;else{const f=n[u];f&&(d.get?f.push(d.get.bind(a)):d.value!==void 0&&f.push(()=>d.value))}}}const o={},s=Object.keys(r);for(let i=s.length-1;i>=0;i--){const a=s[i],c=r[a];c&&c.get?Object.defineProperty(o,a,c):o[a]=c?c.value:void 0}return o}function J(e,...t){const n=t.length;if(ic&&tt in e){const o=n>1?t.flat():t[0],s=t.map(i=>new Proxy({get(a){return i.includes(a)?e[a]:void 0},has(a){return i.includes(a)&&a in e},keys(){return i.filter(a=>a in e)}},es));return s.push(new Proxy({get(i){return o.includes(i)?void 0:e[i]},has(i){return o.includes(i)?!1:i in e},keys(){return Object.keys(e).filter(i=>!o.includes(i))}},es)),s}const r=[];for(let o=0;o<=n;o++)r[o]={};for(const o of Object.getOwnPropertyNames(e)){let s=n;for(let c=0;c<t.length;c++)if(t[c].includes(o)){s=c;break}const i=Object.getOwnPropertyDescriptor(e,o);!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable?r[s][o]=i.value:Object.defineProperty(r[s],o,i)}return r}let Bd=0;function Ct(){return Y.context?Y.getNextContextId():`cl-${Bd++}`}const yc=e=>`Stale read from <${e}>.`;function vc(e){const t="fallback"in e&&{fallback:()=>e.fallback};return W(Fd(()=>e.each,e.children,t||void 0))}function be(e){const t=e.keyed,n=W(()=>e.when,void 0,void 0),r=t?n:W(n,void 0,{equals:(o,s)=>!o==!s});return W(()=>{const o=r();if(o){const s=e.children;return typeof s=="function"&&s.length>0?ge(()=>s(t?o:()=>{if(!ge(r))throw yc("Show");return n()})):s}return e.fallback},void 0,void 0)}function bc(e){const t=dc(()=>e.children),n=W(()=>{const r=t(),o=Array.isArray(r)?r:[r];let s=()=>{};for(let i=0;i<o.length;i++){const a=i,c=o[i],l=s,u=W(()=>l()?void 0:c.when,void 0,void 0),d=c.keyed?u:W(u,void 0,{equals:(f,h)=>!f==!h});s=()=>l()||(d()?[a,u,c]:void 0)}return s});return W(()=>{const r=n()();if(!r)return e.fallback;const[o,s,i]=r,a=i.children;return typeof a=="function"&&a.length>0?ge(()=>a(i.keyed?s():()=>{if(ge(n)()?.[0]!==o)throw yc("Match");return s()})):a},void 0,void 0)}function mt(e){return e}let yr;function Kd(e){let t;Y.context&&Y.load&&(t=Y.load(Y.getContextId()));const[n,r]=z(t,void 0);return yr||(yr=new Set),yr.add(r),q(()=>yr.delete(r)),W(()=>{let o;if(o=n()){const s=e.fallback;return typeof s=="function"&&s.length?ge(()=>s(o,()=>r())):s}return Td(()=>e.children,r)},void 0,void 0)}const Ud=me();function Os(e){let t=0,n,r,o,s,i;const[a,c]=z(!1),l=Ld(),u={increment:()=>{++t===1&&c(!0)},decrement:()=>{--t===0&&c(!1)},inFallback:a,effects:[],resolved:!1},d=Zo();if(Y.context&&Y.load){const p=Y.getContextId();let m=Y.load(p);if(m&&(typeof m!="object"||m.s!==1?o=m:Y.gather(p)),o&&o!=="$$f"){const[g,y]=z(void 0,{equals:!1});s=g,o.then(()=>{if(Y.done)return y();Y.gather(p),Vn(r),y(),Vn()},v=>{i=v,y()})}}const f=ue(Ud);f&&(n=f.register(u.inFallback));let h;return q(()=>h&&h()),x(l.Provider,{value:u,get children(){return W(()=>{if(i)throw i;if(r=Y.context,s)return s(),s=void 0;r&&o==="$$f"&&Vn();const p=W(()=>e.children);return W(m=>{const g=u.inFallback(),{showContent:y=!0,showFallback:v=!0}=n?n():{};if((!g||o&&o!=="$$f")&&y)return u.resolved=!0,h&&h(),h=r=o=void 0,Md(u.effects),p();if(v)return h?m:xn(b=>(h=b,r&&(Vn({id:r.id+"F",count:0}),r=void 0),e.fallback),d)})})}})}const jd=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],zd=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...jd]),Vd=new Set(["innerHTML","textContent","innerText","children"]),Gd=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Wd=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Hd(e,t){const n=Wd[e];return typeof n=="object"?n[t]?n.$:void 0:n}const qd=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Yd=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Jd={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},le=e=>W(()=>e());function Xd(e,t,n){let r=n.length,o=t.length,s=r,i=0,a=0,c=t[o-1].nextSibling,l=null;for(;i<o||a<s;){if(t[i]===n[a]){i++,a++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const u=s<r?a?n[a-1].nextSibling:n[s-a]:c;for(;a<s;)e.insertBefore(n[a++],u)}else if(s===a)for(;i<o;)(!l||!l.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[a]===t[o-1]){const u=t[--o].nextSibling;e.insertBefore(n[a++],t[i++].nextSibling),e.insertBefore(n[--s],u),t[o]=n[s]}else{if(!l){l=new Map;let d=a;for(;d<s;)l.set(n[d],d++)}const u=l.get(t[i]);if(u!=null)if(a<u&&u<s){let d=i,f=1,h;for(;++d<o&&d<s&&!((h=l.get(t[d]))==null||h!==u+f);)f++;if(f>u-a){const p=t[i];for(;a<u;)e.insertBefore(n[a++],p)}else e.replaceChild(n[a++],t[i++])}else i++;else t[i++].remove()}}}const Ni="_$DX_DELEGATE";function Zd(e,t,n,r={}){let o;return xn(s=>{o=s,t===document?e():re(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function te(e,t,n,r){let o;const s=()=>{const a=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return a.innerHTML=e,n?a.content.firstChild.firstChild:r?a.firstChild:a.content.firstChild},i=t?()=>ge(()=>document.importNode(o||(o=s()),!0)):()=>(o||(o=s())).cloneNode(!0);return i.cloneNode=i,i}function oo(e,t=window.document){const n=t[Ni]||(t[Ni]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,uf))}}function _n(e,t,n){on(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function Qd(e,t,n,r){on(e)||(r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r))}function ef(e,t,n){on(e)||(n?e.setAttribute(t,""):e.removeAttribute(t))}function tf(e,t){on(e)||(t==null?e.removeAttribute("class"):e.className=t)}function nf(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=s=>o.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}function rf(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let s,i;for(s=0,i=o.length;s<i;s++){const a=o[s];!a||a==="undefined"||t[a]||(Bi(e,a,!1),delete n[a])}for(s=0,i=r.length;s<i;s++){const a=r[s],c=!!t[a];!a||a==="undefined"||n[a]===c||!c||(Bi(e,a,!0),n[a]=c)}return n}function of(e,t,n){if(!t)return n?_n(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function so(e,t={},n,r){const o={};return r||Fe(()=>o.children=tr(e,t.children,o.children)),Fe(()=>typeof t.ref=="function"&&sf(t.ref,e)),Fe(()=>af(e,t,n,!0,o,!0)),o}function sf(e,t,n){return ge(()=>e(t,n))}function re(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return tr(e,t,r,n);Fe(o=>tr(e,t(),o,n),r)}function af(e,t,n,r,o={},s=!1){t||(t={});for(const i in o)if(!(i in t)){if(i==="children")continue;o[i]=Ki(e,i,null,o[i],n,s,t)}for(const i in t){if(i==="children")continue;const a=t[i];o[i]=Ki(e,i,a,o[i],n,s,t)}}function cf(e){let t,n;return!on()||!(t=Y.registry.get(n=df()))?e():(Y.completed&&Y.completed.add(t),Y.registry.delete(n),t)}function on(e){return!!Y.context&&!Y.done&&(!e||e.isConnected)}function lf(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Bi(e,t,n){const r=t.trim().split(/\s+/);for(let o=0,s=r.length;o<s;o++)e.classList.toggle(r[o],n)}function Ki(e,t,n,r,o,s,i){let a,c,l,u,d;if(t==="style")return of(e,n,r);if(t==="classList")return rf(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const f=t.slice(3);r&&e.removeEventListener(f,r,typeof r!="function"&&r),n&&e.addEventListener(f,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const f=t.slice(10);r&&e.removeEventListener(f,r,!0),n&&e.addEventListener(f,n,!0)}else if(t.slice(0,2)==="on"){const f=t.slice(2).toLowerCase(),h=qd.has(f);if(!h&&r){const p=Array.isArray(r)?r[0]:r;e.removeEventListener(f,p)}(h||n)&&(nf(e,f,n,h),h&&oo([f]))}else if(t.slice(0,5)==="attr:")_n(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")ef(e,t.slice(5),n);else if((d=t.slice(0,5)==="prop:")||(l=Vd.has(t))||!o&&((u=Hd(t,e.tagName))||(c=zd.has(t)))||(a=e.nodeName.includes("-")||"is"in i)){if(d)t=t.slice(5),c=!0;else if(on(e))return n;t==="class"||t==="className"?tf(e,n):a&&!c&&!l?e[lf(t)]=n:e[u||t]=n}else{const f=o&&t.indexOf(":")>-1&&Jd[t.split(":")[0]];f?Qd(e,f,t,n):_n(e,Gd[t]||t,n)}return n}function uf(e){if(Y.registry&&Y.events&&Y.events.find(([c,l])=>l===e))return;let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,s=c=>Object.defineProperty(e,"target",{configurable:!0,value:c}),i=()=>{const c=t[n];if(c&&!t.disabled){const l=t[`${n}Data`];if(l!==void 0?c.call(t,l,e):c.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},a=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),Y.registry&&!Y.done&&(Y.done=_$HY.done=!0),e.composedPath){const c=e.composedPath();s(c[0]);for(let l=0;l<c.length-2&&(t=c[l],!!i());l++){if(t._$host){t=t._$host,a();break}if(t.parentNode===o)break}}else a();s(r)}function tr(e,t,n,r,o){const s=on(e);if(s){!n&&(n=[...e.childNodes]);let c=[];for(let l=0;l<n.length;l++){const u=n[l];u.nodeType===8&&u.data.slice(0,2)==="!$"?u.remove():c.push(u)}n=c}for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(s||i==="number"&&(t=t.toString(),t===n))return n;if(a){let c=n[0];c&&c.nodeType===3?c.data!==t&&(c.data=t):c=document.createTextNode(t),n=fn(e,n,r,c)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean"){if(s)return n;n=fn(e,n,r)}else{if(i==="function")return Fe(()=>{let c=t();for(;typeof c=="function";)c=c();n=tr(e,c,n,r)}),()=>n;if(Array.isArray(t)){const c=[],l=n&&Array.isArray(n);if(ts(c,t,n,o))return Fe(()=>n=tr(e,c,n,r,!0)),()=>n;if(s){if(!c.length)return n;if(r===void 0)return n=[...e.childNodes];let u=c[0];if(u.parentNode!==e)return n;const d=[u];for(;(u=u.nextSibling)!==r;)d.push(u);return n=d}if(c.length===0){if(n=fn(e,n,r),a)return n}else l?n.length===0?Ui(e,c,r):Xd(e,n,c):(n&&fn(e),Ui(e,c));n=c}else if(t.nodeType){if(s&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=fn(e,n,r,t);fn(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function ts(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let a=t[s],c=n&&n[e.length],l;if(!(a==null||a===!0||a===!1))if((l=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))o=ts(e,a,c)||o;else if(l==="function")if(r){for(;typeof a=="function";)a=a();o=ts(e,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||o}else e.push(a),o=!0;else{const u=String(a);c&&c.nodeType===3&&c.data===u?e.push(c):e.push(document.createTextNode(u))}}return o}function Ui(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function fn(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const a=t[i];if(o!==a){const c=a.parentNode===e;!s&&!i?c?e.replaceChild(o,a):e.insertBefore(o,n):c&&a.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}function df(){return Y.getNextContextId()}const ff="http://www.w3.org/2000/svg";function xc(e,t=!1,n=void 0){return t?document.createElementNS(ff,e):document.createElement(e,{is:n})}function Sc(e){const{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,o=Zo();let s,i=!!Y.context;return G(()=>{i&&(Zo().user=i=!1),s||(s=lc(o,()=>W(()=>e.children)));const a=r();if(a instanceof HTMLHeadElement){const[c,l]=z(!1),u=()=>l(!0);xn(d=>re(a,()=>c()?d():s(),null)),q(u)}else{const c=xc(e.isSVG?"g":"div",e.isSVG),l=t&&c.attachShadow?c.attachShadow({mode:"open"}):c;Object.defineProperty(c,"_$host",{get(){return n.parentNode},configurable:!0}),re(l,s),a.appendChild(c),e.ref&&e.ref(c),q(()=>a.removeChild(c))}},void 0,{render:!i}),n}function hf(e,t){const n=W(e);return W(()=>{const r=n();switch(typeof r){case"function":return ge(()=>r(t));case"string":const o=Yd.has(r),s=Y.context?cf():xc(r,o,ge(()=>t.is));return so(s,t,o),s}})}function $e(e){const[,t]=J(e,["component"]);return hf(()=>e.component,t)}const ns=new WeakMap,pf=new WeakMap,Kr={current:[]};let ko=!1,Zn=0;const Wn=new Set,vr=new Map;function Cc(e){for(const t of e){if(Kr.current.includes(t))continue;Kr.current.push(t),t.recompute();const n=pf.get(t);if(n)for(const r of n){const o=ns.get(r);o?.length&&Cc(o)}}}function gf(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function mf(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function wc(e){if(Zn>0&&!vr.has(e)&&vr.set(e,e.prevState),Wn.add(e),!(Zn>0)&&!ko)try{for(ko=!0;Wn.size>0;){const t=Array.from(Wn);Wn.clear();for(const n of t){const r=vr.get(n)??n.prevState;n.prevState=r,gf(n)}for(const n of t){const r=ns.get(n);r&&(Kr.current.push(n),Cc(r))}for(const n of t){const r=ns.get(n);if(r)for(const o of r)mf(o)}}}finally{ko=!1,Kr.current=[],vr.clear()}}function Qn(e){Zn++;try{e()}finally{if(Zn--,Zn===0){const t=Wn.values().next().value;t&&wc(t)}}}function yf(e){return typeof e=="function"}class vf{constructor(t,n){this.listeners=new Set,this.subscribe=r=>{var o,s;this.listeners.add(r);const i=(s=(o=this.options)==null?void 0:o.onSubscribe)==null?void 0:s.call(o,r,this);return()=>{this.listeners.delete(r),i?.()}},this.prevState=t,this.state=t,this.options=n}setState(t){var n,r,o;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(t):yf(t)?this.state=t(this.prevState):this.state=t,(o=(r=this.options)==null?void 0:r.onUpdate)==null||o.call(r),wc(this)}}const Dt="__TSR_index",ji="popstate",zi="beforeunload";function bf(e){let t=e.getLocation();const n=new Set,r=i=>{t=e.getLocation(),n.forEach(a=>a({location:t,action:i}))},o=i=>{e.notifyOnIndexChange??!0?r(i):t=e.getLocation()},s=async({task:i,navigateOpts:a,...c})=>{if(a?.ignoreBlocker??!1){i();return}const u=e.getBlockers?.()??[],d=c.type==="PUSH"||c.type==="REPLACE";if(typeof document<"u"&&u.length&&d)for(const f of u){const h=Ur(c.path,c.state);if(await f.blockerFn({currentLocation:t,nextLocation:h,action:c.type})){e.onBlocked?.();return}}i()};return{get location(){return t},get length(){return e.getLength()},subscribers:n,subscribe:i=>(n.add(i),()=>{n.delete(i)}),push:(i,a,c)=>{const l=t.state[Dt];a=Vi(l+1,a),s({task:()=>{e.pushState(i,a),r({type:"PUSH"})},navigateOpts:c,type:"PUSH",path:i,state:a})},replace:(i,a,c)=>{const l=t.state[Dt];a=Vi(l,a),s({task:()=>{e.replaceState(i,a),r({type:"REPLACE"})},navigateOpts:c,type:"REPLACE",path:i,state:a})},go:(i,a)=>{s({task:()=>{e.go(i),o({type:"GO",index:i})},navigateOpts:a,type:"GO"})},back:i=>{s({task:()=>{e.back(i?.ignoreBlocker??!1),o({type:"BACK"})},navigateOpts:i,type:"BACK"})},forward:i=>{s({task:()=>{e.forward(i?.ignoreBlocker??!1),o({type:"FORWARD"})},navigateOpts:i,type:"FORWARD"})},canGoBack:()=>t.state[Dt]!==0,createHref:i=>e.createHref(i),block:i=>{if(!e.setBlockers)return()=>{};const a=e.getBlockers?.()??[];return e.setBlockers([...a,i]),()=>{const c=e.getBlockers?.()??[];e.setBlockers?.(c.filter(l=>l!==i))}},flush:()=>e.flush?.(),destroy:()=>e.destroy?.(),notify:r}}function Vi(e,t){t||(t={});const n=As();return{...t,key:n,__TSR_key:n,[Dt]:e}}function xf(e){const t=typeof document<"u"?window:void 0,n=t.history.pushState,r=t.history.replaceState;let o=[];const s=()=>o,i=S=>o=S,a=(S=>S),c=(()=>Ur(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state));if(!t.history.state?.__TSR_key&&!t.history.state?.key){const S=As();t.history.replaceState({[Dt]:0,key:S,__TSR_key:S},"")}let l=c(),u,d=!1,f=!1,h=!1,p=!1;const m=()=>l;let g,y;const v=()=>{g&&(T._ignoreSubscribers=!0,(g.isPush?t.history.pushState:t.history.replaceState)(g.state,"",g.href),T._ignoreSubscribers=!1,g=void 0,y=void 0,u=void 0)},b=(S,P,L)=>{const O=a(P);y||(u=l),l=Ur(P,L),g={href:O,state:L,isPush:g?.isPush||S==="push"},y||(y=Promise.resolve().then(()=>v()))},C=S=>{l=c(),T.notify({type:S})},w=async()=>{if(f){f=!1;return}const S=c(),P=S.state[Dt]-l.state[Dt],L=P===1,O=P===-1,A=!L&&!O||d;d=!1;const H=A?"GO":O?"BACK":"FORWARD",F=A?{type:"GO",index:P}:{type:O?"BACK":"FORWARD"};if(h)h=!1;else{const ee=s();if(typeof document<"u"&&ee.length){for(const Q of ee)if(await Q.blockerFn({currentLocation:l,nextLocation:S,action:H})){f=!0,t.history.go(1),T.notify(F);return}}}l=c(),T.notify(F)},R=S=>{if(p){p=!1;return}let P=!1;const L=s();if(typeof document<"u"&&L.length)for(const O of L){const A=O.enableBeforeUnload??!0;if(A===!0){P=!0;break}if(typeof A=="function"&&A()===!0){P=!0;break}}if(P)return S.preventDefault(),S.returnValue=""},T=bf({getLocation:m,getLength:()=>t.history.length,pushState:(S,P)=>b("push",S,P),replaceState:(S,P)=>b("replace",S,P),back:S=>(S&&(h=!0),p=!0,t.history.back()),forward:S=>{S&&(h=!0),p=!0,t.history.forward()},go:S=>{d=!0,t.history.go(S)},createHref:S=>a(S),flush:v,destroy:()=>{t.history.pushState=n,t.history.replaceState=r,t.removeEventListener(zi,R,{capture:!0}),t.removeEventListener(ji,w)},onBlocked:()=>{u&&l!==u&&(l=u)},getBlockers:s,setBlockers:i,notifyOnIndexChange:!1});return t.addEventListener(zi,R,{capture:!0}),t.addEventListener(ji,w),t.history.pushState=function(...S){const P=n.apply(t.history,S);return T._ignoreSubscribers||C("PUSH"),P},t.history.replaceState=function(...S){const P=r.apply(t.history,S);return T._ignoreSubscribers||C("REPLACE"),P},T}function Sf(e){let t=e.replace(/[\x00-\x1f\x7f]/g,"");return t.startsWith("//")&&(t="/"+t.replace(/^\/+/,"")),t}function Ur(e,t){const n=Sf(e),r=n.indexOf("#"),o=n.indexOf("?"),s=As();return{href:n,pathname:n.substring(0,r>0?o>0?Math.min(r,o):r:o>0?o:n.length),hash:r>-1?n.substring(r):"",search:o>-1?n.slice(o,r===-1?void 0:r):"",state:t||{[Dt]:0,key:s,__TSR_key:s}}}function As(){return(Math.random()+1).toString(36).substring(7)}function jr(e){return e[e.length-1]}function Cf(e){return typeof e=="function"}function Mt(e,t){return Cf(e)?e(t):e}const wf=Object.prototype.hasOwnProperty;function et(e,t){if(e===t)return e;const n=t,r=Hi(e)&&Hi(n);if(!r&&!(zr(e)&&zr(n)))return n;const o=r?e:Gi(e);if(!o)return n;const s=r?n:Gi(n);if(!s)return n;const i=o.length,a=s.length,c=r?new Array(a):{};let l=0;for(let u=0;u<a;u++){const d=r?u:s[u],f=e[d],h=n[d];if(f===h){c[d]=f,(r?u<i:wf.call(e,d))&&l++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){c[d]=h;continue}const p=et(f,h);c[d]=p,p===f&&l++}return i===a&&l===i?e:c}function Gi(e){const t=[],n=Object.getOwnPropertyNames(e);for(const o of n){if(!Object.prototype.propertyIsEnumerable.call(e,o))return!1;t.push(o)}const r=Object.getOwnPropertySymbols(e);for(const o of r){if(!Object.prototype.propertyIsEnumerable.call(e,o))return!1;t.push(o)}return t}function zr(e){if(!Wi(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!Wi(n)||!n.hasOwnProperty("isPrototypeOf"))}function Wi(e){return Object.prototype.toString.call(e)==="[object Object]"}function Hi(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Jt(e,t,n){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0,o=e.length;r<o;r++)if(!Jt(e[r],t[r],n))return!1;return!0}if(zr(e)&&zr(t)){const r=n?.ignoreUndefined??!0;if(n?.partial){for(const i in t)if((!r||t[i]!==void 0)&&!Jt(e[i],t[i],n))return!1;return!0}let o=0;if(!r)o=Object.keys(e).length;else for(const i in e)e[i]!==void 0&&o++;let s=0;for(const i in t)if((!r||t[i]!==void 0)&&(s++,s>o||!Jt(e[i],t[i],n)))return!1;return o===s}return!1}function Pn(e){let t,n;const r=new Promise((o,s)=>{t=o,n=s});return r.status="pending",r.resolve=o=>{r.status="resolved",r.value=o,t(o),e?.(o)},r.reject=o=>{r.status="rejected",n(o)},r}function _f(e){return typeof e?.message!="string"?!1:e.message.startsWith("Failed to fetch dynamically imported module")||e.message.startsWith("error loading dynamically imported module")||e.message.startsWith("Importing a module script failed")}function $t(e){return!!(e&&typeof e=="object"&&typeof e.then=="function")}function Pf(e){return e.replace(/[\x00-\x1f\x7f]/g,"")}function qi(e){let t;try{t=decodeURI(e)}catch{t=e.replaceAll(/%[0-9A-F]{2}/gi,n=>{try{return decodeURI(n)}catch{return n}})}return Pf(t)}const _c=["http:","https:","mailto:","tel:"];function Vr(e){if(!e)return!1;try{const t=new URL(e);return!_c.includes(t.protocol)}catch{return!1}}const kf={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},Rf=/[&><\u2028\u2029]/g;function Tf(e){return e.replace(Rf,t=>kf[t])}function Yi(e,t){if(!e)return e;const n=/%25|%5C/gi;let r=0,o="",s;for(;(s=n.exec(e))!==null;)o+=qi(e.slice(r,s.index))+s[0],r=n.lastIndex;return o=o+qi(r?e.slice(r):e),o.startsWith("//")&&(o="/"+o.replace(/^\/+/,"")),o}var If="Invariant failed";function en(e,t){if(!e)throw new Error(If)}function Gr(e){const t=new Map;let n,r;const o=s=>{s.next&&(s.prev?(s.prev.next=s.next,s.next.prev=s.prev,s.next=void 0,r&&(r.next=s,s.prev=r)):(s.next.prev=void 0,n=s.next,s.next=void 0,r&&(s.prev=r,r.next=s)),r=s)};return{get(s){const i=t.get(s);if(i)return o(i),i.value},set(s,i){if(t.size>=e&&n){const c=n;t.delete(c.key),c.next&&(n=c.next,c.next.prev=void 0),c===r&&(r=void 0)}const a=t.get(s);if(a)a.value=i,o(a);else{const c={key:s,value:i,prev:r};r&&(r.next=c),r=c,n||(n=c),t.set(s,c)}},clear(){t.clear(),n=void 0,r=void 0}}}const kn=0,tn=1,nn=2,nr=3,bn=4,Ef=5,Mf=/^([^{]*)\{\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,Lf=/^([^{]*)\{-\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,Of=/^([^{]*)\{\$\}([^}]*)$/;function Ds(e,t,n=new Uint16Array(6)){const r=e.indexOf("/",t),o=r===-1?e.length:r,s=e.substring(t,o);if(!s||!s.includes("$"))return n[0]=kn,n[1]=t,n[2]=t,n[3]=o,n[4]=o,n[5]=o,n;if(s==="$"){const l=e.length;return n[0]=nn,n[1]=t,n[2]=t,n[3]=l,n[4]=l,n[5]=l,n}if(s.charCodeAt(0)===36)return n[0]=tn,n[1]=t,n[2]=t+1,n[3]=o,n[4]=o,n[5]=o,n;const i=s.match(Of);if(i){const u=i[1].length;return n[0]=nn,n[1]=t+u,n[2]=t+u+1,n[3]=t+u+2,n[4]=t+u+3,n[5]=e.length,n}const a=s.match(Lf);if(a){const l=a[1],u=a[2],d=a[3],f=l.length;return n[0]=nr,n[1]=t+f,n[2]=t+f+3,n[3]=t+f+3+u.length,n[4]=o-d.length,n[5]=o,n}const c=s.match(Mf);if(c){const l=c[1],u=c[2],d=c[3],f=l.length;return n[0]=tn,n[1]=t+f,n[2]=t+f+2,n[3]=t+f+2+u.length,n[4]=o-d.length,n[5]=o,n}return n[0]=kn,n[1]=t,n[2]=t,n[3]=o,n[4]=o,n[5]=o,n}function io(e,t,n,r,o,s,i){i?.(n);let a=r;{const c=n.fullPath??n.from,l=c.length,u=n.options?.caseSensitive??e,d=!!(n.options?.params?.parse&&n.options?.skipRouteOnParseError?.params);for(;a<l;){const h=Ds(c,a,t);let p;const m=a,g=h[5];switch(a=g+1,s++,h[0]){case kn:{const v=c.substring(h[2],h[3]);if(u){const b=o.static?.get(v);if(b)p=b;else{o.static??=new Map;const C=qt(n.fullPath??n.from);C.parent=o,C.depth=s,p=C,o.static.set(v,C)}}else{const b=v.toLowerCase(),C=o.staticInsensitive?.get(b);if(C)p=C;else{o.staticInsensitive??=new Map;const w=qt(n.fullPath??n.from);w.parent=o,w.depth=s,p=w,o.staticInsensitive.set(b,w)}}break}case tn:{const v=c.substring(m,h[1]),b=c.substring(h[4],g),C=u&&!!(v||b),w=v?C?v:v.toLowerCase():void 0,R=b?C?b:b.toLowerCase():void 0,T=!d&&o.dynamic?.find(S=>!S.skipOnParamError&&S.caseSensitive===C&&S.prefix===w&&S.suffix===R);if(T)p=T;else{const S=To(tn,n.fullPath??n.from,C,w,R);p=S,S.depth=s,S.parent=o,o.dynamic??=[],o.dynamic.push(S)}break}case nr:{const v=c.substring(m,h[1]),b=c.substring(h[4],g),C=u&&!!(v||b),w=v?C?v:v.toLowerCase():void 0,R=b?C?b:b.toLowerCase():void 0,T=!d&&o.optional?.find(S=>!S.skipOnParamError&&S.caseSensitive===C&&S.prefix===w&&S.suffix===R);if(T)p=T;else{const S=To(nr,n.fullPath??n.from,C,w,R);p=S,S.parent=o,S.depth=s,o.optional??=[],o.optional.push(S)}break}case nn:{const v=c.substring(m,h[1]),b=c.substring(h[4],g),C=u&&!!(v||b),w=v?C?v:v.toLowerCase():void 0,R=b?C?b:b.toLowerCase():void 0,T=To(nn,n.fullPath??n.from,C,w,R);p=T,T.parent=o,T.depth=s,o.wildcard??=[],o.wildcard.push(T)}}o=p}if(d&&n.children&&!n.isRoot&&n.id&&n.id.charCodeAt(n.id.lastIndexOf("/")+1)===95){const h=qt(n.fullPath??n.from);h.kind=Ef,h.parent=o,s++,h.depth=s,o.pathless??=[],o.pathless.push(h),o=h}const f=(n.path||!n.children)&&!n.isRoot;if(f&&c.endsWith("/")){const h=qt(n.fullPath??n.from);h.kind=bn,h.parent=o,s++,h.depth=s,o.index=h,o=h}o.parse=n.options?.params?.parse??null,o.skipOnParamError=d,o.parsingPriority=n.options?.skipRouteOnParseError?.priority??0,f&&!o.route&&(o.route=n,o.fullPath=n.fullPath??n.from)}if(n.children)for(const c of n.children)io(e,t,c,a,o,s,i)}function Ro(e,t){if(e.skipOnParamError&&!t.skipOnParamError)return-1;if(!e.skipOnParamError&&t.skipOnParamError)return 1;if(e.skipOnParamError&&t.skipOnParamError&&(e.parsingPriority||t.parsingPriority))return t.parsingPriority-e.parsingPriority;if(e.prefix&&t.prefix&&e.prefix!==t.prefix){if(e.prefix.startsWith(t.prefix))return-1;if(t.prefix.startsWith(e.prefix))return 1}if(e.suffix&&t.suffix&&e.suffix!==t.suffix){if(e.suffix.endsWith(t.suffix))return-1;if(t.suffix.endsWith(e.suffix))return 1}return e.prefix&&!t.prefix?-1:!e.prefix&&t.prefix?1:e.suffix&&!t.suffix?-1:!e.suffix&&t.suffix?1:e.caseSensitive&&!t.caseSensitive?-1:!e.caseSensitive&&t.caseSensitive?1:0}function Et(e){if(e.pathless)for(const t of e.pathless)Et(t);if(e.static)for(const t of e.static.values())Et(t);if(e.staticInsensitive)for(const t of e.staticInsensitive.values())Et(t);if(e.dynamic?.length){e.dynamic.sort(Ro);for(const t of e.dynamic)Et(t)}if(e.optional?.length){e.optional.sort(Ro);for(const t of e.optional)Et(t)}if(e.wildcard?.length){e.wildcard.sort(Ro);for(const t of e.wildcard)Et(t)}}function qt(e){return{kind:kn,depth:0,pathless:null,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null,parse:null,skipOnParamError:!1,parsingPriority:0}}function To(e,t,n,r,o){return{kind:e,depth:0,pathless:null,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null,parse:null,skipOnParamError:!1,parsingPriority:0,caseSensitive:n,prefix:r,suffix:o}}function Af(e,t){const n=qt("/"),r=new Uint16Array(6);for(const o of e)io(!1,r,o,1,n,0);Et(n),t.masksTree=n,t.flatCache=Gr(1e3)}function Df(e,t){e||="/";const n=t.flatCache.get(e);if(n)return n;const r=$s(e,t.masksTree);return t.flatCache.set(e,r),r}function $f(e,t,n,r,o){e||="/",r||="/";const s=t?`case\0${e}`:e;let i=o.singleCache.get(s);if(!i){i=qt("/");const a=new Uint16Array(6);io(t,a,{from:e},1,i,0),o.singleCache.set(s,i)}return $s(r,i,n)}function Ff(e,t,n=!1){const r=n?e:`nofuzz\0${e}`,o=t.matchCache.get(r);if(o!==void 0)return o;e||="/";const s=$s(e,t.segmentTree,n);return s&&(s.branch=Kf(s.route)),t.matchCache.set(r,s),s}function Nf(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function Bf(e,t=!1,n){const r=qt(e.fullPath),o=new Uint16Array(6),s={},i={};let a=0;return io(t,o,e,1,r,0,l=>{if(n?.(l,a),en(!(l.id in s),`Duplicate routes found with id: ${String(l.id)}`),s[l.id]=l,a!==0&&l.path){const u=Nf(l.fullPath);(!i[u]||l.fullPath.endsWith("/"))&&(i[u]=l)}a++}),Et(r),{processedTree:{segmentTree:r,singleCache:Gr(1e3),matchCache:Gr(1e3),flatCache:null,masksTree:null},routesById:s,routesByPath:i}}function $s(e,t,n=!1){const r=e.split("/"),o=jf(e,r,t,n);if(!o)return null;const[s]=Pc(e,r,o);return{route:o.node.route,rawParams:s,parsedParams:o.parsedParams}}function Pc(e,t,n){const r=Uf(n.node);let o=null;const s={};let i=n.extract?.part??0,a=n.extract?.node??0,c=n.extract?.path??0;for(;a<r.length;i++,a++,c++){const l=r[a],u=t[i],d=c;if(u&&(c+=u.length),l.kind===tn){o??=n.node.fullPath.split("/");const f=o[a],h=l.prefix?.length??0;if(f.charCodeAt(h)===123){const m=l.suffix?.length??0,g=f.substring(h+2,f.length-m-1),y=u.substring(h,u.length-m);s[g]=decodeURIComponent(y)}else{const m=f.substring(1);s[m]=decodeURIComponent(u)}}else if(l.kind===nr){if(n.skipped&1<<a){i--;continue}o??=n.node.fullPath.split("/");const f=o[a],h=l.prefix?.length??0,p=l.suffix?.length??0,m=f.substring(h+3,f.length-p-1),g=l.suffix||l.prefix?u.substring(h,u.length-p):u;g&&(s[m]=decodeURIComponent(g))}else if(l.kind===nn){const f=l,h=e.substring(d+(f.prefix?.length??0),e.length-(f.suffix?.length??0)),p=decodeURIComponent(h);s["*"]=p,s._splat=p;break}}return n.rawParams&&Object.assign(s,n.rawParams),[s,{part:i,node:a,path:c}]}function Kf(e){const t=[e];for(;e.parentRoute;)e=e.parentRoute,t.push(e);return t.reverse(),t}function Uf(e){const t=Array(e.depth+1);do t[e.depth]=e,e=e.parent;while(e);return t}function jf(e,t,n,r){if(e==="/"&&n.index)return{node:n.index,skipped:0};const o=!jr(t),s=o&&e!=="/",i=t.length-(o?1:0),a=[{node:n,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let c=null,l=null,u=null;for(;a.length;){const d=a.pop(),{node:f,index:h,skipped:p,depth:m,statics:g,dynamics:y,optionals:v}=d;let{extract:b,rawParams:C,parsedParams:w}=d;if(f.skipOnParamError){if(!Io(e,t,d))continue;C=d.rawParams,b=d.extract,w=d.parsedParams}r&&f.route&&f.kind!==bn&&Fn(l,d)&&(l=d);const R=h===i;if(R&&(f.route&&!s&&Fn(u,d)&&(u=d),!f.optional&&!f.wildcard&&!f.index&&!f.pathless))continue;const T=R?void 0:t[h];let S;if(R&&f.index){const P={node:f.index,index:h,skipped:p,depth:m+1,statics:g,dynamics:y,optionals:v,extract:b,rawParams:C,parsedParams:w};if(f.index.skipOnParamError&&!Io(e,t,P))continue;if(g===i&&!y&&!v&&!p)return P;Fn(u,P)&&(u=P)}if(f.wildcard&&Fn(c,d))for(const P of f.wildcard){const{prefix:L,suffix:O}=P;if(L&&(R||!(P.caseSensitive?T:S??=T.toLowerCase()).startsWith(L)))continue;if(O){if(R)continue;const H=t.slice(h).join("/").slice(-O.length);if((P.caseSensitive?H:H.toLowerCase())!==O)continue}const A={node:P,index:i,skipped:p,depth:m,statics:g,dynamics:y,optionals:v,extract:b,rawParams:C,parsedParams:w};if(!(P.skipOnParamError&&!Io(e,t,A))){c=A;break}}if(f.optional){const P=p|1<<m,L=m+1;for(let O=f.optional.length-1;O>=0;O--){const A=f.optional[O];a.push({node:A,index:h,skipped:P,depth:L,statics:g,dynamics:y,optionals:v,extract:b,rawParams:C,parsedParams:w})}if(!R)for(let O=f.optional.length-1;O>=0;O--){const A=f.optional[O],{prefix:H,suffix:F}=A;if(H||F){const ee=A.caseSensitive?T:S??=T.toLowerCase();if(H&&!ee.startsWith(H)||F&&!ee.endsWith(F))continue}a.push({node:A,index:h+1,skipped:p,depth:L,statics:g,dynamics:y,optionals:v+1,extract:b,rawParams:C,parsedParams:w})}}if(!R&&f.dynamic&&T)for(let P=f.dynamic.length-1;P>=0;P--){const L=f.dynamic[P],{prefix:O,suffix:A}=L;if(O||A){const H=L.caseSensitive?T:S??=T.toLowerCase();if(O&&!H.startsWith(O)||A&&!H.endsWith(A))continue}a.push({node:L,index:h+1,skipped:p,depth:m+1,statics:g,dynamics:y+1,optionals:v,extract:b,rawParams:C,parsedParams:w})}if(!R&&f.staticInsensitive){const P=f.staticInsensitive.get(S??=T.toLowerCase());P&&a.push({node:P,index:h+1,skipped:p,depth:m+1,statics:g+1,dynamics:y,optionals:v,extract:b,rawParams:C,parsedParams:w})}if(!R&&f.static){const P=f.static.get(T);P&&a.push({node:P,index:h+1,skipped:p,depth:m+1,statics:g+1,dynamics:y,optionals:v,extract:b,rawParams:C,parsedParams:w})}if(f.pathless){const P=m+1;for(let L=f.pathless.length-1;L>=0;L--){const O=f.pathless[L];a.push({node:O,index:h,skipped:p,depth:P,statics:g,dynamics:y,optionals:v,extract:b,rawParams:C,parsedParams:w})}}}if(u&&c)return Fn(c,u)?u:c;if(u)return u;if(c)return c;if(r&&l){let d=l.index;for(let h=0;h<l.index;h++)d+=t[h].length;const f=d===e.length?"/":e.slice(d);return l.rawParams??={},l.rawParams["**"]=decodeURIComponent(f),l}return null}function Io(e,t,n){try{const[r,o]=Pc(e,t,n);n.rawParams=r,n.extract=o;const s=n.node.parse(r);return n.parsedParams=Object.assign({},n.parsedParams,s),!0}catch{return null}}function Fn(e,t){return e?t.statics>e.statics||t.statics===e.statics&&(t.dynamics>e.dynamics||t.dynamics===e.dynamics&&(t.optionals>e.optionals||t.optionals===e.optionals&&((t.node.kind===bn)>(e.node.kind===bn)||t.node.kind===bn==(e.node.kind===bn)&&t.depth>e.depth))):!0}function Rr(e){return Fs(e.filter(t=>t!==void 0).join("/"))}function Fs(e){return e.replace(/\/{2,}/g,"/")}function kc(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function Xt(e){const t=e.length;return t>1&&e[t-1]==="/"?e.replace(/\/{1,}$/,""):e}function Rc(e){return Xt(kc(e))}function Wr(e,t){return e?.endsWith("/")&&e!=="/"&&e!==`${t}/`?e.slice(0,-1):e}function zf(e,t,n){return Wr(e,n)===Wr(t,n)}function Vf({base:e,to:t,trailingSlash:n="never",cache:r}){const o=t.startsWith("/"),s=!o&&t===".";let i;if(r){i=o?t:s?e:e+"\0"+t;const d=r.get(i);if(d)return d}let a;if(s)a=e.split("/");else if(o)a=t.split("/");else{for(a=e.split("/");a.length>1&&jr(a)==="";)a.pop();const d=t.split("/");for(let f=0,h=d.length;f<h;f++){const p=d[f];p===""?f?f===h-1&&a.push(p):a=[p]:p===".."?a.pop():p==="."||a.push(p)}}a.length>1&&(jr(a)===""?n==="never"&&a.pop():n==="always"&&a.push(""));let c,l="";for(let d=0;d<a.length;d++){d>0&&(l+="/");const f=a[d];if(!f)continue;c=Ds(f,0,c);const h=c[0];if(h===kn){l+=f;continue}const p=c[5],m=f.substring(0,c[1]),g=f.substring(c[4],p),y=f.substring(c[2],c[3]);h===tn?l+=m||g?`${m}{$${y}}${g}`:`$${y}`:h===nn?l+=m||g?`${m}{$}${g}`:"$":l+=`${m}{-$${y}}${g}`}l=Fs(l);const u=l||"/";return i&&r&&r.set(i,u),u}function Eo(e,t,n){const r=t[e];return typeof r!="string"?r:e==="_splat"?encodeURI(r):Gf(r,n)}function Mo({path:e,params:t,decodeCharMap:n}){let r=!1;const o={};if(!e||e==="/")return{interpolatedPath:"/",usedParams:o,isMissingParams:r};if(!e.includes("$"))return{interpolatedPath:e,usedParams:o,isMissingParams:r};const s=e.length;let i=0,a,c="";for(;i<s;){const u=i;a=Ds(e,u,a);const d=a[5];if(i=d+1,u===d)continue;const f=a[0];if(f===kn){c+="/"+e.substring(u,d);continue}if(f===nn){const h=t._splat;o._splat=h,o["*"]=h;const p=e.substring(u,a[1]),m=e.substring(a[4],d);if(!h){r=!0,(p||m)&&(c+="/"+p+m);continue}const g=Eo("_splat",t,n);c+="/"+p+g+m;continue}if(f===tn){const h=e.substring(a[2],a[3]);!r&&!(h in t)&&(r=!0),o[h]=t[h];const p=e.substring(u,a[1]),m=e.substring(a[4],d),g=Eo(h,t,n)??"undefined";c+="/"+p+g+m;continue}if(f===nr){const h=e.substring(a[2],a[3]),p=t[h];if(p==null)continue;o[h]=p;const m=e.substring(u,a[1]),g=e.substring(a[4],d),y=Eo(h,t,n)??"";c+="/"+m+y+g;continue}}return e.endsWith("/")&&(c+="/"),{usedParams:o,interpolatedPath:c||"/",isMissingParams:r}}function Gf(e,t){let n=encodeURIComponent(e);if(t)for(const[r,o]of t)n=n.replaceAll(r,o);return n}function Ve(e){return!!e?.isNotFound}function Wf(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const Hr="tsr-scroll-restoration-v1_3",Hf=(e,t)=>{let n;return(...r)=>{n||(n=setTimeout(()=>{e(...r),n=null},t))}};function qf(){const e=Wf();if(!e)return null;const t=e.getItem(Hr);let n=t?JSON.parse(t):{};return{state:n,set:r=>{n=Mt(r,n)||n;try{e.setItem(Hr,JSON.stringify(n))}catch{console.warn("[ts-router] Could not persist scroll restoration state to sessionStorage.")}}}}const br=qf(),rs=e=>e.state.__TSR_key||e.href;function Yf(e){const t=[];let n;for(;n=e.parentNode;)t.push(`${e.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,e)+1})`),e=n;return`${t.reverse().join(" > ")}`.toLowerCase()}let qr=!1;function Tc({storageKey:e,key:t,behavior:n,shouldScrollRestoration:r,scrollToTopSelectors:o,location:s}){let i;try{i=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(l){console.error(l);return}const a=t||window.history.state?.__TSR_key,c=i[a];qr=!0;e:{if(r&&c&&Object.keys(c).length>0){for(const d in c){const f=c[d];if(d==="window")window.scrollTo({top:f.scrollY,left:f.scrollX,behavior:n});else if(d){const h=document.querySelector(d);h&&(h.scrollLeft=f.scrollX,h.scrollTop=f.scrollY)}}break e}const l=(s??window.location).hash.split("#",2)[1];if(l){const d=window.history.state?.__hashScrollIntoViewOptions??!0;if(d){const f=document.getElementById(l);f&&f.scrollIntoView(d)}break e}const u={top:0,left:0,behavior:n};if(window.scrollTo(u),o)for(const d of o){if(d==="window")continue;const f=typeof d=="function"?d():document.querySelector(d);f&&f.scrollTo(u)}}qr=!1}function Jf(e,t){if(!br&&!e.isServer||((e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),e.isServer||e.isScrollRestorationSetup||!br))return;e.isScrollRestorationSetup=!0,qr=!1;const r=e.options.getScrollRestorationKey||rs;window.history.scrollRestoration="manual";const o=s=>{if(qr||!e.isScrollRestoring)return;let i="";if(s.target===document||s.target===window)i="window";else{const c=s.target.getAttribute("data-scroll-restoration-id");c?i=`[data-scroll-restoration-id="${c}"]`:i=Yf(s.target)}const a=r(e.state.location);br.set(c=>{const l=c[a]||={},u=l[i]||={};if(i==="window")u.scrollX=window.scrollX||0,u.scrollY=window.scrollY||0;else if(i){const d=document.querySelector(i);d&&(u.scrollX=d.scrollLeft||0,u.scrollY=d.scrollTop||0)}return c})};typeof document<"u"&&document.addEventListener("scroll",Hf(o,100),!0),e.subscribe("onRendered",s=>{const i=r(s.toLocation);if(!e.resetNextScroll){e.resetNextScroll=!0;return}typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation})||(Tc({storageKey:Hr,key:i,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&br.set(a=>(a[i]||={},a)))})}function Xf(e){if(typeof document<"u"&&document.querySelector){const t=e.state.location.state.__hashScrollIntoViewOptions??!0;if(t&&e.state.location.hash!==""){const n=document.getElementById(e.state.location.hash);n&&n.scrollIntoView(t)}}}function Zf(e,t=String){const n=new URLSearchParams;for(const r in e){const o=e[r];o!==void 0&&n.set(r,t(o))}return n.toString()}function Lo(e){return e?e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e:""}function Qf(e){const t=new URLSearchParams(e),n={};for(const[r,o]of t.entries()){const s=n[r];s==null?n[r]=Lo(o):Array.isArray(s)?s.push(Lo(o)):n[r]=[s,Lo(o)]}return n}const eh=nh(JSON.parse),th=rh(JSON.stringify,JSON.parse);function nh(e){return t=>{t[0]==="?"&&(t=t.substring(1));const n=Qf(t);for(const r in n){const o=n[r];if(typeof o=="string")try{n[r]=e(o)}catch{}}return n}}function rh(e,t){const n=typeof t=="function";function r(o){if(typeof o=="object"&&o!==null)try{return e(o)}catch{}else if(n&&typeof o=="string")try{return t(o),e(o)}catch{}return o}return o=>{const s=Zf(o,r);return s?`?${s}`:""}}const De="__root__";function oh(e){if(e.statusCode=e.statusCode||e.code||307,typeof e.href=="string"&&Vr(e.href))throw new Error(`Redirect blocked: unsafe protocol in href "${e.href}". Only ${_c.join(", ")} protocols are allowed.`);if(!e.reloadDocument&&typeof e.href=="string")try{new URL(e.href),e.reloadDocument=!0}catch{}const t=new Headers(e.headers);e.href&&t.get("Location")===null&&t.set("Location",e.href);const n=new Response(null,{status:e.statusCode,headers:t});if(n.options=e,e.throw)throw n;return n}function Ye(e){return e instanceof Response&&!!e.options}const Tr=e=>{if(!e.rendered)return e.rendered=!0,e.onReady?.()},ao=(e,t)=>!!(e.preload&&!e.router.state.matches.some(n=>n.id===t)),Ns=(e,t,n=!0)=>{const r={...e.router.options.context??{}},o=n?t:t-1;for(let s=0;s<=o;s++){const i=e.matches[s];if(!i)continue;const a=e.router.getMatch(i.id);a&&Object.assign(r,a.__routeContext,a.__beforeLoadContext)}return r},Ic=(e,t)=>{const n=e.router.routesById[t.routeId??""]??e.router.routeTree;!n.options.notFoundComponent&&e.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=e.router.options.defaultNotFoundComponent),en(n.options.notFoundComponent);const r=e.matches.find(o=>o.routeId===n.id);en(r,"Could not find match for route: "+n.id),e.updateMatch(r.id,o=>({...o,status:"notFound",error:t,isFetching:!1})),t.routerCode==="BEFORE_LOAD"&&n.parentRoute&&(t.routeId=n.parentRoute.id,Ic(e,t))},Lt=(e,t,n)=>{if(!(!Ye(n)&&!Ve(n))){if(Ye(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(t){t._nonReactive.beforeLoadPromise?.resolve(),t._nonReactive.loaderPromise?.resolve(),t._nonReactive.beforeLoadPromise=void 0,t._nonReactive.loaderPromise=void 0;const r=Ye(n)?"redirected":"notFound";t._nonReactive.error=n,e.updateMatch(t.id,o=>({...o,status:r,isFetching:!1,error:n})),Ve(n)&&!n.routeId&&(n.routeId=t.routeId),t._nonReactive.loadPromise?.resolve()}throw Ye(n)?(e.rendered=!0,n.options._fromLocation=e.location,n.redirectHandled=!0,n=e.router.resolveRedirect(n),n):(Ic(e,n),n)}},Ec=(e,t)=>{const n=e.router.getMatch(t);return!!(!e.router.isServer&&n._nonReactive.dehydrated||e.router.isServer&&n.ssr===!1)},Nn=(e,t,n,r)=>{const{id:o,routeId:s}=e.matches[t],i=e.router.looseRoutesById[s];if(n instanceof Promise)throw n;n.routerCode=r,e.firstBadMatchIndex??=t,Lt(e,e.router.getMatch(o),n);try{i.options.onError?.(n)}catch(a){n=a,Lt(e,e.router.getMatch(o),n)}e.updateMatch(o,a=>(a._nonReactive.beforeLoadPromise?.resolve(),a._nonReactive.beforeLoadPromise=void 0,a._nonReactive.loadPromise?.resolve(),{...a,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},sh=(e,t,n,r)=>{const o=e.router.getMatch(t),s=e.matches[n-1]?.id,i=s?e.router.getMatch(s):void 0;if(e.router.isShell()){o.ssr=r.id===De;return}if(i?.ssr===!1){o.ssr=!1;return}const a=h=>h===!0&&i?.ssr==="data-only"?"data-only":h,c=e.router.options.defaultSsr??!0;if(r.options.ssr===void 0){o.ssr=a(c);return}if(typeof r.options.ssr!="function"){o.ssr=a(r.options.ssr);return}const{search:l,params:u}=o,d={search:xr(l,o.searchError),params:xr(u,o.paramsError),location:e.location,matches:e.matches.map(h=>({index:h.index,pathname:h.pathname,fullPath:h.fullPath,staticData:h.staticData,id:h.id,routeId:h.routeId,search:xr(h.search,h.searchError),params:xr(h.params,h.paramsError),ssr:h.ssr}))},f=r.options.ssr(d);if($t(f))return f.then(h=>{o.ssr=a(h??c)});o.ssr=a(f??c)},Mc=(e,t,n,r)=>{if(r._nonReactive.pendingTimeout!==void 0)return;const o=n.options.pendingMs??e.router.options.defaultPendingMs;if(!!(e.onReady&&!e.router.isServer&&!ao(e,t)&&(n.options.loader||n.options.beforeLoad||Ac(n))&&typeof o=="number"&&o!==1/0&&(n.options.pendingComponent??e.router.options?.defaultPendingComponent))){const i=setTimeout(()=>{Tr(e)},o);r._nonReactive.pendingTimeout=i}},ih=(e,t,n)=>{const r=e.router.getMatch(t);if(!r._nonReactive.beforeLoadPromise&&!r._nonReactive.loaderPromise)return;Mc(e,t,n,r);const o=()=>{const s=e.router.getMatch(t);s.preload&&(s.status==="redirected"||s.status==="notFound")&&Lt(e,s,s.error)};return r._nonReactive.beforeLoadPromise?r._nonReactive.beforeLoadPromise.then(o):o()},ah=(e,t,n,r)=>{const o=e.router.getMatch(t),s=o._nonReactive.loadPromise;o._nonReactive.loadPromise=Pn(()=>{s?.resolve()});const{paramsError:i,searchError:a}=o;i&&Nn(e,n,i,"PARSE_PARAMS"),a&&Nn(e,n,a,"VALIDATE_SEARCH"),Mc(e,t,r,o);const c=new AbortController,l=e.matches[n-1]?.id;(l?e.router.getMatch(l):void 0)?.context??e.router.options.context;let d=!1;const f=()=>{d||(d=!0,e.updateMatch(t,R=>({...R,isFetching:"beforeLoad",fetchCount:R.fetchCount+1,abortController:c})))},h=()=>{o._nonReactive.beforeLoadPromise?.resolve(),o._nonReactive.beforeLoadPromise=void 0,e.updateMatch(t,R=>({...R,isFetching:!1}))};if(!r.options.beforeLoad){Qn(()=>{f(),h()});return}o._nonReactive.beforeLoadPromise=Pn();const p={...Ns(e,n,!1),...o.__routeContext},{search:m,params:g,cause:y}=o,v=ao(e,t),b={search:m,abortController:c,params:g,preload:v,context:p,location:e.location,navigate:R=>e.router.navigate({...R,_fromLocation:e.location}),buildLocation:e.router.buildLocation,cause:v?"preload":y,matches:e.matches,...e.router.options.additionalContext},C=R=>{if(R===void 0){Qn(()=>{f(),h()});return}(Ye(R)||Ve(R))&&(f(),Nn(e,n,R,"BEFORE_LOAD")),Qn(()=>{f(),e.updateMatch(t,T=>({...T,__beforeLoadContext:R})),h()})};let w;try{if(w=r.options.beforeLoad(b),$t(w))return f(),w.catch(R=>{Nn(e,n,R,"BEFORE_LOAD")}).then(C)}catch(R){f(),Nn(e,n,R,"BEFORE_LOAD")}C(w)},ch=(e,t)=>{const{id:n,routeId:r}=e.matches[t],o=e.router.looseRoutesById[r],s=()=>{if(e.router.isServer){const c=sh(e,n,t,o);if($t(c))return c.then(a)}return a()},i=()=>ah(e,n,t,o),a=()=>{if(Ec(e,n))return;const c=ih(e,n,o);return $t(c)?c.then(i):i()};return s()},lh=(e,t,n)=>{const r=e.router.getMatch(t);if(!r||!n.options.head&&!n.options.scripts&&!n.options.headers)return;const o={matches:e.matches,match:r,params:r.params,loaderData:r.loaderData};return Promise.all([n.options.head?.(o),n.options.scripts?.(o),n.options.headers?.(o)]).then(([s,i,a])=>{const c=s?.meta,l=s?.links,u=s?.scripts,d=s?.styles;return{meta:c,links:l,headScripts:u,headers:a,scripts:i,styles:d}})},Lc=(e,t,n,r)=>{const o=e.matchPromises[n-1],{params:s,loaderDeps:i,abortController:a,cause:c}=e.router.getMatch(t),l=Ns(e,n),u=ao(e,t);return{params:s,deps:i,preload:!!u,parentMatchPromise:o,abortController:a,context:l,location:e.location,navigate:d=>e.router.navigate({...d,_fromLocation:e.location}),cause:u?"preload":c,route:r,...e.router.options.additionalContext}},Ji=async(e,t,n,r)=>{try{const o=e.router.getMatch(t);try{(!e.router.isServer||o.ssr===!0)&&Oc(r);const s=r.options.loader?.(Lc(e,t,n,r)),i=r.options.loader&&$t(s);if((i||r._lazyPromise||r._componentsPromise||r.options.head||r.options.scripts||r.options.headers||o._nonReactive.minPendingPromise)&&e.updateMatch(t,l=>({...l,isFetching:"loader"})),r.options.loader){const l=i?await s:s;Lt(e,e.router.getMatch(t),l),l!==void 0&&e.updateMatch(t,u=>({...u,loaderData:l}))}r._lazyPromise&&await r._lazyPromise;const c=o._nonReactive.minPendingPromise;c&&await c,r._componentsPromise&&await r._componentsPromise,e.updateMatch(t,l=>({...l,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(s){let i=s;if(i?.name==="AbortError"){e.updateMatch(t,c=>({...c,status:c.status==="pending"?"success":c.status,isFetching:!1}));return}const a=o._nonReactive.minPendingPromise;a&&await a,Ve(s)&&await r.options.notFoundComponent?.preload?.(),Lt(e,e.router.getMatch(t),s);try{r.options.onError?.(s)}catch(c){i=c,Lt(e,e.router.getMatch(t),c)}e.updateMatch(t,c=>({...c,error:i,status:"error",isFetching:!1}))}}catch(o){const s=e.router.getMatch(t);s&&(s._nonReactive.loaderPromise=void 0),Lt(e,s,o)}},uh=async(e,t)=>{const{id:n,routeId:r}=e.matches[t];let o=!1,s=!1;const i=e.router.looseRoutesById[r],a=()=>{e.updateMatch(n,u=>({...u,context:Ns(e,t)}))};if(Ec(e,n)){if(e.router.isServer)return e.router.getMatch(n)}else{const u=e.router.getMatch(n);if(u._nonReactive.loaderPromise){if(u.status==="success"&&!e.sync&&!u.preload)return u;await u._nonReactive.loaderPromise;const d=e.router.getMatch(n),f=d._nonReactive.error||d.error;f&&Lt(e,d,f)}else{const d=Date.now()-u.updatedAt,f=ao(e,n),h=f?i.options.preloadStaleTime??e.router.options.defaultPreloadStaleTime??3e4:i.options.staleTime??e.router.options.defaultStaleTime??0,p=i.options.shouldReload,m=typeof p=="function"?p(Lc(e,n,t,i)):p,g=!!f&&!e.router.state.matches.some(C=>C.id===n),y=e.router.getMatch(n);y._nonReactive.loaderPromise=Pn(),g!==y.preload&&e.updateMatch(n,C=>({...C,preload:g}));const{status:v,invalid:b}=y;o=v==="success"&&(b||(m??d>h)),f&&i.options.preload===!1||(o&&!e.sync?(s=!0,(async()=>{try{await Ji(e,n,t,i),a();const C=e.router.getMatch(n);C._nonReactive.loaderPromise?.resolve(),C._nonReactive.loadPromise?.resolve(),C._nonReactive.loaderPromise=void 0}catch(C){Ye(C)&&await e.router.navigate(C.options)}})()):(v!=="success"||o&&e.sync)&&await Ji(e,n,t,i))}}const c=e.router.getMatch(n);s||(c._nonReactive.loaderPromise?.resolve(),c._nonReactive.loadPromise?.resolve()),clearTimeout(c._nonReactive.pendingTimeout),c._nonReactive.pendingTimeout=void 0,s||(c._nonReactive.loaderPromise=void 0),c._nonReactive.dehydrated=void 0,s||a();const l=s?c.isFetching:!1;return l!==c.isFetching||c.invalid!==!1?(e.updateMatch(n,u=>({...u,isFetching:l,invalid:!1})),e.router.getMatch(n)):c};async function Xi(e){const t=Object.assign(e,{matchPromises:[]});!t.router.isServer&&t.router.state.matches.some(n=>n._forcePending)&&Tr(t);try{for(let a=0;a<t.matches.length;a++){const c=ch(t,a);$t(c)&&await c}const n=t.firstBadMatchIndex??t.matches.length;for(let a=0;a<n;a++)t.matchPromises.push(uh(t,a));const o=(await Promise.allSettled(t.matchPromises)).filter(a=>a.status==="rejected").map(a=>a.reason);let s;for(const a of o){if(Ye(a))throw a;!s&&Ve(a)&&(s=a)}for(const a of t.matches){const{id:c,routeId:l}=a,u=t.router.looseRoutesById[l];try{const d=lh(t,c,u);if(d){const f=await d;t.updateMatch(c,h=>({...h,...f}))}}catch(d){console.error(`Error executing head for route ${l}:`,d)}}if(s)throw s;const i=Tr(t);$t(i)&&await i}catch(n){if(Ve(n)&&!t.preload){const r=Tr(t);throw $t(r)&&await r,n}if(Ye(n))throw n}return t.matches}async function Oc(e){if(!e._lazyLoaded&&e._lazyPromise===void 0&&(e.lazyFn?e._lazyPromise=e.lazyFn().then(t=>{const{id:n,...r}=t.options;Object.assign(e.options,r),e._lazyLoaded=!0,e._lazyPromise=void 0}):e._lazyLoaded=!0),!e._componentsLoaded&&e._componentsPromise===void 0){const t=()=>{const n=[];for(const r of Dc){const o=e.options[r]?.preload;o&&n.push(o())}if(n.length)return Promise.all(n).then(()=>{e._componentsLoaded=!0,e._componentsPromise=void 0});e._componentsLoaded=!0,e._componentsPromise=void 0};e._componentsPromise=e._lazyPromise?e._lazyPromise.then(t):t()}return e._componentsPromise}function xr(e,t){return t?{status:"error",error:t}:{status:"success",value:e}}function Ac(e){for(const t of Dc)if(e.options[t]?.preload)return!0;return!1}const Dc=["component","errorComponent","pendingComponent","notFoundComponent"];function dh(e){return{input:({url:t})=>{for(const n of e)t=os(n,t);return t},output:({url:t})=>{for(let n=e.length-1;n>=0;n--)t=$c(e[n],t);return t}}}function fh(e){const t=Rc(e.basepath),n=`/${t}`,r=`${n}/`,o=e.caseSensitive?n:n.toLowerCase(),s=e.caseSensitive?r:r.toLowerCase();return{input:({url:i})=>{const a=e.caseSensitive?i.pathname:i.pathname.toLowerCase();return a===o?i.pathname="/":a.startsWith(s)&&(i.pathname=i.pathname.slice(n.length)),i},output:({url:i})=>(i.pathname=Rr(["/",t,i.pathname]),i)}}function os(e,t){const n=e?.input?.({url:t});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return t}function $c(e,t){const n=e?.output?.({url:t});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return t}function Zt(e){const t=e.resolvedLocation,n=e.location,r=t?.pathname!==n.pathname,o=t?.href!==n.href,s=t?.hash!==n.hash;return{fromLocation:t,toLocation:n,pathChanged:r,hrefChanged:o,hashChanged:s}}class hh{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=n=>n(),this.update=n=>{n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const r=this.options,o=this.basepath??r?.basepath??"/",s=this.basepath===void 0,i=r?.rewrite;this.options={...r,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(f=>[encodeURIComponent(f),f])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=xf())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new vf(gh(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(f=>!["redirected"].includes(f.status))}}}),Jf(this));let a=!1;const c=this.options.basepath??"/",l=this.options.rewrite;if(s||o!==c||i!==l){this.basepath=c;const f=[];Rc(c)!==""&&f.push(fh({basepath:c})),l&&f.push(l),this.rewrite=f.length===0?void 0:f.length===1?f[0]:dh(f),this.history&&this.updateLatestLocation(),a=!0}a&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:n,routesByPath:r,processedTree:o}=Bf(this.routeTree,this.options.caseSensitive,(i,a)=>{i.init({originalIndex:a})});this.options.routeMasks&&Af(this.options.routeMasks,o),this.routesById=n,this.routesByPath=r,this.processedTree=o;const s=this.options.notFoundRoute;s&&(s.init({originalIndex:99999999999}),this.routesById[s.id]=s)},this.subscribe=(n,r)=>{const o={eventType:n,fn:r};return this.subscribers.add(o),()=>{this.subscribers.delete(o)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const o=({href:c,state:l})=>{const u=new URL(c,this.origin),d=os(this.rewrite,u),f=this.options.parseSearch(d.search),h=this.options.stringifySearch(f);return d.search=h,{href:d.href.replace(d.origin,""),publicHref:c,url:d,pathname:Yi(d.pathname),searchStr:h,search:et(r?.search,f),hash:d.hash.split("#").reverse()[0]??"",state:et(r?.state,l)}},s=o(n),{__tempLocation:i,__tempKey:a}=s.state;if(i&&(!a||a===this.tempLocationKey)){const c=o(i);return c.state.key=s.state.key,c.state.__TSR_key=s.state.__TSR_key,delete c.state.__tempLocation,{...c,maskedLocation:s}}return s},this.resolvePathCache=Gr(1e3),this.resolvePathWithBase=(n,r)=>Vf({base:n,to:Fs(r),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(n,r,o)=>typeof n=="string"?this.matchRoutesInternal({pathname:n,search:r},o):this.matchRoutesInternal(n,r),this.getMatchedRoutes=n=>mh({pathname:n,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r._nonReactive.pendingTimeout),r._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const n=this.state.matches.filter(s=>s.status==="pending"),r=this.state.matches.filter(s=>s.isFetching==="loader");new Set([...this.state.pendingMatches??[],...n,...r]).forEach(s=>{this.cancelMatch(s.id)})},this.buildLocation=n=>{const r=(s={})=>{const i=s._fromLocation||this.pendingBuiltLocation||this.latestLocation,a=this.matchRoutes(i,{_buildLocation:!0}),c=jr(a);s.from;const l=s.unsafeRelative==="path"?i.pathname:s.from??c.fullPath,u=this.resolvePathWithBase(l,"."),d=c.search,f={...c.params},h=s.to?this.resolvePathWithBase(u,`${s.to}`):this.resolvePathWithBase(u,"."),p=s.params===!1||s.params===null?{}:(s.params??!0)===!0?f:Object.assign(f,Mt(s.params,f)),m=Mo({path:h,params:p}).interpolatedPath,g=this.matchRoutes(m,void 0,{_buildLocation:!0}).map(L=>this.looseRoutesById[L.routeId]);if(Object.keys(p).length>0)for(const L of g){const O=L.options.params?.stringify??L.options.stringifyParams;O&&Object.assign(p,O(p))}const y=n.leaveParams?h:Yi(Mo({path:h,params:p,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath);let v=d;if(n._includeValidateSearch&&this.options.search?.strict){const L={};g.forEach(O=>{if(O.options.validateSearch)try{Object.assign(L,ss(O.options.validateSearch,{...L,...v}))}catch{}}),v=L}v=yh({search:v,dest:s,destRoutes:g,_includeValidateSearch:n._includeValidateSearch}),v=et(d,v);const b=this.options.stringifySearch(v),C=s.hash===!0?i.hash:s.hash?Mt(s.hash,i.hash):void 0,w=C?`#${C}`:"";let R=s.state===!0?i.state:s.state?Mt(s.state,i.state):{};R=et(i.state,R);const T=`${y}${b}${w}`,S=new URL(T,this.origin),P=$c(this.rewrite,S);return{publicHref:P.pathname+P.search+P.hash,href:T,url:P,pathname:y,search:v,searchStr:b,state:R,hash:C??"",unmaskOnReload:s.unmaskOnReload}},o=(s={},i)=>{const a=r(s);let c=i?r(i):void 0;if(!c){const l={};if(this.options.routeMasks){const u=Df(a.pathname,this.processedTree);if(u){Object.assign(l,u.rawParams);const{from:d,params:f,...h}=u.route,p=f===!1||f===null?{}:(f??!0)===!0?l:Object.assign(l,Mt(f,l));i={from:n.from,...h,params:p},c=r(i)}}}return c&&(a.maskedLocation=c),a};return n.mask?o(n,{from:n.from,...n.mask}):o(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...o})=>{const s=()=>{const c=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];c.forEach(u=>{o.state[u]=this.latestLocation.state[u]});const l=Jt(o.state,this.latestLocation.state);return c.forEach(u=>{delete o.state[u]}),l},i=Xt(this.latestLocation.href)===Xt(o.href),a=this.commitLocationPromise;if(this.commitLocationPromise=Pn(()=>{a?.resolve()}),i&&s())this.load();else{let{maskedLocation:c,hashScrollIntoView:l,url:u,...d}=o;c&&(d={...c,state:{...c.state,__tempKey:void 0,__tempLocation:{...d,search:d.searchStr,state:{...d.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(d.unmaskOnReload??this.options.unmaskOnReload??!1)&&(d.state.__tempKey=this.tempLocationKey)),d.state.__hashScrollIntoViewOptions=l??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[o.replace?"replace":"push"](d.publicHref,d.state,{ignoreBlocker:r})}return this.resetNextScroll=o.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:o,viewTransition:s,ignoreBlocker:i,href:a,...c}={})=>{if(a){const d=this.history.location.state.__TSR_index,f=Ur(a,{__TSR_index:n?d:d+1}),h=new URL(f.pathname,this.origin),p=os(this.rewrite,h);c.to=p.pathname,c.search=this.options.parseSearch(f.search),c.hash=f.hash.slice(1)}const l=this.buildLocation({...c,_includeValidateSearch:!0});this.pendingBuiltLocation=l;const u=this.commitLocation({...l,viewTransition:s,replace:n,resetScroll:r,hashScrollIntoView:o,ignoreBlocker:i});return Promise.resolve().then(()=>{this.pendingBuiltLocation===l&&(this.pendingBuiltLocation=void 0)}),u},this.navigate=async({to:n,reloadDocument:r,href:o,publicHref:s,...i})=>{let a=!1;if(o)try{new URL(`${o}`),a=!0}catch{}if(a&&!r&&(r=!0),r){if(n!==void 0||!o){const l=this.buildLocation({to:n,...i});o=o??l.url.href,s=s??l.url.href}const c=!a&&s?s:o;if(Vr(c))return Promise.resolve();if(!i.ignoreBlocker){const u=this.history.getBlockers?.()??[];for(const d of u)if(d?.blockerFn&&await d.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}return i.replace?window.location.replace(c):window.location.href=c,Promise.resolve()}return this.buildAndCommitLocation({...i,href:o,to:n,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const r=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});if(this.latestLocation.publicHref!==r.publicHref||r.url.origin!==this.origin){const o=this.getParsedLocationHref(r);throw oh({href:o})}}const n=this.matchRoutes(this.latestLocation);this.__store.setState(r=>({...r,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:n,cachedMatches:r.cachedMatches.filter(o=>!n.some(s=>s.id===o.id))}))},this.load=async n=>{let r,o,s;for(s=new Promise(a=>{this.startTransition(async()=>{try{this.beforeLoad();const c=this.latestLocation,l=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...Zt({resolvedLocation:l,location:c})}),this.emit({type:"onBeforeLoad",...Zt({resolvedLocation:l,location:c})}),await Xi({router:this,sync:n?.sync,matches:this.state.pendingMatches,location:c,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let u=[],d=[],f=[];Qn(()=>{this.__store.setState(h=>{const p=h.matches,m=h.pendingMatches||h.matches;return u=p.filter(g=>!m.some(y=>y.id===g.id)),d=m.filter(g=>!p.some(y=>y.id===g.id)),f=m.filter(g=>p.some(y=>y.id===g.id)),{...h,isLoading:!1,loadedAt:Date.now(),matches:m,pendingMatches:void 0,cachedMatches:[...h.cachedMatches,...u.filter(g=>g.status!=="error"&&g.status!=="notFound")]}}),this.clearExpiredCache()}),[[u,"onLeave"],[d,"onEnter"],[f,"onStay"]].forEach(([h,p])=>{h.forEach(m=>{this.looseRoutesById[m.routeId].options[p]?.(m)})})})})}})}catch(c){Ye(c)?(r=c,this.isServer||this.navigate({...r.options,replace:!0,ignoreBlocker:!0})):Ve(c)&&(o=c),this.__store.setState(l=>({...l,statusCode:r?r.status:o?404:l.matches.some(u=>u.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===s&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),a()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise;let i;this.hasNotFoundMatch()?i=404:this.__store.state.matches.some(a=>a.status==="error")&&(i=500),i!==void 0&&this.__store.setState(a=>({...a,statusCode:i}))},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let o;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const s=this.latestLocation,i=this.state.resolvedLocation,a=typeof r.types=="function"?r.types(Zt({resolvedLocation:i,location:s})):r.types;if(a===!1){n();return}o={update:n,types:a}}else o=n;document.startViewTransition(o)}else n()},this.updateMatch=(n,r)=>{this.startTransition(()=>{const o=this.state.pendingMatches?.some(s=>s.id===n)?"pendingMatches":this.state.matches.some(s=>s.id===n)?"matches":this.state.cachedMatches.some(s=>s.id===n)?"cachedMatches":"";o&&this.__store.setState(s=>({...s,[o]:s[o]?.map(i=>i.id===n?r(i):i)}))})},this.getMatch=n=>{const r=o=>o.id===n;return this.state.cachedMatches.find(r)??this.state.pendingMatches?.find(r)??this.state.matches.find(r)},this.invalidate=n=>{const r=o=>n?.filter?.(o)??!0?{...o,invalid:!0,...n?.forcePending||o.status==="error"||o.status==="notFound"?{status:"pending",error:void 0}:void 0}:o;return this.__store.setState(o=>({...o,matches:o.matches.map(r),cachedMatches:o.cachedMatches.map(r),pendingMatches:o.pendingMatches?.map(r)})),this.shouldViewTransition=!1,this.load({sync:n?.sync})},this.getParsedLocationHref=n=>{let r=n.url.href;return this.origin&&n.url.origin===this.origin&&(r=r.replace(this.origin,"")||"/"),r},this.resolveRedirect=n=>{const r=n.headers.get("Location");if(n.options.href){if(r)try{const o=new URL(r);if(this.origin&&o.origin===this.origin){const s=o.pathname+o.search+o.hash;n.options.href=s,n.headers.set("Location",s)}}catch{}}else{const o=this.buildLocation(n.options),s=this.getParsedLocationHref(o);n.options.href=s,n.headers.set("Location",s)}return n.headers.get("Location")||n.headers.set("Location",n.options.href),n},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(o=>({...o,cachedMatches:o.cachedMatches.filter(s=>!r(s))})):this.__store.setState(o=>({...o,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const o=this.looseRoutesById[r.routeId];if(!o.options.loader)return!0;const s=(r.preload?o.options.preloadGcTime??this.options.defaultPreloadGcTime:o.options.gcTime??this.options.defaultGcTime)??300*1e3;return r.status==="error"?!0:Date.now()-r.updatedAt>=s};this.clearCache({filter:n})},this.loadRouteChunk=Oc,this.preloadRoute=async n=>{const r=this.buildLocation(n);let o=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),i=new Set([...s,...this.state.cachedMatches.map(a=>a.id)]);Qn(()=>{o.forEach(a=>{i.has(a.id)||this.__store.setState(c=>({...c,cachedMatches:[...c.cachedMatches,a]}))})});try{return o=await Xi({router:this,matches:o,location:r,preload:!0,updateMatch:(a,c)=>{s.has(a)?o=o.map(l=>l.id===a?c(l):l):this.updateMatch(a,c)}}),o}catch(a){if(Ye(a))return a.options.reloadDocument?void 0:await this.preloadRoute({...a.options,_fromLocation:r});Ve(a)||console.error(a);return}},this.matchRoute=(n,r)=>{const o={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},s=this.buildLocation(o);if(r?.pending&&this.state.status!=="pending")return!1;const a=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,c=$f(s.pathname,r?.caseSensitive??!1,r?.fuzzy??!1,a.pathname,this.processedTree);return!c||n.params&&!Jt(c.rawParams,n.params,{partial:!0})?!1:r?.includeSearch??!0?Jt(a.search,s.search,{partial:!0})?c.rawParams:!1:c.rawParams},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,caseSensitive:t.caseSensitive??!1,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??th,parseSearch:t.parseSearch??eh}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(t,n){const r=this.getMatchedRoutes(t.pathname),{foundRoute:o,routeParams:s,parsedParams:i}=r;let{matchedRoutes:a}=r,c=!1;(o?o.path!=="/"&&s["**"]:Xt(t.pathname))&&(this.options.notFoundRoute?a=[...a,this.options.notFoundRoute]:c=!0);const l=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let f=a.length-1;f>=0;f--){const h=a[f];if(h.children)return h.id}return De}})(),u=[],d=f=>f?.id?f.context??this.options.context??void 0:this.options.context??void 0;return a.forEach((f,h)=>{const p=u[h-1],[m,g,y]=(()=>{const F=p?.search??t.search,ee=p?._strictSearch??void 0;try{const Q=ss(f.options.validateSearch,{...F})??void 0;return[{...F,...Q},{...ee,...Q},void 0]}catch(Q){let D=Q;if(Q instanceof Yr||(D=new Yr(Q.message,{cause:Q})),n?.throwOnError)throw D;return[F,{},D]}})(),v=f.options.loaderDeps?.({search:m})??"",b=v?JSON.stringify(v):"",{interpolatedPath:C,usedParams:w}=Mo({path:f.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),R=f.id+C+b,T=this.getMatch(R),S=this.state.matches.find(F=>F.routeId===f.id),P=T?._strictParams??w;let L;if(!T)if(f.options.skipRouteOnParseError)for(const F in w)F in i&&(P[F]=i[F]);else{const F=f.options.params?.parse??f.options.parseParams;if(F)try{Object.assign(P,F(P))}catch(ee){if(Ve(ee)||Ye(ee)?L=ee:L=new ph(ee.message,{cause:ee}),n?.throwOnError)throw L}}Object.assign(s,P);const O=S?"stay":"enter";let A;if(T)A={...T,cause:O,params:S?et(S.params,s):s,_strictParams:P,search:et(S?S.search:T.search,m),_strictSearch:g};else{const F=f.options.loader||f.options.beforeLoad||f.lazyFn||Ac(f)?"pending":"success";A={id:R,ssr:this.isServer?void 0:f.options.ssr,index:h,routeId:f.id,params:S?et(S.params,s):s,_strictParams:P,pathname:C,updatedAt:Date.now(),search:S?et(S.search,m):m,_strictSearch:g,searchError:void 0,status:F,isFetching:!1,error:void 0,paramsError:L,__routeContext:void 0,_nonReactive:{loadPromise:Pn()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:O,loaderDeps:S?et(S.loaderDeps,v):v,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:f.options.staticData||{},fullPath:f.fullPath}}n?.preload||(A.globalNotFound=l===f.id),A.searchError=y;const H=d(p);A.context={...H,...A.__routeContext,...A.__beforeLoadContext},u.push(A)}),u.forEach((f,h)=>{const p=this.looseRoutesById[f.routeId];if(!this.getMatch(f.id)&&n?._buildLocation!==!0){const g=u[h-1],y=d(g);if(p.options.context){const v={deps:f.loaderDeps,params:f.params,context:y??{},location:t,navigate:b=>this.navigate({...b,_fromLocation:t}),buildLocation:this.buildLocation,cause:f.cause,abortController:f.abortController,preload:!!f.preload,matches:u};f.__routeContext=p.options.context(v)??void 0}f.context={...y,...f.__routeContext,...f.__beforeLoadContext}}}),u}}class Yr extends Error{}class ph extends Error{}function gh(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function ss(e,t){if(e==null)return{};if("~standard"in e){const n=e["~standard"].validate(t);if(n instanceof Promise)throw new Yr("Async validation not supported");if(n.issues)throw new Yr(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in e?e.parse(t):typeof e=="function"?e(t):{}}function mh({pathname:e,routesById:t,processedTree:n}){const r={},o=Xt(e);let s,i;const a=Ff(o,n,!0);return a&&(s=a.route,Object.assign(r,a.rawParams),i=Object.assign({},a.parsedParams)),{matchedRoutes:a?.branch||[t[De]],routeParams:r,foundRoute:s,parsedParams:i}}function yh({search:e,dest:t,destRoutes:n,_includeValidateSearch:r}){const o=n.reduce((a,c)=>{const l=[];if("search"in c.options)c.options.search?.middlewares&&l.push(...c.options.search.middlewares);else if(c.options.preSearchFilters||c.options.postSearchFilters){const u=({search:d,next:f})=>{let h=d;"preSearchFilters"in c.options&&c.options.preSearchFilters&&(h=c.options.preSearchFilters.reduce((m,g)=>g(m),d));const p=f(h);return"postSearchFilters"in c.options&&c.options.postSearchFilters?c.options.postSearchFilters.reduce((m,g)=>g(m),p):p};l.push(u)}if(r&&c.options.validateSearch){const u=({search:d,next:f})=>{const h=f(d);try{return{...h,...ss(c.options.validateSearch,h)??void 0}}catch{return h}};l.push(u)}return a.concat(l)},[])??[],s=({search:a})=>t.search?t.search===!0?a:Mt(t.search,a):{};o.push(s);const i=(a,c)=>{if(a>=o.length)return c;const l=o[a];return l({search:c,next:d=>i(a+1,d)})};return i(0,e)}const vh="Error preloading route! ";class Fc{constructor(t){if(this.init=n=>{this.originalIndex=n.originalIndex;const r=this.options,o=!r?.path&&!r?.id;this.parentRoute=this.options.getParentRoute?.(),o?this._path=De:this.parentRoute||en(!1);let s=o?De:r?.path;s&&s!=="/"&&(s=kc(s));const i=r?.id||s;let a=o?De:Rr([this.parentRoute.id===De?"":this.parentRoute.id,i]);s===De&&(s="/"),a!==De&&(a=Rr(["/",a]));const c=a===De?"/":Rr([this.parentRoute.fullPath,s]);this._path=s,this._id=a,this._fullPath=c,this._to=c},this.addChildren=n=>this._addFileChildren(n),this._addFileChildren=n=>(Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this),this._addFileTypes=()=>this,this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.options=t||{},this.isRoot=!t?.getParentRoute,t?.id&&t?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class bh extends Fc{constructor(t){super(t)}}var xh=te("<div><div><strong>Something went wrong!</strong><button></button></div><div>"),Sh=te("<div><pre>"),Ch=te("<code>");function Bs(e){return x(Kd,{fallback:(t,n)=>(e.onCatch?.(t),G(it([e.getResetKey],()=>n(),{defer:!0})),x($e,{get component(){return e.errorComponent??dr},error:t,reset:n})),get children(){return e.children}})}function dr({error:e}){const[t,n]=z(!1);return(()=>{var r=xh(),o=r.firstChild,s=o.firstChild,i=s.nextSibling,a=o.nextSibling;return r.style.setProperty("padding",".5rem"),r.style.setProperty("max-width","100%"),o.style.setProperty("display","flex"),o.style.setProperty("align-items","center"),o.style.setProperty("gap",".5rem"),s.style.setProperty("font-size","1rem"),i.$$click=()=>n(c=>!c),i.style.setProperty("appearance","none"),i.style.setProperty("font-size",".6em"),i.style.setProperty("border","1px solid currentColor"),i.style.setProperty("padding",".1rem .2rem"),i.style.setProperty("font-weight","bold"),i.style.setProperty("border-radius",".25rem"),re(i,()=>t()?"Hide Error":"Show Error"),a.style.setProperty("height",".25rem"),re(r,(()=>{var c=le(()=>!!t());return()=>c()?(()=>{var l=Sh(),u=l.firstChild;return u.style.setProperty("font-size",".7em"),u.style.setProperty("border","1px solid red"),u.style.setProperty("border-radius",".25rem"),u.style.setProperty("padding",".3rem"),u.style.setProperty("color","red"),u.style.setProperty("overflow","auto"),re(u,(()=>{var d=le(()=>!!e.message);return()=>d()?(()=>{var f=Ch();return re(f,()=>e.message),f})():null})()),l})():null})(),null),r})()}oo(["click"]);function wh(e){return(...t)=>{for(const n of e)n&&n(...t)}}const E=e=>typeof e=="function"&&!e.length?e():e,Zi=e=>Array.isArray(e)?e:e?[e]:[];function _h(e,...t){return typeof e=="function"?e(...t):e}const Ph=q;function Ee(...e){return wh(e)}function kh(e,t=r=>r,n={}){const[r,o]=z(t(e.state)),s=n.equal??Rh,i=e.subscribe(()=>{const a=t(e.state);s(r(),a)||o(()=>a)});return q(()=>{i()}),r}function Rh(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!t.has(r)||!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}const Oo=me(null);function Nc(){return typeof document>"u"?Oo:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Oo,Oo)}function Ne(e){const t=ue(Nc());return e?.warn,t}function Bc(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Bc(e[o],t[o]))return!1;return!0}function we(e){const t=Ne({warn:e?.router===void 0}),n=e?.router||t;return kh(n.__store,r=>e?.select?e.select(r):r,{equal:Bc})}const Ao=e=>W((t={current:null,previous:null})=>{const n=e();return t.current!==n&&(t.previous=t.current,t.current=n),t});function Th(e,t,n={},r={}){const o=typeof IntersectionObserver=="function";let s=null;return G(()=>{const i=e();!i||!o||r.disabled||(s=new IntersectionObserver(([a])=>{t(a)},n),s.observe(i),q(()=>{s?.disconnect()}))}),()=>s}var Ih=te("<svg><a>");function Eh(e){const t=Ne(),[n,r]=z(!1);let o=!1;const[s,i]=J(N({activeProps:()=>({class:"active"}),inactiveProps:()=>({})},e),["activeProps","inactiveProps","activeOptions","to","preload","preloadDelay","hashScrollIntoView","replace","startTransition","resetScroll","viewTransition","target","disabled","style","class","onClick","onFocus","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","onTouchStart","ignoreBlocker"]),[a,c]=J(i,["params","search","hash","state","mask","reloadDocument","unsafeRelative"]),l=we({select:D=>D.location.searchStr}),u=e.from,d=()=>({...e,from:u}),f=W(()=>(l(),t.buildLocation(d()))),h=W(()=>{if(d().disabled)return;let D;const I=f().maskedLocation;I?D=I.url.href:D=f().url.href;let ie=!1;return t.origin&&(D.startsWith(t.origin)?D=t.history.createHref(D.replace(t.origin,"")):ie=!0),{href:D,external:ie}}),p=W(()=>{const D=h();if(D?.external)return Vr(D.href)?void 0:D.href;try{return new URL(d().to),Vr(d().to)?void 0:d().to}catch{}}),m=W(()=>d().reloadDocument||p()?!1:s.preload??t.options.defaultPreload),g=()=>s.preloadDelay??t.options.defaultPreloadDelay??0,y=we({select:D=>{if(p())return!1;if(s.activeOptions?.exact){if(!zf(D.location.pathname,f().pathname,t.basepath))return!1}else{const I=Wr(D.location.pathname,t.basepath).split("/");if(!Wr(f()?.pathname,t.basepath)?.split("/")?.every((st,Qe)=>st===I[Qe]))return!1}return(s.activeOptions?.includeSearch??!0)&&!Jt(D.location.search,f().search,{partial:!s.activeOptions?.exact,ignoreUndefined:!s.activeOptions?.explicitUndefined})?!1:s.activeOptions?.includeHash?D.location.hash===f().hash:!0}}),v=()=>t.preloadRoute(d()).catch(D=>{console.warn(D),console.warn(vh)}),b=D=>{D?.isIntersecting&&v()},[C,w]=z(null);if(Th(C,b,{rootMargin:"100px"},{disabled:!!s.disabled||m()!=="viewport"}),G(()=>{o||!s.disabled&&m()==="render"&&(v(),o=!0)}),p())return N(c,{ref:Ee(w,d().ref),href:p()},J(s,["target","disabled","style","class","onClick","onFocus","onMouseEnter","onMouseLeave","onMouseOut","onMouseOver","onTouchStart"])[0]);const R=D=>{const I=D.currentTarget.getAttribute("target"),ie=s.target!==void 0?s.target:I;if(!s.disabled&&!Mh(D)&&!D.defaultPrevented&&(!ie||ie==="_self")&&D.button===0){D.preventDefault(),r(!0);const Be=t.subscribe("onResolved",()=>{Be(),r(!1)});t.navigate({...d(),replace:s.replace,resetScroll:s.resetScroll,hashScrollIntoView:s.hashScrollIntoView,startTransition:s.startTransition,viewTransition:s.viewTransition,ignoreBlocker:s.ignoreBlocker})}},T=D=>{s.disabled||m()&&v()},S=T,P=D=>{if(s.disabled)return;const I=D.currentTarget||{};if(m()){if(I.preloadTimeout)return;I.preloadTimeout=setTimeout(()=>{I.preloadTimeout=null,v()},g())}},L=D=>{if(s.disabled)return;const I=D.currentTarget||{};I.preloadTimeout&&(clearTimeout(I.preloadTimeout),I.preloadTimeout=null)};function O(D,I){return I&&(typeof I=="function"?I(D):I[0](I[1],D)),D.defaultPrevented}function A(D){return I=>{for(const ie of D)O(I,ie)}}const H=()=>y()?Mt(s.activeProps,{})??{}:{},F=()=>y()?{}:Mt(s.inactiveProps,{}),ee=()=>[s.class,H().class,F().class].filter(Boolean).join(" "),Q=()=>({...s.style,...H().style,...F().style});return N(c,H,F,()=>({href:h()?.href,ref:Ee(w,d().ref),onClick:A([s.onClick,R]),onFocus:A([s.onFocus,T]),onMouseEnter:A([s.onMouseEnter,P]),onMouseOver:A([s.onMouseOver,P]),onMouseLeave:A([s.onMouseLeave,L]),onMouseOut:A([s.onMouseOut,L]),onTouchStart:A([s.onTouchStart,S]),disabled:!!s.disabled,target:s.target,...(()=>{const D=Q();return Object.keys(D).length?{style:D}:{}})(),...(()=>{const D=ee();return D?{class:D}:{}})(),...s.disabled&&{role:"link","aria-disabled":!0},...y()&&{"data-status":"active","aria-current":"page"},...n()&&{"data-transitioning":"transitioning"}}))}const Rn=e=>{const[t,n]=J(e,["_asChild","children"]),[r,o]=J(Eh(n),["type"]),s=W(()=>{const i=t.children;return typeof i=="function"?i({get isActive(){return o["data-status"]==="active"},get isTransitioning(){return o["data-transitioning"]==="transitioning"}}):i});if(t._asChild==="svg"){const[i,a]=J(o,["class"]);return(()=>{var c=Ih(),l=c.firstChild;return so(l,a,!1,!0),re(l,s),c})()}return x($e,N({get component(){return t._asChild?t._asChild:"a"}},o,{get children(){return s()}}))};function Mh(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const co=me(()=>{}),Lh=me(()=>{});function nt(e){const t=ue(e.from?Lh:co),n=we({select:r=>{const o=r.matches.find(s=>e.from?e.from===s.routeId:s.id===t());return o===void 0?{match:void 0,shouldThrowError:!r.pendingMatches?.find(a=>e.from?e.from===a.routeId:a.id===t())&&!r.isTransitioning&&(e.shouldThrow??!0)}:{match:e.select?e.select(o):o,shouldThrowError:!1}}});return G(()=>{n().shouldThrowError&&en(!1,`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`)}),W(()=>n().match)}function Ks(e){return nt({from:e.from,strict:e.strict,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function Us(e){const{select:t,...n}=e;return nt({...n,select:r=>t?t(r.loaderDeps):r.loaderDeps})}function js(e){return nt({from:e.from,shouldThrow:e.shouldThrow,strict:e.strict,select:t=>{const n=e.strict===!1?t.params:t._strictParams;return e.select?e.select(n):n}})}function zs(e){return nt({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,select:t=>e.select?e.select(t.search):t.search})}function Vs(e){const t=Ne();return n=>t.navigate({...n,from:n.from??e?.from})}let Oh=class extends Fc{constructor(t){super(t),this.useMatch=n=>nt({select:n?.select,from:this.id}),this.useRouteContext=n=>nt({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>zs({select:n?.select,from:this.id}),this.useParams=n=>js({select:n?.select,from:this.id}),this.useLoaderDeps=n=>Us({...n,from:this.id}),this.useLoaderData=n=>Ks({...n,from:this.id}),this.useNavigate=()=>Vs({from:this.fullPath}),this.Link=n=>{const r=this;return x(Rn,N({get from(){return r.fullPath}},n))}}};function Ah(e){return new Oh(e)}class Dh extends bh{constructor(t){super(t),this.useMatch=n=>nt({select:n?.select,from:this.id}),this.useRouteContext=n=>nt({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>zs({select:n?.select,from:this.id}),this.useParams=n=>js({select:n?.select,from:this.id}),this.useLoaderDeps=n=>Us({...n,from:this.id}),this.useLoaderData=n=>Ks({...n,from:this.id}),this.useNavigate=()=>Vs({from:this.fullPath}),this.Link=n=>{const r=this;return x(Rn,N({get from(){return r.fullPath}},n))}}}function $h(e){return new Dh(e)}function Tn(e){return typeof e=="object"?new Qi(e,{silent:!0}).createRoute(e):new Qi(e,{silent:!0}).createRoute}class Qi{constructor(t,n){this.path=t,this.createRoute=r=>{this.silent;const o=Ah(r);return o.isRoot=!1,o},this.silent=n?.silent}}class ea{constructor(t){this.useMatch=n=>nt({select:n?.select,from:this.options.id}),this.useRouteContext=n=>nt({from:this.options.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>zs({select:n?.select,from:this.options.id}),this.useParams=n=>js({select:n?.select,from:this.options.id}),this.useLoaderDeps=n=>Us({...n,from:this.options.id}),this.useLoaderData=n=>Ks({...n,from:this.options.id}),this.useNavigate=()=>{const n=Ne();return Vs({from:n.routesById[this.options.id].fullPath})},this.options=t}}function ta(e){return typeof e=="object"?new ea(e):t=>new ea({id:e,...t})}function lo(e,t){let n,r,o;const s=()=>(n||(n=e().then(a=>(n=void 0,r=a[t],r)).catch(a=>{o=a})),n),i=function(c){if(o){if(_f(o)&&o instanceof Error&&typeof window<"u"&&typeof sessionStorage<"u"){const l=`tanstack_router_reload:${o.message}`;if(!sessionStorage.getItem(l))return sessionStorage.setItem(l,"1"),window.location.reload(),{default:()=>null}}throw o}if(!r){const[l]=Gn(s,{initialValue:r,ssrLoadFrom:"initial"});return x($e,N({get component(){return l()}},c))}return x($e,N({component:r},c))};return i.preload=s,i}function Fh(){const e=Ne();let t={router:e,mounted:!1};const n=we({select:({isLoading:d})=>d});if(e.isServer)return null;const[r,o]=Ed(),s=we({select:d=>d.matches.some(f=>f.status==="pending")}),i=Ao(n),a=()=>n()||r()||s(),c=Ao(a),l=()=>n()||s(),u=Ao(l);return e.startTransition=d=>{uc(()=>{o(d)})},Vt(()=>{const d=e.history.subscribe(e.load),f=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});Xt(e.latestLocation.publicHref)!==Xt(f.publicHref)&&e.commitLocation({...f,replace:!0}),q(()=>{d()})}),Fe(()=>{ge(()=>{if(typeof window<"u"&&e.ssr||t.router===e&&t.mounted)return;t={router:e,mounted:!0},(async()=>{try{await e.load()}catch(f){console.error(f)}})()})}),Fe(it([i,n],([d,f])=>{d.previous&&!f&&e.emit({type:"onLoad",...Zt(e.state)})})),Fr(it([l,u],([d,f])=>{f.previous&&!d&&e.emit({type:"onBeforeRouteMount",...Zt(e.state)})})),Fe(it([a,c],([d,f])=>{if(f.previous&&!d){const h=Zt(e.state);e.emit({type:"onResolved",...h}),e.__store.setState(p=>({...p,status:"idle",resolvedLocation:p.location})),h.hrefChanged&&Xf(e)}})),null}function Yt(e){return le(()=>e.children)}var Nh=te("<p>Not Found");function Bh(e){const t=we({select:n=>`not-found-${n.location.pathname}-${n.status}`});return x(Bs,{getResetKey:()=>t(),onCatch:n=>{if(Ve(n))e.onCatch?.(n);else throw n},errorComponent:({error:n})=>{if(Ve(n))return e.fallback?.(n);throw n},get children(){return e.children}})}function Kh(){return Nh()}function Kc(e,t,n){return t.options.notFoundComponent?x(t.options.notFoundComponent,n):e.options.defaultNotFoundComponent?x(e.options.defaultNotFoundComponent,n):x(Kh,{})}var Uh=te("<script class=$tsr>");function jh({children:e}){const t=Ne();return t.isServer?(()=>{var n=Uh();return n.innerHTML=e+";document.currentScript.remove()",Fe(()=>_n(n,"nonce",t.options.ssr?.nonce)),n})():null}function zh(){const e=Ne();if(!e.isScrollRestoring||!e.isServer||typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation}))return null;const n=(e.options.getScrollRestorationKey||rs)(e.latestLocation),r=n!==rs(e.latestLocation)?n:void 0,o={storageKey:Hr,shouldScrollRestoration:!0};return r&&(o.key=r),x(jh,{get children(){return`(${Tc.toString()})(${Tf(JSON.stringify(o))})`}})}const is=e=>{const t=Ne(),n=we({select:m=>{const g=m.matches.find(y=>y.id===e.matchId);return g?{routeId:g.routeId,ssr:g.ssr,_displayPending:g._displayPending}:null}});if(!n())return null;const r=()=>t.routesById[n().routeId],o=()=>r().options.pendingComponent??t.options.defaultPendingComponent,s=()=>r().options.errorComponent??t.options.defaultErrorComponent,i=()=>r().options.onCatch??t.options.defaultOnCatch,a=()=>r().isRoot?r().options.notFoundComponent??t.options.notFoundRoute?.options.component:r().options.notFoundComponent,c=n().ssr===!1||n().ssr==="data-only",l=()=>Os,u=()=>s()?Bs:Yt,d=()=>a()?Bh:Yt,f=we({select:m=>m.loadedAt}),h=we({select:m=>{const g=m.matches.findIndex(y=>y.id===e.matchId);return m.matches[g-1]?.routeId}}),p=r().isRoot?r().options.shellComponent??Yt:Yt;return x(p,{get children(){return[x(co.Provider,{value:()=>e.matchId,get children(){return x($e,{get component(){return l()},get fallback(){return le(()=>!!(t.isServer||c))()?void 0:x($e,{get component(){return o()}})},get children(){return x($e,{get component(){return u()},getResetKey:()=>f(),get errorComponent(){return s()||dr},onCatch:m=>{if(Ve(m))throw m;`${n().routeId}`,i()?.(m)},get children(){return x($e,{get component(){return d()},fallback:m=>{if(!a()||m.routeId&&m.routeId!==n().routeId||!m.routeId&&!r().isRoot)throw m;return x($e,N({get component(){return a()}},m))},get children(){return x(bc,{get children(){return[x(mt,{when:c,get children(){return x(be,{get when(){return!t.isServer},get fallback(){return x($e,{get component(){return o()}})},get children(){return x(na,{get matchId(){return e.matchId}})}})}}),x(mt,{when:!c,get children(){return x(na,{get matchId(){return e.matchId}})}})]}})}})}})}})}}),le(()=>le(()=>h()===De)()?[x(Vh,{}),x(zh,{})]:null)]}})};function Vh(){const e=Ne(),t=we({select:n=>n.resolvedLocation?.state.__TSR_key});return G(it([t],()=>{e.emit({type:"onRendered",...Zt(e.state)})})),null}const na=e=>{const t=Ne(),n=we({select:c=>{const l=c.matches.find(p=>p.id===e.matchId);if(!l)return null;const u=l.routeId,f=(t.routesById[u].options.remountDeps??t.options.defaultRemountDeps)?.({routeId:u,loaderDeps:l.loaderDeps,params:l._strictParams,search:l._strictSearch});return{key:f?JSON.stringify(f):void 0,routeId:u,match:{id:l.id,status:l.status,error:l.error,_forcePending:l._forcePending,_displayPending:l._displayPending}}}});if(!n())return null;const r=()=>t.routesById[n().routeId],o=()=>n().match,s=()=>n().key??n().match.id,i=()=>{const c=r().options.component??t.options.defaultComponent;return c?x(c,{}):x(Uc,{})},a=()=>x(be,{get when(){return s()},keyed:!0,children:c=>i()});return x(bc,{get children(){return[x(mt,{get when(){return o()._displayPending},children:c=>{const[l]=Gn(()=>t.getMatch(o().id)?._nonReactive.displayPendingPromise);return le(l)}}),x(mt,{get when(){return o()._forcePending},children:c=>{const[l]=Gn(()=>t.getMatch(o().id)?._nonReactive.minPendingPromise);return le(l)}}),x(mt,{get when(){return o().status==="pending"},children:c=>{const l=r().options.pendingMinMs??t.options.defaultPendingMinMs;if(l){const f=t.getMatch(o().id);if(f&&!f._nonReactive.minPendingPromise&&!t.isServer){const h=Pn();f._nonReactive.minPendingPromise=h,setTimeout(()=>{h.resolve(),f._nonReactive.minPendingPromise=void 0},l)}}const[u]=Gn(async()=>(await new Promise(f=>setTimeout(f,0)),t.getMatch(o().id)?._nonReactive.loadPromise)),d=r().options.pendingComponent??t.options.defaultPendingComponent;return[d&&l>0?x($e,{component:d}):null,le(u)]}}),x(mt,{get when(){return o().status==="notFound"},children:c=>(en(Ve(o().error)),x(be,{get when(){return n().routeId},keyed:!0,children:l=>Kc(t,r(),o().error)}))}),x(mt,{get when(){return o().status==="redirected"},children:c=>{en(Ye(o().error));const[l]=Gn(async()=>(await new Promise(u=>setTimeout(u,0)),t.getMatch(o().id)?._nonReactive.loadPromise));return le(l)}}),x(mt,{get when(){return o().status==="error"},children:c=>{if(t.isServer){const l=(r().options.errorComponent??t.options.defaultErrorComponent)||dr;return x(l,{get error(){return o().error},info:{componentStack:""}})}throw o().error}}),x(mt,{get when(){return o().status==="success"},get children(){return a()}})]}})},Uc=()=>{const e=Ne(),t=ue(co),n=we({select:c=>c.matches.find(l=>l.id===t())?.routeId}),r=()=>e.routesById[n()],o=we({select:c=>{const u=c.matches.find(d=>d.id===t());return u?u.globalNotFound:!1}}),s=we({select:c=>{const l=c.matches,u=l.findIndex(f=>f.id===t());return l[u+1]?.id}}),i=we({select:c=>{const l=c.matches,u=l.findIndex(d=>d.id===t());return l[u+1]?.status}}),a=()=>i()!=="redirected"&&o();return x(be,{get when(){return le(()=>!a())()&&s()},get fallback(){return x(be,{get when(){return a()},get children(){return Kc(e,r(),void 0)}})},children:c=>{const l=W(()=>c());return x(be,{get when(){return n()===De},get fallback(){return x(is,{get matchId(){return l()}})},get children(){return x(Os,{get fallback(){return x($e,{get component(){return e.options.defaultPendingComponent}})},get children(){return x(is,{get matchId(){return l()}})}})}})}})};function Gh(){const e=Ne(),t=e.isServer||typeof document<"u"&&e.ssr?Yt:Os,r=e.routesById[De].options.pendingComponent??e.options.defaultPendingComponent,o=e.options.InnerWrap||Yt;return x(o,{get children(){return x(t,{get fallback(){return r?x(r,{}):null},get children(){return[x(Fh,{}),x(Wh,{})]}})}})}function Wh(){const e=Ne(),t=we({select:o=>o.matches[0]?.id}),n=we({select:o=>o.loadedAt}),r=()=>x(be,{get when(){return t()},get children(){return x(is,{get matchId(){return t()}})}});return x(co.Provider,{value:t,get children(){return le(()=>!!e.options.disableGlobalCatchBoundary)()?r():x(Bs,{getResetKey:()=>n(),errorComponent:dr,onCatch:o=>{o.message||o.toString()},get children(){return r()}})}})}const Hh=e=>new qh(e);class qh extends hh{constructor(t){super(t)}}typeof globalThis<"u"?(globalThis.createFileRoute=Tn,globalThis.createLazyFileRoute=ta):typeof window<"u"&&(window.createFileRoute=Tn,window.createLazyFileRoute=ta);function Yh({router:e,children:t,...n}){e.update({...e.options,...n,context:{...e.options.context,...n.context}});const r=Nc(),o=e.options.Wrap||Yt;return x(o,{get children(){return x(r.Provider,{value:e,get children(){return t()}})}})}function Jh({router:e,...t}){return x(Yh,N({router:e},t,{children:()=>x(Gh,{})}))}function Xh(e){return we({select:t=>t.location})}var Zh=te('<div class="min-w-0 flex-1 p-4 flex flex-col items-center justify-center gap-6"><div class="flex gap-2 items-center flex-wrap"><button type=button class="px-2 py-1 bg-gray-600 dark:bg-gray-700 rounded text-white uppercase font-extrabold">Try Again');function jc(e){const t=Ne(),n=nt({strict:!1,select:r=>r.id===De});return console.error("DefaultCatchBoundary Error:",e.error),(()=>{var r=Zh(),o=r.firstChild,s=o.firstChild;return re(r,x(dr,{get error(){return e.error}}),o),s.$$click=()=>{t.invalidate()},re(o,(()=>{var i=le(()=>!!n());return()=>i()?x(Rn,{to:"/",class:"px-2 py-1 bg-gray-600 dark:bg-gray-700 rounded text-white uppercase font-extrabold",children:"Home"}):x(Rn,{to:"/",class:"px-2 py-1 bg-gray-600 dark:bg-gray-700 rounded text-white uppercase font-extrabold",onClick:a=>{a.preventDefault(),window.history.back()},children:"Go Back"})})(),null),r})()}oo(["click"]);var Qh=te('<div class="space-y-2 p-2"><div class="text-gray-600 dark:text-gray-400"></div><p class="flex items-center gap-2 flex-wrap"><button type=button class="bg-emerald-500 text-white px-2 py-1 rounded uppercase font-black text-sm">Go back'),ep=te("<p>The page you are looking for does not exist.");function zc(e){return(()=>{var t=Qh(),n=t.firstChild,r=n.nextSibling,o=r.firstChild;return re(n,()=>e.children||ep()),o.$$click=()=>window.history.back(),re(r,x(Rn,{to:"/",class:"bg-cyan-600 text-white px-2 py-1 rounded uppercase font-black text-sm",children:"Start Over"}),null),t})()}oo(["click"]);function tp(e,t,n,r){return e.addEventListener(t,n,r),Ph(e.removeEventListener.bind(e,t,n,r))}function np(e,t,n,r){const o=()=>{Zi(E(e)).forEach(s=>{s&&Zi(E(t)).forEach(i=>tp(s,i,n,r))})};typeof e=="function"?G(o):Fe(o)}const rp=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g;function ra(e){const t={};let n;for(;n=rp.exec(e);)t[n[1]]=n[2];return t}function uo(e,t){if(typeof e=="string"){if(typeof t=="string")return`${e};${t}`;e=ra(e)}else typeof t=="string"&&(t=ra(t));return{...e,...t}}function op(e,t,n=-1){return n in e?[...e.slice(0,n),t,...e.slice(n)]:[...e,t]}function as(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function sp(e){return typeof e=="number"}function mn(e){return Object.prototype.toString.call(e)==="[object String]"}function ip(e){return typeof e=="function"}function fo(e){return t=>`${e()}-${t}`}function je(e,t){return e?e===t||e.contains(t):!1}function Hn(e,t=!1){const{activeElement:n}=ct(e);if(!n?.nodeName)return null;if(Vc(n)&&n.contentDocument)return Hn(n.contentDocument.body,t);if(t){const r=n.getAttribute("aria-activedescendant");if(r){const o=ct(n).getElementById(r);if(o)return o}}return n}function ap(e){return ct(e).defaultView||window}function ct(e){return e?e.ownerDocument||e:document}function Vc(e){return e.tagName==="IFRAME"}var Gc=(e=>(e.Escape="Escape",e.Enter="Enter",e.Tab="Tab",e.Space=" ",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e))(Gc||{});function Gs(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.userAgentData?.platform||window.navigator.platform):!1}function ho(){return Gs(/^Mac/i)}function cp(){return Gs(/^iPhone/i)}function lp(){return Gs(/^iPad/i)||ho()&&navigator.maxTouchPoints>1}function up(){return cp()||lp()}function dp(){return ho()||up()}function pe(e,t){return t&&(ip(t)?t(e):t[0](t[1],e)),e?.defaultPrevented}function Ce(e){return t=>{for(const n of e)pe(t,n)}}function fp(e){return ho()?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey}function Se(e){if(e)if(hp())e.focus({preventScroll:!0});else{const t=pp(e);e.focus(),gp(t)}}var Sr=null;function hp(){if(Sr==null){Sr=!1;try{document.createElement("div").focus({get preventScroll(){return Sr=!0,!0}})}catch{}}return Sr}function pp(e){let t=e.parentNode;const n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function gp(e){for(const{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}var Wc=["input:not([type='hidden']):not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","[tabindex]","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]:not([contenteditable='false'])"],mp=[...Wc,'[tabindex]:not([tabindex="-1"]):not([disabled])'],Ws=`${Wc.join(":not([hidden]),")},[tabindex]:not([disabled]):not([hidden])`,yp=mp.join(':not([hidden]):not([tabindex="-1"]),');function Hc(e,t){const r=Array.from(e.querySelectorAll(Ws)).filter(oa);return t&&oa(e)&&r.unshift(e),r.forEach((o,s)=>{if(Vc(o)&&o.contentDocument){const i=o.contentDocument.body,a=Hc(i,!1);r.splice(s,1,...a)}}),r}function oa(e){return qc(e)&&!vp(e)}function qc(e){return e.matches(Ws)&&Hs(e)}function vp(e){return Number.parseInt(e.getAttribute("tabindex")||"0",10)<0}function Hs(e,t){return e.nodeName!=="#comment"&&bp(e)&&xp(e,t)&&(!e.parentElement||Hs(e.parentElement,e))}function bp(e){if(!(e instanceof HTMLElement)&&!(e instanceof SVGElement))return!1;const{display:t,visibility:n}=e.style;let r=t!=="none"&&n!=="hidden"&&n!=="collapse";if(r){if(!e.ownerDocument.defaultView)return r;const{getComputedStyle:o}=e.ownerDocument.defaultView,{display:s,visibility:i}=o(e);r=s!=="none"&&i!=="hidden"&&i!=="collapse"}return r}function xp(e,t){return!e.hasAttribute("hidden")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function Sp(e,t,n){const r=t?.tabbable?yp:Ws,o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(s){return t?.from?.contains(s)?NodeFilter.FILTER_REJECT:s.matches(r)&&Hs(s)&&(!t?.accept||t.accept(s))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t?.from&&(o.currentNode=t.from),o}function sa(e){let t=e;for(;t&&!Cp(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}function Cp(e){const t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function wp(){}function _p(e,t){const[n,r]=e;let o=!1;const s=t.length;for(let i=s,a=0,c=i-1;a<i;c=a++){const[l,u]=t[a],[d,f]=t[c],[,h]=t[c===0?i-1:c-1]||[0,0],p=(u-f)*(n-l)-(l-d)*(r-u);if(f<u){if(r>=f&&r<u){if(p===0)return!0;p>0&&(r===f?r>h&&(o=!o):o=!o)}}else if(u<f){if(r>u&&r<=f){if(p===0)return!0;p<0&&(r===f?r<h&&(o=!o):o=!o)}}else if(r===u&&(n>=d&&n<=l||n>=l&&n<=d))return!0}return o}function ae(e,t){return N(e,t)}var Bn=new Map,ia=new Set;function aa(){if(typeof window>"u")return;const e=n=>{if(!n.target)return;let r=Bn.get(n.target);r||(r=new Set,Bn.set(n.target,r),n.target.addEventListener("transitioncancel",t)),r.add(n.propertyName)},t=n=>{if(!n.target)return;const r=Bn.get(n.target);if(r&&(r.delete(n.propertyName),r.size===0&&(n.target.removeEventListener("transitioncancel",t),Bn.delete(n.target)),Bn.size===0)){for(const o of ia)o();ia.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?aa():document.addEventListener("DOMContentLoaded",aa));function cs(e,t){const n=ca(e,t,"left"),r=ca(e,t,"top"),o=t.offsetWidth,s=t.offsetHeight;let i=e.scrollLeft,a=e.scrollTop;const c=i+e.offsetWidth,l=a+e.offsetHeight;n<=i?i=n:n+o>c&&(i+=n+o-c),r<=a?a=r:r+s>l&&(a+=r+s-l),e.scrollLeft=i,e.scrollTop=a}function ca(e,t,n){const r=n==="left"?"offsetLeft":"offsetTop";let o=0;for(;t.offsetParent&&(o+=t[r],t.offsetParent!==e);){if(t.offsetParent.contains(e)){o-=e[r];break}t=t.offsetParent}return o}function Pp(e,t){if(document.contains(e)){const n=document.scrollingElement||document.documentElement;if(window.getComputedStyle(n).overflow==="hidden"){let o=sa(e);for(;e&&o&&e!==n&&o!==n;)cs(o,e),e=o,o=sa(e)}else{const{left:o,top:s}=e.getBoundingClientRect();e?.scrollIntoView?.({block:"nearest"});const{left:i,top:a}=e.getBoundingClientRect();(Math.abs(o-i)>1||Math.abs(s-a)>1)&&e.scrollIntoView?.({block:"nearest"})}}}var kp={border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:"0",position:"absolute",width:"1px","white-space":"nowrap"};function qs(e,t){const[n,r]=z(la(t?.()));return G(()=>{r(e()?.tagName.toLowerCase()||la(t?.()))}),n}function la(e){return mn(e)?e:void 0}function Pe(e){const[t,n]=J(e,["as"]);if(!t.as)throw new Error("[kobalte]: Polymorphic is missing the required `as` prop.");return x($e,N(n,{get component(){return t.as}}))}var Rp=Object.defineProperty,po=(e,t)=>{for(var n in t)Rp(e,n,{get:t[n],enumerable:!0})},Tp={};po(Tp,{Button:()=>Mp,Root:()=>Mn});var Ip=["button","color","file","image","reset","submit"];function Ep(e){const t=e.tagName.toLowerCase();return t==="button"?!0:t==="input"&&e.type?Ip.indexOf(e.type)!==-1:!1}function Mn(e){let t;const n=ae({type:"button"},e),[r,o]=J(n,["ref","type","disabled"]),s=qs(()=>t,()=>"button"),i=W(()=>{const l=s();return l==null?!1:Ep({tagName:l,type:r.type})}),a=W(()=>s()==="input"),c=W(()=>s()==="a"&&t?.getAttribute("href")!=null);return x(Pe,N({as:"button",ref(l){var u=Ee(d=>t=d,r.ref);typeof u=="function"&&u(l)},get type(){return i()||a()?r.type:void 0},get role(){return!i()&&!c()?"button":void 0},get tabIndex(){return!i()&&!c()&&!r.disabled?0:void 0},get disabled(){return i()||a()?r.disabled:void 0},get"aria-disabled"(){return!i()&&!a()&&r.disabled?!0:void 0},get"data-disabled"(){return r.disabled?"":void 0}},o))}var Mp=Mn;function go(e){const[t,n]=z(e.defaultValue?.()),r=W(()=>e.value?.()!==void 0),o=W(()=>r()?e.value?.():t());return[o,i=>{ge(()=>{const a=_h(i,o());return Object.is(a,o())||(r()||n(a),e.onChange?.(a)),a})}]}function Yc(e){const[t,n]=go(e);return[()=>t()??!1,n]}function Lp(e){const[t,n]=go(e);return[()=>t()??[],n]}function Op(e={}){const[t,n]=Yc({value:()=>E(e.isSelected),defaultValue:()=>!!E(e.defaultIsSelected),onChange:s=>e.onSelectedChange?.(s)});return{isSelected:t,setIsSelected:s=>{!E(e.isReadOnly)&&!E(e.isDisabled)&&n(s)},toggle:()=>{!E(e.isReadOnly)&&!E(e.isDisabled)&&n(!t())}}}function Jc(e){let t=e.startIndex??0;const n=e.startLevel??0,r=[],o=c=>{if(c==null)return"";const l=e.getKey??"key",u=mn(l)?c[l]:l(c);return u!=null?String(u):""},s=c=>{if(c==null)return"";const l=e.getTextValue??"textValue",u=mn(l)?c[l]:l(c);return u!=null?String(u):""},i=c=>{if(c==null)return!1;const l=e.getDisabled??"disabled";return(mn(l)?c[l]:l(c))??!1},a=c=>{if(c!=null)return mn(e.getSectionChildren)?c[e.getSectionChildren]:e.getSectionChildren?.(c)};for(const c of e.dataSource){if(mn(c)||sp(c)){r.push({type:"item",rawValue:c,key:String(c),textValue:String(c),disabled:i(c),level:n,index:t}),t++;continue}if(a(c)!=null){r.push({type:"section",rawValue:c,key:"",textValue:"",disabled:!1,level:n,index:t}),t++;const l=a(c)??[];if(l.length>0){const u=Jc({dataSource:l,getKey:e.getKey,getTextValue:e.getTextValue,getDisabled:e.getDisabled,getSectionChildren:e.getSectionChildren,startIndex:t,startLevel:n+1});r.push(...u),t+=u.length}}else r.push({type:"item",rawValue:c,key:o(c),textValue:s(c),disabled:i(c),level:n,index:t}),t++}return r}function Ap(e,t=[]){return W(()=>{const n=Jc({dataSource:E(e.dataSource),getKey:E(e.getKey),getTextValue:E(e.getTextValue),getDisabled:E(e.getDisabled),getSectionChildren:E(e.getSectionChildren)});for(let r=0;r<t.length;r++)t[r]();return e.factory(n)})}var Dp=new Set(["Avst","Arab","Armi","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),$p=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function Fp(e){if(Intl.Locale){const n=new Intl.Locale(e).maximize().script??"";return Dp.has(n)}const t=e.split("-")[0];return $p.has(t)}function Np(e){return Fp(e)?"rtl":"ltr"}function Xc(){let e=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:Np(e)}}var ls=Xc(),qn=new Set;function ua(){ls=Xc();for(const e of qn)e(ls)}function Bp(){const[e,t]=z(ls),n=W(()=>e());return Vt(()=>{qn.size===0&&window.addEventListener("languagechange",ua),qn.add(t),q(()=>{qn.delete(t),qn.size===0&&window.removeEventListener("languagechange",ua)})}),{locale:()=>n().locale,direction:()=>n().direction}}var Kp=me();function Gt(){const e=Bp();return ue(Kp)||e}var Do=new Map;function Up(e){const{locale:t}=Gt(),n=W(()=>t()+(e?Object.entries(e).sort((r,o)=>r[0]<o[0]?-1:1).join():""));return W(()=>{const r=n();let o;return Do.has(r)&&(o=Do.get(r)),o||(o=new Intl.Collator(t(),e),Do.set(r,o)),o})}var vt=class Zc extends Set{anchorKey;currentKey;constructor(t,n,r){super(t),t instanceof Zc?(this.anchorKey=n||t.anchorKey,this.currentKey=r||t.currentKey):(this.anchorKey=n,this.currentKey=r)}};function jp(e){const[t,n]=go(e);return[()=>t()??new vt,n]}function Qc(e){return dp()?e.altKey:e.ctrlKey}function yn(e){return ho()?e.metaKey:e.ctrlKey}function da(e){return new vt(e)}function zp(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Vp(e){const t=ae({selectionMode:"none",selectionBehavior:"toggle"},e),[n,r]=z(!1),[o,s]=z(),i=W(()=>{const m=E(t.selectedKeys);return m!=null?da(m):m}),a=W(()=>{const m=E(t.defaultSelectedKeys);return m!=null?da(m):new vt}),[c,l]=jp({value:i,defaultValue:a,onChange:m=>t.onSelectionChange?.(m)}),[u,d]=z(E(t.selectionBehavior)),f=()=>E(t.selectionMode),h=()=>E(t.disallowEmptySelection)??!1,p=m=>{(E(t.allowDuplicateSelectionEvents)||!zp(m,c()))&&l(m)};return G(()=>{const m=c();E(t.selectionBehavior)==="replace"&&u()==="toggle"&&typeof m=="object"&&m.size===0&&d("replace")}),G(()=>{d(E(t.selectionBehavior)??"toggle")}),{selectionMode:f,disallowEmptySelection:h,selectionBehavior:u,setSelectionBehavior:d,isFocused:n,setFocused:r,focusedKey:o,setFocusedKey:s,selectedKeys:c,setSelectedKeys:p}}function Gp(e){const[t,n]=z(""),[r,o]=z(-1);return{typeSelectHandlers:{onKeyDown:i=>{if(E(e.isDisabled))return;const a=E(e.keyboardDelegate),c=E(e.selectionManager);if(!a.getKeyForSearch)return;const l=Wp(i.key);if(!l||i.ctrlKey||i.metaKey)return;l===" "&&t().trim().length>0&&(i.preventDefault(),i.stopPropagation());let u=n(f=>f+l),d=a.getKeyForSearch(u,c.focusedKey())??a.getKeyForSearch(u);d==null&&Hp(u)&&(u=u[0],d=a.getKeyForSearch(u,c.focusedKey())??a.getKeyForSearch(u)),d!=null&&(c.setFocusedKey(d),e.onTypeSelect?.(d)),clearTimeout(r()),o(window.setTimeout(()=>n(""),500))}}}}function Wp(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function Hp(e){return e.split("").every(t=>t===e[0])}function qp(e,t,n){const o=N({selectOnFocus:()=>E(e.selectionManager).selectionBehavior()==="replace"},e),s=()=>t(),{direction:i}=Gt();let a={top:0,left:0};np(()=>E(o.isVirtualized)?void 0:s(),"scroll",()=>{const g=s();g&&(a={top:g.scrollTop,left:g.scrollLeft})});const{typeSelectHandlers:c}=Gp({isDisabled:()=>E(o.disallowTypeAhead),keyboardDelegate:()=>E(o.keyboardDelegate),selectionManager:()=>E(o.selectionManager)}),l=()=>E(o.orientation)??"vertical",u=g=>{pe(g,c.onKeyDown),g.altKey&&g.key==="Tab"&&g.preventDefault();const y=t();if(!y?.contains(g.target))return;const v=E(o.selectionManager),b=E(o.selectOnFocus),C=S=>{S!=null&&(v.setFocusedKey(S),g.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(S):b&&!Qc(g)&&v.replaceSelection(S))},w=E(o.keyboardDelegate),R=E(o.shouldFocusWrap),T=v.focusedKey();switch(g.key){case(l()==="vertical"?"ArrowDown":"ArrowRight"):{if(w.getKeyBelow){g.preventDefault();let S;T!=null?S=w.getKeyBelow(T):S=w.getFirstKey?.(),S==null&&R&&(S=w.getFirstKey?.(T)),C(S)}break}case(l()==="vertical"?"ArrowUp":"ArrowLeft"):{if(w.getKeyAbove){g.preventDefault();let S;T!=null?S=w.getKeyAbove(T):S=w.getLastKey?.(),S==null&&R&&(S=w.getLastKey?.(T)),C(S)}break}case(l()==="vertical"?"ArrowLeft":"ArrowUp"):{if(w.getKeyLeftOf){g.preventDefault();const S=i()==="rtl";let P;T!=null?P=w.getKeyLeftOf(T):P=S?w.getFirstKey?.():w.getLastKey?.(),C(P)}break}case(l()==="vertical"?"ArrowRight":"ArrowDown"):{if(w.getKeyRightOf){g.preventDefault();const S=i()==="rtl";let P;T!=null?P=w.getKeyRightOf(T):P=S?w.getLastKey?.():w.getFirstKey?.(),C(P)}break}case"Home":if(w.getFirstKey){g.preventDefault();const S=w.getFirstKey(T,yn(g));S!=null&&(v.setFocusedKey(S),yn(g)&&g.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(S):b&&v.replaceSelection(S))}break;case"End":if(w.getLastKey){g.preventDefault();const S=w.getLastKey(T,yn(g));S!=null&&(v.setFocusedKey(S),yn(g)&&g.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(S):b&&v.replaceSelection(S))}break;case"PageDown":if(w.getKeyPageBelow&&T!=null){g.preventDefault();const S=w.getKeyPageBelow(T);C(S)}break;case"PageUp":if(w.getKeyPageAbove&&T!=null){g.preventDefault();const S=w.getKeyPageAbove(T);C(S)}break;case"a":yn(g)&&v.selectionMode()==="multiple"&&E(o.disallowSelectAll)!==!0&&(g.preventDefault(),v.selectAll());break;case"Escape":g.defaultPrevented||(g.preventDefault(),E(o.disallowEmptySelection)||v.clearSelection());break;case"Tab":if(!E(o.allowsTabNavigation)){if(g.shiftKey)y.focus();else{const S=Sp(y,{tabbable:!0});let P,L;do L=S.lastChild(),L&&(P=L);while(L);P&&!P.contains(document.activeElement)&&Se(P)}break}}},d=g=>{const y=E(o.selectionManager),v=E(o.keyboardDelegate),b=E(o.selectOnFocus);if(y.isFocused()){g.currentTarget.contains(g.target)||y.setFocused(!1);return}if(g.currentTarget.contains(g.target)){if(y.setFocused(!0),y.focusedKey()==null){const C=R=>{R!=null&&(y.setFocusedKey(R),b&&y.replaceSelection(R))},w=g.relatedTarget;w&&g.currentTarget.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_FOLLOWING?C(y.lastSelectedKey()??v.getLastKey?.()):C(y.firstSelectedKey()??v.getFirstKey?.())}else if(!E(o.isVirtualized)){const C=s();if(C){C.scrollTop=a.top,C.scrollLeft=a.left;const w=C.querySelector(`[data-key="${y.focusedKey()}"]`);w&&(Se(w),cs(C,w))}}}},f=g=>{const y=E(o.selectionManager);g.currentTarget.contains(g.relatedTarget)||y.setFocused(!1)},h=g=>{s()===g.target&&g.preventDefault()},p=()=>{const g=E(o.autoFocus);if(!g)return;const y=E(o.selectionManager),v=E(o.keyboardDelegate);let b;g==="first"&&(b=v.getFirstKey?.()),g==="last"&&(b=v.getLastKey?.());const C=y.selectedKeys();C.size&&(b=C.values().next().value),y.setFocused(!0),y.setFocusedKey(b);const w=t();w&&b==null&&!E(o.shouldUseVirtualFocus)&&Se(w)};return Vt(()=>{o.deferAutoFocus?setTimeout(p,0):p()}),G(it([s,()=>E(o.isVirtualized),()=>E(o.selectionManager).focusedKey()],g=>{const[y,v,b]=g;if(v)b&&o.scrollToKey?.(b);else if(b&&y){const C=y.querySelector(`[data-key="${b}"]`);C&&cs(y,C)}})),{tabIndex:W(()=>{if(!E(o.shouldUseVirtualFocus))return E(o.selectionManager).focusedKey()==null?0:-1}),onKeyDown:u,onMouseDown:h,onFocusIn:d,onFocusOut:f}}function el(e,t){const n=()=>E(e.selectionManager),r=()=>E(e.key),o=()=>E(e.shouldUseVirtualFocus),s=v=>{n().selectionMode()!=="none"&&(n().selectionMode()==="single"?n().isSelected(r())&&!n().disallowEmptySelection()?n().toggleSelection(r()):n().replaceSelection(r()):v?.shiftKey?n().extendSelection(r()):n().selectionBehavior()==="toggle"||yn(v)||"pointerType"in v&&v.pointerType==="touch"?n().toggleSelection(r()):n().replaceSelection(r()))},i=()=>n().isSelected(r()),a=()=>E(e.disabled)||n().isDisabled(r()),c=()=>!a()&&n().canSelectItem(r());let l=null;const u=v=>{c()&&(l=v.pointerType,v.pointerType==="mouse"&&v.button===0&&!E(e.shouldSelectOnPressUp)&&s(v))},d=v=>{c()&&v.pointerType==="mouse"&&v.button===0&&E(e.shouldSelectOnPressUp)&&E(e.allowsDifferentPressOrigin)&&s(v)},f=v=>{c()&&(E(e.shouldSelectOnPressUp)&&!E(e.allowsDifferentPressOrigin)||l!=="mouse")&&s(v)},h=v=>{!c()||!["Enter"," "].includes(v.key)||(Qc(v)?n().toggleSelection(r()):s(v))},p=v=>{a()&&v.preventDefault()},m=v=>{const b=t();o()||a()||!b||v.target===b&&n().setFocusedKey(r())},g=W(()=>{if(!(o()||a()))return r()===n().focusedKey()?0:-1}),y=W(()=>E(e.virtualized)?void 0:r());return G(it([t,r,o,()=>n().focusedKey(),()=>n().isFocused()],([v,b,C,w,R])=>{v&&b===w&&R&&!C&&document.activeElement!==v&&(e.focus?e.focus():Se(v))})),{isSelected:i,isDisabled:a,allowsSelection:c,tabIndex:g,dataKey:y,onPointerDown:u,onPointerUp:d,onClick:f,onKeyDown:h,onMouseDown:p,onFocus:m}}var Yp=class{collection;state;constructor(e,t){this.collection=e,this.state=t}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}isFocused(){return this.state.isFocused()}setFocused(e){this.state.setFocused(e)}focusedKey(){return this.state.focusedKey()}setFocusedKey(e){(e==null||this.collection().getItem(e))&&this.state.setFocusedKey(e)}selectedKeys(){return this.state.selectedKeys()}isSelected(e){if(this.state.selectionMode()==="none")return!1;const t=this.getKey(e);return t==null?!1:this.state.selectedKeys().has(t)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return!1;const e=this.state.selectedKeys();return this.getAllSelectableKeys().every(t=>e.has(t))}firstSelectedKey(){let e;for(const t of this.state.selectedKeys()){const n=this.collection().getItem(t),r=n?.index!=null&&e?.index!=null&&n.index<e.index;(!e||r)&&(e=n)}return e?.key}lastSelectedKey(){let e;for(const t of this.state.selectedKeys()){const n=this.collection().getItem(t),r=n?.index!=null&&e?.index!=null&&n.index>e.index;(!e||r)&&(e=n)}return e?.key}extendSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const n=this.state.selectedKeys(),r=n.anchorKey||t,o=new vt(n,r,t);for(const s of this.getKeyRange(r,n.currentKey||t))o.delete(s);for(const s of this.getKeyRange(t,r))this.canSelectItem(s)&&o.add(s);this.state.setSelectedKeys(o)}getKeyRange(e,t){const n=this.collection().getItem(e),r=this.collection().getItem(t);return n&&r?n.index!=null&&r.index!=null&&n.index<=r.index?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){const n=[];let r=e;for(;r!=null;){const o=this.collection().getItem(r);if(o&&o.type==="item"&&n.push(r),r===t)return n;r=this.collection().getKeyAfter(r)}return[]}getKey(e){const t=this.collection().getItem(e);return t?!t||t.type!=="item"?null:t.key:e}toggleSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const n=new vt(this.state.selectedKeys());n.has(t)?n.delete(t):this.canSelectItem(t)&&(n.add(t),n.anchorKey=t,n.currentKey=t),!(this.disallowEmptySelection()&&n.size===0)&&this.state.setSelectedKeys(n)}replaceSelection(e){if(this.selectionMode()==="none")return;const t=this.getKey(e);if(t==null)return;const n=this.canSelectItem(t)?new vt([t],t,t):new vt;this.state.setSelectedKeys(n)}setSelectedKeys(e){if(this.selectionMode()==="none")return;const t=new vt;for(const n of e){const r=this.getKey(n);if(r!=null&&(t.add(r),this.selectionMode()==="single"))break}this.state.setSelectedKeys(t)}selectAll(){this.selectionMode()==="multiple"&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()))}clearSelection(){const e=this.state.selectedKeys();!this.disallowEmptySelection()&&e.size>0&&this.state.setSelectedKeys(new vt)}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode()!=="none"&&(this.selectionMode()==="single"?this.isSelected(e)&&!this.disallowEmptySelection()?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior()==="toggle"||t&&t.pointerType==="touch"?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys())return!0;const t=this.selectedKeys();if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;for(const n of t)if(!e.has(n))return!1;return!0}canSelectItem(e){if(this.state.selectionMode()==="none")return!1;const t=this.collection().getItem(e);return t!=null&&!t.disabled}isDisabled(e){const t=this.collection().getItem(e);return!t||t.disabled}getAllSelectableKeys(){const e=[];return(n=>{for(;n!=null;){if(this.canSelectItem(n)){const r=this.collection().getItem(n);if(!r)continue;r.type==="item"&&e.push(n)}n=this.collection().getKeyAfter(n)}})(this.collection().getFirstKey()),e}},fa=class{keyMap=new Map;iterable;firstKey;lastKey;constructor(e){this.iterable=e;for(const r of e)this.keyMap.set(r.key,r);if(this.keyMap.size===0)return;let t,n=0;for(const[r,o]of this.keyMap)t?(t.nextKey=r,o.prevKey=t.key):(this.firstKey=r,o.prevKey=void 0),o.type==="item"&&(o.index=n++),t=o,t.nextKey=void 0;this.lastKey=t.key}*[Symbol.iterator](){yield*this.iterable}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){return this.keyMap.get(e)?.prevKey}getKeyAfter(e){return this.keyMap.get(e)?.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}};function Jp(e){const t=Vp(e),r=Ap({dataSource:()=>E(e.dataSource),getKey:()=>E(e.getKey),getTextValue:()=>E(e.getTextValue),getDisabled:()=>E(e.getDisabled),getSectionChildren:()=>E(e.getSectionChildren),factory:s=>e.filter?new fa(e.filter(s)):new fa(s)},[()=>e.filter]),o=new Yp(r,t);return Fr(()=>{const s=t.focusedKey();s!=null&&!r().getItem(s)&&t.setFocusedKey(void 0)}),{collection:r,selectionManager:()=>o}}var tl=me();function nl(){return ue(tl)}function Xp(){const e=nl();if(e===void 0)throw new Error("[kobalte]: `useDomCollectionContext` must be used within a `DomCollectionProvider` component");return e}function rl(e,t){return!!(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}function Zp(e,t){const n=t.ref();if(!n)return-1;let r=e.length;if(!r)return-1;for(;r--;){const o=e[r]?.ref();if(o&&rl(o,n))return r+1}return 0}function Qp(e){const t=e.map((r,o)=>[o,r]);let n=!1;return t.sort(([r,o],[s,i])=>{const a=o.ref(),c=i.ref();return a===c||!a||!c?0:rl(a,c)?(r>s&&(n=!0),-1):(r<s&&(n=!0),1)}),n?t.map(([r,o])=>o):e}function ol(e,t){const n=Qp(e);e!==n&&t(n)}function eg(e){const t=e[0],n=e[e.length-1]?.ref();let r=t?.ref()?.parentElement;for(;r;){if(n&&r.contains(n))return r;r=r.parentElement}return ct(r).body}function tg(e,t){G(()=>{const n=setTimeout(()=>{ol(e(),t)});q(()=>clearTimeout(n))})}function ng(e,t){if(typeof IntersectionObserver!="function"){tg(e,t);return}let n=[];G(()=>{const r=()=>{const i=!!n.length;n=e(),i&&ol(e(),t)},o=eg(e()),s=new IntersectionObserver(r,{root:o});for(const i of e()){const a=i.ref();a&&s.observe(a)}q(()=>s.disconnect())})}function rg(e={}){const[t,n]=Lp({value:()=>E(e.items),onChange:s=>e.onItemsChange?.(s)});ng(t,n);const r=s=>(n(i=>{const a=Zp(i,s);return op(i,s,a)}),()=>{n(i=>{const a=i.filter(c=>c.ref()!==s.ref());return i.length===a.length?i:a})});return{DomCollectionProvider:s=>x(tl.Provider,{value:{registerItem:r},get children(){return s.children}})}}function og(e){const t=Xp(),n=ae({shouldRegisterItem:!0},e);G(()=>{if(!n.shouldRegisterItem)return;const r=t.registerItem(n.getItem());q(r)})}const sg=["top","right","bottom","left"],Kt=Math.min,Ue=Math.max,Jr=Math.round,Cr=Math.floor,at=e=>({x:e,y:e}),ig={left:"right",right:"left",bottom:"top",top:"bottom"},ag={start:"end",end:"start"};function us(e,t,n){return Ue(e,Kt(t,n))}function sn(e,t){return typeof e=="function"?e(t):e}function Ut(e){return e.split("-")[0]}function Ln(e){return e.split("-")[1]}function sl(e){return e==="x"?"y":"x"}function Ys(e){return e==="y"?"height":"width"}const cg=new Set(["top","bottom"]);function xt(e){return cg.has(Ut(e))?"y":"x"}function Js(e){return sl(xt(e))}function lg(e,t,n){n===void 0&&(n=!1);const r=Ln(e),o=Js(e),s=Ys(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=Xr(i)),[i,Xr(i)]}function ug(e){const t=Xr(e);return[ds(e),t,ds(t)]}function ds(e){return e.replace(/start|end/g,t=>ag[t])}const ha=["left","right"],pa=["right","left"],dg=["top","bottom"],fg=["bottom","top"];function hg(e,t,n){switch(e){case"top":case"bottom":return n?t?pa:ha:t?ha:pa;case"left":case"right":return t?dg:fg;default:return[]}}function pg(e,t,n,r){const o=Ln(e);let s=hg(Ut(e),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),t&&(s=s.concat(s.map(ds)))),s}function Xr(e){return e.replace(/left|right|bottom|top/g,t=>ig[t])}function gg(e){return{top:0,right:0,bottom:0,left:0,...e}}function il(e){return typeof e!="number"?gg(e):{top:e,right:e,bottom:e,left:e}}function Zr(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function ga(e,t,n){let{reference:r,floating:o}=e;const s=xt(t),i=Js(t),a=Ys(i),c=Ut(t),l=s==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[a]/2-o[a]/2;let h;switch(c){case"top":h={x:u,y:r.y-o.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-o.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Ln(t)){case"start":h[i]-=f*(n&&l?-1:1);break;case"end":h[i]+=f*(n&&l?-1:1);break}return h}const mg=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=ga(l,r,c),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:C,reset:w}=await y({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:h,rects:l,platform:i,elements:{reference:e,floating:t}});u=v??u,d=b??d,h={...h,[g]:{...h[g],...C}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(l=w.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):w.rects),{x:u,y:d}=ga(l,f,c)),m=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:h}};async function rr(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=sn(t,e),p=il(h),g=a[f?d==="floating"?"reference":"floating":d],y=Zr(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),v=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),C=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},w=Zr(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:c}):v);return{top:(y.top-w.top+p.top)/C.y,bottom:(w.bottom-y.bottom+p.bottom)/C.y,left:(y.left-w.left+p.left)/C.x,right:(w.right-y.right+p.right)/C.x}}const yg=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:c}=t,{element:l,padding:u=0}=sn(e,t)||{};if(l==null)return{};const d=il(u),f={x:n,y:r},h=Js(o),p=Ys(h),m=await i.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",C=s.reference[p]+s.reference[h]-f[h]-s.floating[p],w=f[h]-s.reference[h],R=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l));let T=R?R[b]:0;(!T||!await(i.isElement==null?void 0:i.isElement(R)))&&(T=a.floating[b]||s.floating[p]);const S=C/2-w/2,P=T/2-m[p]/2-1,L=Kt(d[y],P),O=Kt(d[v],P),A=L,H=T-m[p]-O,F=T/2-m[p]/2+S,ee=us(A,F,H),Q=!c.arrow&&Ln(o)!=null&&F!==ee&&s.reference[p]/2-(F<A?L:O)-m[p]/2<0,D=Q?F<A?F-A:F-H:0;return{[h]:f[h]+D,data:{[h]:ee,centerOffset:F-ee-D,...Q&&{alignmentOffset:D}},reset:Q}}}),vg=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=sn(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Ut(o),v=xt(a),b=Ut(a)===a,C=await(c.isRTL==null?void 0:c.isRTL(l.floating)),w=f||(b||!m?[Xr(a)]:ug(a)),R=p!=="none";!f&&R&&w.push(...pg(a,m,p,C));const T=[a,...w],S=await rr(t,g),P=[];let L=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&P.push(S[y]),d){const F=lg(o,i,C);P.push(S[F[0]],S[F[1]])}if(L=[...L,{placement:o,overflows:P}],!P.every(F=>F<=0)){var O,A;const F=(((O=s.flip)==null?void 0:O.index)||0)+1,ee=T[F];if(ee&&(!(d==="alignment"?v!==xt(ee):!1)||L.every(I=>xt(I.placement)===v?I.overflows[0]>0:!0)))return{data:{index:F,overflows:L},reset:{placement:ee}};let Q=(A=L.filter(D=>D.overflows[0]<=0).sort((D,I)=>D.overflows[1]-I.overflows[1])[0])==null?void 0:A.placement;if(!Q)switch(h){case"bestFit":{var H;const D=(H=L.filter(I=>{if(R){const ie=xt(I.placement);return ie===v||ie==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(ie=>ie>0).reduce((ie,Be)=>ie+Be,0)]).sort((I,ie)=>I[1]-ie[1])[0])==null?void 0:H[0];D&&(Q=D);break}case"initialPlacement":Q=a;break}if(o!==Q)return{reset:{placement:Q}}}return{}}}};function ma(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ya(e){return sg.some(t=>e[t]>=0)}const bg=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=sn(e,t);switch(r){case"referenceHidden":{const s=await rr(t,{...o,elementContext:"reference"}),i=ma(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:ya(i)}}}case"escaped":{const s=await rr(t,{...o,altBoundary:!0}),i=ma(s,n.floating);return{data:{escapedOffsets:i,escaped:ya(i)}}}default:return{}}}}},xg=new Set(["left","top"]);async function Sg(e,t){const{placement:n,platform:r,elements:o}=e,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Ut(n),a=Ln(n),c=xt(n)==="y",l=xg.has(i)?-1:1,u=s&&c?-1:1,d=sn(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),c?{x:h*u,y:f*l}:{x:f*l,y:h*u}}const Cg=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=t,c=await Sg(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+c.x,y:s+c.y,data:{...c,placement:i}}}}},wg=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...c}=sn(e,t),l={x:n,y:r},u=await rr(t,c),d=xt(Ut(o)),f=sl(d);let h=l[f],p=l[d];if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=h+u[g],b=h-u[y];h=us(v,h,b)}if(i){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=p+u[g],b=p-u[y];p=us(v,p,b)}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:s,[d]:i}}}}}},_g=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:s,platform:i,elements:a}=t,{apply:c=()=>{},...l}=sn(e,t),u=await rr(t,l),d=Ut(o),f=Ln(o),h=xt(o)==="y",{width:p,height:m}=s.floating;let g,y;d==="top"||d==="bottom"?(g=d,y=f===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g=f==="end"?"top":"bottom");const v=m-u.top-u.bottom,b=p-u.left-u.right,C=Kt(m-u[g],v),w=Kt(p-u[y],b),R=!t.middlewareData.shift;let T=C,S=w;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(S=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(T=v),R&&!f){const L=Ue(u.left,0),O=Ue(u.right,0),A=Ue(u.top,0),H=Ue(u.bottom,0);h?S=p-2*(L!==0||O!==0?L+O:Ue(u.left,u.right)):T=m-2*(A!==0||H!==0?A+H:Ue(u.top,u.bottom))}await c({...t,availableWidth:S,availableHeight:T});const P=await i.getDimensions(a.floating);return p!==P.width||m!==P.height?{reset:{rects:!0}}:{}}}};function mo(){return typeof window<"u"}function On(e){return al(e)?(e.nodeName||"").toLowerCase():"#document"}function Ge(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ft(e){var t;return(t=(al(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function al(e){return mo()?e instanceof Node||e instanceof Ge(e).Node:!1}function rt(e){return mo()?e instanceof Element||e instanceof Ge(e).Element:!1}function lt(e){return mo()?e instanceof HTMLElement||e instanceof Ge(e).HTMLElement:!1}function va(e){return!mo()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ge(e).ShadowRoot}const Pg=new Set(["inline","contents"]);function fr(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=ot(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Pg.has(o)}const kg=new Set(["table","td","th"]);function Rg(e){return kg.has(On(e))}const Tg=[":popover-open",":modal"];function yo(e){return Tg.some(t=>{try{return e.matches(t)}catch{return!1}})}const Ig=["transform","translate","scale","rotate","perspective"],Eg=["transform","translate","scale","rotate","perspective","filter"],Mg=["paint","layout","strict","content"];function Xs(e){const t=Zs(),n=rt(e)?ot(e):e;return Ig.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Eg.some(r=>(n.willChange||"").includes(r))||Mg.some(r=>(n.contain||"").includes(r))}function Lg(e){let t=jt(e);for(;lt(t)&&!In(t);){if(Xs(t))return t;if(yo(t))return null;t=jt(t)}return null}function Zs(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Og=new Set(["html","body","#document"]);function In(e){return Og.has(On(e))}function ot(e){return Ge(e).getComputedStyle(e)}function vo(e){return rt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function jt(e){if(On(e)==="html")return e;const t=e.assignedSlot||e.parentNode||va(e)&&e.host||ft(e);return va(t)?t.host:t}function cl(e){const t=jt(e);return In(t)?e.ownerDocument?e.ownerDocument.body:e.body:lt(t)&&fr(t)?t:cl(t)}function or(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=cl(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),i=Ge(o);if(s){const a=fs(i);return t.concat(i,i.visualViewport||[],fr(o)?o:[],a&&n?or(a):[])}return t.concat(o,or(o,[],n))}function fs(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ll(e){const t=ot(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=lt(e),s=o?e.offsetWidth:n,i=o?e.offsetHeight:r,a=Jr(n)!==s||Jr(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function Qs(e){return rt(e)?e:e.contextElement}function Sn(e){const t=Qs(e);if(!lt(t))return at(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:s}=ll(t);let i=(s?Jr(n.width):n.width)/r,a=(s?Jr(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const Ag=at(0);function ul(e){const t=Ge(e);return!Zs()||!t.visualViewport?Ag:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Dg(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ge(e)?!1:t}function rn(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=Qs(e);let i=at(1);t&&(r?rt(r)&&(i=Sn(r)):i=Sn(e));const a=Dg(s,n,r)?ul(s):at(0);let c=(o.left+a.x)/i.x,l=(o.top+a.y)/i.y,u=o.width/i.x,d=o.height/i.y;if(s){const f=Ge(s),h=r&&rt(r)?Ge(r):r;let p=f,m=fs(p);for(;m&&r&&h!==p;){const g=Sn(m),y=m.getBoundingClientRect(),v=ot(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,C=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;c*=g.x,l*=g.y,u*=g.x,d*=g.y,c+=b,l+=C,p=Ge(m),m=fs(p)}}return Zr({width:u,height:d,x:c,y:l})}function ei(e,t){const n=vo(e).scrollLeft;return t?t.left+n:rn(ft(e)).left+n}function dl(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),o=r.left+t.scrollLeft-(n?0:ei(e,r)),s=r.top+t.scrollTop;return{x:o,y:s}}function $g(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const s=o==="fixed",i=ft(r),a=t?yo(t.floating):!1;if(r===i||a&&s)return n;let c={scrollLeft:0,scrollTop:0},l=at(1);const u=at(0),d=lt(r);if((d||!d&&!s)&&((On(r)!=="body"||fr(i))&&(c=vo(r)),lt(r))){const h=rn(r);l=Sn(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=i&&!d&&!s?dl(i,c,!0):at(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+f.x,y:n.y*l.y-c.scrollTop*l.y+u.y+f.y}}function Fg(e){return Array.from(e.getClientRects())}function Ng(e){const t=ft(e),n=vo(e),r=e.ownerDocument.body,o=Ue(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Ue(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+ei(e);const a=-n.scrollTop;return ot(r).direction==="rtl"&&(i+=Ue(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}function Bg(e,t){const n=Ge(e),r=ft(e),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,c=0;if(o){s=o.width,i=o.height;const l=Zs();(!l||l&&t==="fixed")&&(a=o.offsetLeft,c=o.offsetTop)}return{width:s,height:i,x:a,y:c}}const Kg=new Set(["absolute","fixed"]);function Ug(e,t){const n=rn(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=lt(e)?Sn(e):at(1),i=e.clientWidth*s.x,a=e.clientHeight*s.y,c=o*s.x,l=r*s.y;return{width:i,height:a,x:c,y:l}}function ba(e,t,n){let r;if(t==="viewport")r=Bg(e,n);else if(t==="document")r=Ng(ft(e));else if(rt(t))r=Ug(t,n);else{const o=ul(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Zr(r)}function fl(e,t){const n=jt(e);return n===t||!rt(n)||In(n)?!1:ot(n).position==="fixed"||fl(n,t)}function jg(e,t){const n=t.get(e);if(n)return n;let r=or(e,[],!1).filter(a=>rt(a)&&On(a)!=="body"),o=null;const s=ot(e).position==="fixed";let i=s?jt(e):e;for(;rt(i)&&!In(i);){const a=ot(i),c=Xs(i);!c&&a.position==="fixed"&&(o=null),(s?!c&&!o:!c&&a.position==="static"&&!!o&&Kg.has(o.position)||fr(i)&&!c&&fl(e,i))?r=r.filter(u=>u!==i):o=a,i=jt(i)}return t.set(e,r),r}function zg(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?yo(t)?[]:jg(t,this._c):[].concat(n),r],a=i[0],c=i.reduce((l,u)=>{const d=ba(t,u,o);return l.top=Ue(d.top,l.top),l.right=Kt(d.right,l.right),l.bottom=Kt(d.bottom,l.bottom),l.left=Ue(d.left,l.left),l},ba(t,a,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Vg(e){const{width:t,height:n}=ll(e);return{width:t,height:n}}function Gg(e,t,n){const r=lt(t),o=ft(t),s=n==="fixed",i=rn(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const c=at(0);function l(){c.x=ei(o)}if(r||!r&&!s)if((On(t)!=="body"||fr(o))&&(a=vo(t)),r){const h=rn(t,!0,s,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else o&&l();s&&!r&&o&&l();const u=o&&!r&&!s?dl(o,a):at(0),d=i.left+a.scrollLeft-c.x-u.x,f=i.top+a.scrollTop-c.y-u.y;return{x:d,y:f,width:i.width,height:i.height}}function $o(e){return ot(e).position==="static"}function xa(e,t){if(!lt(e)||ot(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ft(e)===n&&(n=n.ownerDocument.body),n}function hl(e,t){const n=Ge(e);if(yo(e))return n;if(!lt(e)){let o=jt(e);for(;o&&!In(o);){if(rt(o)&&!$o(o))return o;o=jt(o)}return n}let r=xa(e,t);for(;r&&Rg(r)&&$o(r);)r=xa(r,t);return r&&In(r)&&$o(r)&&!Xs(r)?n:r||Lg(e)||n}const Wg=async function(e){const t=this.getOffsetParent||hl,n=this.getDimensions,r=await n(e.floating);return{reference:Gg(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Hg(e){return ot(e).direction==="rtl"}const pl={convertOffsetParentRelativeRectToViewportRelativeRect:$g,getDocumentElement:ft,getClippingRect:zg,getOffsetParent:hl,getElementRects:Wg,getClientRects:Fg,getDimensions:Vg,getScale:Sn,isElement:rt,isRTL:Hg};function gl(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function qg(e,t){let n=null,r;const o=ft(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const l=e.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=l;if(a||t(),!f||!h)return;const p=Cr(d),m=Cr(o.clientWidth-(u+f)),g=Cr(o.clientHeight-(d+h)),y=Cr(u),b={rootMargin:-p+"px "+-m+"px "+-g+"px "+-y+"px",threshold:Ue(0,Kt(1,c))||1};let C=!0;function w(R){const T=R[0].intersectionRatio;if(T!==c){if(!C)return i();T?i(!1,T):r=setTimeout(()=>{i(!1,1e-7)},1e3)}T===1&&!gl(l,e.getBoundingClientRect())&&i(),C=!1}try{n=new IntersectionObserver(w,{...b,root:o.ownerDocument})}catch{n=new IntersectionObserver(w,b)}n.observe(e)}return i(!0),s}function Yg(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=Qs(e),u=o||s?[...l?or(l):[],...or(t)]:[];u.forEach(y=>{o&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=l&&a?qg(l,n):null;let f=-1,h=null;i&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!c&&h.observe(l),h.observe(t));let p,m=c?rn(e):null;c&&g();function g(){const y=rn(e);m&&!gl(m,y)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;u.forEach(v=>{o&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d?.(),(y=h)==null||y.disconnect(),h=null,c&&cancelAnimationFrame(p)}}const Jg=Cg,Xg=wg,Zg=vg,Qg=_g,em=bg,tm=yg,nm=(e,t,n)=>{const r=new Map,o={platform:pl,...n},s={...o.platform,_c:r};return mg(e,t,{...o,platform:s})};var rm=te('<svg display=block viewBox="0 0 30 30"style=transform:scale(1.02)><g><path fill=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z></path><path stroke=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z>'),ti=me();function ni(){const e=ue(ti);if(e===void 0)throw new Error("[kobalte]: `usePopperContext` must be used within a `Popper` component");return e}var hs=30,Sa=hs/2,om={top:180,right:-90,bottom:0,left:90};function ri(e){const t=ni(),n=ae({size:hs},e),[r,o]=J(n,["ref","style","size"]),s=()=>t.currentPlacement().split("-")[0],i=sm(t.contentRef),a=()=>i()?.getPropertyValue("background-color")||"none",c=()=>i()?.getPropertyValue(`border-${s()}-color`)||"none",l=()=>i()?.getPropertyValue(`border-${s()}-width`)||"0px",u=()=>Number.parseInt(l())*2*(hs/r.size),d=()=>`rotate(${om[s()]} ${Sa} ${Sa}) translate(0 2)`;return x(Pe,N({as:"div",ref(f){var h=Ee(t.setArrowRef,r.ref);typeof h=="function"&&h(f)},"aria-hidden":"true",get style(){return uo({position:"absolute","font-size":`${r.size}px`,width:"1em",height:"1em","pointer-events":"none",fill:a(),stroke:c(),"stroke-width":u()},r.style)}},o,{get children(){var f=rm(),h=f.firstChild,p=h.firstChild;return p.nextSibling,Fe(()=>_n(h,"transform",d())),f}}))}function sm(e){const[t,n]=z();return G(()=>{const r=e();r&&n(ap(r).getComputedStyle(r))}),t}function im(e){const t=ni(),[n,r]=J(e,["ref","style"]);return x(Pe,N({as:"div",ref(o){var s=Ee(t.setPositionerRef,n.ref);typeof s=="function"&&s(o)},"data-popper-positioner":"",get style(){return uo({position:"absolute",top:0,left:0,"min-width":"max-content"},n.style)}},r))}function Ca(e){const{x:t=0,y:n=0,width:r=0,height:o=0}=e??{};if(typeof DOMRect=="function")return new DOMRect(t,n,r,o);const s={x:t,y:n,width:r,height:o,top:n,right:t+r,bottom:n+o,left:t};return{...s,toJSON:()=>s}}function am(e,t){return{contextElement:e,getBoundingClientRect:()=>{const r=t(e);return r?Ca(r):e?e.getBoundingClientRect():Ca()}}}function cm(e){return/^(?:top|bottom|left|right)(?:-(?:start|end))?$/.test(e)}var lm={top:"bottom",right:"left",bottom:"top",left:"right"};function um(e,t){const[n,r]=e.split("-"),o=lm[n];return r?n==="left"||n==="right"?`${o} ${r==="start"?"top":"bottom"}`:r==="start"?`${o} ${t==="rtl"?"right":"left"}`:`${o} ${t==="rtl"?"left":"right"}`:`${o} center`}function dm(e){const t=ae({getAnchorRect:f=>f?.getBoundingClientRect(),placement:"bottom",gutter:0,shift:0,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,hideWhenDetached:!1,detachedPadding:0,arrowPadding:4,overflowPadding:8},e),[n,r]=z(),[o,s]=z(),[i,a]=z(t.placement),c=()=>am(t.anchorRef?.(),t.getAnchorRect),{direction:l}=Gt();async function u(){const f=c(),h=n(),p=o();if(!f||!h)return;const m=(p?.clientHeight||0)/2,g=typeof t.gutter=="number"?t.gutter+m:t.gutter??m;h.style.setProperty("--kb-popper-content-overflow-padding",`${t.overflowPadding}px`),f.getBoundingClientRect();const y=[Jg(({placement:R})=>{const T=!!R.split("-")[1];return{mainAxis:g,crossAxis:T?void 0:t.shift,alignmentAxis:t.shift}})];if(t.flip!==!1){const R=typeof t.flip=="string"?t.flip.split(" "):void 0;if(R!==void 0&&!R.every(cm))throw new Error("`flip` expects a spaced-delimited list of placements");y.push(Zg({padding:t.overflowPadding,fallbackPlacements:R}))}(t.slide||t.overlap)&&y.push(Xg({mainAxis:t.slide,crossAxis:t.overlap,padding:t.overflowPadding})),y.push(Qg({padding:t.overflowPadding,apply({availableWidth:R,availableHeight:T,rects:S}){const P=Math.round(S.reference.width);R=Math.floor(R),T=Math.floor(T),h.style.setProperty("--kb-popper-anchor-width",`${P}px`),h.style.setProperty("--kb-popper-content-available-width",`${R}px`),h.style.setProperty("--kb-popper-content-available-height",`${T}px`),t.sameWidth&&(h.style.width=`${P}px`),t.fitViewport&&(h.style.maxWidth=`${R}px`,h.style.maxHeight=`${T}px`)}})),t.hideWhenDetached&&y.push(em({padding:t.detachedPadding})),p&&y.push(tm({element:p,padding:t.arrowPadding}));const v=await nm(f,h,{placement:t.placement,strategy:"absolute",middleware:y,platform:{...pl,isRTL:()=>l()==="rtl"}});if(a(v.placement),t.onCurrentPlacementChange?.(v.placement),!h)return;h.style.setProperty("--kb-popper-content-transform-origin",um(v.placement,l()));const b=Math.round(v.x),C=Math.round(v.y);let w;if(t.hideWhenDetached&&(w=v.middlewareData.hide?.referenceHidden?"hidden":"visible"),Object.assign(h.style,{top:"0",left:"0",transform:`translate3d(${b}px, ${C}px, 0)`,visibility:w}),p&&v.middlewareData.arrow){const{x:R,y:T}=v.middlewareData.arrow,S=v.placement.split("-")[0];Object.assign(p.style,{left:R!=null?`${R}px`:"",top:T!=null?`${T}px`:"",[S]:"100%"})}}G(()=>{const f=c(),h=n();if(!f||!h)return;const p=Yg(f,h,u,{elementResize:typeof ResizeObserver=="function"});q(p)}),G(()=>{const f=n(),h=t.contentRef?.();!f||!h||queueMicrotask(()=>{f.style.zIndex=getComputedStyle(h).zIndex})});const d={currentPlacement:i,contentRef:()=>t.contentRef?.(),setPositionerRef:r,setArrowRef:s};return x(ti.Provider,{value:d,get children(){return t.children}})}var ml=Object.assign(dm,{Arrow:ri,Context:ti,usePopperContext:ni,Positioner:im}),Qr="data-kb-top-layer",yl,ps=!1,St=[];function sr(e){return St.findIndex(t=>t.node===e)}function fm(e){return St[sr(e)]}function hm(e){return St[St.length-1].node===e}function vl(){return St.filter(e=>e.isPointerBlocking)}function pm(){return[...vl()].slice(-1)[0]}function oi(){return vl().length>0}function bl(e){const t=sr(pm()?.node);return sr(e)<t}function gm(e){St.push(e)}function mm(e){const t=sr(e);t<0||St.splice(t,1)}function ym(){for(const{node:e}of St)e.style.pointerEvents=bl(e)?"none":"auto"}function vm(e){if(oi()&&!ps){const t=ct(e);yl=document.body.style.pointerEvents,t.body.style.pointerEvents="none",ps=!0}}function bm(e){if(oi())return;const t=ct(e);t.body.style.pointerEvents=yl,t.body.style.length===0&&t.body.removeAttribute("style"),ps=!1}var Ke={layers:St,isTopMostLayer:hm,hasPointerBlockingLayer:oi,isBelowPointerBlockingLayer:bl,addLayer:gm,removeLayer:mm,indexOf:sr,find:fm,assignPointerEventToLayers:ym,disableBodyPointerEvents:vm,restoreBodyPointerEvents:bm},wa="interactOutside.pointerDownOutside",_a="interactOutside.focusOutside";function xm(e,t){let n,r=wp;const o=()=>ct(t()),s=d=>e.onPointerDownOutside?.(d),i=d=>e.onFocusOutside?.(d),a=d=>e.onInteractOutside?.(d),c=d=>{const f=d.target;return!(f instanceof Element)||f.closest(`[${Qr}]`)||!je(o(),f)||je(t(),f)?!1:!e.shouldExcludeElement?.(f)},l=d=>{function f(){const h=t(),p=d.target;if(!h||!p||!c(d))return;const m=Ce([s,a]);p.addEventListener(wa,m,{once:!0});const g=new CustomEvent(wa,{bubbles:!1,cancelable:!0,detail:{originalEvent:d,isContextMenu:d.button===2||fp(d)&&d.button===0}});p.dispatchEvent(g)}d.pointerType==="touch"?(o().removeEventListener("click",f),r=f,o().addEventListener("click",f,{once:!0})):f()},u=d=>{const f=t(),h=d.target;if(!f||!h||!c(d))return;const p=Ce([i,a]);h.addEventListener(_a,p,{once:!0});const m=new CustomEvent(_a,{bubbles:!1,cancelable:!0,detail:{originalEvent:d,isContextMenu:!1}});h.dispatchEvent(m)};G(()=>{E(e.isDisabled)||(n=window.setTimeout(()=>{o().addEventListener("pointerdown",l,!0)},0),o().addEventListener("focusin",u,!0),q(()=>{window.clearTimeout(n),o().removeEventListener("click",r),o().removeEventListener("pointerdown",l,!0),o().removeEventListener("focusin",u,!0)}))})}function Sm(e){const t=n=>{n.key===Gc.Escape&&e.onEscapeKeyDown?.(n)};G(()=>{if(E(e.isDisabled))return;const n=e.ownerDocument?.()??ct();n.addEventListener("keydown",t),q(()=>{n.removeEventListener("keydown",t)})})}var xl=me();function Cm(){return ue(xl)}function Sl(e){let t;const n=Cm(),[r,o]=J(e,["ref","disableOutsidePointerEvents","excludedElements","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","bypassTopMostLayerCheck"]),s=new Set([]),i=d=>{s.add(d);const f=n?.registerNestedLayer(d);return()=>{s.delete(d),f?.()}};xm({shouldExcludeElement:d=>t?r.excludedElements?.some(f=>je(f(),d))||[...s].some(f=>je(f,d)):!1,onPointerDownOutside:d=>{!t||Ke.isBelowPointerBlockingLayer(t)||!r.bypassTopMostLayerCheck&&!Ke.isTopMostLayer(t)||(r.onPointerDownOutside?.(d),r.onInteractOutside?.(d),d.defaultPrevented||r.onDismiss?.())},onFocusOutside:d=>{r.onFocusOutside?.(d),r.onInteractOutside?.(d),d.defaultPrevented||r.onDismiss?.()}},()=>t),Sm({ownerDocument:()=>ct(t),onEscapeKeyDown:d=>{!t||!Ke.isTopMostLayer(t)||(r.onEscapeKeyDown?.(d),!d.defaultPrevented&&r.onDismiss&&(d.preventDefault(),r.onDismiss()))}}),Vt(()=>{if(!t)return;Ke.addLayer({node:t,isPointerBlocking:r.disableOutsidePointerEvents,dismiss:r.onDismiss});const d=n?.registerNestedLayer(t);Ke.assignPointerEventToLayers(),Ke.disableBodyPointerEvents(t),q(()=>{t&&(Ke.removeLayer(t),d?.(),Ke.assignPointerEventToLayers(),Ke.restoreBodyPointerEvents(t))})}),G(it([()=>t,()=>r.disableOutsidePointerEvents],([d,f])=>{if(!d)return;const h=Ke.find(d);h&&h.isPointerBlocking!==f&&(h.isPointerBlocking=f,Ke.assignPointerEventToLayers()),f&&Ke.disableBodyPointerEvents(d),q(()=>{Ke.restoreBodyPointerEvents(d)})},{defer:!0}));const u={registerNestedLayer:i};return x(xl.Provider,{value:u,get children(){return x(Pe,N({as:"div",ref(d){var f=Ee(h=>t=h,r.ref);typeof f=="function"&&f(d)}},o))}})}function si(e={}){const[t,n]=Yc({value:()=>E(e.open),defaultValue:()=>!!E(e.defaultOpen),onChange:i=>e.onOpenChange?.(i)}),r=()=>{n(!0)},o=()=>{n(!1)};return{isOpen:t,setIsOpen:n,open:r,close:o,toggle:()=>{t()?o():r()}}}function Ft(e){return t=>(e(t),()=>e(void 0))}var Re=e=>typeof e=="function"?e():e,wm=e=>{const t=W(()=>{const i=Re(e.element);if(i)return getComputedStyle(i)}),n=()=>t()?.animationName??"none",[r,o]=z(Re(e.show)?"present":"hidden");let s="none";return G(i=>{const a=Re(e.show);return ge(()=>{if(i===a)return a;const c=s,l=n();a?o("present"):l==="none"||t()?.display==="none"?o("hidden"):o(i===!0&&c!==l?"hiding":"hidden")}),a}),G(()=>{const i=Re(e.element);if(!i)return;const a=l=>{l.target===i&&(s=n())},c=l=>{const d=n().includes(l.animationName);l.target===i&&d&&r()==="hiding"&&o("hidden")};i.addEventListener("animationstart",a),i.addEventListener("animationcancel",c),i.addEventListener("animationend",c),q(()=>{i.removeEventListener("animationstart",a),i.removeEventListener("animationcancel",c),i.removeEventListener("animationend",c)})}),{present:()=>r()==="present"||r()==="hiding",state:r,setState:o}},_m=wm,gs=_m;const ms=Symbol("store-raw"),Cn=Symbol("store-node"),bt=Symbol("store-has"),Cl=Symbol("store-self");function wl(e){let t=e[tt];if(!t&&(Object.defineProperty(e,tt,{value:t=new Proxy(e,Rm)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const i=n[o];r[i].get&&Object.defineProperty(e,i,{enumerable:r[i].enumerable,get:r[i].get.bind(t)})}}return t}function zt(e){let t;return e!=null&&typeof e=="object"&&(e[tt]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ut(e,t=new Set){let n,r,o,s;if(n=e!=null&&e[ms])return n;if(!zt(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,a=e.length;i<a;i++)o=e[i],(r=ut(o,t))!==o&&(e[i]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let c=0,l=i.length;c<l;c++)s=i[c],!a[s].get&&(o=e[s],(r=ut(o,t))!==o&&(e[s]=r))}return e}function eo(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function ir(e,t,n){if(e[t])return e[t];const[r,o]=z(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function Pm(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===tt||t===Cn||(delete n.value,delete n.writable,n.get=()=>e[tt][t]),n}function _l(e){Xo()&&ir(eo(e,Cn),Cl)()}function km(e){return _l(e),Reflect.ownKeys(e)}const Rm={get(e,t,n){if(t===ms)return e;if(t===tt)return n;if(t===Jo)return _l(e),n;const r=eo(e,Cn),o=r[t];let s=o?o():e[t];if(t===Cn||t===bt||t==="__proto__")return s;if(!o){const i=Object.getOwnPropertyDescriptor(e,t);Xo()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(s=ir(r,t,s)())}return zt(s)?wl(s):s},has(e,t){return t===ms||t===tt||t===Jo||t===Cn||t===bt||t==="__proto__"?!0:(Xo()&&ir(eo(e,bt),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:km,getOwnPropertyDescriptor:Pm};function qe(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;n===void 0?(delete e[t],e[bt]&&e[bt][t]&&o!==void 0&&e[bt][t].$()):(e[t]=n,e[bt]&&e[bt][t]&&o===void 0&&e[bt][t].$());let i=eo(e,Cn),a;if((a=ir(i,t,o))&&a.$(()=>n),Array.isArray(e)&&e.length!==s){for(let c=e.length;c<s;c++)(a=i[c])&&a.$();(a=ir(i,"length",s))&&a.$(e.length)}(a=i[Cl])&&a.$()}function Pl(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];qe(e,o,t[o])}}function Tm(e,t){if(typeof t=="function"&&(t=t(e)),t=ut(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const o=t[n];e[n]!==o&&qe(e,n,o)}qe(e,"length",r)}else Pl(e,t)}function Yn(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const i=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let c=0;c<r.length;c++)Yn(e,[r[c]].concat(t),n);return}else if(a&&i==="function"){for(let c=0;c<e.length;c++)r(e[c],c)&&Yn(e,[c].concat(t),n);return}else if(a&&i==="object"){const{from:c=0,to:l=e.length-1,by:u=1}=r;for(let d=c;d<=l;d+=u)Yn(e,[d].concat(t),n);return}else if(t.length>1){Yn(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(o,n),s===o)||r===void 0&&s==null||(s=ut(s),r===void 0||zt(o)&&zt(s)&&!Array.isArray(s)?Pl(o,s):qe(e,r,s))}function kl(...[e,t]){const n=ut(e||{}),r=Array.isArray(n),o=wl(n);function s(...i){Rd(()=>{r&&i.length===1?Tm(n,i[0]):Yn(n,i)})}return[o,s]}const ys=Symbol("store-root");function vn(e,t,n,r,o){const s=t[n];if(e===s)return;const i=Array.isArray(e);if(n!==ys&&(!zt(e)||!zt(s)||i!==Array.isArray(s)||o&&e[o]!==s[o])){qe(t,n,e);return}if(i){if(e.length&&s.length&&(!r||o&&e[0]&&e[0][o]!=null)){let l,u,d,f,h,p,m,g;for(d=0,f=Math.min(s.length,e.length);d<f&&(s[d]===e[d]||o&&s[d]&&e[d]&&s[d][o]&&s[d][o]===e[d][o]);d++)vn(e[d],s,d,r,o);const y=new Array(e.length),v=new Map;for(f=s.length-1,h=e.length-1;f>=d&&h>=d&&(s[f]===e[h]||o&&s[f]&&e[h]&&s[f][o]&&s[f][o]===e[h][o]);f--,h--)y[h]=s[f];if(d>h||d>f){for(u=d;u<=h;u++)qe(s,u,e[u]);for(;u<e.length;u++)qe(s,u,y[u]),vn(e[u],s,u,r,o);s.length>e.length&&qe(s,"length",e.length);return}for(m=new Array(h+1),u=h;u>=d;u--)p=e[u],g=o&&p?p[o]:p,l=v.get(g),m[u]=l===void 0?-1:l,v.set(g,u);for(l=d;l<=f;l++)p=s[l],g=o&&p?p[o]:p,u=v.get(g),u!==void 0&&u!==-1&&(y[u]=s[l],u=m[u],v.set(g,u));for(u=d;u<e.length;u++)u in y?(qe(s,u,y[u]),vn(e[u],s,u,r,o)):qe(s,u,e[u])}else for(let l=0,u=e.length;l<u;l++)vn(e[l],s,l,r,o);s.length>e.length&&qe(s,"length",e.length);return}const a=Object.keys(e);for(let l=0,u=a.length;l<u;l++)vn(e[a[l]],s,a[l],r,o);const c=Object.keys(s);for(let l=0,u=c.length;l<u;l++)e[c[l]]===void 0&&qe(s,c[l],void 0)}function He(e,t={}){const{merge:n,key:r="id"}=t,o=ut(e);return s=>{if(!zt(s)||!zt(o))return o;const i=vn(o,{[ys]:s},ys,n,r);return i===void 0?s:i}}var Fo="focusScope.autoFocusOnMount",No="focusScope.autoFocusOnUnmount",Pa={bubbles:!1,cancelable:!0},ka={stack:[],active(){return this.stack[0]},add(e){e!==this.active()&&this.active()?.pause(),this.stack=as(this.stack,e),this.stack.unshift(e)},remove(e){this.stack=as(this.stack,e),this.active()?.resume()}};function Rl(e,t){const[n,r]=z(!1),o={pause(){r(!0)},resume(){r(!1)}};let s=null;const i=p=>e.onMountAutoFocus?.(p),a=p=>e.onUnmountAutoFocus?.(p),c=()=>ct(t()),l=()=>{const p=c().createElement("span");return p.setAttribute("data-focus-trap",""),p.tabIndex=0,Object.assign(p.style,kp),p},u=()=>{const p=t();return p?Hc(p,!0).filter(m=>!m.hasAttribute("data-focus-trap")):[]},d=()=>{const p=u();return p.length>0?p[0]:null},f=()=>{const p=u();return p.length>0?p[p.length-1]:null},h=()=>{const p=t();if(!p)return!1;const m=Hn(p);return!m||je(p,m)?!1:qc(m)};G(()=>{const p=t();if(!p)return;ka.add(o);const m=Hn(p);if(!je(p,m)){const y=new CustomEvent(Fo,Pa);p.addEventListener(Fo,i),p.dispatchEvent(y),y.defaultPrevented||setTimeout(()=>{Se(d()),Hn(p)===m&&Se(p)},0)}q(()=>{p.removeEventListener(Fo,i),setTimeout(()=>{const y=new CustomEvent(No,Pa);h()&&y.preventDefault(),p.addEventListener(No,a),p.dispatchEvent(y),y.defaultPrevented||Se(m??c().body),p.removeEventListener(No,a),ka.remove(o)},0)})}),G(()=>{const p=t();if(!p||!E(e.trapFocus)||n())return;const m=y=>{const v=y.target;v?.closest(`[${Qr}]`)||(je(p,v)?s=v:Se(s))},g=y=>{const b=y.relatedTarget??Hn(p);b?.closest(`[${Qr}]`)||je(p,b)||Se(s)};c().addEventListener("focusin",m),c().addEventListener("focusout",g),q(()=>{c().removeEventListener("focusin",m),c().removeEventListener("focusout",g)})}),G(()=>{const p=t();if(!p||!E(e.trapFocus)||n())return;const m=l();p.insertAdjacentElement("afterbegin",m);const g=l();p.insertAdjacentElement("beforeend",g);function y(b){const C=d(),w=f();b.relatedTarget===C?Se(w):Se(C)}m.addEventListener("focusin",y),g.addEventListener("focusin",y);const v=new MutationObserver(b=>{for(const C of b)C.previousSibling===g&&(g.remove(),p.insertAdjacentElement("beforeend",g)),C.nextSibling===m&&(m.remove(),p.insertAdjacentElement("afterbegin",m))});v.observe(p,{childList:!0,subtree:!1}),q(()=>{m.removeEventListener("focusin",y),g.removeEventListener("focusin",y),m.remove(),g.remove(),v.disconnect()})})}var Im="data-live-announcer";function Tl(e){G(()=>{E(e.isDisabled)||q(Em(E(e.targets),E(e.root)))})}var Kn=new WeakMap,We=[];function Em(e,t=document.body){const n=new Set(e),r=new Set,o=c=>{for(const f of c.querySelectorAll(`[${Im}], [${Qr}]`))n.add(f);const l=f=>{if(n.has(f)||f.parentElement&&r.has(f.parentElement)&&f.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(const h of n)if(f.contains(h))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},u=document.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,{acceptNode:l}),d=l(c);if(d===NodeFilter.FILTER_ACCEPT&&s(c),d!==NodeFilter.FILTER_REJECT){let f=u.nextNode();for(;f!=null;)s(f),f=u.nextNode()}},s=c=>{const l=Kn.get(c)??0;c.getAttribute("aria-hidden")==="true"&&l===0||(l===0&&c.setAttribute("aria-hidden","true"),r.add(c),Kn.set(c,l+1))};We.length&&We[We.length-1].disconnect(),o(t);const i=new MutationObserver(c=>{for(const l of c)if(!(l.type!=="childList"||l.addedNodes.length===0)&&![...n,...r].some(u=>u.contains(l.target))){for(const u of l.removedNodes)u instanceof Element&&(n.delete(u),r.delete(u));for(const u of l.addedNodes)(u instanceof HTMLElement||u instanceof SVGElement)&&(u.dataset.liveAnnouncer==="true"||u.dataset.reactAriaTopLayer==="true")?n.add(u):u instanceof Element&&o(u)}});i.observe(t,{childList:!0,subtree:!0});const a={observe(){i.observe(t,{childList:!0,subtree:!0})},disconnect(){i.disconnect()}};return We.push(a),()=>{i.disconnect();for(const c of r){const l=Kn.get(c);if(l==null)return;l===1?(c.removeAttribute("aria-hidden"),Kn.delete(c)):Kn.set(c,l-1)}a===We[We.length-1]?(We.pop(),We.length&&We[We.length-1].observe()):We.splice(We.indexOf(a),1)}}var vs=(e,t)=>{if(e.contains(t))return!0;let n=t;for(;n;){if(n===e)return!0;n=n._$host??n.parentElement}return!1},wr=new Map,Mm=e=>{G(()=>{const t=Re(e.style)??{},n=Re(e.properties)??[],r={};for(const s in t)r[s]=e.element.style[s];const o=wr.get(e.key);o?o.activeCount++:wr.set(e.key,{activeCount:1,originalStyles:r,properties:n.map(s=>s.key)}),Object.assign(e.element.style,e.style);for(const s of n)e.element.style.setProperty(s.key,s.value);q(()=>{const s=wr.get(e.key);if(s){if(s.activeCount!==1){s.activeCount--;return}wr.delete(e.key);for(const[i,a]of Object.entries(s.originalStyles))e.element.style[i]=a;for(const i of s.properties)e.element.style.removeProperty(i);e.element.style.length===0&&e.element.removeAttribute("style"),e.cleanup?.()}})})},Ra=Mm,Lm=(e,t)=>{switch(t){case"x":return[e.clientWidth,e.scrollLeft,e.scrollWidth];case"y":return[e.clientHeight,e.scrollTop,e.scrollHeight]}},Om=(e,t)=>{const n=getComputedStyle(e),r=t==="x"?n.overflowX:n.overflowY;return r==="auto"||r==="scroll"||e.tagName==="HTML"&&r==="visible"},Am=(e,t,n)=>{const r=t==="x"&&window.getComputedStyle(e).direction==="rtl"?-1:1;let o=e,s=0,i=0,a=!1;do{const[c,l,u]=Lm(o,t),d=u-c-r*l;(l!==0||d!==0)&&Om(o,t)&&(s+=d,i+=l),o===(n??document.documentElement)?a=!0:o=o._$host??o.parentElement}while(o&&!a);return[s,i]},[Ta,Ia]=z([]),Dm=e=>Ta().indexOf(e)===Ta().length-1,$m=e=>{const t=N({element:null,enabled:!0,hideScrollbar:!0,preventScrollbarShift:!0,preventScrollbarShiftMode:"padding",restoreScrollPosition:!0,allowPinchZoom:!1},e),n=Ct();let r=[0,0],o=null,s=null;G(()=>{Re(t.enabled)&&(Ia(l=>[...l,n]),q(()=>{Ia(l=>l.filter(u=>u!==n))}))}),G(()=>{if(!Re(t.enabled)||!Re(t.hideScrollbar))return;const{body:l}=document,u=window.innerWidth-l.offsetWidth;if(Re(t.preventScrollbarShift)){const d={overflow:"hidden"},f=[];u>0&&(Re(t.preventScrollbarShiftMode)==="padding"?d.paddingRight=`calc(${window.getComputedStyle(l).paddingRight} + ${u}px)`:d.marginRight=`calc(${window.getComputedStyle(l).marginRight} + ${u}px)`,f.push({key:"--scrollbar-width",value:`${u}px`}));const h=window.scrollY,p=window.scrollX;Ra({key:"prevent-scroll",element:l,style:d,properties:f,cleanup:()=>{Re(t.restoreScrollPosition)&&u>0&&window.scrollTo(p,h)}})}else Ra({key:"prevent-scroll",element:l,style:{overflow:"hidden"}})}),G(()=>{!Dm(n)||!Re(t.enabled)||(document.addEventListener("wheel",a,{passive:!1}),document.addEventListener("touchstart",i,{passive:!1}),document.addEventListener("touchmove",c,{passive:!1}),q(()=>{document.removeEventListener("wheel",a),document.removeEventListener("touchstart",i),document.removeEventListener("touchmove",c)}))});const i=l=>{r=Ea(l),o=null,s=null},a=l=>{const u=l.target,d=Re(t.element),f=Fm(l),h=Math.abs(f[0])>Math.abs(f[1])?"x":"y",p=h==="x"?f[0]:f[1],m=Ma(u,h,p,d);let g;d&&vs(d,u)?g=!m:g=!0,g&&l.cancelable&&l.preventDefault()},c=l=>{const u=Re(t.element),d=l.target;let f;if(l.touches.length===2)f=!Re(t.allowPinchZoom);else{if(o==null||s===null){const h=Ea(l).map((m,g)=>r[g]-m),p=Math.abs(h[0])>Math.abs(h[1])?"x":"y";o=p,s=p==="x"?h[0]:h[1]}if(d.type==="range")f=!1;else{const h=Ma(d,o,s,u);u&&vs(u,d)?f=!h:f=!0}}f&&l.cancelable&&l.preventDefault()}},Fm=e=>[e.deltaX,e.deltaY],Ea=e=>e.changedTouches[0]?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0],Ma=(e,t,n,r)=>{const o=r!==null&&vs(r,e),[s,i]=Am(e,t,o?r:void 0);return!(n>0&&Math.abs(s)<=1||n<0&&Math.abs(i)<1)},Nm=$m,Il=Nm,Bm=class{collection;ref;collator;constructor(e,t,n){this.collection=e,this.ref=t,this.collator=n}getKeyBelow(e){let t=this.collection().getKeyAfter(e);for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyAfter(t)}}getKeyAbove(e){let t=this.collection().getKeyBefore(e);for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyBefore(t)}}getFirstKey(){let e=this.collection().getFirstKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyAfter(e)}}getLastKey(){let e=this.collection().getLastKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyBefore(e)}}getItem(e){return this.ref?.()?.querySelector(`[data-key="${e}"]`)??null}getKeyPageAbove(e){const t=this.ref?.();let n=this.getItem(e);if(!t||!n)return;const r=Math.max(0,n.offsetTop+n.offsetHeight-t.offsetHeight);let o=e;for(;o&&n&&n.offsetTop>r;)o=this.getKeyAbove(o),n=o!=null?this.getItem(o):null;return o}getKeyPageBelow(e){const t=this.ref?.();let n=this.getItem(e);if(!t||!n)return;const r=Math.min(t.scrollHeight,n.offsetTop-n.offsetHeight+t.offsetHeight);let o=e;for(;o&&n&&n.offsetTop<r;)o=this.getKeyBelow(o),n=o!=null?this.getItem(o):null;return o}getKeyForSearch(e,t){const n=this.collator?.();if(!n)return;let r=t!=null?this.getKeyBelow(t):this.getFirstKey();for(;r!=null;){const o=this.collection().getItem(r);if(o){const s=o.textValue.slice(0,e.length);if(o.textValue&&n.compare(s,e)===0)return r}r=this.getKeyBelow(r)}}};function Km(e,t,n){const r=Up({usage:"search",sensitivity:"base"}),o=W(()=>{const s=E(e.keyboardDelegate);return s||new Bm(e.collection,t,r)});return qp({selectionManager:()=>E(e.selectionManager),keyboardDelegate:o,autoFocus:()=>E(e.autoFocus),deferAutoFocus:()=>E(e.deferAutoFocus),shouldFocusWrap:()=>E(e.shouldFocusWrap),disallowEmptySelection:()=>E(e.disallowEmptySelection),selectOnFocus:()=>E(e.selectOnFocus),disallowTypeAhead:()=>E(e.disallowTypeAhead),shouldUseVirtualFocus:()=>E(e.shouldUseVirtualFocus),allowsTabNavigation:()=>E(e.allowsTabNavigation),isVirtualized:()=>E(e.isVirtualized),scrollToKey:s=>E(e.scrollToKey)?.(s),orientation:()=>E(e.orientation)},t)}var Um=me();function bo(){return ue(Um)}var jm=me();function El(){return ue(jm)}var Ml=me();function Ll(){return ue(Ml)}function wt(){const e=Ll();if(e===void 0)throw new Error("[kobalte]: `useMenuContext` must be used within a `Menu` component");return e}var Ol=me();function ii(){const e=ue(Ol);if(e===void 0)throw new Error("[kobalte]: `useMenuItemContext` must be used within a `Menu.Item` component");return e}var Al=me();function ht(){const e=ue(Al);if(e===void 0)throw new Error("[kobalte]: `useMenuRootContext` must be used within a `MenuRoot` component");return e}function ai(e){let t;const n=ht(),r=wt(),o=ae({id:n.generateId(`item-${Ct()}`)},e),[s,i]=J(o,["ref","textValue","disabled","closeOnSelect","checked","indeterminate","onSelect","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[a,c]=z(),[l,u]=z(),[d,f]=z(),h=()=>r.listState().selectionManager(),p=()=>i.id,m=()=>h().focusedKey()===p(),g=()=>{s.onSelect?.(),s.closeOnSelect&&setTimeout(()=>{r.close(!0)})};og({getItem:()=>({ref:()=>t,type:"item",key:p(),textValue:s.textValue??d()?.textContent??t?.textContent??"",disabled:s.disabled??!1})});const y=el({key:p,selectionManager:h,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>t),v=P=>{pe(P,s.onPointerMove),P.pointerType==="mouse"&&(s.disabled?r.onItemLeave(P):(r.onItemEnter(P),P.defaultPrevented||(Se(P.currentTarget),r.listState().selectionManager().setFocused(!0),r.listState().selectionManager().setFocusedKey(p()))))},b=P=>{pe(P,s.onPointerLeave),P.pointerType==="mouse"&&r.onItemLeave(P)},C=P=>{pe(P,s.onPointerUp),!s.disabled&&P.button===0&&g()},w=P=>{if(pe(P,s.onKeyDown),!P.repeat&&!s.disabled)switch(P.key){case"Enter":case" ":g();break}},R=W(()=>{if(s.indeterminate)return"mixed";if(s.checked!=null)return s.checked}),T=W(()=>({"data-indeterminate":s.indeterminate?"":void 0,"data-checked":s.checked&&!s.indeterminate?"":void 0,"data-disabled":s.disabled?"":void 0,"data-highlighted":m()?"":void 0})),S={isChecked:()=>s.checked,dataset:T,setLabelRef:f,generateId:fo(()=>i.id),registerLabel:Ft(c),registerDescription:Ft(u)};return x(Ol.Provider,{value:S,get children(){return x(Pe,N({as:"div",ref(P){var L=Ee(O=>t=O,s.ref);typeof L=="function"&&L(P)},get tabIndex(){return y.tabIndex()},get"aria-checked"(){return R()},get"aria-disabled"(){return s.disabled},get"aria-labelledby"(){return a()},get"aria-describedby"(){return l()},get"data-key"(){return y.dataKey()},get onPointerDown(){return Ce([s.onPointerDown,y.onPointerDown])},get onPointerUp(){return Ce([C,y.onPointerUp])},get onClick(){return Ce([s.onClick,y.onClick])},get onKeyDown(){return Ce([w,y.onKeyDown])},get onMouseDown(){return Ce([s.onMouseDown,y.onMouseDown])},get onFocus(){return Ce([s.onFocus,y.onFocus])},onPointerMove:v,onPointerLeave:b},T,i))}})}function Dl(e){const t=ae({closeOnSelect:!1},e),[n,r]=J(t,["checked","defaultChecked","onChange","onSelect"]),o=Op({isSelected:()=>n.checked,defaultIsSelected:()=>n.defaultChecked,onSelectedChange:i=>n.onChange?.(i),isDisabled:()=>r.disabled});return x(ai,N({role:"menuitemcheckbox",get checked(){return o.isSelected()},onSelect:()=>{n.onSelect?.(),o.toggle()}},r))}var ar={next:(e,t)=>e==="ltr"?t==="horizontal"?"ArrowRight":"ArrowDown":t==="horizontal"?"ArrowLeft":"ArrowUp",previous:(e,t)=>ar.next(e==="ltr"?"rtl":"ltr",t)},La={first:e=>e==="horizontal"?"ArrowDown":"ArrowRight",last:e=>e==="horizontal"?"ArrowUp":"ArrowLeft"};function ci(e){const t=ht(),n=wt(),r=bo(),{direction:o}=Gt(),s=ae({id:t.generateId("trigger")},e),[i,a]=J(s,["ref","id","disabled","onPointerDown","onClick","onKeyDown","onMouseOver","onFocus"]);let c=()=>t.value();r!==void 0&&(c=()=>t.value()??i.id,r.lastValue()===void 0&&r.setLastValue(c));const l=qs(()=>n.triggerRef(),()=>"button"),u=W(()=>l()==="a"&&n.triggerRef()?.getAttribute("href")!=null);G(it(()=>r?.value(),y=>{u()&&y===c()&&n.triggerRef()?.focus()}));const d=()=>{r!==void 0?n.isOpen()?r.value()===c()&&r.closeMenu():(r.autoFocusMenu()||r.setAutoFocusMenu(!0),n.open(!1)):n.toggle(!0)},f=y=>{pe(y,i.onPointerDown),y.currentTarget.dataset.pointerType=y.pointerType,!i.disabled&&y.pointerType!=="touch"&&y.button===0&&d()},h=y=>{pe(y,i.onClick),i.disabled||y.currentTarget.dataset.pointerType==="touch"&&d()},p=y=>{if(pe(y,i.onKeyDown),!i.disabled){if(u())switch(y.key){case"Enter":case" ":return}switch(y.key){case"Enter":case" ":case La.first(t.orientation()):y.stopPropagation(),y.preventDefault(),Pp(y.currentTarget),n.open("first"),r?.setAutoFocusMenu(!0),r?.setValue(c);break;case La.last(t.orientation()):y.stopPropagation(),y.preventDefault(),n.open("last");break;case ar.next(o(),t.orientation()):if(r===void 0)break;y.stopPropagation(),y.preventDefault(),r.nextMenu();break;case ar.previous(o(),t.orientation()):if(r===void 0)break;y.stopPropagation(),y.preventDefault(),r.previousMenu();break}}},m=y=>{pe(y,i.onMouseOver),n.triggerRef()?.dataset.pointerType!=="touch"&&!i.disabled&&r!==void 0&&r.value()!==void 0&&r.setValue(c)},g=y=>{pe(y,i.onFocus),r!==void 0&&y.currentTarget.dataset.pointerType!=="touch"&&r.setValue(c)};return G(()=>q(n.registerTriggerId(i.id))),x(Mn,N({ref(y){var v=Ee(n.setTriggerRef,i.ref);typeof v=="function"&&v(y)},get"data-kb-menu-value-trigger"(){return t.value()},get id(){return i.id},get disabled(){return i.disabled},"aria-haspopup":"true",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return le(()=>!!n.isOpen())()?n.contentId():void 0},get"data-highlighted"(){return c()!==void 0&&r?.value()===c()?!0:void 0},get tabIndex(){return r!==void 0?r.value()===c()||r.lastValue()===c()?0:-1:void 0},onPointerDown:f,onMouseOver:m,onClick:h,onKeyDown:p,onFocus:g,role:r!==void 0?"menuitem":void 0},()=>n.dataset(),a))}function $l(e){let t;const n=ht(),r=wt(),o=bo(),s=El(),{direction:i}=Gt(),a=ae({id:n.generateId(`content-${Ct()}`)},e),[c,l]=J(a,["ref","id","style","onOpenAutoFocus","onCloseAutoFocus","onEscapeKeyDown","onFocusOutside","onPointerEnter","onPointerMove","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]);let u=0;const d=()=>r.parentMenuContext()==null&&o===void 0&&n.isModal(),f=Km({selectionManager:r.listState().selectionManager,collection:r.listState().collection,autoFocus:r.autoFocus,deferAutoFocus:!0,shouldFocusWrap:!0,disallowTypeAhead:()=>!r.listState().selectionManager().isFocused(),orientation:()=>n.orientation()==="horizontal"?"vertical":"horizontal"},()=>t);Rl({trapFocus:()=>d()&&r.isOpen(),onMountAutoFocus:b=>{o===void 0&&c.onOpenAutoFocus?.(b)},onUnmountAutoFocus:c.onCloseAutoFocus},()=>t);const h=b=>{if(je(b.currentTarget,b.target)&&(b.key==="Tab"&&r.isOpen()&&b.preventDefault(),o!==void 0&&b.currentTarget.getAttribute("aria-haspopup")!=="true"))switch(b.key){case ar.next(i(),n.orientation()):b.stopPropagation(),b.preventDefault(),r.close(!0),o.setAutoFocusMenu(!0),o.nextMenu();break;case ar.previous(i(),n.orientation()):if(b.currentTarget.hasAttribute("data-closed"))break;b.stopPropagation(),b.preventDefault(),r.close(!0),o.setAutoFocusMenu(!0),o.previousMenu();break}},p=b=>{c.onEscapeKeyDown?.(b),o?.setAutoFocusMenu(!1),r.close(!0)},m=b=>{c.onFocusOutside?.(b),n.isModal()&&b.preventDefault()},g=b=>{pe(b,c.onPointerEnter),r.isOpen()&&(r.parentMenuContext()?.listState().selectionManager().setFocused(!1),r.parentMenuContext()?.listState().selectionManager().setFocusedKey(void 0))},y=b=>{if(pe(b,c.onPointerMove),b.pointerType!=="mouse")return;const C=b.target,w=u!==b.clientX;je(b.currentTarget,C)&&w&&(r.setPointerDir(b.clientX>u?"right":"left"),u=b.clientX)};G(()=>q(r.registerContentId(c.id))),q(()=>r.setContentRef(void 0));const v={ref:Ee(b=>{r.setContentRef(b),t=b},c.ref),role:"menu",get id(){return c.id},get tabIndex(){return f.tabIndex()},get"aria-labelledby"(){return r.triggerId()},onKeyDown:Ce([c.onKeyDown,f.onKeyDown,h]),onMouseDown:Ce([c.onMouseDown,f.onMouseDown]),onFocusIn:Ce([c.onFocusIn,f.onFocusIn]),onFocusOut:Ce([c.onFocusOut,f.onFocusOut]),onPointerEnter:g,onPointerMove:y,get"data-orientation"(){return n.orientation()}};return x(be,{get when(){return r.contentPresent()},get children(){return x(be,{get when(){return s===void 0||r.parentMenuContext()!=null},get fallback(){return x(Pe,N({as:"div"},()=>r.dataset(),v,l))},get children(){return x(ml.Positioner,{get children(){return x(Sl,N({get disableOutsidePointerEvents(){return le(()=>!!d())()&&r.isOpen()},get excludedElements(){return[r.triggerRef]},bypassTopMostLayerCheck:!0,get style(){return uo({"--kb-menu-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},c.style)},onEscapeKeyDown:p,onFocusOutside:m,get onDismiss(){return r.close}},()=>r.dataset(),v,l))}})}})}})}function zm(e){let t;const n=ht(),r=wt(),[o,s]=J(e,["ref"]);return Il({element:()=>t??null,enabled:()=>r.contentPresent()&&n.preventScroll()}),x($l,N({ref(i){var a=Ee(c=>{t=c},o.ref);typeof a=="function"&&a(i)}},s))}var Fl=me();function Vm(){const e=ue(Fl);if(e===void 0)throw new Error("[kobalte]: `useMenuGroupContext` must be used within a `Menu.Group` component");return e}function li(e){const t=ht(),n=ae({id:t.generateId(`group-${Ct()}`)},e),[r,o]=z(),s={generateId:fo(()=>n.id),registerLabelId:Ft(o)};return x(Fl.Provider,{value:s,get children(){return x(Pe,N({as:"div",role:"group",get"aria-labelledby"(){return r()}},n))}})}function Nl(e){const t=Vm(),n=ae({id:t.generateId("label")},e),[r,o]=J(n,["id"]);return G(()=>q(t.registerLabelId(r.id))),x(Pe,N({as:"span",get id(){return r.id},"aria-hidden":"true"},o))}function Bl(e){const t=wt(),n=ae({children:""},e);return x(Pe,N({as:"span","aria-hidden":"true"},()=>t.dataset(),n))}function ui(e){return x(ai,N({role:"menuitem",closeOnSelect:!0},e))}function Kl(e){const t=ii(),n=ae({id:t.generateId("description")},e),[r,o]=J(n,["id"]);return G(()=>q(t.registerDescription(r.id))),x(Pe,N({as:"div",get id(){return r.id}},()=>t.dataset(),o))}function Ul(e){const t=ii(),n=ae({id:t.generateId("indicator")},e),[r,o]=J(n,["forceMount"]);return x(be,{get when(){return r.forceMount||t.isChecked()},get children(){return x(Pe,N({as:"div"},()=>t.dataset(),o))}})}function jl(e){const t=ii(),n=ae({id:t.generateId("label")},e),[r,o]=J(n,["ref","id"]);return G(()=>q(t.registerLabel(r.id))),x(Pe,N({as:"div",ref(s){var i=Ee(t.setLabelRef,r.ref);typeof i=="function"&&i(s)},get id(){return r.id}},()=>t.dataset(),o))}function di(e){const t=wt();return x(be,{get when(){return t.contentPresent()},get children(){return x(Sc,e)}})}var zl=me();function Gm(){const e=ue(zl);if(e===void 0)throw new Error("[kobalte]: `useMenuRadioGroupContext` must be used within a `Menu.RadioGroup` component");return e}function Vl(e){const n=ht().generateId(`radiogroup-${Ct()}`),r=ae({id:n},e),[o,s]=J(r,["value","defaultValue","onChange","disabled"]),[i,a]=go({value:()=>o.value,defaultValue:()=>o.defaultValue,onChange:l=>o.onChange?.(l)}),c={isDisabled:()=>o.disabled,isSelectedValue:l=>l===i(),setSelectedValue:l=>a(l)};return x(zl.Provider,{value:c,get children(){return x(li,s)}})}function Gl(e){const t=Gm(),n=ae({closeOnSelect:!1},e),[r,o]=J(n,["value","onSelect"]);return x(ai,N({role:"menuitemradio",get checked(){return t.isSelectedValue(r.value)},onSelect:()=>{r.onSelect?.(),t.setSelectedValue(r.value)}},o))}function Wm(e,t,n){const r=e.split("-")[0],o=n.getBoundingClientRect(),s=[],i=t.clientX,a=t.clientY;switch(r){case"top":s.push([i,a+5]),s.push([o.left,o.bottom]),s.push([o.left,o.top]),s.push([o.right,o.top]),s.push([o.right,o.bottom]);break;case"right":s.push([i-5,a]),s.push([o.left,o.top]),s.push([o.right,o.top]),s.push([o.right,o.bottom]),s.push([o.left,o.bottom]);break;case"bottom":s.push([i,a-5]),s.push([o.right,o.top]),s.push([o.right,o.bottom]),s.push([o.left,o.bottom]),s.push([o.left,o.top]);break;case"left":s.push([i+5,a]),s.push([o.right,o.bottom]),s.push([o.left,o.bottom]),s.push([o.left,o.top]),s.push([o.right,o.top]);break}return s}function Hm(e,t){return t?_p([e.clientX,e.clientY],t):!1}function Wl(e){const t=ht(),n=nl(),r=Ll(),o=bo(),s=El(),i=ae({placement:t.orientation()==="horizontal"?"bottom-start":"right-start"},e),[a,c]=J(i,["open","defaultOpen","onOpenChange"]);let l=0,u=null,d="right";const[f,h]=z(),[p,m]=z(),[g,y]=z(),[v,b]=z(),[C,w]=z(!0),[R,T]=z(c.placement),[S,P]=z([]),[L,O]=z([]),{DomCollectionProvider:A}=rg({items:L,onItemsChange:O}),H=si({open:()=>a.open,defaultOpen:()=>a.defaultOpen,onOpenChange:M=>a.onOpenChange?.(M)}),{present:F}=gs({show:()=>t.forceMount()||H.isOpen(),element:()=>v()??null}),ee=Jp({selectionMode:"none",dataSource:L}),Q=M=>{w(M),H.open()},D=(M=!1)=>{H.close(),M&&r&&r.close(!0)},I=M=>{w(M),H.toggle()},ie=()=>{const M=v();M&&(Se(M),ee.selectionManager().setFocused(!0),ee.selectionManager().setFocusedKey(void 0))},Be=()=>{s!=null?setTimeout(()=>ie()):ie()},st=M=>{P(V=>[...V,M]);const B=r?.registerNestedMenu(M);return()=>{P(V=>as(V,M)),B?.()}},Qe=M=>d===u?.side&&Hm(M,u?.area),fe=M=>{Qe(M)&&M.preventDefault()},_e=M=>{Qe(M)||Be()},Pt=M=>{Qe(M)&&M.preventDefault()};Tl({isDisabled:()=>!(r==null&&H.isOpen()&&t.isModal()),targets:()=>[v(),...S()].filter(Boolean)}),G(()=>{const M=v();if(!M||!r)return;const B=r.registerNestedMenu(M);q(()=>{B()})}),G(()=>{r===void 0&&o?.registerMenu(t.value(),[v(),...S()])}),G(()=>{r!==void 0||o===void 0||(o.value()===t.value()?(g()?.focus(),o.autoFocusMenu()&&Q(!0)):D())}),G(()=>{r!==void 0||o===void 0||H.isOpen()&&o.setValue(t.value())}),q(()=>{r===void 0&&o?.unregisterMenu(t.value())});const k={dataset:W(()=>({"data-expanded":H.isOpen()?"":void 0,"data-closed":H.isOpen()?void 0:""})),isOpen:H.isOpen,contentPresent:F,nestedMenus:S,currentPlacement:R,pointerGraceTimeoutId:()=>l,autoFocus:C,listState:()=>ee,parentMenuContext:()=>r,triggerRef:g,contentRef:v,triggerId:f,contentId:p,setTriggerRef:y,setContentRef:b,open:Q,close:D,toggle:I,focusContent:Be,onItemEnter:fe,onItemLeave:_e,onTriggerLeave:Pt,setPointerDir:M=>d=M,setPointerGraceTimeoutId:M=>l=M,setPointerGraceIntent:M=>u=M,registerNestedMenu:st,registerItemToParentDomCollection:n?.registerItem,registerTriggerId:Ft(h),registerContentId:Ft(m)};return x(A,{get children(){return x(Ml.Provider,{value:k,get children(){return x(be,{when:s===void 0,get fallback(){return c.children},get children(){return x(ml,N({anchorRef:g,contentRef:v,onCurrentPlacementChange:T},c))}})}})}})}function Hl(e){const{direction:t}=Gt();return x(Wl,N({get placement(){return t()==="rtl"?"left-start":"right-start"},flip:!0},e))}var qm={close:(e,t)=>e==="ltr"?[t==="horizontal"?"ArrowLeft":"ArrowUp"]:[t==="horizontal"?"ArrowRight":"ArrowDown"]};function ql(e){const t=wt(),n=ht(),[r,o]=J(e,["onFocusOutside","onKeyDown"]),{direction:s}=Gt();return x($l,N({onOpenAutoFocus:u=>{u.preventDefault()},onCloseAutoFocus:u=>{u.preventDefault()},onFocusOutside:u=>{r.onFocusOutside?.(u);const d=u.target;je(t.triggerRef(),d)||t.close()},onKeyDown:u=>{pe(u,r.onKeyDown);const d=je(u.currentTarget,u.target),f=qm.close(s(),n.orientation()).includes(u.key),h=t.parentMenuContext()!=null;d&&f&&h&&(t.close(),Se(t.triggerRef()))}},o))}var Oa=["Enter"," "],Ym={open:(e,t)=>e==="ltr"?[...Oa,t==="horizontal"?"ArrowRight":"ArrowDown"]:[...Oa,t==="horizontal"?"ArrowLeft":"ArrowUp"]};function Yl(e){let t;const n=ht(),r=wt(),o=ae({id:n.generateId(`sub-trigger-${Ct()}`)},e),[s,i]=J(o,["ref","id","textValue","disabled","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]);let a=null;const c=()=>{a&&window.clearTimeout(a),a=null},{direction:l}=Gt(),u=()=>s.id,d=()=>{const b=r.parentMenuContext();if(b==null)throw new Error("[kobalte]: `Menu.SubTrigger` must be used within a `Menu.Sub` component");return b.listState().selectionManager()},f=()=>r.listState().collection(),h=()=>d().focusedKey()===u(),p=el({key:u,selectionManager:d,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>t),m=b=>{pe(b,s.onClick),!r.isOpen()&&!s.disabled&&r.open(!0)},g=b=>{if(pe(b,s.onPointerMove),b.pointerType!=="mouse")return;const C=r.parentMenuContext();if(C?.onItemEnter(b),!b.defaultPrevented){if(s.disabled){C?.onItemLeave(b);return}!r.isOpen()&&!a&&(r.parentMenuContext()?.setPointerGraceIntent(null),a=window.setTimeout(()=>{r.open(!1),c()},100)),C?.onItemEnter(b),b.defaultPrevented||(r.listState().selectionManager().isFocused()&&(r.listState().selectionManager().setFocused(!1),r.listState().selectionManager().setFocusedKey(void 0)),Se(b.currentTarget),C?.listState().selectionManager().setFocused(!0),C?.listState().selectionManager().setFocusedKey(u()))}},y=b=>{if(pe(b,s.onPointerLeave),b.pointerType!=="mouse")return;c();const C=r.parentMenuContext(),w=r.contentRef();if(w){C?.setPointerGraceIntent({area:Wm(r.currentPlacement(),b,w),side:r.currentPlacement().split("-")[0]}),window.clearTimeout(C?.pointerGraceTimeoutId());const R=window.setTimeout(()=>{C?.setPointerGraceIntent(null)},300);C?.setPointerGraceTimeoutId(R)}else{if(C?.onTriggerLeave(b),b.defaultPrevented)return;C?.setPointerGraceIntent(null)}C?.onItemLeave(b)},v=b=>{pe(b,s.onKeyDown),!b.repeat&&(s.disabled||Ym.open(l(),n.orientation()).includes(b.key)&&(b.stopPropagation(),b.preventDefault(),d().setFocused(!1),d().setFocusedKey(void 0),r.isOpen()||r.open("first"),r.focusContent(),r.listState().selectionManager().setFocused(!0),r.listState().selectionManager().setFocusedKey(f().getFirstKey())))};return G(()=>{if(r.registerItemToParentDomCollection==null)throw new Error("[kobalte]: `Menu.SubTrigger` must be used within a `Menu.Sub` component");const b=r.registerItemToParentDomCollection({ref:()=>t,type:"item",key:u(),textValue:s.textValue??t?.textContent??"",disabled:s.disabled??!1});q(b)}),G(it(()=>r.parentMenuContext()?.pointerGraceTimeoutId(),b=>{q(()=>{window.clearTimeout(b),r.parentMenuContext()?.setPointerGraceIntent(null)})})),G(()=>q(r.registerTriggerId(s.id))),q(()=>{c()}),x(Pe,N({as:"div",ref(b){var C=Ee(w=>{r.setTriggerRef(w),t=w},s.ref);typeof C=="function"&&C(b)},get id(){return s.id},role:"menuitem",get tabIndex(){return p.tabIndex()},"aria-haspopup":"true",get"aria-expanded"(){return r.isOpen()},get"aria-controls"(){return le(()=>!!r.isOpen())()?r.contentId():void 0},get"aria-disabled"(){return s.disabled},get"data-key"(){return p.dataKey()},get"data-highlighted"(){return h()?"":void 0},get"data-disabled"(){return s.disabled?"":void 0},get onPointerDown(){return Ce([s.onPointerDown,p.onPointerDown])},get onPointerUp(){return Ce([s.onPointerUp,p.onPointerUp])},get onClick(){return Ce([m,p.onClick])},get onKeyDown(){return Ce([v,p.onKeyDown])},get onMouseDown(){return Ce([s.onMouseDown,p.onMouseDown])},get onFocus(){return Ce([s.onFocus,p.onFocus])},onPointerMove:g,onPointerLeave:y},()=>r.dataset(),i))}function Jm(e){const t=bo(),n=`menu-${Ct()}`,r=ae({id:n,modal:!0},e),[o,s]=J(r,["id","modal","preventScroll","forceMount","open","defaultOpen","onOpenChange","value","orientation"]),i=si({open:()=>o.open,defaultOpen:()=>o.defaultOpen,onOpenChange:c=>o.onOpenChange?.(c)}),a={isModal:()=>o.modal??!0,preventScroll:()=>o.preventScroll??a.isModal(),forceMount:()=>o.forceMount??!1,generateId:fo(()=>o.id),value:()=>o.value,orientation:()=>o.orientation??t?.orientation()??"horizontal"};return x(Al.Provider,{value:a,get children(){return x(Wl,N({get open(){return i.isOpen()},get onOpenChange(){return i.setIsOpen}},s))}})}var Xm={};po(Xm,{Root:()=>hr,Separator:()=>Zm});function hr(e){let t;const n=ae({orientation:"horizontal"},e),[r,o]=J(n,["ref","orientation"]),s=qs(()=>t,()=>"hr");return x(Pe,N({as:"hr",ref(i){var a=Ee(c=>t=c,r.ref);typeof a=="function"&&a(i)},get role(){return s()!=="hr"?"separator":void 0},get"aria-orientation"(){return r.orientation==="vertical"?"vertical":void 0},get"data-orientation"(){return r.orientation}},o))}var Zm=hr,Qm={};po(Qm,{Arrow:()=>ri,CheckboxItem:()=>Dl,Content:()=>fi,DropdownMenu:()=>ey,Group:()=>li,GroupLabel:()=>Nl,Icon:()=>Bl,Item:()=>ui,ItemDescription:()=>Kl,ItemIndicator:()=>Ul,ItemLabel:()=>jl,Portal:()=>di,RadioGroup:()=>Vl,RadioItem:()=>Gl,Root:()=>hi,Separator:()=>hr,Sub:()=>Hl,SubContent:()=>ql,SubTrigger:()=>Yl,Trigger:()=>ci});function fi(e){const t=ht(),n=wt(),[r,o]=J(e,["onCloseAutoFocus","onInteractOutside"]);let s=!1;return x(zm,N({onCloseAutoFocus:c=>{r.onCloseAutoFocus?.(c),s||Se(n.triggerRef()),s=!1,c.preventDefault()},onInteractOutside:c=>{r.onInteractOutside?.(c),(!t.isModal()||c.detail.isContextMenu)&&(s=!0)}},o))}function hi(e){const t=`dropdownmenu-${Ct()}`,n=ae({id:t},e);return x(Jm,n)}var ey=Object.assign(hi,{Arrow:ri,CheckboxItem:Dl,Content:fi,Group:li,GroupLabel:Nl,Icon:Bl,Item:ui,ItemDescription:Kl,ItemIndicator:Ul,ItemLabel:jl,Portal:di,RadioGroup:Vl,RadioItem:Gl,Separator:hr,Sub:Hl,SubContent:ql,SubTrigger:Yl,Trigger:ci}),ty=te("<script id=kb-color-mode-script>"),Jl=me();function ny(){const e=ue(Jl);if(e===void 0)throw new Error("[kobalte]: `useColorMode` must be used within a `ColorModeProvider`");return e}var Xl="kb-color-mode";function ry(e){return{ssr:!1,type:"localStorage",get:t=>{let n;try{n=localStorage.getItem(e)}catch{}return n??t},set:t=>{try{localStorage.setItem(e,t)}catch{}}}}var oy=ry(Xl),pi="system";function Zl(){return window.matchMedia("(prefers-color-scheme: dark)")}function sy(){const e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(e)})})}}function iy(e,t=!0){const n=t?sy():void 0;document.documentElement.dataset.kbTheme=e,document.documentElement.style.colorScheme=e,n?.()}function Ql(e){return Zl().matches??e==="dark"?"dark":"light"}function ay(e){const t="light",n=e.get(t)??t;return n==="system"?Ql():n}function cy(e){const t=Zl(),n=r=>{e(r.matches?"dark":"light")};return t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}}function ly(e){const t=()=>e.initialColorMode??pi,n=()=>e.storageManager??oy;let r;const[o,s]=z(ay(n())),i=u=>{s(u),iy(u,e.disableTransitionOnChange)},a=u=>{r&&(r(),r=void 0);const d=u==="system";d&&(r=cy(i)),i(d?Ql():u),n().set(u)},c=()=>{a(o()==="dark"?"light":"dark")};G(()=>{a(n().get()??t())}),q(()=>{r?.()});const l={colorMode:o,setColorMode:a,toggleColorMode:c};return x(Jl.Provider,{value:l,get children(){return e.children}})}var uy=new Set(["light","dark","system"]);function dy(e){return uy.has(e)?e:pi}function fy(e){const t=N({initialColorMode:pi,storageType:"localStorage",storageKey:Xl},e),n=W(()=>{const r=dy(t.initialColorMode),o=`(function(){try{var a=function(o){var l="(prefers-color-scheme: dark)",v=window.matchMedia(l).matches?"dark":"light",e=o==="system"?v:o,d=document.documentElement,s=e==="dark";return d.style.colorScheme=e,d.dataset.kbTheme=e,o},u=a,h="${r}",r="${t.storageKey}",t=document.cookie.match(new RegExp("(^| )".concat(r,"=([^;]+)"))),c=t?t[2]:null;c?a(c):document.cookie="".concat(r,"=").concat(a(h),"; max-age=31536000; path=/")}catch(a){}})();`,s=`(function(){try{var a=function(c){var v="(prefers-color-scheme: dark)",h=window.matchMedia(v).matches?"dark":"light",r=c==="system"?h:c,o=document.documentElement,i=r==="dark";return o.style.colorScheme=r,o.dataset.kbTheme=r,c},n=a,m="${r}",e="${t.storageKey}",t=localStorage.getItem(e);t?a(t):localStorage.setItem(e,a(m))}catch(a){}})();`;return`!${t.storageType==="cookie"?o:s}`.trim()});return(()=>{var r=ty();return Fe(o=>{var s=t.nonce,i=n();return s!==o.e&&_n(r,"nonce",o.e=s),i!==o.t&&(r.innerHTML=o.t=i),o},{e:void 0,t:void 0}),r})()}var hy={};po(hy,{CloseButton:()=>gi,Content:()=>mi,Description:()=>yi,Dialog:()=>py,Overlay:()=>vi,Portal:()=>bi,Root:()=>xi,Title:()=>Si,Trigger:()=>Ci,useDialogContext:()=>Wt});var eu=me();function Wt(){const e=ue(eu);if(e===void 0)throw new Error("[kobalte]: `useDialogContext` must be used within a `Dialog` component");return e}function gi(e){const t=Wt(),[n,r]=J(e,["aria-label","onClick"]);return x(Mn,N({get"aria-label"(){return n["aria-label"]||t.translations().dismiss},onClick:s=>{pe(s,n.onClick),t.close()}},r))}function mi(e){let t;const n=Wt(),r=ae({id:n.generateId("content")},e),[o,s]=J(r,["ref","onOpenAutoFocus","onCloseAutoFocus","onPointerDownOutside","onFocusOutside","onInteractOutside"]);let i=!1,a=!1;const c=f=>{o.onPointerDownOutside?.(f),n.modal()&&f.detail.isContextMenu&&f.preventDefault()},l=f=>{o.onFocusOutside?.(f),n.modal()&&f.preventDefault()},u=f=>{o.onInteractOutside?.(f),!n.modal()&&(f.defaultPrevented||(i=!0,f.detail.originalEvent.type==="pointerdown"&&(a=!0)),je(n.triggerRef(),f.target)&&f.preventDefault(),f.detail.originalEvent.type==="focusin"&&a&&f.preventDefault())},d=f=>{o.onCloseAutoFocus?.(f),n.modal()?(f.preventDefault(),Se(n.triggerRef())):(f.defaultPrevented||(i||Se(n.triggerRef()),f.preventDefault()),i=!1,a=!1)};return Tl({isDisabled:()=>!(n.isOpen()&&n.modal()),targets:()=>t?[t]:[]}),Il({element:()=>t??null,enabled:()=>n.contentPresent()&&n.preventScroll()}),Rl({trapFocus:()=>n.isOpen()&&n.modal(),onMountAutoFocus:o.onOpenAutoFocus,onUnmountAutoFocus:d},()=>t),G(()=>q(n.registerContentId(s.id))),x(be,{get when(){return n.contentPresent()},get children(){return x(Sl,N({ref(f){var h=Ee(p=>{n.setContentRef(p),t=p},o.ref);typeof h=="function"&&h(f)},role:"dialog",tabIndex:-1,get disableOutsidePointerEvents(){return le(()=>!!n.modal())()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},get"aria-labelledby"(){return n.titleId()},get"aria-describedby"(){return n.descriptionId()},get"data-expanded"(){return n.isOpen()?"":void 0},get"data-closed"(){return n.isOpen()?void 0:""},onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,get onDismiss(){return n.close}},s))}})}function yi(e){const t=Wt(),n=ae({id:t.generateId("description")},e),[r,o]=J(n,["id"]);return G(()=>q(t.registerDescriptionId(r.id))),x(Pe,N({as:"p",get id(){return r.id}},o))}function vi(e){const t=Wt(),[n,r]=J(e,["ref","style","onPointerDown"]),o=s=>{pe(s,n.onPointerDown),s.target===s.currentTarget&&s.preventDefault()};return x(be,{get when(){return t.overlayPresent()},get children(){return x(Pe,N({as:"div",ref(s){var i=Ee(t.setOverlayRef,n.ref);typeof i=="function"&&i(s)},get style(){return uo({"pointer-events":"auto"},n.style)},get"data-expanded"(){return t.isOpen()?"":void 0},get"data-closed"(){return t.isOpen()?void 0:""},onPointerDown:o},r))}})}function bi(e){const t=Wt();return x(be,{get when(){return t.contentPresent()||t.overlayPresent()},get children(){return x(Sc,e)}})}var Aa={dismiss:"Dismiss"};function xi(e){const t=`dialog-${Ct()}`,n=ae({id:t,modal:!0,translations:Aa},e),[r,o]=z(),[s,i]=z(),[a,c]=z(),[l,u]=z(),[d,f]=z(),[h,p]=z(),m=si({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:C=>n.onOpenChange?.(C)}),g=()=>n.forceMount||m.isOpen(),{present:y}=gs({show:g,element:()=>l()??null}),{present:v}=gs({show:g,element:()=>d()??null}),b={translations:()=>n.translations??Aa,isOpen:m.isOpen,modal:()=>n.modal??!0,preventScroll:()=>n.preventScroll??b.modal(),contentId:r,titleId:s,descriptionId:a,triggerRef:h,overlayRef:l,setOverlayRef:u,contentRef:d,setContentRef:f,overlayPresent:y,contentPresent:v,close:m.close,toggle:m.toggle,setTriggerRef:p,generateId:fo(()=>n.id),registerContentId:Ft(o),registerTitleId:Ft(i),registerDescriptionId:Ft(c)};return x(eu.Provider,{value:b,get children(){return n.children}})}function Si(e){const t=Wt(),n=ae({id:t.generateId("title")},e),[r,o]=J(n,["id"]);return G(()=>q(t.registerTitleId(r.id))),x(Pe,N({as:"h2",get id(){return r.id}},o))}function Ci(e){const t=Wt(),[n,r]=J(e,["ref","onClick"]);return x(Mn,N({ref(s){var i=Ee(t.setTriggerRef,n.ref);typeof i=="function"&&i(s)},"aria-haspopup":"dialog",get"aria-expanded"(){return t.isOpen()},get"aria-controls"(){return le(()=>!!t.isOpen())()?t.contentId():void 0},get"data-expanded"(){return t.isOpen()?"":void 0},get"data-closed"(){return t.isOpen()?void 0:""},onClick:s=>{pe(s,n.onClick),t.toggle()}},r))}var py=Object.assign(xi,{CloseButton:gi,Content:mi,Description:yi,Overlay:vi,Portal:bi,Title:Si,Trigger:Ci});const gy="modulepreload",my=function(e){return"/where-to-eat/"+e},Da={},xo=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let c=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");o=c(n.map(l=>{if(l=my(l),l in Da)return;Da[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":gy,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},yy=function(){return null};var vy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},hn=vy,by=te("<svg>"),$a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xy=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Sy=e=>{const t=xy(e);return t.charAt(0).toUpperCase()+t.slice(1)},Cy=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),wy=e=>{const[t,n]=J(e,["color","size","strokeWidth","children","class","name","iconNode","absoluteStrokeWidth"]);return(()=>{var r=by();return so(r,N(hn,{get width(){return t.size??hn.width},get height(){return t.size??hn.height},get stroke(){return t.color??hn.stroke},get"stroke-width"(){return le(()=>!!t.absoluteStrokeWidth)()?Number(t.strokeWidth??hn["stroke-width"])*24/Number(t.size):Number(t.strokeWidth??hn["stroke-width"])},get class(){return Cy("lucide","lucide-icon",...t.name!=null?[`lucide-${$a(Sy(t.name))}`,`lucide-${$a(t.name)}`]:[],t.class!=null?t.class:"")}},n),!0,!0),re(r,x(vc,{get each(){return t.iconNode},children:([o,s])=>x($e,N({component:o},s))})),r})()},an=wy,_y=[["rect",{width:"18",height:"12",x:"3",y:"4",rx:"2",ry:"2",key:"1qhy41"}],["line",{x1:"2",x2:"22",y1:"20",y2:"20",key:"ni3hll"}]],Py=e=>x(an,N(e,{iconNode:_y,name:"laptop-minimal"})),ky=Py,Ry=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ty=e=>x(an,N(e,{iconNode:Ry,name:"moon"})),Fa=Ty,Iy=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ey=e=>x(an,N(e,{iconNode:Iy,name:"sun"})),Na=Ey,My=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ly=e=>x(an,N(e,{iconNode:My,name:"users"})),Bo=Ly,Oy=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],Ay=e=>x(an,N(e,{iconNode:Oy,name:"utensils-crossed"})),Dy=Ay,$y=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Fy=e=>x(an,N(e,{iconNode:$y,name:"chevron-down"})),Ny=Fy,By=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ky=e=>x(an,N(e,{iconNode:By,name:"user"})),Uy=Ky;const tu=me(),jy=()=>{const e=ue(tu);if(!e)throw new Error("missing CurrentUserProvider");return e},Ko="wte-current-users";function zy(e){const t=typeof localStorage<"u"?localStorage.getItem(Ko):null,n=t?JSON.parse(t):{userByConnection:{}},[r,o]=kl(n);G(()=>{typeof localStorage<"u"&&localStorage.setItem(Ko,JSON.stringify(r))}),Vt(()=>{if(typeof window>"u")return;const i=a=>{if(a.key===Ko&&a.newValue)try{const c=JSON.parse(a.newValue);o(He(c))}catch(c){console.error("Failed to parse current user storage update",c)}};window.addEventListener("storage",i),q(()=>window.removeEventListener("storage",i))});const s={store:r,getCurrentUser:i=>r.userByConnection[i]??null,setCurrentUser:(i,a)=>{o("userByConnection",i,a)},clearCurrentUser:i=>{o("userByConnection",i,void 0)}};return x(tu.Provider,{value:s,get children(){return e.children}})}const nu=me(),ru=()=>{const e=ue(nu);if(!e)throw new Error("missing storage settings provider");return e??{store:{connections:[]}}};function Vy(e){const t=typeof localStorage<"u"?localStorage.getItem("wte-connections"):null,n=t?JSON.parse(t):[],[r,o]=kl({connections:n});Vt(()=>{if(typeof window>"u")return;const i=a=>{if(a.key==="wte-connections"&&a.newValue)try{const c=JSON.parse(a.newValue);o("connections",He(c))}catch(c){console.error("Failed to parse storage update",c)}};window.addEventListener("storage",i),q(()=>window.removeEventListener("storage",i))}),G(()=>{typeof localStorage<"u"&&localStorage.setItem("wte-connections",JSON.stringify(r.connections))});const s={store:r,addNewConnection:i=>{const a=crypto.randomUUID(),c=[{id:crypto.randomUUID(),name:"Pizza place on the corner",updatedAt:Date.now()},{id:crypto.randomUUID(),name:"Chinese takeout",updatedAt:Date.now()}],l=[{id:crypto.randomUUID(),name:"Ben",email:null,updatedAt:Date.now()},{id:crypto.randomUUID(),name:"Daniel",email:null,updatedAt:Date.now()}],u=[{userId:l[0].id,eateryId:c[0].id,score:75,updatedAt:Date.now()},{userId:l[0].id,eateryId:c[1].id,score:20,updatedAt:Date.now()},{userId:l[1].id,eateryId:c[0].id,score:25,updatedAt:Date.now()},{userId:l[1].id,eateryId:c[1].id,score:45,updatedAt:Date.now()}],d={id:a,settings:{connection:{name:i,updatedAt:Date.now()},eateries:c,eateryScores:u,users:l,eateryVetoes:[]}};return o("connections",r.connections.length,{...d}),a},removeConnection:i=>{o("connections",r.connections.filter(a=>a.id!==i))},updateConnection:(i,a,c)=>{const l=r.connections.findIndex(u=>u.id===i);l!==-1&&o("connections",l,"settings","connection",He({name:a,updatedAt:c??Date.now()}))},upsertConnectionInfo:(i,a)=>{const c=r.connections.findIndex(u=>u.id===i);if(c===-1){const u={id:i,settings:{connection:a,eateries:[],users:[],eateryScores:[],eateryVetoes:[]}};o("connections",r.connections.length,u);return}const l=r.connections[c].settings.connection;(a.updatedAt??0)<=(l.updatedAt??0)||o("connections",c,"settings","connection",He(a))},setConnection:i=>{const a=r.connections.findIndex(c=>c.id===i.id);if(a!==-1){const c=r.connections[a],l=(h,p)=>{const m=new Map;for(const g of h)m.set(g.id,g);for(const g of p){const y=m.get(g.id);(!y||(g.updatedAt??0)>(y.updatedAt??0))&&m.set(g.id,g)}return Array.from(m.values())},u=l(c.settings.users,i.settings.users),d=l(c.settings.eateries,i.settings.eateries),f=(h,p)=>{const m=new Map;for(const g of h)m.set(`${g.userId}|${g.eateryId}`,g);for(const g of p){const y=`${g.userId}|${g.eateryId}`,v=m.get(y);(!v||(g.updatedAt??0)>(v.updatedAt??0))&&m.set(y,g)}return Array.from(m.values())};o("connections",a,He({id:c.id,settings:{connection:i.settings.connection.updatedAt>c.settings.connection.updatedAt?i.settings.connection:c.settings.connection,users:u,eateries:d,eateryScores:f(c.settings.eateryScores,i.settings.eateryScores),eateryVetoes:f(c.settings.eateryVetoes??[],i.settings.eateryVetoes??[])}}))}else o("connections",r.connections.length,i)},addUser:(i,a,c)=>{const l=r.connections.findIndex(d=>d.id===i);if(l===-1)throw new Error("Connection not found");const u={id:crypto.randomUUID(),name:a,email:c??null,updatedAt:Date.now()};return o("connections",l,"settings","users",r.connections[l].settings.users.length,{...u}),u.id},removeUser:(i,a)=>{const c=r.connections.findIndex(d=>d.id===i);if(c===-1)return;const l=r.connections[c].settings.users.findIndex(d=>d.id===a);if(l!==-1){const d=ut(r.connections[c].settings.users[l]);o("connections",c,"settings","users",l,{...d,_deleted:!0,updatedAt:Date.now()})}const u=r.connections[c].settings.eateryScores;for(let d=0;d<u.length;d++)u[d].userId===a&&o("connections",c,"settings","eateryScores",d,He({...u[d],_deleted:!0,updatedAt:Date.now()}))},updateUser:(i,a,c,l)=>{const u=r.connections.findIndex(f=>f.id===i);if(u===-1)return;const d=r.connections[u].settings.users.findIndex(f=>f.id===a);d!==-1&&o("connections",u,"settings","users",d,He({id:a,name:c,email:l??null,updatedAt:Date.now()}))},updateScore:(i,a,c,l)=>{const u=r.connections.findIndex(h=>h.id===i);if(u===-1)return;const d=r.connections[u].settings.eateryScores.findIndex(h=>h.userId===a&&h.eateryId===c),f={userId:a,eateryId:c,score:l,updatedAt:Date.now()};d===-1?o("connections",u,"settings","eateryScores",r.connections[u].settings.eateryScores.length,f):o("connections",u,"settings","eateryScores",d,He(f))},addEatery:(i,a)=>{const c=r.connections.findIndex(p=>p.id===i);if(c===-1)throw new Error("Connection not found");const l={id:crypto.randomUUID(),name:a,updatedAt:Date.now()},u=[];o("connections",c,"settings","eateries",r.connections[c].settings.eateries.length,{...l});const d=r.connections[c].settings.users.filter(p=>!p._deleted),f=r.connections[c].settings.eateryScores;let h=f.length;for(const p of d){const m=f.findIndex(y=>y.userId===p.id&&y.eateryId===l.id),g={userId:p.id,eateryId:l.id,score:50,updatedAt:Date.now(),_deleted:!1};m===-1?(o("connections",c,"settings","eateryScores",h,g),h++,u.push(g)):f[m]._deleted&&(o("connections",c,"settings","eateryScores",m,He(g)),u.push(g))}return{eateryId:l.id,createdScores:u}},removeEatery:(i,a)=>{const c=r.connections.findIndex(d=>d.id===i);if(c===-1)return;const l=r.connections[c].settings.eateries.findIndex(d=>d.id===a);if(l!==-1){const d=ut(r.connections[c].settings.eateries[l]);o("connections",c,"settings","eateries",l,{...d,_deleted:!0,updatedAt:Date.now()})}const u=r.connections[c].settings.eateryScores;for(let d=0;d<u.length;d++)u[d].eateryId===a&&o("connections",c,"settings","eateryScores",d,He({...u[d],_deleted:!0,updatedAt:Date.now()}))},updateEatery:(i,a,c)=>{const l=r.connections.findIndex(d=>d.id===i);if(l===-1)return;const u=r.connections[l].settings.eateries.findIndex(d=>d.id===a);u!==-1&&o("connections",l,"settings","eateries",u,He({id:a,name:c,updatedAt:Date.now()}))},upsertEatery:(i,a)=>{const c=r.connections.findIndex(u=>u.id===i);if(c===-1)return;const l=r.connections[c].settings.eateries.findIndex(u=>u.id===a.id);if(l===-1)o("connections",c,"settings","eateries",r.connections[c].settings.eateries.length,a);else{const u=r.connections[c].settings.eateries[l];a.updatedAt>(u.updatedAt??0)&&o("connections",c,"settings","eateries",l,a)}},upsertUser:(i,a)=>{const c=r.connections.findIndex(u=>u.id===i);if(c===-1)return;const l=r.connections[c].settings.users.findIndex(u=>u.id===a.id);if(l===-1)o("connections",c,"settings","users",r.connections[c].settings.users.length,a);else{const u=r.connections[c].settings.users[l];a.updatedAt>(u.updatedAt??0)&&o("connections",c,"settings","users",l,a)}},upsertScore:(i,a)=>{const c=r.connections.findIndex(u=>u.id===i);if(c===-1)return;const l=r.connections[c].settings.eateryScores.findIndex(u=>u.userId===a.userId&&u.eateryId===a.eateryId);if(l===-1)o("connections",c,"settings","eateryScores",u=>[...u,a]);else{const u=r.connections[c].settings.eateryScores[l];a.updatedAt>(u.updatedAt??0)&&o("connections",c,"settings","eateryScores",l,a)}},toggleVeto:(i,a,c)=>{const l=r.connections.findIndex(m=>m.id===i);if(l===-1)return;const u=r.connections[l].settings.eateryVetoes??[],d=u.findIndex(m=>m.userId===a&&m.eateryId===c),f=Date.now();if(d===-1){const m={userId:a,eateryId:c,updatedAt:f,_deleted:!1};return o("connections",l,"settings","eateryVetoes",g=>[...g??[],m]),m}const h=u[d],p={...h,_deleted:!h._deleted,updatedAt:f};return o("connections",l,"settings","eateryVetoes",d,He(p)),p},upsertVeto:(i,a)=>{const c=r.connections.findIndex(d=>d.id===i);if(c===-1)return;const l=r.connections[c].settings.eateryVetoes??[],u=l.findIndex(d=>d.userId===a.userId&&d.eateryId===a.eateryId);if(u===-1)o("connections",c,"settings","eateryVetoes",d=>[...d??[],a]);else{const d=l[u];a.updatedAt>(d.updatedAt??0)&&o("connections",c,"settings","eateryVetoes",u,a)}}};return x(nu.Provider,{value:s,get children(){return e.children}})}function ou(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=ou(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function su(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=ou(e))&&(r&&(r+=" "),r+=t);return r}const Ba=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Ka=su,Gy=(e,t)=>n=>{var r;if(t?.variants==null)return Ka(e,n?.class,n?.className);const{variants:o,defaultVariants:s}=t,i=Object.keys(o).map(l=>{const u=n?.[l],d=s?.[l];if(u===null)return null;const f=Ba(u)||Ba(d);return o[l][f]}),a=n&&Object.entries(n).reduce((l,u)=>{let[d,f]=u;return f===void 0||(l[d]=f),l},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((l,u)=>{let{class:d,className:f,...h}=u;return Object.entries(h).every(p=>{let[m,g]=p;return Array.isArray(g)?g.includes({...s,...a}[m]):{...s,...a}[m]===g})?[...l,d,f]:l},[]);return Ka(e,i,c,n?.class,n?.className)},wi="-",Wy=e=>{const t=qy(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const a=i.split(wi);return a[0]===""&&a.length!==1&&a.shift(),iu(a,t)||Hy(i)},getConflictingClassGroupIds:(i,a)=>{const c=n[i]||[];return a&&r[i]?[...c,...r[i]]:c}}},iu=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?iu(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const s=e.join(wi);return t.validators.find(({validator:i})=>i(s))?.classGroupId},Ua=/^\[(.+)\]$/,Hy=e=>{if(Ua.test(e)){const t=Ua.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},qy=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const o in n)bs(n[o],r,o,t);return r},bs=(e,t,n,r)=>{e.forEach(o=>{if(typeof o=="string"){const s=o===""?t:ja(t,o);s.classGroupId=n;return}if(typeof o=="function"){if(Yy(o)){bs(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,i])=>{bs(i,ja(t,s),n,r)})})},ja=(e,t)=>{let n=e;return t.split(wi).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Yy=e=>e.isThemeGetter,Jy=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(s,i)=>{n.set(s,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=r.get(s))!==void 0)return o(s,i),i},set(s,i){n.has(s)?n.set(s,i):o(s,i)}}},xs="!",Ss=":",Xy=Ss.length,Zy=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=o=>{const s=[];let i=0,a=0,c=0,l;for(let p=0;p<o.length;p++){let m=o[p];if(i===0&&a===0){if(m===Ss){s.push(o.slice(c,p)),c=p+Xy;continue}if(m==="/"){l=p;continue}}m==="["?i++:m==="]"?i--:m==="("?a++:m===")"&&a--}const u=s.length===0?o:o.substring(c),d=Qy(u),f=d!==u,h=l&&l>c?l-c:void 0;return{modifiers:s,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:h}};if(t){const o=t+Ss,s=r;r=i=>i.startsWith(o)?s(i.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(n){const o=r;r=s=>n({className:s,parseClassName:o})}return r},Qy=e=>e.endsWith(xs)?e.substring(0,e.length-1):e.startsWith(xs)?e.substring(1):e,ev=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let s=[];return r.forEach(i=>{i[0]==="["||t[i]?(o.push(...s.sort(),i),s=[]):s.push(i)}),o.push(...s.sort()),o}},tv=e=>({cache:Jy(e.cacheSize),parseClassName:Zy(e),sortModifiers:ev(e),...Wy(e)}),nv=/\s+/,rv=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:s}=t,i=[],a=e.trim().split(nv);let c="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{isExternal:d,modifiers:f,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(u);if(d){c=u+(c.length>0?" "+c:c);continue}let g=!!m,y=r(g?p.substring(0,m):p);if(!y){if(!g){c=u+(c.length>0?" "+c:c);continue}if(y=r(p),!y){c=u+(c.length>0?" "+c:c);continue}g=!1}const v=s(f).join(":"),b=h?v+xs:v,C=b+y;if(i.includes(C))continue;i.push(C);const w=o(y,g);for(let R=0;R<w.length;++R){const T=w[R];i.push(b+T)}c=u+(c.length>0?" "+c:c)}return c};function ov(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=au(t))&&(r&&(r+=" "),r+=n);return r}const au=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=au(e[r]))&&(n&&(n+=" "),n+=t);return n};function sv(e,...t){let n,r,o,s=i;function i(c){const l=t.reduce((u,d)=>d(u),e());return n=tv(l),r=n.cache.get,o=n.cache.set,s=a,a(c)}function a(c){const l=r(c);if(l)return l;const u=rv(c,n);return o(c,u),u}return function(){return s(ov.apply(null,arguments))}}const ve=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},cu=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,lu=/^\((?:(\w[\w-]*):)?(.+)\)$/i,iv=/^\d+\/\d+$/,av=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cv=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lv=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,uv=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dv=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,pn=e=>iv.test(e),ne=e=>!!e&&!Number.isNaN(Number(e)),Tt=e=>!!e&&Number.isInteger(Number(e)),Uo=e=>e.endsWith("%")&&ne(e.slice(0,-1)),pt=e=>av.test(e),fv=()=>!0,hv=e=>cv.test(e)&&!lv.test(e),uu=()=>!1,pv=e=>uv.test(e),gv=e=>dv.test(e),mv=e=>!K(e)&&!U(e),yv=e=>An(e,hu,uu),K=e=>cu.test(e),Ht=e=>An(e,pu,hv),jo=e=>An(e,Cv,ne),za=e=>An(e,du,uu),vv=e=>An(e,fu,gv),_r=e=>An(e,gu,pv),U=e=>lu.test(e),Un=e=>Dn(e,pu),bv=e=>Dn(e,wv),Va=e=>Dn(e,du),xv=e=>Dn(e,hu),Sv=e=>Dn(e,fu),Pr=e=>Dn(e,gu,!0),An=(e,t,n)=>{const r=cu.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Dn=(e,t,n=!1)=>{const r=lu.exec(e);return r?r[1]?t(r[1]):n:!1},du=e=>e==="position"||e==="percentage",fu=e=>e==="image"||e==="url",hu=e=>e==="length"||e==="size"||e==="bg-size",pu=e=>e==="length",Cv=e=>e==="number",wv=e=>e==="family-name",gu=e=>e==="shadow",_v=()=>{const e=ve("color"),t=ve("font"),n=ve("text"),r=ve("font-weight"),o=ve("tracking"),s=ve("leading"),i=ve("breakpoint"),a=ve("container"),c=ve("spacing"),l=ve("radius"),u=ve("shadow"),d=ve("inset-shadow"),f=ve("text-shadow"),h=ve("drop-shadow"),p=ve("blur"),m=ve("perspective"),g=ve("aspect"),y=ve("ease"),v=ve("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],w=()=>[...C(),U,K],R=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto","contain","none"],S=()=>[U,K,c],P=()=>[pn,"full","auto",...S()],L=()=>[Tt,"none","subgrid",U,K],O=()=>["auto",{span:["full",Tt,U,K]},Tt,U,K],A=()=>[Tt,"auto",U,K],H=()=>["auto","min","max","fr",U,K],F=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ee=()=>["start","end","center","stretch","center-safe","end-safe"],Q=()=>["auto",...S()],D=()=>[pn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],I=()=>[e,U,K],ie=()=>[...C(),Va,za,{position:[U,K]}],Be=()=>["no-repeat",{repeat:["","x","y","space","round"]}],st=()=>["auto","cover","contain",xv,yv,{size:[U,K]}],Qe=()=>[Uo,Un,Ht],fe=()=>["","none","full",l,U,K],_e=()=>["",ne,Un,Ht],Pt=()=>["solid","dashed","dotted","double"],$n=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],k=()=>[ne,Uo,Va,za],M=()=>["","none",p,U,K],B=()=>["none",ne,U,K],V=()=>["none",ne,U,K],ke=()=>[ne,U,K],Le=()=>[pn,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[pt],breakpoint:[pt],color:[fv],container:[pt],"drop-shadow":[pt],ease:["in","out","in-out"],font:[mv],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[pt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[pt],shadow:[pt],spacing:["px",ne],text:[pt],"text-shadow":[pt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",pn,K,U,g]}],container:["container"],columns:[{columns:[ne,K,U,a]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:w()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[Tt,"auto",U,K]}],basis:[{basis:[pn,"full","auto",a,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ne,pn,"auto","initial","none",K]}],grow:[{grow:["",ne,U,K]}],shrink:[{shrink:["",ne,U,K]}],order:[{order:[Tt,"first","last","none",U,K]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":H()}],"auto-rows":[{"auto-rows":H()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...F(),"normal"]}],"justify-items":[{"justify-items":[...ee(),"normal"]}],"justify-self":[{"justify-self":["auto",...ee()]}],"align-content":[{content:["normal",...F()]}],"align-items":[{items:[...ee(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ee(),{baseline:["","last"]}]}],"place-content":[{"place-content":F()}],"place-items":[{"place-items":[...ee(),"baseline"]}],"place-self":[{"place-self":["auto",...ee()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:Q()}],mx:[{mx:Q()}],my:[{my:Q()}],ms:[{ms:Q()}],me:[{me:Q()}],mt:[{mt:Q()}],mr:[{mr:Q()}],mb:[{mb:Q()}],ml:[{ml:Q()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:D()}],w:[{w:[a,"screen",...D()]}],"min-w":[{"min-w":[a,"screen","none",...D()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[i]},...D()]}],h:[{h:["screen","lh",...D()]}],"min-h":[{"min-h":["screen","lh","none",...D()]}],"max-h":[{"max-h":["screen","lh",...D()]}],"font-size":[{text:["base",n,Un,Ht]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,U,jo]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Uo,K]}],"font-family":[{font:[bv,K,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,U,K]}],"line-clamp":[{"line-clamp":[ne,"none",U,jo]}],leading:[{leading:[s,...S()]}],"list-image":[{"list-image":["none",U,K]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",U,K]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Pt(),"wavy"]}],"text-decoration-thickness":[{decoration:[ne,"from-font","auto",U,Ht]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[ne,"auto",U,K]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",U,K]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",U,K]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:Be()}],"bg-size":[{bg:st()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Tt,U,K],radial:["",U,K],conic:[Tt,U,K]},Sv,vv]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:Qe()}],"gradient-via-pos":[{via:Qe()}],"gradient-to-pos":[{to:Qe()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:fe()}],"rounded-s":[{"rounded-s":fe()}],"rounded-e":[{"rounded-e":fe()}],"rounded-t":[{"rounded-t":fe()}],"rounded-r":[{"rounded-r":fe()}],"rounded-b":[{"rounded-b":fe()}],"rounded-l":[{"rounded-l":fe()}],"rounded-ss":[{"rounded-ss":fe()}],"rounded-se":[{"rounded-se":fe()}],"rounded-ee":[{"rounded-ee":fe()}],"rounded-es":[{"rounded-es":fe()}],"rounded-tl":[{"rounded-tl":fe()}],"rounded-tr":[{"rounded-tr":fe()}],"rounded-br":[{"rounded-br":fe()}],"rounded-bl":[{"rounded-bl":fe()}],"border-w":[{border:_e()}],"border-w-x":[{"border-x":_e()}],"border-w-y":[{"border-y":_e()}],"border-w-s":[{"border-s":_e()}],"border-w-e":[{"border-e":_e()}],"border-w-t":[{"border-t":_e()}],"border-w-r":[{"border-r":_e()}],"border-w-b":[{"border-b":_e()}],"border-w-l":[{"border-l":_e()}],"divide-x":[{"divide-x":_e()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":_e()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Pt(),"hidden","none"]}],"divide-style":[{divide:[...Pt(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...Pt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ne,U,K]}],"outline-w":[{outline:["",ne,Un,Ht]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",u,Pr,_r]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",d,Pr,_r]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:_e()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[ne,Ht]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":_e()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",f,Pr,_r]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[ne,U,K]}],"mix-blend":[{"mix-blend":[...$n(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":$n()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ne]}],"mask-image-linear-from-pos":[{"mask-linear-from":k()}],"mask-image-linear-to-pos":[{"mask-linear-to":k()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":k()}],"mask-image-t-to-pos":[{"mask-t-to":k()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":k()}],"mask-image-r-to-pos":[{"mask-r-to":k()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":k()}],"mask-image-b-to-pos":[{"mask-b-to":k()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":k()}],"mask-image-l-to-pos":[{"mask-l-to":k()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":k()}],"mask-image-x-to-pos":[{"mask-x-to":k()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":k()}],"mask-image-y-to-pos":[{"mask-y-to":k()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[U,K]}],"mask-image-radial-from-pos":[{"mask-radial-from":k()}],"mask-image-radial-to-pos":[{"mask-radial-to":k()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[ne]}],"mask-image-conic-from-pos":[{"mask-conic-from":k()}],"mask-image-conic-to-pos":[{"mask-conic-to":k()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:Be()}],"mask-size":[{mask:st()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",U,K]}],filter:[{filter:["","none",U,K]}],blur:[{blur:M()}],brightness:[{brightness:[ne,U,K]}],contrast:[{contrast:[ne,U,K]}],"drop-shadow":[{"drop-shadow":["","none",h,Pr,_r]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",ne,U,K]}],"hue-rotate":[{"hue-rotate":[ne,U,K]}],invert:[{invert:["",ne,U,K]}],saturate:[{saturate:[ne,U,K]}],sepia:[{sepia:["",ne,U,K]}],"backdrop-filter":[{"backdrop-filter":["","none",U,K]}],"backdrop-blur":[{"backdrop-blur":M()}],"backdrop-brightness":[{"backdrop-brightness":[ne,U,K]}],"backdrop-contrast":[{"backdrop-contrast":[ne,U,K]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ne,U,K]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ne,U,K]}],"backdrop-invert":[{"backdrop-invert":["",ne,U,K]}],"backdrop-opacity":[{"backdrop-opacity":[ne,U,K]}],"backdrop-saturate":[{"backdrop-saturate":[ne,U,K]}],"backdrop-sepia":[{"backdrop-sepia":["",ne,U,K]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",U,K]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ne,"initial",U,K]}],ease:[{ease:["linear","initial",y,U,K]}],delay:[{delay:[ne,U,K]}],animate:[{animate:["none",v,U,K]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,U,K]}],"perspective-origin":[{"perspective-origin":w()}],rotate:[{rotate:B()}],"rotate-x":[{"rotate-x":B()}],"rotate-y":[{"rotate-y":B()}],"rotate-z":[{"rotate-z":B()}],scale:[{scale:V()}],"scale-x":[{"scale-x":V()}],"scale-y":[{"scale-y":V()}],"scale-z":[{"scale-z":V()}],"scale-3d":["scale-3d"],skew:[{skew:ke()}],"skew-x":[{"skew-x":ke()}],"skew-y":[{"skew-y":ke()}],transform:[{transform:[U,K,"","none","gpu","cpu"]}],"transform-origin":[{origin:w()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",U,K]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",U,K]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[ne,Un,Ht,jo]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Pv=sv(_v);function _t(...e){return Pv(su(e))}const kv=Gy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-border bg-background hover:bg-muted hover:text-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 px-3 text-xs",lg:"h-11 px-6",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}}),So=e=>{const[t,n]=J(e,["variant","size","class"]);return x(Mn,N({get class(){return _t(kv({variant:t.variant,size:t.size}),t.class)}},n))},mu=ci,yu=e=>x(hi,N({gutter:4},e)),vu=e=>{const[,t]=J(e,["class"]);return x(di,{get children(){return x(fi,N({get class(){return _t("z-50 min-w-32 origin-[var(--kb-menu-content-transform-origin)] animate-content-hide overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[expanded]:animate-content-show",e.class)}},t))}})},Ir=e=>{const[,t]=J(e,["class"]);return x(ui,N({get class(){return _t("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e.class)}},t))},Rv=e=>{const[,t]=J(e,["class"]);return x(hr,N({get class(){return _t("-mx-1 my-1 h-px bg-muted",e.class)}},t))};var Tv=te('<div class="flex items-center gap-1.5 px-2 py-1 rounded-md bg-muted/50 text-muted-foreground text-sm"><span class="hidden sm:inline">Select identity'),Iv=te('<div class="w-7 h-7 rounded-full bg-primary/10 flex items-center justify-center text-primary text-sm font-semibold">'),Ev=te('<span class="hidden sm:inline text-sm font-medium max-w-[100px] truncate">'),Mv=te('<div class="px-2 py-1.5 text-xs text-muted-foreground">Signed in as'),Lv=te('<div class="px-2 py-1 font-medium text-sm">'),Ov=te('<div class="px-2 py-1.5 text-xs text-muted-foreground">Switch to'),Av=te('<div class="px-2 py-2 text-xs text-muted-foreground text-center">No other users'),Dv=te('<div class="w-6 h-6 rounded-full bg-secondary/50 flex items-center justify-center text-xs font-semibold">'),$v=te("<span class=truncate>");function Fv(){const e=ru(),t=jy(),n=Xh(),r=W(()=>{const u=n()?.pathname??"";if(!u)return null;const d=u.match(/\/wheel\/([^/]+)/),f=u.match(/\/settings\/([^/]+)/);return d?.[1]??f?.[1]??null}),o=W(()=>{const l=r();return l?e.store.connections.find(u=>u.id===l):null}),s=W(()=>o()?.settings.users.filter(l=>!l._deleted)??[]),i=W(()=>{const l=r();return l?t.getCurrentUser(l):null}),a=W(()=>{const l=i();return l?s().find(u=>u.id===l)??null:null}),c=l=>{const u=r();u&&t.setCurrentUser(u,l)};return x(be,{get when(){return le(()=>!!r())()&&o()},get children(){return x(be,{get when(){return a()},get fallback(){return(()=>{var l=Tv(),u=l.firstChild;return re(l,x(Uy,{class:"w-4 h-4"}),u),l})()},children:l=>x(yu,{get children(){return[x(mu,{as:So,variant:"ghost",size:"sm",class:"h-9 gap-2 px-2","data-testid":"current-user-menu",get children(){return[(()=>{var u=Iv();return re(u,()=>l().name.charAt(0).toUpperCase()),u})(),(()=>{var u=Ev();return re(u,()=>l().name),u})(),x(Ny,{class:"w-3 h-3 text-muted-foreground"})]}}),x(vu,{class:"min-w-[160px]",get children(){return[Mv(),(()=>{var u=Lv();return re(u,()=>l().name),u})(),x(Rv,{}),Ov(),x(vc,{get each(){return s().filter(u=>u.id!==l().id)},children:u=>x(Ir,{onSelect:()=>c(u.id),class:"gap-2 cursor-pointer text-sm",get"data-testid"(){return`switch-to-user-${u.id}`},get children(){return[(()=>{var d=Dv();return re(d,()=>u.name.charAt(0).toUpperCase()),d})(),(()=>{var d=$v();return re(d,()=>u.name),d})()]}})}),x(be,{get when(){return s().filter(u=>u.id!==l().id).length===0},get children(){return Av()}})]}})]}})})}})}var Nv=te('<div class="fixed inset-0 z-50 flex items-start justify-center sm:items-center">'),Bv=te('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class=size-4><path d="M18 6l-12 12"></path><path d="M6 6l12 12">'),Kv=te("<span class=sr-only>Close"),Uv=te("<div>");const jv=xi,zv=Ci,Vv=e=>{const[,t]=J(e,["children"]);return x(bi,N(t,{get children(){var n=Nv();return re(n,()=>e.children),n}}))},Gv=e=>{const[,t]=J(e,["class"]);return x(vi,N({get class(){return _t("fixed inset-0 z-50 bg-background/80 data-[expanded]:animate-in data-[closed]:animate-out data-[closed]:fade-out-0 data-[expanded]:fade-in-0",e.class)}},t))},Wv=e=>{const[t,n]=J(e,["class","children","hideCloseButton"]);return x(Vv,{get children(){return[x(Gv,{}),x(mi,N({get class(){return _t("fixed left-1/2 top-1/2 z-50 grid max-h-screen w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 overflow-y-auto border bg-background p-6 shadow-lg duration-200 data-[expanded]:animate-in data-[closed]:animate-out data-[closed]:fade-out-0 data-[expanded]:fade-in-0 data-[closed]:zoom-out-95 data-[expanded]:zoom-in-95 data-[closed]:slide-out-to-left-1/2 data-[closed]:slide-out-to-top-[48%] data-[expanded]:slide-in-from-left-1/2 data-[expanded]:slide-in-from-top-[48%] sm:rounded-lg",t.class)}},n,{get children(){return[le(()=>t.children),le(()=>le(()=>!t.hideCloseButton)()&&x(gi,{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[expanded]:bg-accent data-[expanded]:text-muted-foreground",get children(){return[Bv(),Kv()]}}))]}}))]}})},Hv=e=>{const[,t]=J(e,["class"]);return(()=>{var n=Uv();return so(n,N({get class(){return _t("flex flex-col space-y-1.5 text-center sm:text-left",e.class)}},t),!1,!1),n})()},qv=e=>{const[,t]=J(e,["class"]);return x(Si,N({get class(){return _t("text-lg font-semibold leading-none tracking-tight",e.class)}},t))},Yv=e=>{const[,t]=J(e,["class"]);return x(yi,N({get class(){return _t("text-sm text-muted-foreground",e.class)}},t))};class Jv{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return Xv(t).buffer}}function Xv(e){let t=0;for(const o of e)t+=o.byteLength;const n=new Uint8Array(t);let r=0;for(const o of e){const s=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);n.set(s,r),r+=o.byteLength}return n}function bu(e){return new Zv(e).unpack()}function xu(e){const t=new Qv,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class Zv{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,o="",s,i;for(;r<t;)s=n[r],s<160?(i=s,r++):(s^192)<32?(i=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(i=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(i=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),o+=String.fromCodePoint(i);return this.index+=t,o}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const o=this.unpack();n[o]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,o=t&8388607|8388608;return(n===0?1:-1)*o*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,o=(t>>20&2047)-1023,i=(t&1048575|1048576)*2**(o-20)+n*2**(o-52);return(r===0?1:-1)*i}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class Qv{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=o=>{if(o<n){const s=this.pack(t[o]);return s instanceof Promise?s.then(()=>r(o+1)):r(o+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),o=t/2**r-1,s=Math.floor(o*2**52),i=2**32,a=n<<31|r+1023<<20|s/i&1048575,c=s%i;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(c)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const o=s=>{if(s<n.length){const i=n[s];if(t.hasOwnProperty(i)){this.pack(i);const a=this.pack(t[i]);if(a instanceof Promise)return a.then(()=>o(s+1))}return o(s+1)}};return o(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new Jv,this._textEncoder=new TextEncoder}}let Su=!0,Cu=!0;function Jn(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function cn(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(i,a){if(i!==t)return o.apply(this,arguments);const c=l=>{const u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(a,c),o.apply(this,[i,c])};const s=r.removeEventListener;r.removeEventListener=function(i,a){if(i!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(a))return s.apply(this,arguments);const c=this._eventMap[t].get(a);return this._eventMap[t].delete(a),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[i,c])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(i){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),i&&this.addEventListener(t,this["_on"+t]=i)},enumerable:!0,configurable:!0})}function eb(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Su=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function tb(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Cu=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function wu(){if(typeof window=="object"){if(Su)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function _i(e,t){Cu&&console.warn(e+" is deprecated, please use "+t+" instead.")}function nb(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(o=>o.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Jn(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Jn(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Jn(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=Jn(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function Ga(e){return Object.prototype.toString.call(e)==="[object Object]"}function _u(e){return Ga(e)?Object.keys(e).reduce(function(t,n){const r=Ga(e[n]),o=r?_u(e[n]):e[n],s=r&&!Object.keys(o).length;return o===void 0||s?t:Object.assign(t,{[n]:o})},{}):e}function Cs(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?Cs(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(o=>{Cs(e,e.get(o),n)})}))}function Wa(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(t===null)return o;const s=[];return e.forEach(i=>{i.type==="track"&&i.trackIdentifier===t.id&&s.push(i)}),s.forEach(i=>{e.forEach(a=>{a.type===r&&a.trackId===i.id&&Cs(e,a,o)})}),o}const Ha=wu;function Pu(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(u.ideal!==void 0){c.optional=c.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",l)]=u.ideal,c.optional.push(f),f={},f[d("max",l)]=u.ideal,c.optional.push(f)):(f[d("",l)]=u.ideal,c.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(f,l)]=u[f])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},o=function(a,c){if(t.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=t.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(p=>p.kind==="videoinput");let h=f.find(p=>d.some(m=>p.label.toLowerCase().includes(m)));return!h&&f.length&&d.includes("back")&&(h=f[f.length-1]),h&&(a.video.deviceId=l.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=r(a.video),Ha("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return Ha("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},i=function(a,c,l){o(a,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(s(d))})})};if(n.getUserMedia=i.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return o(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function ku(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Ru(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",o=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===o.track.id):s={track:o.track};const i=new Event("track");i.track=o.track,i.receiver=s,i.transceiver={receiver:s},i.streams=[r.stream],this.dispatchEvent(i)}),r.stream.getTracks().forEach(o=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===o.id):s={track:o};const i=new Event("track");i.track=o,i.receiver=s,i.transceiver={receiver:s},i.streams=[r.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else cn(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function Tu(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(o,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=o.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:o}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,c){let l=o.apply(this,arguments);return l||(l=t(this,a),this._senders.push(l)),l};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(i=>{this._senders.push(t(this,i))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(i=>{const a=this._senders.find(c=>c.track===i);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(o=>o._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Iu(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(i=>i._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(i=>Wa(i,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o}),cn(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>Wa(s,o.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let o,s,i;return this.getSenders().forEach(a=>{a.track===r&&(o?i=!0:o=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?i=!0:s=a),a.track===r)),i||o&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Eu(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(i=>this._shimmedLocalStreams[i][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(i,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(i){this._shimmedLocalStreams=this._shimmedLocalStreams||{},i.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[i.id]=[i].concat(c)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(i){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[i.id],r.apply(this,arguments)};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(i){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},i&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(i);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),o.apply(this,arguments)}}function Mu(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Eu(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new e.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(m=>m===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new e.MediaStream([u]);this._streams[d.id]=m,this._reverseStreams[m.id]=d,this.addStream(m)}return this.getSenders().find(m=>m.track===u)};function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function i(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=e.RTCPeerConnection.prototype[l],d={[l](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{const m=s(this,p);f[0].apply(null,[m])},p=>{f[1]&&f[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>s(this,p))}};e.RTCPeerConnection.prototype[l]=d[l]});const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=i(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:s(this,l)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(m=>u.track===m)&&(f=this._streams[h])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ws(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],o={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=o[n]})}function Lu(e,t){cn(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const qa=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Lu,shimAddTrackRemoveTrack:Mu,shimAddTrackRemoveTrackWithNative:Eu,shimGetSendersWithDtmf:Tu,shimGetUserMedia:Pu,shimMediaStream:ku,shimOnTrack:Ru,shimPeerConnection:ws,shimSenderReceiverGetStats:Iu},Symbol.toStringTag,{value:"Module"}));function Ou(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(o,s,i){_i("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(o).then(s,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const o=function(i,a,c){a in i&&!(c in i)&&(i[c]=i[a],delete i[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(i){return typeof i=="object"&&typeof i.audio=="object"&&(i=JSON.parse(JSON.stringify(i)),o(i.audio,"autoGainControl","mozAutoGainControl"),o(i.audio,"noiseSuppression","mozNoiseSuppression")),s(i)},r&&r.prototype.getSettings){const i=r.prototype.getSettings;r.prototype.getSettings=function(){const a=i.apply(this,arguments);return o(a,"mozAutoGainControl","autoGainControl"),o(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const i=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),o(a,"autoGainControl","mozAutoGainControl"),o(a,"noiseSuppression","mozNoiseSuppression")),i.apply(this,[a])}}}}function rb(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function Au(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function _s(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const s=e.RTCPeerConnection.prototype[o],i={[o](){return arguments[0]=new(o==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[o]=i[o]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,i,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(t.version<53&&!i)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(i,a)}}function Du(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=t.apply(this,[]);return o.forEach(s=>s._pc=this),o});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function $u(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(o=>o._pc=this),r}),cn(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Fu(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){_i("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Nu(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Bu(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const o=r.length>0;o&&r.forEach(i=>{if("rid"in i&&!/^[a-z0-9]{0,16}$/i.test(i.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in i&&!(parseFloat(i.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in i&&!(parseFloat(i.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(o){const{sender:i}=s,a=i.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,i.sendEncodings=r,this.setParametersPromises.push(i.setParameters(a).then(()=>{delete i.sendEncodings}).catch(()=>{delete i.sendEncodings})))}return s})}function Ku(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Uu(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function ju(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const Ya=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Bu,shimCreateAnswer:ju,shimCreateOffer:Uu,shimGetDisplayMedia:rb,shimGetParameters:Ku,shimGetUserMedia:Ou,shimOnTrack:Au,shimPeerConnection:_s,shimRTCDataChannel:Nu,shimReceiverGetStats:$u,shimRemoveStream:Fu,shimSenderGetStats:Du},Symbol.toStringTag,{value:"Module"}));function zu(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(o=>t.call(this,o,r)),r.getVideoTracks().forEach(o=>t.call(this,o,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...o){return o&&o.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const o=n.getTracks();this.getSenders().forEach(s=>{o.includes(s.track)&&this.removeTrack(s)})})}}function Vu(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const i=new Event("addstream");i.stream=s,r.dispatchEvent(i)})}),t.apply(r,arguments)}}}function Gu(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,s=t.setRemoteDescription,i=t.addIceCandidate;t.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f},t.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f};let a=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};t.setLocalDescription=a,a=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.setRemoteDescription=a,a=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.addIceCandidate=a}function Wu(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=o=>r(Hu(o))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,o,s){t.mediaDevices.getUserMedia(r).then(o,s)}).bind(t))}function Hu(e){return e&&e.video!==void 0?Object.assign({},e,{video:_u(e.video)}):e}function qu(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,o){if(r&&r.iceServers){const s=[];for(let i=0;i<r.iceServers.length;i++){let a=r.iceServers[i];a.urls===void 0&&a.url?(_i("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[i])}r.iceServers=s}return new t(r,o)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function Yu(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ju(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const o=this.getTransceivers().find(i=>i.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(i=>i.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Xu(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const Ja=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Xu,shimCallbacksAPI:Gu,shimConstraints:Hu,shimCreateOfferLegacy:Ju,shimGetUserMedia:Wu,shimLocalStreamsAPI:zu,shimRTCIceServerUrls:qu,shimRemoteStreamsAPI:Vu,shimTrackEventTransceiver:Yu},Symbol.toStringTag,{value:"Module"}));function ob(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zo={exports:{}},Xa;function sb(){return Xa||(Xa=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((o,s)=>(s>0?"m="+o:o).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(o=>o.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const o={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":o.relatedAddress=r[s+1];break;case"rport":o.relatedPort=parseInt(r[s+1],10);break;case"tcptype":o.tcpType=r[s+1];break;case"ufrag":o.ufrag=r[s+1],o.usernameFragment=r[s+1];break;default:o[r[s]]===void 0&&(o[r[s]]=r[s+1]);break}return o},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const o=n.component;o==="rtp"?r.push(1):o==="rtcp"?r.push(2):r.push(o),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const o={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),o.name=r[0],o.clockRate=parseInt(r[1],10),o.channels=r.length===3?parseInt(r[2],10):1,o.numChannels=o.channels,o},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const o=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(o!==1?"/"+o:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let o;const s=n.substring(n.indexOf(" ")+1).split(";");for(let i=0;i<s.length;i++)o=s[i].trim().split("="),r[o[0].trim()]=o[1];return r},t.writeFmtp=function(n){let r="",o=n.payloadType;if(n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(i=>{n.parameters[i]!==void 0?s.push(i+"="+n.parameters[i]):s.push(i)}),r+="a=fmtp:"+o+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",o=n.payloadType;return n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+o+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),o={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(o.attribute=n.substring(r+1,s),o.value=n.substring(s+1)):o.attribute=n.substring(r+1),o},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(o=>parseInt(o,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let o="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{o+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),o},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const o=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return o&&s?{usernameFragment:o.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const c=s[a],l=t.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=t.parseRtpMap(l),d=t.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?t.parseFmtp(d[0]):{},u.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(t.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(t.parseExtmap(a))});const i=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(a=>{i.forEach(c=>{a.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},t.writeRtpDescription=function(n,r){let o="";o+="m="+n+" ",o+=r.codecs.length>0?"9":"0",o+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=r.codecs.map(i=>i.preferredPayloadType!==void 0?i.preferredPayloadType:i.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(i=>{o+=t.writeRtpMap(i),o+=t.writeFmtp(i),o+=t.writeRtcpFb(i)});let s=0;return r.codecs.forEach(i=>{i.maxptime>s&&(s=i.maxptime)}),s>0&&(o+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(i=>{o+=t.writeExtmap(i)}),o},t.parseRtpEncodingParameters=function(n){const r=[],o=t.parseRtpParameters(n),s=o.fecMechanisms.indexOf("RED")!==-1,i=o.fecMechanisms.indexOf("ULPFEC")!==-1,a=t.matchPrefix(n,"a=ssrc:").map(f=>t.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const u=t.matchPrefix(n,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),o.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let h={ssrc:c,codecPayloadType:parseInt(f.parameters.apt,10)};c&&l&&(h.rtx={ssrc:l}),r.push(h),s&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:c,mechanism:i?"red+ulpfec":"red"},r.push(h))}}),r.length===0&&c&&r.push({ssrc:c});let d=t.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-2e3*8:d=void 0,r.forEach(f=>{f.maxBitrate=d})),r},t.parseRtcpParameters=function(n){const r={},o=t.matchPrefix(n,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];o&&(r.cname=o.value,r.ssrc=o.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const i=t.matchPrefix(n,"a=rtcp-mux");return r.mux=i.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const o=t.matchPrefix(n,"a=msid:");if(o.length===1)return r=o[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(i=>t.parseSsrcMedia(i)).filter(i=>i.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),o=t.matchPrefix(n,"a=max-message-size:");let s;o.length>0&&(s=parseInt(o[0].substring(19),10)),isNaN(s)&&(s=65536);const i=t.matchPrefix(n,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=t.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let o=[];return n.protocol!=="DTLS/SCTP"?o=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:o=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&o.push("a=max-message-size:"+r.maxMessageSize+`\r
`),o.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,o){let s;const i=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+s+" "+i+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const o=t.splitLines(n);for(let s=0;s<o.length;s++)switch(o[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const o=t.splitLines(n)[0].substring(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},t.parseOLine=function(n){const o=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let o=0;o<r.length;o++)if(r[o].length<2||r[o].charAt(1)!=="=")return!1;return!0},e.exports=t})(zo)),zo.exports}var Zu=sb();const wn=ob(Zu),ib=Cd({__proto__:null,default:wn},[Zu]);function Er(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const o=new t(r),s=wn.parseCandidate(r.candidate);for(const i in s)i in o||Object.defineProperty(o,i,{value:s[i]});return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,cn(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Ps(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||cn(e,"icecandidate",t=>{if(t.candidate){const n=wn.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Mr(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=wn.splitSections(a.sdp);return c.shift(),c.some(l=>{const u=wn.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},o=function(a){let c=65536;return t.browser==="firefox"&&(t.version<57?a===-1?c=16384:c=2147483637:t.version<60?c=t.version===57?65535:65536:c=2147483637),c},s=function(a,c){let l=65536;t.browser==="firefox"&&t.version===57&&(l=65535);const u=wn.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):t.browser==="firefox"&&c!==-1&&(l=2147483637),l},i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=o(c),u=s(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return i.apply(this,arguments)}}function Lr(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,o){const s=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&o.sctp&&c>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const o=n.apply(this,arguments);return t(o,this),o},cn(e,"datachannel",r=>(t(r.channel,r.target),r))}function ks(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const s=o.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const i=new Event("connectionstatechange",o);s.dispatchEvent(i)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Rs(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=o.sdp.split(`
`).filter(i=>i.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&o instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:o.type,sdp:s}):o.sdp=s}return n.apply(this,arguments)}}function Or(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ar(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let o=arguments[0]||{};if(typeof o!="object"||o.type&&o.sdp)return n.apply(this,arguments);if(o={type:o.type,sdp:o.sdp},!o.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":o.type="offer";break;default:o.type="answer";break}return o.sdp||o.type!=="offer"&&o.type!=="answer"?n.apply(this,[o]):(o.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(i=>n.apply(this,[i]))})}const ab=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Rs,shimAddIceCandidateNullOrEmpty:Or,shimConnectionState:ks,shimMaxMessageSize:Mr,shimParameterlessSetLocalDescription:Ar,shimRTCIceCandidate:Er,shimRTCIceCandidateRelayProtocol:Ps,shimSendThrowTypeError:Lr},Symbol.toStringTag,{value:"Module"}));function cb({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=wu,r=nb(e),o={browserDetails:r,commonShim:ab,extractVersion:Jn,disableLog:eb,disableWarnings:tb,sdp:ib};switch(r.browser){case"chrome":if(!qa||!ws||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),o;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),o;n("adapter.js shimming chrome."),o.browserShim=qa,Or(e,r),Ar(e),Pu(e,r),ku(e),ws(e,r),Ru(e),Mu(e,r),Tu(e),Iu(e),Lu(e,r),Er(e),Ps(e),ks(e),Mr(e,r),Lr(e),Rs(e,r);break;case"firefox":if(!Ya||!_s||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),o;n("adapter.js shimming firefox."),o.browserShim=Ya,Or(e,r),Ar(e),Ou(e,r),_s(e,r),Au(e),Fu(e),Du(e),$u(e),Nu(e),Bu(e),Ku(e),Uu(e),ju(e),Er(e),ks(e),Mr(e,r),Lr(e);break;case"safari":if(!Ja||!t.shimSafari)return n("Safari shim is not included in this adapter release."),o;n("adapter.js shimming safari."),o.browserShim=Ja,Or(e,r),Ar(e),qu(e),Ju(e),Gu(e),zu(e),Vu(e),Yu(e),Wu(e),Xu(e),Er(e),Ps(e),Mr(e,r),Lr(e),Rs(e,r);break;default:n("Unsupported browser!");break}return o}const Za=cb({window:typeof window>"u"?void 0:window});function ln(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class Qu{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,o=Math.ceil(r/this.chunkedMTU);let s=0,i=0;for(;i<r;){const a=Math.min(r,i+this.chunkedMTU),c=t.slice(i,a),l={__peerData:this._dataCount,n:s,data:c,total:o};n.push(l),i=a,s++}return this._dataCount++,n}}}function lb(e){let t=0;for(const o of e)t+=o.byteLength;const n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.byteLength;return n}const Vo=Za.default||Za,jn=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return Vo.browserDetails.browser}getVersion(){return Vo.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=Vo.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},ub=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),ed=()=>Math.random().toString(36).slice(2),Qa={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class db extends Qu{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(o){o.target&&n(o.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Qa,this.browser=jn.getBrowser(),this.browserVersion=jn.getVersion(),this.pack=xu,this.unpack=bu,this.supports=(function(){const n={browser:jn.isBrowserSupported(),webRTC:jn.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(Qa),n.audioVideo=!0;let o;try{o=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!o.ordered;try{o.binaryType="blob",n.binaryBlob=!jn.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=ub,this.randomToken=ed}}const Ae=new db,fb="PeerJS: ";class hb{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[fb,...n];for(const o in r)r[o]instanceof Error&&(r[o]="("+r[o].name+") "+r[o].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var j=new hb,Pi={},pb=Object.prototype.hasOwnProperty,Oe="~";function cr(){}Object.create&&(cr.prototype=Object.create(null),new cr().__proto__||(Oe=!1));function gb(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function td(e,t,n,r,o){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new gb(n,r||e,o),i=Oe?Oe+t:t;return e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],s]:e._events[i].push(s):(e._events[i]=s,e._eventsCount++),e}function Dr(e,t){--e._eventsCount===0?e._events=new cr:delete e._events[t]}function Me(){this._events=new cr,this._eventsCount=0}Me.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)pb.call(n,r)&&t.push(Oe?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Me.prototype.listeners=function(t){var n=Oe?Oe+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i};Me.prototype.listenerCount=function(t){var n=Oe?Oe+t:t,r=this._events[n];return r?r.fn?1:r.length:0};Me.prototype.emit=function(t,n,r,o,s,i){var a=Oe?Oe+t:t;if(!this._events[a])return!1;var c=this._events[a],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,n),!0;case 3:return c.fn.call(c.context,n,r),!0;case 4:return c.fn.call(c.context,n,r,o),!0;case 5:return c.fn.call(c.context,n,r,o,s),!0;case 6:return c.fn.call(c.context,n,r,o,s,i),!0}for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var f=c.length,h;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(t,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,n);break;case 3:c[d].fn.call(c[d].context,n,r);break;case 4:c[d].fn.call(c[d].context,n,r,o);break;default:if(!u)for(h=1,u=new Array(l-1);h<l;h++)u[h-1]=arguments[h];c[d].fn.apply(c[d].context,u)}}return!0};Me.prototype.on=function(t,n,r){return td(this,t,n,r,!1)};Me.prototype.once=function(t,n,r){return td(this,t,n,r,!0)};Me.prototype.removeListener=function(t,n,r,o){var s=Oe?Oe+t:t;if(!this._events[s])return this;if(!n)return Dr(this,s),this;var i=this._events[s];if(i.fn)i.fn===n&&(!o||i.once)&&(!r||i.context===r)&&Dr(this,s);else{for(var a=0,c=[],l=i.length;a<l;a++)(i[a].fn!==n||o&&!i[a].once||r&&i[a].context!==r)&&c.push(i[a]);c.length?this._events[s]=c.length===1?c[0]:c:Dr(this,s)}return this};Me.prototype.removeAllListeners=function(t){var n;return t?(n=Oe?Oe+t:t,this._events[n]&&Dr(this,n)):(this._events=new cr,this._eventsCount=0),this};Me.prototype.off=Me.prototype.removeListener;Me.prototype.addListener=Me.prototype.on;Me.prefixed=Oe;Me.EventEmitter=Me;Pi=Me;var un={};ln(un,"ConnectionType",()=>Nt);ln(un,"PeerErrorType",()=>ye);ln(un,"BaseConnectionErrorType",()=>Ts);ln(un,"DataConnectionErrorType",()=>ki);ln(un,"SerializationType",()=>Co);ln(un,"SocketEventType",()=>Ot);ln(un,"ServerMessageType",()=>Te);var Nt=(function(e){return e.Data="data",e.Media="media",e})({}),ye=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),Ts=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),ki=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),Co=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),Ot=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),Te=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const nd="1.5.5";class mb extends Pi.EventEmitter{constructor(t,n,r,o,s,i=5e3){super(),this.pingInterval=i,this._disconnected=!0,this._messagesQueue=[];const a=t?"wss://":"ws://";this._baseUrl=a+n+":"+r+o+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+nd),this._disconnected=!1,this._socket.onmessage=o=>{let s;try{s=JSON.parse(o.data),j.log("Server message received:",s)}catch{j.log("Invalid server message",o.data);return}this.emit(Ot.Message,s)},this._socket.onclose=o=>{this._disconnected||(j.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit(Ot.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),j.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){j.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:Te.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Ot.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class rd{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Nt.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,o={ordered:!!t.reliable},s=n.createDataChannel(r.label,o);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){j.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,o=this.connection.type,s=this.connection.provider;j.log("Listening for ICE candidates."),t.onicecandidate=i=>{!i.candidate||!i.candidate.candidate||(j.log(`Received ICE candidates for ${n}:`,i.candidate),s.socket.send({type:Te.Candidate,payload:{candidate:i.candidate,type:o,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":j.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Ts.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":j.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Ts.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":j.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},j.log("Listening for data channel"),t.ondatachannel=i=>{j.log("Received data channel");const a=i.channel;s.getConnection(n,r)._initializeDataChannel(a)},j.log("Listening for remote stream"),t.ontrack=i=>{j.log("Received remote stream");const a=i.streams[0],c=s.getConnection(n,r);if(c.type===Nt.Media){const l=c;this._addStreamToMediaConnection(a,l)}}}cleanup(){j.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const o=this.connection.dataChannel;o&&(r=!!o.readyState&&o.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);j.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),j.log("Set localDescription:",r,`for:${this.connection.peer}`);let o={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Nt.Data){const s=this.connection;o={...o,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:Te.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(ye.WebRTC,o),j.log("Failed to setLocalDescription, ",o))}}catch(r){n.emitError(ye.WebRTC,r),j.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();j.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),j.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Te.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){n.emitError(ye.WebRTC,o),j.log("Failed to setLocalDescription, ",o)}}catch(r){n.emitError(ye.WebRTC,r),j.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,o=this.connection.provider;j.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),j.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(i){o.emitError(ye.WebRTC,i),j.log("Failed to setRemoteDescription, ",i)}}async handleCandidate(t){j.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),j.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(ye.WebRTC,n),j.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(j.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return j.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){j.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class od extends Pi.EventEmitter{emitError(t,n){j.error("Error:",n),this.emit("error",new yb(`${t}`,n))}}class yb extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class sd extends od{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class to extends sd{static#e=this.ID_PREFIX="mc_";get type(){return Nt.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||to.ID_PREFIX+Ae.randomToken(),this._negotiator=new rd(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{j.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{j.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){j.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case Te.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Te.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:j.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){j.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const o of r)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class vb{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:o,path:s,key:i}=this._options,a=new URL(`${n}://${r}:${o}${s}${i}/${t}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",nd),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){j.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Ae.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Ae.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw j.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class no extends sd{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Nt.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||no.ID_PREFIX+ed(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new rd(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{j.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{j.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{j.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(ki.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case Te.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case Te.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:j.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class Ri extends no{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>no.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return j.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Go extends Ri{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new Qu,this.serialization=Co.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=bu(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const o=lb(r.data);this._handleDataMessage({data:o})}}_send(t,n){const r=xu(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);j.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class bb extends Ri{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=Co.None}}class xb extends Ri{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=Ae.chunkedMTU){this.emitError(ki.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=Co.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Ti extends od{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:bb,json:xb,binary:Go,"binary-utf8":Go,default:Go},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:Ae.CLOUD_HOST,port:Ae.CLOUD_PORT,path:"/",key:Ti.DEFAULT_KEY,token:Ae.randomToken(),config:Ae.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Ae.CLOUD_HOST?this._options.secure=Ae.isSecure():this._options.host==Ae.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&j.setLogFunction(this._options.logFunction),j.logLevel=this._options.debug||0,this._api=new vb(n),this._socket=this._createServerConnection(),!Ae.supports.audioVideo&&!Ae.supports.data){this._delayedAbort(ye.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Ae.validateId(r)){this._delayedAbort(ye.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort(ye.ServerError,o))}_createServerConnection(){const t=new mb(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Ot.Message,n=>{this._handleMessage(n)}),t.on(Ot.Error,n=>{this._abort(ye.SocketError,n)}),t.on(Ot.Disconnected,()=>{this.disconnected||(this.emitError(ye.Network,"Lost connection to server."),this.disconnect())}),t.on(Ot.Close,()=>{this.disconnected||this._abort(ye.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,o=t.src;switch(n){case Te.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Te.Error:this._abort(ye.ServerError,r.msg);break;case Te.IdTaken:this._abort(ye.UnavailableID,`ID "${this.id}" is taken`);break;case Te.InvalidKey:this._abort(ye.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Te.Leave:j.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case Te.Expire:this.emitError(ye.PeerUnavailable,`Could not connect to peer ${o}`);break;case Te.Offer:{const s=r.connectionId;let i=this.getConnection(o,s);if(i&&(i.close(),j.warn(`Offer received for existing Connection ID:${s}`)),r.type===Nt.Media){const c=new to(o,this,{connectionId:s,_payload:r,metadata:r.metadata});i=c,this._addConnection(o,i),this.emit("call",c)}else if(r.type===Nt.Data){const c=new this._serializers[r.serialization](o,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});i=c,this._addConnection(o,i),this.emit("connection",c)}else{j.warn(`Received malformed connection type:${r.type}`);return}const a=this._getMessages(s);for(const c of a)i.handleMessage(c);break}default:{if(!r){j.warn(`You received a malformed message from ${o} of type ${n}`);return}const s=r.connectionId,i=this.getConnection(o,s);i&&i.peerConnection?i.handleMessage(t):s?this._storeMessage(s,t):j.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){j.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(ye.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){j.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(ye.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){j.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new to(t,this,{...r,_stream:n});return this._addConnection(t,o),o}_addConnection(t,n){j.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const o of r)if(o.connectionId===n)return o;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){j.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(j.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;j.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)j.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)j.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(ye.ServerError,n))}}var Sb=Ti;let Wo;function id(e){return{lang:e?.lang??Wo?.lang,message:e?.message,abortEarly:e?.abortEarly??Wo?.abortEarly,abortPipeEarly:e?.abortPipeEarly??Wo?.abortPipeEarly}}let Cb;function wb(e){return Cb?.get(e)}let _b;function Pb(e){return _b?.get(e)}let kb;function Rb(e,t){return kb?.get(e)?.get(t)}function ad(e){const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function Xe(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=o?.expected??e.expects??null,a=o?.received??ad(s),c={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o?.path,issues:o?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l=e.kind==="schema",u=o?.message??e.message??Rb(e.reference,c.lang)??(l?Pb(c.lang):null)??r.message??wb(c.lang);u!==void 0&&(c.message=typeof u=="function"?u(c):u),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function Ze(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},id())}}}function cd(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}const Tb=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu;function ld(e){return{kind:"validation",type:"email",reference:ld,expects:null,async:!1,requirement:Tb,message:e,"~run"(t,n){return t.typed&&!this.requirement.test(t.value)&&Xe(this,"email",t,n),t}}}function Ib(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function Ii(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function At(e,t){return{kind:"schema",type:"array",reference:At,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return Ze(this)},"~run"(n,r){const o=n.value;if(Array.isArray(o)){n.typed=!0,n.value=[];for(let s=0;s<o.length;s++){const i=o[s],a=this.item["~run"]({value:i},r);if(a.issues){const c={type:"array",origin:"value",input:o,key:s,value:i};for(const l of a.issues)l.path?l.path.unshift(c):l.path=[c],n.issues?.push(l);if(n.issues||(n.issues=a.issues),r.abortEarly){n.typed=!1;break}}a.typed||(n.typed=!1),n.value.push(a.value)}}else Xe(this,"type",n,r);return n}}}function pr(e){return{kind:"schema",type:"boolean",reference:pr,expects:"boolean",async:!1,message:e,get"~standard"(){return Ze(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:Xe(this,"type",t,n),t}}}function ce(e,t){return{kind:"schema",type:"literal",reference:ce,expects:ad(e),async:!1,literal:e,message:t,get"~standard"(){return Ze(this)},"~run"(n,r){return n.value===this.literal?n.typed=!0:Xe(this,"type",n,r),n}}}function ud(e,t){return{kind:"schema",type:"nullable",reference:ud,expects:`(${e.expects} | null)`,async:!1,wrapped:e,default:t,get"~standard"(){return Ze(this)},"~run"(n,r){return n.value===null&&(this.default!==void 0&&(n.value=Ii(this,n,r)),n.value===null)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function dt(e){return{kind:"schema",type:"number",reference:dt,expects:"number",async:!1,message:e,get"~standard"(){return Ze(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:Xe(this,"type",t,n),t}}}function X(e,t){return{kind:"schema",type:"object",reference:X,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Ze(this)},"~run"(n,r){const o=n.value;if(o&&typeof o=="object"){n.typed=!0,n.value={};for(const s in this.entries){const i=this.entries[s];if(s in o||(i.type==="exact_optional"||i.type==="optional"||i.type==="nullish")&&i.default!==void 0){const a=s in o?o[s]:Ii(i),c=i["~run"]({value:a},r);if(c.issues){const l={type:"object",origin:"value",input:o,key:s,value:a};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],n.issues?.push(u);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[s]=c.value}else if(i.fallback!==void 0)n.value[s]=Ib(i);else if(i.type!=="exact_optional"&&i.type!=="optional"&&i.type!=="nullish"&&(Xe(this,"key",n,r,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:o,key:s,value:o[s]}]}),r.abortEarly))break}}else Xe(this,"type",n,r);return n}}}function dn(e,t){return{kind:"schema",type:"optional",reference:dn,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Ze(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Ii(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function oe(e){return{kind:"schema",type:"string",reference:oe,expects:"string",async:!1,message:e,get"~standard"(){return Ze(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:Xe(this,"type",t,n),t}}}function ec(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function dd(e,t){return{kind:"schema",type:"union",reference:dd,expects:cd(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return Ze(this)},"~run"(n,r){let o,s,i;for(const a of this.options){const c=a["~run"]({value:n.value},r);if(c.typed)if(c.issues)s?s.push(c):s=[c];else{o=c;break}else i?i.push(c):i=[c]}if(o)return o;if(s){if(s.length===1)return s[0];Xe(this,"type",n,r,{issues:ec(s)}),n.typed=!0}else{if(i?.length===1)return i[0];Xe(this,"type",n,r,{issues:ec(i)})}return n}}}function Is(){return{kind:"schema",type:"unknown",reference:Is,expects:"unknown",async:!1,get"~standard"(){return Ze(this)},"~run"(e){return e.typed=!0,e}}}function Ei(e,t,n){return{kind:"schema",type:"variant",reference:Ei,expects:"Object",async:!1,key:e,options:t,message:n,get"~standard"(){return Ze(this)},"~run"(r,o){const s=r.value;if(s&&typeof s=="object"){let i,a=0,c=this.key,l=[];const u=(d,f)=>{for(const h of d.options){if(h.type==="variant")u(h,new Set(f).add(h.key));else{let p=!0,m=0;for(const g of f){const y=h.entries[g];if(g in s?y["~run"]({typed:!1,value:s[g]},{abortEarly:!0}).issues:y.type!=="exact_optional"&&y.type!=="optional"&&y.type!=="nullish"){p=!1,c!==g&&(a<m||a===m&&g in s&&!(c in s))&&(a=m,c=g,l=[]),c===g&&l.push(h.entries[g].expects);break}m++}if(p){const g=h["~run"]({value:s},o);(!i||!i.typed&&g.typed)&&(i=g)}}if(i&&!i.issues)break}};if(u(this,new Set([this.key])),i)return i;Xe(this,"type",r,o,{input:s[c],expected:cd(l,"|"),path:[{type:"object",origin:"value",input:s,key:c,value:s[c]}]})}else Xe(this,"type",r,o);return r}}}function Eb(...e){return{...e[0],pipe:e,get"~standard"(){return Ze(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function fd(e,t,n){const r=e["~run"]({value:t},id(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}const he={log:(...e)=>{},warn:(...e)=>{},info:(...e)=>{},error:(...e)=>{console.error(...e)},debug:(...e)=>{}};try{self["workbox:window:7.3.0"]&&_()}catch{}function tc(e,t){return new Promise((function(n){var r=new MessageChannel;r.port1.onmessage=function(o){n(o.data)},e.postMessage(t,[r.port2])}))}function nc(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Mb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ob(r.key),r)}}function Lb(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=(function(o,s){if(o){if(typeof o=="string")return nc(o,s);var i={}.toString.call(o).slice(8,-1);return i==="Object"&&o.constructor&&(i=o.constructor.name),i==="Map"||i==="Set"?Array.from(o):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?nc(o,s):void 0}})(e))||t){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Es(e,t){return Es=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Es(e,t)}function Ob(e){var t=(function(n,r){if(typeof n!="object"||!n)return n;var o=n[Symbol.toPrimitive];if(o!==void 0){var s=o.call(n,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)})(e,"string");return typeof t=="symbol"?t:t+""}try{self["workbox:core:7.3.0"]&&_()}catch{}var Ho=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function qo(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var zn=function(e,t){this.type=e,Object.assign(this,t)};function It(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Ab(){}var Db={type:"SKIP_WAITING"};function rc(e,t){return e&&e.then?e.then(Ab):Promise.resolve()}var $b=(function(e){function t(s,i){var a,c;return i===void 0&&(i={}),(a=e.call(this)||this).nn={},a.tn=0,a.rn=new Ho,a.en=new Ho,a.on=new Ho,a.un=0,a.an=new Set,a.cn=function(){var l=a.fn,u=l.installing;a.tn>0||!qo(u.scriptURL,a.sn.toString())||performance.now()>a.un+6e4?(a.vn=u,l.removeEventListener("updatefound",a.cn)):(a.hn=u,a.an.add(u),a.rn.resolve(u)),++a.tn,u.addEventListener("statechange",a.ln)},a.ln=function(l){var u=a.fn,d=l.target,f=d.state,h=d===a.vn,p={sw:d,isExternal:h,originalEvent:l};!h&&a.mn&&(p.isUpdate=!0),a.dispatchEvent(new zn(f,p)),f==="installed"?a.wn=self.setTimeout((function(){f==="installed"&&u.waiting===d&&a.dispatchEvent(new zn("waiting",p))}),200):f==="activating"&&(clearTimeout(a.wn),h||a.en.resolve(d))},a.yn=function(l){var u=a.hn,d=u!==navigator.serviceWorker.controller;a.dispatchEvent(new zn("controlling",{isExternal:d,originalEvent:l,sw:u,isUpdate:a.mn})),d||a.on.resolve(u)},a.gn=(c=function(l){var u=l.data,d=l.ports,f=l.source;return It(a.getSW(),(function(){a.an.has(f)&&a.dispatchEvent(new zn("message",{data:u,originalEvent:l,ports:d,sw:f}))}))},function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];try{return Promise.resolve(c.apply(this,l))}catch(d){return Promise.reject(d)}}),a.sn=s,a.nn=i,navigator.serviceWorker.addEventListener("message",a.gn),a}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,Es(n,r);var o=t.prototype;return o.register=function(s){var i=(s===void 0?{}:s).immediate,a=i!==void 0&&i;try{var c=this;return It((function(l,u){var d=l();return d&&d.then?d.then(u):u(d)})((function(){if(!a&&document.readyState!=="complete")return rc(new Promise((function(l){return window.addEventListener("load",l)})))}),(function(){return c.mn=!!navigator.serviceWorker.controller,c.dn=c.pn(),It(c.bn(),(function(l){c.fn=l,c.dn&&(c.hn=c.dn,c.en.resolve(c.dn),c.on.resolve(c.dn),c.dn.addEventListener("statechange",c.ln,{once:!0}));var u=c.fn.waiting;return u&&qo(u.scriptURL,c.sn.toString())&&(c.hn=u,Promise.resolve().then((function(){c.dispatchEvent(new zn("waiting",{sw:u,wasWaitingBeforeRegister:!0}))})).then((function(){}))),c.hn&&(c.rn.resolve(c.hn),c.an.add(c.hn)),c.fn.addEventListener("updatefound",c.cn),navigator.serviceWorker.addEventListener("controllerchange",c.yn),c.fn}))})))}catch(l){return Promise.reject(l)}},o.update=function(){try{return this.fn?It(rc(this.fn.update())):It()}catch(s){return Promise.reject(s)}},o.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},o.messageSW=function(s){try{return It(this.getSW(),(function(i){return tc(i,s)}))}catch(i){return Promise.reject(i)}},o.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&tc(this.fn.waiting,Db)},o.pn=function(){var s=navigator.serviceWorker.controller;return s&&qo(s.scriptURL,this.sn.toString())?s:void 0},o.bn=function(){try{var s=this;return It((function(i,a){try{var c=i()}catch(l){return a(l)}return c&&c.then?c.then(void 0,a):c})((function(){return It(navigator.serviceWorker.register(s.sn,s.nn),(function(i){return s.un=performance.now(),i}))}),(function(i){throw i})))}catch(i){return Promise.reject(i)}},(function(s,i,a){return i&&Mb(s.prototype,i),Object.defineProperty(s,"prototype",{writable:!1}),s})(t,[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])})((function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(n,r){this.jn(n).add(r)},t.removeEventListener=function(n,r){this.jn(n).delete(r)},t.dispatchEvent=function(n){n.target=this;for(var r,o=Lb(this.jn(n.type));!(r=o()).done;)(0,r.value)(n)},t.jn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},e})());const hd=X({id:oe(),name:oe(),updatedAt:dt(),_deleted:dn(pr())}),pd=X({id:oe(),name:oe(),email:ud(Eb(oe(),ld())),updatedAt:dt(),_deleted:dn(pr())}),gd=X({userId:oe(),eateryId:oe(),score:dt(),updatedAt:dt(),_deleted:dn(pr())}),md=X({userId:oe(),eateryId:oe(),updatedAt:dt(),_deleted:dn(pr())}),Fb=X({id:oe(),settings:X({connection:X({name:oe(),updatedAt:dt()}),eateries:At(hd),users:At(pd),eateryScores:At(gd),eateryVetoes:dn(At(md))})}),yd=Ei("type",[X({type:ce("request-known-peers")}),X({type:ce("known-peers"),data:At(oe())}),X({type:ce("request-connection-ids")}),X({type:ce("connection-ids"),data:At(oe())}),X({type:ce("request-storage"),data:X({connectionId:oe()})}),X({type:ce("storage"),data:Fb}),X({type:ce("updated-eatery"),data:X({connectionId:oe(),eatery:hd})}),X({type:ce("updated-eateryScore"),data:X({connectionId:oe(),eateryScore:gd})}),X({type:ce("updated-eateryVeto"),data:X({connectionId:oe(),eateryVeto:md})}),X({type:ce("updated-user"),data:X({connectionId:oe(),user:pd})}),X({type:ce("updated-connection"),data:X({connectionId:oe(),connection:X({name:oe(),updatedAt:dt()})})}),X({type:ce("removed-user"),data:X({connectionId:oe(),userId:oe()})}),X({type:ce("removed-eatery"),data:X({connectionId:oe(),eateryId:oe()})})]);let Yo=null;function Nb(){return typeof BroadcastChannel>"u"?null:(Yo||(Yo=new BroadcastChannel("peer-data-to-client")),Yo)}function vd(e){const t=Nb();if(!t)return()=>{};const n=r=>{const o=fd(Bb,r.data);o.success&&e(o.output)};return t.addEventListener("message",n),()=>{t.removeEventListener("message",n)}}const Bb=Ei("type",[X({type:ce("p2p-peer-count"),data:dt()}),X({type:ce("p2p-status"),data:X({status:dd([ce("connecting"),ce("connected"),ce("disconnected")]),peerId:dn(oe())})}),X({type:ce("p2p-debug"),data:oe()}),X({type:ce("p2p-received"),data:yd}),X({type:ce("db-collection-share-insert"),data:X({collectionId:oe(),data:Is(),key:oe()})}),X({type:ce("db-collection-share-delete"),data:X({collectionId:oe(),data:X({deletedAt:dt()}),key:oe()})}),X({type:ce("db-collection-share-update"),data:X({collectionId:oe(),data:Is(),key:oe()})}),X({type:ce("share-known-peers"),data:X({peers:At(oe())})})]);let yt=null,oc=!1;function bd(){if(typeof window>"u")return null;if(!yt){const e="/where-to-eat/".replace(/\/$/,"");yt=new $b(`${e}/sw.js`)}return oc||(oc=!0,yt.register(),yt.addEventListener("activated",e=>{Mi();const t=localStorage.getItem("knownPeers"),n=t?JSON.parse(t):[];n.length>0&&xd({type:"set-known-peer-ids",data:n})}),yt.addEventListener("waiting",()=>{jb()}),yt.addEventListener("controlling",()=>{window.location.reload()})),yt}function Kb(){yt&&yt.messageSkipWaiting()}function xd(e){const t=bd();t&&t.messageSW(e)}function Mi(){xd({type:"p2p-request-status"})}function Ms(e){return vd(t=>{t.type==="p2p-status"&&e(t.data)})}function Ub(){return vd(e=>{e.type==="p2p-debug"&&he.log("[SW DEBUG]",e.data)})}typeof window<"u"&&(bd(),Ub());const Ls=new Set;function jb(){for(const e of Ls)e()}function zb(e){return Ls.add(e),()=>{Ls.delete(e)}}const Vb="wte-p2p-leader",Gb=1e3,sc=3e3,gt=crypto.randomUUID(),[Wb,Sd]=z();typeof window<"u"&&(Ms(e=>{e.peerId&&Sd(e.peerId)}),Mi());let gn;function Hb(){if(gn)return gn;if(typeof sessionStorage<"u"){const e=sessionStorage.getItem("fallback-peer-id");if(e)return gn=e,e;const t=crypto.randomUUID();return sessionStorage.setItem("fallback-peer-id",t),gn=t,t}return gn=crypto.randomUUID(),gn}function Ox(){return W(()=>{const t=Wb();return t||Hb()})}const Li=me();function Ax(){const e=ue(Li);if(!e)throw new Error("Missing peer2peer provider");return e}function qb(){return ue(Li)}function Yb(e){const t=ru(),[n,r]=z(!1),[o,s]=z(null),[i,a]=z(0),[c,l]=z(new Set,{equals(k,M){return k.symmetricDifference(M).size===0}}),[u,d]=z(),[f,h]=z(),[p,m]=z("connecting"),[g,y]=z([]),[v,b]=z([]),[C,w]=z(new Set),[R,T]=z(new Set,{equals(k,M){return k.symmetricDifference(M).size===0}}),[S,P]=z(0);let L=null;const O=W(()=>{const k=C();return new Set([...g(),...v()].filter(M=>k.has(M.peer)).map(M=>M.peer))},void 0,{equals(k,M){return k.symmetricDifference(M).size===0}}),A=W(()=>n()?O().size:S()),H=W(()=>{const k=n()?Array.from(O()):Array.from(C());return k.sort(),k});G(()=>{if(!n())return;const k=O().size;L?.postMessage({type:"peer-count-update",count:k})}),G(()=>{const k=Ms(M=>{M.peerId&&(d(M.peerId),Sd(M.peerId))});q(k)}),Vt(()=>{Mi(),L=new BroadcastChannel(Vb),L.onmessage=B=>{const V=B.data;switch(V.type){case"heartbeat":V.tabId!==gt&&(s(V.tabId),a(V.timestamp));break;case"claim-leader":n()&&(L?.postMessage({type:"leader-announce",tabId:gt}),L?.postMessage({type:"heartbeat",tabId:gt,timestamp:Date.now()}));break;case"leader-announce":he.log("P2P: Leader announced:",V.tabId),s(V.tabId),a(Date.now()),V.tabId!==gt&&r(!1);break;case"p2p-incoming":ie(V.data,!0);break;case"add-known-peer":n()&&l(ke=>new Set(ke).add(V.peerId));break;case"p2p-outgoing":n()&&st(V.data);break;case"peer-count-update":n()||P(V.count);break;case"open-connections":n()||w(new Set(V.peerIds));break}},F();const k=setInterval(()=>{const B=Date.now(),V=i();n()?L?.postMessage({type:"heartbeat",tabId:gt,timestamp:B}):o()&&B-V>sc&&F()},Gb);q(()=>{clearInterval(k),L?.close()});const M=localStorage.getItem("knownPeers");if(M){const B=JSON.parse(M);l(V=>new Set([...V,...B]))}});function F(){L?.postMessage({type:"claim-leader",tabId:gt}),setTimeout(()=>{const k=Date.now(),M=i();(!o()||k-M>sc)&&(r(!0),s(gt),a(k),L?.postMessage({type:"leader-announce",tabId:gt}),L?.postMessage({type:"heartbeat",tabId:gt,timestamp:k}),ee())},300)}function ee(){const k=u();if(!k){const V=Ms(ke=>{ke.peerId&&(V(),ee())});return}const M=void 0,B=new Sb(k,M);B.on("open",V=>{m("connected")}),B.on("error",V=>{he.error("P2P [Leader]: Peer error:",V.type,V.message)}),B.on("disconnected",()=>{m("disconnected"),setTimeout(()=>{n()&&(m("connecting"),B.reconnect())},1e3)}),B.on("close",()=>{m("disconnected")}),B.on("connection",V=>{he.log("P2P [Leader]: Incoming peer connection from:",V.peer),D(V,"incoming")}),q(()=>{n()&&B.destroy()}),h(B)}function Q(k,M){k.open&&k.send(M)}function D(k,M){k.on("open",()=>{he.log(`P2P [Leader]: ${M} connection opened to:`,k.peer),w(B=>{const V=new Set(B).add(k.peer);return L?.postMessage({type:"open-connections",peerIds:Array.from(V)}),V}),Q(k,{type:"request-known-peers"}),Q(k,{type:"request-connection-ids"}),Q(k,{type:"connection-ids",data:t.store.connections.map(B=>B.id)})}),k.on("data",B=>{I(k,B)}),k.on("close",()=>{he.log(`P2P [Leader]: ${M} connection closed to:`,k.peer),w(B=>{const V=new Set(B);return V.delete(k.peer),L?.postMessage({type:"open-connections",peerIds:Array.from(V)}),V}),T(B=>{const V=new Set(B);return V.delete(k.peer),V}),M==="incoming"?y(B=>B.filter(V=>V!==k)):b(B=>B.filter(V=>V!==k))}),k.on("error",B=>{he.error(`P2P [Leader]: ${M} connection error:`,B)}),M==="incoming"?(y(B=>[...B,k]),l(B=>new Set(B).add(k.peer))):b(B=>[...B,k])}function I(k,M){const V=(de=>{if(typeof de=="string")try{return JSON.parse(de)}catch{return de}if(de instanceof ArrayBuffer)try{const kt=new TextDecoder().decode(new Uint8Array(de));return JSON.parse(kt)}catch{return de}if(ArrayBuffer.isView(de))try{const kt=new Uint8Array(de.buffer,de.byteOffset,de.byteLength),Rt=new TextDecoder().decode(kt);return JSON.parse(Rt)}catch{return de}return de})(M),ke=fd(yd,V);if(!ke.success)return;const Le=ke.output;switch(he.log("P2P [Leader]: Received peer message type:",Le.type),Le.type){case"request-known-peers":Q(k,{type:"known-peers",data:Array.from(c())});return;case"known-peers":l(de=>new Set([...de,...Le.data])),Be(Le.data);return;case"request-connection-ids":Q(k,{type:"connection-ids",data:t.store.connections.map(de=>de.id)});return;case"connection-ids":{const de=new Set(Le.data),kt=t.store.connections;for(const Rt of kt)if(de.has(Rt.id)){const wo=ut(Rt);wo&&(he.log("P2P [Leader]: Sending storage to peer for shared connection:",wo.id),Q(k,{type:"storage",data:wo}))}R().has(k.peer)||(T(Rt=>new Set(Rt).add(k.peer)),Q(k,{type:"connection-ids",data:kt.map(Rt=>Rt.id)}));return}}ie(Le),L?.postMessage({type:"p2p-incoming",data:Le})}function ie(k,M=!1){switch(k.type){case"known-peers":case"request-known-peers":case"request-connection-ids":case"connection-ids":break;case"request-storage":{if(he.log("P2P: Received request-storage for connectionId:",k.data.connectionId),!M||n()){const B=ut(t.store.connections.find(V=>V.id===k.data.connectionId));B&&fe({type:"storage",data:B})}break}case"storage":he.log("P2P: Received storage data for connectionId:",k.data.id),t.setConnection(k.data);break;case"updated-eatery":t.upsertEatery(k.data.connectionId,k.data.eatery);break;case"updated-user":t.upsertUser(k.data.connectionId,k.data.user);break;case"updated-eateryScore":t.upsertScore(k.data.connectionId,k.data.eateryScore);break;case"updated-eateryVeto":t.upsertVeto(k.data.connectionId,k.data.eateryVeto);break;case"removed-eatery":t.removeEatery(k.data.connectionId,k.data.eateryId);break;case"removed-user":t.removeUser(k.data.connectionId,k.data.userId);break;case"updated-connection":t.upsertConnectionInfo(k.data.connectionId,k.data.connection);break;default:he.warn("P2P: Unknown message type:",k.type)}}G(()=>he.log("P2P: Leader changed",n())),G(()=>he.log("P2P: Peer status changed",p())),G(()=>he.log("P2P: Peer changed",f())),G(()=>he.log("P2P: My peer ID changed",u())),G(()=>he.log("P2P: Known peers changed",Array.from(c()))),G(()=>he.log("P2P: Currently connected peers changed",Array.from(O()))),G(()=>{const k=n(),M=p(),B=f(),V=u(),ke=c(),Le=O();if(he.log("P2P: Connect effect running",{isLeader:k,peerStatus:M,hasPeer:!!B,selfId:V,knownPeers:Array.from(ke),alreadyConnected:Array.from(Le)}),!!k&&M==="connected"&&B&&V)for(const de of ke){if(de===V||Le.has(de))continue;const kt=B.connect(de,{serialization:"binary"});D(kt,"outgoing")}});function Be(k){const M=localStorage.getItem("knownPeers"),B=M?JSON.parse(M):[];let V=!1;for(const ke of k)B.includes(ke)||(B.push(ke),V=!0);V&&localStorage.setItem("knownPeers",JSON.stringify(B))}function st(k){[...g(),...v()].forEach(B=>Q(B,k))}function Qe(k){l(M=>new Set(M).add(k)),n()||L?.postMessage({type:"add-known-peer",peerId:k}),Be([k]),$n()}function fe(k){he.log("P2P: Broadcasting event:",k.type),n()?st(k):L?.postMessage({type:"p2p-outgoing",data:k})}function _e(k,M){if(he.log("P2P: Sending to peer:",k,M.type),n()){const B=[...g(),...v()].find(V=>V.peer===k&&V.open);return B?(Q(B,M),!0):(st(M),!1)}else return L?.postMessage({type:"p2p-outgoing",data:M}),!0}function Pt(k){return C().has(k)}function $n(){const k=t.store.connections.map(M=>M.id);for(const M of k)fe({type:"request-storage",data:{connectionId:M}})}return x(Li.Provider,{value:{broadcast:fe,sendToPeer:_e,addNewPeer:Qe,isPeerConnected:Pt,connectedPeerCount:A,connectedPeerIds:H,myPeerId:u},get children(){return e.children}})}var Jb=te('<div class="w-9 h-9 rounded-lg bg-primary flex items-center justify-center group-hover:bg-primary/90 transition-colors">'),Xb=te('<div class="flex flex-col"><span class="font-semibold text-lg text-foreground leading-none">Where to Eat</span><span class="text-xs text-muted-foreground">Decide together'),Zb=te('<div class="min-h-screen flex flex-col"><header class="sticky top-0 z-50 backdrop-blur-md bg-background/95 border-b border-border"><div class="max-w-5xl mx-auto px-4 py-3"><div class="flex items-center justify-between"><div class="flex items-center gap-1"></div></div></div></header><main class=flex-1></main><footer class="border-t border-border py-4 mt-auto"><div class="max-w-5xl mx-auto px-4 text-center"><p class="text-xs text-muted-foreground">Where to Eat  Collaborative restaurant decisions'),Qb=te('<div class="fixed bottom-4 right-4 z-50 animate-in fade-in slide-in-from-bottom-5"><div class="bg-card text-card-foreground border border-border shadow-lg rounded-lg p-4 max-w-sm flex items-start gap-4"><div class=flex-1><h4 class="text-sm font-semibold">Update Available</h4><p class="text-xs text-muted-foreground mt-1">A new version of the app is available. Refresh to update.'),ex=te("<span class=sr-only>Toggle theme"),tx=te("<span>Light"),nx=te("<span>Dark"),rx=te("<span>System"),ox=te("<div class=relative>"),sx=te('<span class="text-sm text-muted-foreground hidden sm:inline"data-testid=peer-count-value>'),ix=te('<div class="space-y-4 pt-2"><div class="p-3 rounded-md bg-muted border border-border"><p class="text-xs text-muted-foreground mb-1">Your Peer ID</p><p class="font-mono text-xs break-all"></p></div><div class=space-y-2><p class="text-sm font-medium">Connected Peers'),ax=te('<span class="absolute -top-1 -right-1 w-3.5 h-3.5 rounded-full bg-primary text-[9px] font-medium text-primary-foreground flex items-center justify-center">'),cx=te('<div class="text-center py-6 text-muted-foreground border border-dashed border-border rounded-md"><p class=text-sm>No peers connected</p><p class="text-xs mt-1">Share your session to invite others'),lx=te("<ul class=space-y-1.5>"),ux=te('<li class="flex items-center gap-2 p-2 rounded-md bg-muted border border-border"data-testid=active-connection-item><div class="w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center"></div><span class="font-mono text-xs truncate flex-1"></span><span class="w-2 h-2 rounded-full bg-green-500">');const gr=$h({errorComponent:jc,notFoundComponent:()=>x(zc,{}),component:dx});function dx(){return[x(fy,{}),x(ly,{get children(){return[x(Vy,{get children(){return x(zy,{get children(){return x(Yb,{get children(){var t=Zb(),n=t.firstChild,r=n.firstChild,o=r.firstChild,s=o.firstChild,i=n.nextSibling;return re(o,x(Rn,{to:"/",class:"flex items-center gap-3 group",get children(){return[(()=>{var a=Jb();return re(a,x(Dy,{class:"w-5 h-5 text-primary-foreground"})),a})(),Xb()]}}),s),re(s,x(Fv,{}),null),re(s,x(hx,{}),null),re(s,x(fx,{}),null),re(t,x(e,{}),i),re(i,x(Uc,{})),t}})}})}}),x(yy,{position:"bottom-right"})]}})];function e(){const[t,n]=z(!1);return Vt(()=>{const r=zb(()=>{n(!0)});q(r)}),x(be,{get when(){return t()},get children(){var r=Qb(),o=r.firstChild;return o.firstChild,re(o,x(So,{size:"sm",onClick:()=>Kb(),class:"shrink-0",children:"Update"}),null),r}})}}function fx(){const{setColorMode:e,colorMode:t}=ny();return x(yu,{get children(){return[x(mu,{as:So,variant:"ghost",size:"icon",class:"w-9 h-9",get children(){return[x(Na,{class:"size-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),x(Fa,{class:"absolute size-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),ex()]}}),x(vu,{class:"min-w-[120px]",get children(){return[x(Ir,{onSelect:()=>e("light"),class:"gap-2 cursor-pointer text-sm",get children(){return[x(Na,{class:"size-4"}),tx()]}}),x(Ir,{onSelect:()=>e("dark"),class:"gap-2 cursor-pointer text-sm",get children(){return[x(Fa,{class:"size-4"}),nx()]}}),x(Ir,{onSelect:()=>e("system"),class:"gap-2 cursor-pointer text-sm",get children(){return[x(ky,{class:"size-4"}),rx()]}})]}})]}})}function hx(){const e=qb(),t=()=>e?.connectedPeerIds()??[],n=()=>e?.connectedPeerCount()??0;return x(jv,{get children(){return[x(zv,{as:So,variant:"ghost",size:"sm",class:"h-9 px-2 gap-1.5","data-testid":"connected-peer-count",title:"Active connections",get children(){return[(()=>{var r=ox();return re(r,x(Bo,{class:"size-4 text-muted-foreground"}),null),re(r,(()=>{var o=le(()=>n()>0);return()=>o()&&(()=>{var s=ax();return re(s,n),s})()})(),null),r})(),(()=>{var r=sx();return re(r,n),r})()]}}),x(Wv,{"data-testid":"active-connections-dialog",class:"sm:max-w-md",get children(){return[x(Hv,{get children(){return[x(qv,{class:"flex items-center gap-2",get children(){return[x(Bo,{class:"w-4 h-4 text-primary"}),"Active Connections"]}}),x(Yv,{children:"Peers currently connected to your session"})]}}),(()=>{var r=ix(),o=r.firstChild,s=o.firstChild,i=s.nextSibling,a=o.nextSibling;return a.firstChild,re(i,()=>e?.myPeerId()??""),re(a,(()=>{var c=le(()=>t().length===0);return()=>c()?cx():(()=>{var l=lx();return re(l,()=>t().map(u=>(()=>{var d=ux(),f=d.firstChild,h=f.nextSibling;return re(f,x(Bo,{class:"w-3 h-3 text-primary"})),re(h,u),d})())),l})()})(),null),r})()]}})]}})}const px=()=>xo(()=>import("./connect-to-CjZ7a-wh.js"),[]),gx=X({peerId:oe(),connectionId:oe()}),mx=Tn("/connect-to")({component:lo(px,"component"),validateSearch:gx}),yx=()=>xo(()=>import("./index-DayEyMmt.js"),__vite__mapDeps([0,1,2])),vx=Tn("/")({component:lo(yx,"component")}),bx=()=>xo(()=>import("./wheel._connectionId-BMSrg6Hp.js"),__vite__mapDeps([3,4,1])),xx=Tn("/wheel/$connectionId")({component:lo(bx,"component")}),Sx=()=>xo(()=>import("./settings._connectionId-DfQCK66L.js"),__vite__mapDeps([5,4,1,2])),Cx=Tn("/settings/$connectionId")({component:lo(Sx,"component")}),wx=mx.update({id:"/connect-to",path:"/connect-to",getParentRoute:()=>gr}),_x=vx.update({id:"/",path:"/",getParentRoute:()=>gr}),Px=xx.update({id:"/wheel/$connectionId",path:"/wheel/$connectionId",getParentRoute:()=>gr}),kx=Cx.update({id:"/settings/$connectionId",path:"/settings/$connectionId",getParentRoute:()=>gr}),Rx={IndexRoute:_x,ConnectToRoute:wx,SettingsConnectionIdRoute:kx,WheelConnectionIdRoute:Px},Tx=gr._addFileChildren(Rx)._addFileTypes(),Ix="/where-to-eat/";function Ex(){return Hh({routeTree:Tx,basepath:Ix,defaultPreload:"intent",defaultErrorComponent:jc,defaultNotFoundComponent:()=>x(zc,{})})}const Mx=Ex();Zd(()=>x(Jh,{router:Mx}),document.getElementById("root"));export{qs as $,Yv as A,So as B,sf as C,jv as D,Fe as E,vc as F,_n as G,Bo as H,an as I,tf as J,of as K,Rn as L,mt as M,oo as N,Cx as O,rf as P,Uy as Q,mx as R,bc as S,me as T,Ct as U,ae as V,E as W,Ft as X,fo as Y,ue as Z,Pe as _,Ne as a,Ee as a0,it as a1,go as a2,Ce as a3,po as a4,ru as b,z as c,G as d,x as e,be as f,N as g,so as h,re as i,_t as j,Gy as k,he as l,le as m,xx as n,Vt as o,q as p,jy as q,W as r,J as s,te as t,Ax as u,Ox as v,zv as w,Wv as x,Hv as y,qv as z};
