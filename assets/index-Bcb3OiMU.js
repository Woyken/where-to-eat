import{c as u,b as z,a as A,t as g,i as r,e,f as m,F as B,L as H,B as f}from"./index-PBKeKgQC.js";import{t as M,T as I,a as N,b as F,p as Q}from"./text-field-CKjsPhnY.js";import{C as D,a as p,b as k,c as C,d as T,e as E}from"./card-CdVsh88g.js";var j=g('<div class="flex flex-col sm:flex-row gap-3"><div class="space-y-2 flex-1">'),G=g('<div class="min-h-screen p-4"><div class="max-w-2xl mx-auto space-y-6"><div class="text-center space-y-2"><h1 class="text-4xl font-bold">Eatery Wheel</h1><p class=text-muted-foreground>Spin the wheel to decide where to eat!</p></div><div class=space-y-6>'),P=g("<div class=space-y-2>"),U=g('<div class="flex items-center justify-between p-3 border-[3px] rounded-lg"><div><h3 class=font-medium></h3><p class="text-sm text-muted-foreground">Created </p></div><div class="flex gap-2">');function K(){const[l,w]=u(""),[c,a]=u(""),[x,v]=u(!1),i=z(),_=()=>{console.log("createFreshConnection called");try{const t=c().trim(),d=i.addNewConnection(t||`Connection ${i.store.connections.length+1}`);console.log("Created connection",d),a(""),W.navigate({to:"/wheel/$connectionId",params:{connectionId:d}}),console.log("Navigating to wheel")}catch(t){console.error("Error creating connection",t)}},W=A(),O=t=>{i.removeConnection(t)},s=()=>i.store.connections;return(()=>{var t=G(),d=t.firstChild,R=d.firstChild,$=R.nextSibling;return r($,e(E,{get children(){return[e(D,{get children(){return e(m,{get when(){return s().length>0},get fallback(){return[e(p,{children:"Welcome!"}),e(k,{children:"Get started by creating a new wheel or connecting to an existing one"})]},get children(){return[e(p,{children:"Your Connections"}),e(k,{children:"Select a connection to continue or create a new one"})]}})}}),e(m,{get when(){return s().length>0},get fallback(){return[e(C,{class:"space-y-4",get children(){var n=P();return r(n,e(I,{id:"connection-name-field",get value(){return c()},onChange:o=>a(o),get children(){return[e(N,{for:"connection-name",children:"Connection Name (Optional)"}),e(F,{type:"text",id:"connection-name",placeholder:"My Eatery Wheel"})]}})),n}}),e(T,{get children(){return e(L,{get connectId(){return l()},get connectionName(){return c()},createFreshConnection:_,setConnectId:w,setConnectionName:a,setShowConnectDialog:v,setShowQRScanner:()=>{},get showConnectDialog(){return x()}})}})]},get children(){return e(C,{class:"space-y-3",get children(){return e(B,{get each(){return s()},children:n=>(()=>{var o=U(),h=o.firstChild,S=h.firstChild,y=S.nextSibling;y.firstChild;var b=h.nextSibling;return r(S,()=>n.settings.connection.name),r(y,()=>new Date(n.settings.connection.updatedAt).toLocaleDateString(),null),r(b,e(H,{to:"/wheel/$connectionId",get params(){return{connectionId:n.id}},get children(){return e(f,{size:"sm",onclick:()=>{localStorage.setItem("lastUsedConnectionId",n.id)},children:"Open"})}}),null),r(b,e(f,{size:"sm",variant:"outline",onClick:()=>O(n.id),get children(){return e(M,{class:"w-4 h-4"})}}),null),o})()})}})}})]}}),null),r($,e(m,{get when(){return s().length>0},get children(){return e(E,{get children(){return[e(D,{get children(){return e(p,{children:"Create new connection"})}}),e(C,{get children(){var n=j(),o=n.firstChild;return r(o,e(I,{get value(){return c()},onChange:h=>a(h),get children(){return[e(N,{for:"new-connection-name",children:"New Connection Name"}),e(F,{type:"text",id:"new-connection-name",placeholder:"My New Wheel"})]}})),n}}),e(T,{get children(){return e(L,{get connectId(){return l()},get connectionName(){return c()},createFreshConnection:_,setConnectId:w,setConnectionName:a,setShowConnectDialog:v,setShowQRScanner:()=>{},get showConnectDialog(){return x()}})}})]}})}}),null),t})()}function L(l){return e(f,{get onClick(){return l.createFreshConnection},class:"flex-1","data-testid":"start-fresh",get children(){return[e(Q,{class:"w-4 h-4 mr-2"}),"Start Fresh"]}})}export{K as component};
