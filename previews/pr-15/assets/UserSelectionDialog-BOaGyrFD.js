import{c as e,m as $,I as C,d as v,z as D,A as N,C as k,Q as S,E as A,t as l,i as n,S as w,F as E,g as U,H as F,B as f,D as I,N as T}from"./index-CTg8CMqd.js";import{p as y,T as H,a as B,b as z}from"./text-field-CwV5lAbu.js";var K=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],M=r=>e(C,$(r,{iconNode:K,name:"house"})),q=M,O=l('<p class="text-sm text-muted-foreground">Select your name:'),P=l('<div class="space-y-2 max-h-60 overflow-y-auto">'),j=l("<div class=space-y-2><div class=pt-2>"),J=l('<div class="space-y-4 pt-2">'),L=l('<div class=space-y-4><div class="flex gap-2">'),Q=l('<div class="text-center py-6 text-muted-foreground border border-dashed border-border rounded-md"><p class=text-sm>No participants yet</p><p class="text-xs mt-1">Add yourself to get started'),R=l('<button type=button class="w-full flex items-center gap-3 p-3 rounded-md border border-border hover:bg-muted/50 hover:border-primary/50 transition-colors text-left"><div class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-semibold"></div><div class="flex-1 min-w-0"><p class="font-medium truncate">');function G(r){const[x,c]=v(!1),[u,m]=v(""),h=()=>r.users.filter(t=>!t._deleted),p=()=>{const t=u().trim();if(!t)return;const a=r.onAddNew(t);m(""),c(!1),r.onSelect(a)};return e(I,{get open(){return r.open},onOpenChange:()=>{},get children(){return e(D,{class:"sm:max-w-md",hideCloseButton:!0,onPointerDownOutside:t=>t.preventDefault(),onEscapeKeyDown:t=>t.preventDefault(),get children(){return[e(N,{get children(){return[e(k,{class:"flex items-center gap-2",get children(){return[e(S,{class:"w-5 h-5 text-primary"}),"Who are you?"]}}),e(A,{get children(){return r.connectionName?`Select your identity for "${r.connectionName}"`:"Select your identity for this session"}})]}}),(()=>{var t=J();return n(t,e(w,{get when(){return!x()},get fallback(){return(()=>{var a=L(),i=a.firstChild;return n(a,e(H,{get value(){return u()},onChange:s=>m(s),get children(){return[e(B,{for:"new-user-name",class:"text-sm font-medium",children:"Your Name"}),e(z,{type:"text",id:"new-user-name",placeholder:"Enter your name",class:"h-10","data-testid":"new-user-name-input",autofocus:!0,onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),p())}})]}}),i),n(i,e(f,{variant:"outline",class:"flex-1",onClick:()=>{c(!1),m("")},children:"Cancel"}),null),n(i,e(f,{class:"flex-1",onClick:p,get disabled(){return!u().trim()},"data-testid":"confirm-new-user",get children(){return[e(y,{class:"w-4 h-4"}),"Join"]}}),null),a})()},get children(){var a=j(),i=a.firstChild;return n(a,e(w,{get when(){return h().length>0},get fallback(){return Q()},get children(){return[O(),(()=>{var s=P();return n(s,e(E,{get each(){return h()},children:o=>(()=>{var d=R(),g=d.firstChild,_=g.nextSibling,b=_.firstChild;return d.$$click=()=>r.onSelect(o.id),n(g,()=>o.name.charAt(0).toUpperCase()),n(b,()=>o.name),U(()=>F(d,"data-testid",`select-user-${o.id}`)),d})()})),s})()]}}),i),n(i,e(f,{variant:"outline",class:"w-full",onClick:()=>c(!0),"data-testid":"add-new-user-button",get children(){return[e(y,{class:"w-4 h-4"}),"I'm someone new"]}})),a}})),t})()]}})}})}T(["click"]);export{G as U,q as h};
