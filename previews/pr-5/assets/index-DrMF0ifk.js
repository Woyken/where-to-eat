const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DKd3ZtHb.js","assets/text-field-e4q1Uo3A.js","assets/wheel._connectionId-C7J8t825.js","assets/house-BV8Beb8_.js","assets/settings._connectionId-CEVKNUrX.js"])))=>i.map(i=>d[i]);
function pd(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Y={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Ri(this.context.count)},getNextContextId(){return Ri(this.context.count++)}};function Ri(e){const t=String(e),n=t.length-1;return Y.context.id+(n?String.fromCharCode(96+n):"")+t}function Un(e){Y.context=e}const gd=!1,md=(e,t)=>e===t,rt=Symbol("solid-proxy"),ec=typeof Proxy=="function",Wo=Symbol("solid-track"),Lr={equals:md};let qn=null,tc=cc;const Je=1,Xn=2,nc={owned:null,cleanups:null,context:null,owner:null},xo={};var Z=null;let D=null,yd=null,oe=null,Te=null,xe=null,Qr=0;function mn(e,t){const n=oe,r=Z,o=e.length===0,s=t===void 0?r:t,i=o?nc:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=o?e:()=>e(()=>pe(()=>$t(i)));Z=i,oe=null;try{return ze(a,!0)}finally{oe=n,Z=r}}function j(e,t){t=t?Object.assign({},Lr,t):Lr;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(D&&D.running&&D.sources.has(n)?o=o(n.tValue):o=o(n.value)),ac(n,o));return[ic.bind(n),r]}function Or(e,t,n){const r=ir(e,t,!0,Je);Rn(r)}function $e(e,t,n){const r=ir(e,t,!1,Je);Rn(r)}function V(e,t,n){tc=kd;const r=ir(e,t,!1,Je),o=Jt&&de(Jt);o&&(r.suspense=o),(!n||!n.render)&&(r.user=!0),xe?xe.push(r):Rn(r)}function H(e,t,n){n=n?Object.assign({},Lr,n):Lr;const r=ir(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Rn(r),ic.bind(r)}function vd(e){return e&&typeof e=="object"&&"then"in e}function zn(e,t,n){let r,o,s;typeof t=="function"?(r=e,o=t,s={}):(r=!0,o=e,s=t||{});let i=null,a=xo,c=null,l=!1,u=!1,d="initialValue"in s,f=typeof r=="function"&&H(r);const h=new Set,[p,m]=(s.storage||j)(s.initialValue),[g,y]=j(void 0),[v,b]=j(void 0,{equals:!1}),[C,w]=j(d?"ready":"unresolved");Y.context&&(c=Y.getNextContextId(),s.ssrLoadFrom==="initial"?a=s.initialValue:Y.load&&Y.has(c)&&(a=Y.load(c)));function k(O,L,W,$){return i===O&&(i=null,$!==void 0&&(d=!0),(O===a||L===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated($,{value:L})),a=xo,D&&O&&l?(D.promises.delete(O),l=!1,ze(()=>{D.running=!0,R(L,W)},!1)):R(L,W)),L}function R(O,L){ze(()=>{L===void 0&&m(()=>O),w(L!==void 0?"errored":d?"ready":"unresolved"),y(L);for(const W of h.keys())W.decrement();h.clear()},!1)}function x(){const O=Jt&&de(Jt),L=p(),W=g();if(W!==void 0&&!i)throw W;return oe&&!oe.user&&O&&Or(()=>{v(),i&&(O.resolved&&D&&l?D.promises.add(i):h.has(O)||(O.increment(),h.add(O)))}),L}function P(O=!0){if(O!==!1&&u)return;u=!1;const L=f?f():r;if(l=D&&D.running,L==null||L===!1){k(i,pe(p));return}D&&i&&D.promises.delete(i);let W;const $=a!==xo?a:pe(()=>{try{return o(L,{value:p(),refetching:O})}catch(Q){W=Q}});if(W!==void 0){k(i,void 0,_r(W),L);return}else if(!vd($))return k(i,$,void 0,L),$;return i=$,"v"in $?($.s===1?k(i,$.v,void 0,L):k(i,void 0,_r($.v),L),$):(u=!0,queueMicrotask(()=>u=!1),ze(()=>{w(d?"refreshing":"pending"),b()},!1),$.then(Q=>k($,Q,void 0,L),Q=>k($,void 0,_r(Q),L)))}Object.defineProperties(x,{state:{get:()=>C()},error:{get:()=>g()},loading:{get(){const O=C();return O==="pending"||O==="refreshing"}},latest:{get(){if(!d)return x();const O=g();if(O&&!i)throw O;return p()}}});let F=Z;return f?Or(()=>(F=Z,P(!1))):P(!1),[x,{refetch:O=>rc(F,()=>P(O)),mutate:m}]}function bd(e){return ze(e,!1)}function pe(e){if(oe===null)return e();const t=oe;oe=null;try{return e()}finally{oe=t}}function ct(e,t,n){const r=Array.isArray(e);let o,s=n&&n.defer;return i=>{let a;if(r){a=Array(e.length);for(let l=0;l<e.length;l++)a[l]=e[l]()}else a=e();if(s)return s=!1,i;const c=pe(()=>t(a,o,i));return o=a,c}}function kn(e){V(()=>pe(e))}function J(e){return Z===null||(Z.cleanups===null?Z.cleanups=[e]:Z.cleanups.push(e)),e}function xd(e,t){qn||(qn=Symbol("error")),Z=ir(void 0,void 0,!0),Z.context={...Z.context,[qn]:[t]},D&&D.running&&D.sources.add(Z);try{return e()}catch(n){ar(n)}finally{Z=Z.owner}}function Go(){return oe}function Ho(){return Z}function rc(e,t){const n=Z,r=oe;Z=e,oe=null;try{return ze(t,!0)}catch(o){ar(o)}finally{Z=n,oe=r}}function oc(e){if(D&&D.running)return e(),D.done;const t=oe,n=Z;return Promise.resolve().then(()=>{oe=t,Z=n;let r;return Jt&&(r=D||(D={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),r.done||(r.done=new Promise(o=>r.resolve=o)),r.running=!0),ze(e,!1),oe=Z=null,r?r.done:void 0})}const[Sd,Ti]=j(!1);function Cd(){return[Sd,oc]}function _d(e){xe.push.apply(xe,e),e.length=0}function me(e,t){const n=Symbol("context");return{id:n,Provider:Rd(n),defaultValue:e}}function de(e){let t;return Z&&Z.context&&(t=Z.context[e.id])!==void 0?t:e.defaultValue}function sc(e){const t=H(e),n=H(()=>qo(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Jt;function wd(){return Jt||(Jt=me())}function ic(){const e=D&&D.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===Je)Rn(this);else{const t=Te;Te=null,ze(()=>Dr(this),!1),Te=t}if(oe){const t=this.observers?this.observers.length:0;oe.sources?(oe.sources.push(this),oe.sourceSlots.push(t)):(oe.sources=[this],oe.sourceSlots=[t]),this.observers?(this.observers.push(oe),this.observerSlots.push(oe.sources.length-1)):(this.observers=[oe],this.observerSlots=[oe.sources.length-1])}return e&&D.sources.has(this)?this.tValue:this.value}function ac(e,t,n){let r=D&&D.running&&D.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(r,t)){if(D){const o=D.running;(o||!n&&D.sources.has(e))&&(D.sources.add(e),e.tValue=t),o||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&ze(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],i=D&&D.running;i&&D.disposed.has(s)||((i?!s.tState:!s.state)&&(s.pure?Te.push(s):xe.push(s),s.observers&&lc(s)),i?s.tState=Je:s.state=Je)}if(Te.length>1e6)throw Te=[],new Error},!1)}return t}function Rn(e){if(!e.fn)return;$t(e);const t=Qr;Ii(e,D&&D.running&&D.sources.has(e)?e.tValue:e.value,t),D&&!D.running&&D.sources.has(e)&&queueMicrotask(()=>{ze(()=>{D&&(D.running=!0),oe=Z=e,Ii(e,e.tValue,t),oe=Z=null},!1)})}function Ii(e,t,n){let r;const o=Z,s=oe;oe=Z=e;try{r=e.fn(t)}catch(i){return e.pure&&(D&&D.running?(e.tState=Je,e.tOwned&&e.tOwned.forEach($t),e.tOwned=void 0):(e.state=Je,e.owned&&e.owned.forEach($t),e.owned=null)),e.updatedAt=n+1,ar(i)}finally{oe=s,Z=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?ac(e,r,!0):D&&D.running&&e.pure?(D.sources.add(e),e.tValue=r):e.value=r,e.updatedAt=n)}function ir(e,t,n,r=Je,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Z,context:Z?Z.context:null,pure:n};return D&&D.running&&(s.state=0,s.tState=r),Z===null||Z!==nc&&(D&&D.running&&Z.pure?Z.tOwned?Z.tOwned.push(s):Z.tOwned=[s]:Z.owned?Z.owned.push(s):Z.owned=[s]),s}function Ar(e){const t=D&&D.running;if((t?e.tState:e.state)===0)return;if((t?e.tState:e.state)===Xn)return Dr(e);if(e.suspense&&pe(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Qr);){if(t&&D.disposed.has(e))return;(t?e.tState:e.state)&&n.push(e)}for(let r=n.length-1;r>=0;r--){if(e=n[r],t){let o=e,s=n[r+1];for(;(o=o.owner)&&o!==s;)if(D.disposed.has(o))return}if((t?e.tState:e.state)===Je)Rn(e);else if((t?e.tState:e.state)===Xn){const o=Te;Te=null,ze(()=>Dr(e,n[0]),!1),Te=o}}}function ze(e,t){if(Te)return e();let n=!1;t||(Te=[]),xe?n=!0:xe=[],Qr++;try{const r=e();return Pd(n),r}catch(r){n||(xe=null),Te=null,ar(r)}}function Pd(e){if(Te&&(cc(Te),Te=null),e)return;let t;if(D){if(!D.promises.size&&!D.queue.size){const r=D.sources,o=D.disposed;xe.push.apply(xe,D.effects),t=D.resolve;for(const s of xe)"tState"in s&&(s.state=s.tState),delete s.tState;D=null,ze(()=>{for(const s of o)$t(s);for(const s of r){if(s.value=s.tValue,s.owned)for(let i=0,a=s.owned.length;i<a;i++)$t(s.owned[i]);s.tOwned&&(s.owned=s.tOwned),delete s.tValue,delete s.tOwned,s.tState=0}Ti(!1)},!1)}else if(D.running){D.running=!1,D.effects.push.apply(D.effects,xe),xe=null,Ti(!0);return}}const n=xe;xe=null,n.length&&ze(()=>tc(n),!1),t&&t()}function cc(e){for(let t=0;t<e.length;t++)Ar(e[t])}function kd(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Ar(r)}if(Y.context){if(Y.count){Y.effects||(Y.effects=[]),Y.effects.push(...e.slice(0,n));return}Un()}for(Y.effects&&(Y.done||!Y.count)&&(e=[...Y.effects,...e],n+=Y.effects.length,delete Y.effects),t=0;t<n;t++)Ar(e[t])}function Dr(e,t){const n=D&&D.running;n?e.tState=0:e.state=0;for(let r=0;r<e.sources.length;r+=1){const o=e.sources[r];if(o.sources){const s=n?o.tState:o.state;s===Je?o!==t&&(!o.updatedAt||o.updatedAt<Qr)&&Ar(o):s===Xn&&Dr(o,t)}}}function lc(e){const t=D&&D.running;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(t?!r.tState:!r.state)&&(t?r.tState=Xn:r.state=Xn,r.pure?Te.push(r):xe.push(r),r.observers&&lc(r))}}function $t(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)$t(e.tOwned[t]);delete e.tOwned}if(D&&D.running&&e.pure)uc(e,!0);else if(e.owned){for(t=e.owned.length-1;t>=0;t--)$t(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}D&&D.running?e.tState=0:e.state=0}function uc(e,t){if(t||(e.tState=0,D.disposed.add(e)),e.owned)for(let n=0;n<e.owned.length;n++)uc(e.owned[n])}function _r(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Ei(e,t,n){try{for(const r of t)r(e)}catch(r){ar(r,n&&n.owner||null)}}function ar(e,t=Z){const n=qn&&t&&t.context&&t.context[qn],r=_r(e);if(!n)throw r;xe?xe.push({fn(){Ei(r,n,t)},state:Je}):Ei(r,n,t)}function qo(e){if(typeof e=="function"&&!e.length)return qo(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=qo(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Rd(e,t){return function(r){let o;return $e(()=>o=pe(()=>(Z.context={...Z.context,[e]:r.value},sc(()=>r.children))),void 0),o}}const Td=Symbol("fallback");function Mi(e){for(let t=0;t<e.length;t++)e[t]()}function Id(e,t,n={}){let r=[],o=[],s=[],i=0,a=t.length>1?[]:null;return J(()=>Mi(s)),()=>{let c=e()||[],l=c.length,u,d;return c[Wo],pe(()=>{let h,p,m,g,y,v,b,C,w;if(l===0)i!==0&&(Mi(s),s=[],r=[],o=[],i=0,a&&(a=[])),n.fallback&&(r=[Td],o[0]=mn(k=>(s[0]=k,n.fallback())),i=1);else if(i===0){for(o=new Array(l),d=0;d<l;d++)r[d]=c[d],o[d]=mn(f);i=l}else{for(m=new Array(l),g=new Array(l),a&&(y=new Array(l)),v=0,b=Math.min(i,l);v<b&&r[v]===c[v];v++);for(b=i-1,C=l-1;b>=v&&C>=v&&r[b]===c[C];b--,C--)m[C]=o[b],g[C]=s[b],a&&(y[C]=a[b]);for(h=new Map,p=new Array(C+1),d=C;d>=v;d--)w=c[d],u=h.get(w),p[d]=u===void 0?-1:u,h.set(w,d);for(u=v;u<=b;u++)w=r[u],d=h.get(w),d!==void 0&&d!==-1?(m[d]=o[u],g[d]=s[u],a&&(y[d]=a[u]),d=p[d],h.set(w,d)):s[u]();for(d=v;d<l;d++)d in m?(o[d]=m[d],s[d]=g[d],a&&(a[d]=y[d],a[d](d))):o[d]=mn(f);o=o.slice(0,i=l),r=c.slice(0)}return o});function f(h){if(s[d]=h,a){const[p,m]=j(d);return a[d]=m,t(c[d],p)}return t(c[d])}}}function S(e,t){return pe(()=>e(t||{}))}function hr(){return!0}const Yo={get(e,t,n){return t===rt?n:e.get(t)},has(e,t){return t===rt?!0:e.has(t)},set:hr,deleteProperty:hr,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:hr,deleteProperty:hr}},ownKeys(e){return e.keys()}};function So(e){return(e=typeof e=="function"?e():e)?e:{}}function Ed(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function B(...e){let t=!1;for(let i=0;i<e.length;i++){const a=e[i];t=t||!!a&&rt in a,e[i]=typeof a=="function"?(t=!0,H(a)):a}if(ec&&t)return new Proxy({get(i){for(let a=e.length-1;a>=0;a--){const c=So(e[a])[i];if(c!==void 0)return c}},has(i){for(let a=e.length-1;a>=0;a--)if(i in So(e[a]))return!0;return!1},keys(){const i=[];for(let a=0;a<e.length;a++)i.push(...Object.keys(So(e[a])));return[...new Set(i)]}},Yo);const n={},r=Object.create(null);for(let i=e.length-1;i>=0;i--){const a=e[i];if(!a)continue;const c=Object.getOwnPropertyNames(a);for(let l=c.length-1;l>=0;l--){const u=c[l];if(u==="__proto__"||u==="constructor")continue;const d=Object.getOwnPropertyDescriptor(a,u);if(!r[u])r[u]=d.get?{enumerable:!0,configurable:!0,get:Ed.bind(n[u]=[d.get.bind(a)])}:d.value!==void 0?d:void 0;else{const f=n[u];f&&(d.get?f.push(d.get.bind(a)):d.value!==void 0&&f.push(()=>d.value))}}}const o={},s=Object.keys(r);for(let i=s.length-1;i>=0;i--){const a=s[i],c=r[a];c&&c.get?Object.defineProperty(o,a,c):o[a]=c?c.value:void 0}return o}function q(e,...t){const n=t.length;if(ec&&rt in e){const o=n>1?t.flat():t[0],s=t.map(i=>new Proxy({get(a){return i.includes(a)?e[a]:void 0},has(a){return i.includes(a)&&a in e},keys(){return i.filter(a=>a in e)}},Yo));return s.push(new Proxy({get(i){return o.includes(i)?void 0:e[i]},has(i){return o.includes(i)?!1:i in e},keys(){return Object.keys(e).filter(i=>!o.includes(i))}},Yo)),s}const r=[];for(let o=0;o<=n;o++)r[o]={};for(const o of Object.getOwnPropertyNames(e)){let s=n;for(let c=0;c<t.length;c++)if(t[c].includes(o)){s=c;break}const i=Object.getOwnPropertyDescriptor(e,o);!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable?r[s][o]=i.value:Object.defineProperty(r[s],o,i)}return r}let Md=0;function _t(){return Y.context?Y.getNextContextId():`cl-${Md++}`}const dc=e=>`Stale read from <${e}>.`;function Ld(e){const t="fallback"in e&&{fallback:()=>e.fallback};return H(Id(()=>e.each,e.children,t||void 0))}function Me(e){const t=e.keyed,n=H(()=>e.when,void 0,void 0),r=t?n:H(n,void 0,{equals:(o,s)=>!o==!s});return H(()=>{const o=r();if(o){const s=e.children;return typeof s=="function"&&s.length>0?pe(()=>s(t?o:()=>{if(!pe(r))throw dc("Show");return n()})):s}return e.fallback},void 0,void 0)}function fc(e){const t=sc(()=>e.children),n=H(()=>{const r=t(),o=Array.isArray(r)?r:[r];let s=()=>{};for(let i=0;i<o.length;i++){const a=i,c=o[i],l=s,u=H(()=>l()?void 0:c.when,void 0,void 0),d=c.keyed?u:H(u,void 0,{equals:(f,h)=>!f==!h});s=()=>l()||(d()?[a,u,c]:void 0)}return s});return H(()=>{const r=n()();if(!r)return e.fallback;const[o,s,i]=r,a=i.children;return typeof a=="function"&&a.length>0?pe(()=>a(i.keyed?s():()=>{if(pe(n)()?.[0]!==o)throw dc("Match");return s()})):a},void 0,void 0)}function vt(e){return e}let pr;function Od(e){let t;Y.context&&Y.load&&(t=Y.load(Y.getContextId()));const[n,r]=j(t,void 0);return pr||(pr=new Set),pr.add(r),J(()=>pr.delete(r)),H(()=>{let o;if(o=n()){const s=e.fallback;return typeof s=="function"&&s.length?pe(()=>s(o,()=>r())):s}return xd(()=>e.children,r)},void 0,void 0)}const Ad=me();function Rs(e){let t=0,n,r,o,s,i;const[a,c]=j(!1),l=wd(),u={increment:()=>{++t===1&&c(!0)},decrement:()=>{--t===0&&c(!1)},inFallback:a,effects:[],resolved:!1},d=Ho();if(Y.context&&Y.load){const p=Y.getContextId();let m=Y.load(p);if(m&&(typeof m!="object"||m.s!==1?o=m:Y.gather(p)),o&&o!=="$$f"){const[g,y]=j(void 0,{equals:!1});s=g,o.then(()=>{if(Y.done)return y();Y.gather(p),Un(r),y(),Un()},v=>{i=v,y()})}}const f=de(Ad);f&&(n=f.register(u.inFallback));let h;return J(()=>h&&h()),S(l.Provider,{value:u,get children(){return H(()=>{if(i)throw i;if(r=Y.context,s)return s(),s=void 0;r&&o==="$$f"&&Un();const p=H(()=>e.children);return H(m=>{const g=u.inFallback(),{showContent:y=!0,showFallback:v=!0}=n?n():{};if((!g||o&&o!=="$$f")&&y)return u.resolved=!0,h&&h(),h=r=o=void 0,_d(u.effects),p();if(v)return h?m:mn(b=>(h=b,r&&(Un({id:r.id+"F",count:0}),r=void 0),e.fallback),d)})})}})}const Dd=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],$d=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Dd]),Fd=new Set(["innerHTML","textContent","innerText","children"]),Nd=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Bd=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Kd(e,t){const n=Bd[e];return typeof n=="object"?n[t]?n.$:void 0:n}const Ud=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),zd=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),jd={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},he=e=>H(()=>e());function Vd(e,t,n){let r=n.length,o=t.length,s=r,i=0,a=0,c=t[o-1].nextSibling,l=null;for(;i<o||a<s;){if(t[i]===n[a]){i++,a++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const u=s<r?a?n[a-1].nextSibling:n[s-a]:c;for(;a<s;)e.insertBefore(n[a++],u)}else if(s===a)for(;i<o;)(!l||!l.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[a]===t[o-1]){const u=t[--o].nextSibling;e.insertBefore(n[a++],t[i++].nextSibling),e.insertBefore(n[--s],u),t[o]=n[s]}else{if(!l){l=new Map;let d=a;for(;d<s;)l.set(n[d],d++)}const u=l.get(t[i]);if(u!=null)if(a<u&&u<s){let d=i,f=1,h;for(;++d<o&&d<s&&!((h=l.get(t[d]))==null||h!==u+f);)f++;if(f>u-a){const p=t[i];for(;a<u;)e.insertBefore(n[a++],p)}else e.replaceChild(n[a++],t[i++])}else i++;else t[i++].remove()}}}const Li="_$DX_DELEGATE";function Wd(e,t,n,r={}){let o;return mn(s=>{o=s,t===document?e():se(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function te(e,t,n,r){let o;const s=()=>{const a=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return a.innerHTML=e,n?a.content.firstChild.firstChild:r?a.firstChild:a.content.firstChild},i=t?()=>pe(()=>document.importNode(o||(o=s()),!0)):()=>(o||(o=s())).cloneNode(!0);return i.cloneNode=i,i}function hc(e,t=window.document){const n=t[Li]||(t[Li]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,nf))}}function xn(e,t,n){tn(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function Gd(e,t,n,r){tn(e)||(r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r))}function Hd(e,t,n){tn(e)||(n?e.setAttribute(t,""):e.removeAttribute(t))}function qd(e,t){tn(e)||(t==null?e.removeAttribute("class"):e.className=t)}function Yd(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=s=>o.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}function Jd(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let s,i;for(s=0,i=o.length;s<i;s++){const a=o[s];!a||a==="undefined"||t[a]||(Oi(e,a,!1),delete n[a])}for(s=0,i=r.length;s<i;s++){const a=r[s],c=!!t[a];!a||a==="undefined"||n[a]===c||!c||(Oi(e,a,!0),n[a]=c)}return n}function Xd(e,t,n){if(!t)return n?xn(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function pt(e,t={},n,r){const o={};return r||$e(()=>o.children=Zn(e,t.children,o.children)),$e(()=>typeof t.ref=="function"&&Zd(t.ref,e)),$e(()=>Qd(e,t,n,!0,o,!0)),o}function Zd(e,t,n){return pe(()=>e(t,n))}function se(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Zn(e,t,r,n);$e(o=>Zn(e,t(),o,n),r)}function Qd(e,t,n,r,o={},s=!1){t||(t={});for(const i in o)if(!(i in t)){if(i==="children")continue;o[i]=Ai(e,i,null,o[i],n,s,t)}for(const i in t){if(i==="children")continue;const a=t[i];o[i]=Ai(e,i,a,o[i],n,s,t)}}function ef(e){let t,n;return!tn()||!(t=Y.registry.get(n=rf()))?e():(Y.completed&&Y.completed.add(t),Y.registry.delete(n),t)}function tn(e){return!!Y.context&&!Y.done&&(!e||e.isConnected)}function tf(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Oi(e,t,n){const r=t.trim().split(/\s+/);for(let o=0,s=r.length;o<s;o++)e.classList.toggle(r[o],n)}function Ai(e,t,n,r,o,s,i){let a,c,l,u,d;if(t==="style")return Xd(e,n,r);if(t==="classList")return Jd(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const f=t.slice(3);r&&e.removeEventListener(f,r,typeof r!="function"&&r),n&&e.addEventListener(f,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const f=t.slice(10);r&&e.removeEventListener(f,r,!0),n&&e.addEventListener(f,n,!0)}else if(t.slice(0,2)==="on"){const f=t.slice(2).toLowerCase(),h=Ud.has(f);if(!h&&r){const p=Array.isArray(r)?r[0]:r;e.removeEventListener(f,p)}(h||n)&&(Yd(e,f,n,h),h&&hc([f]))}else if(t.slice(0,5)==="attr:")xn(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")Hd(e,t.slice(5),n);else if((d=t.slice(0,5)==="prop:")||(l=Fd.has(t))||!o&&((u=Kd(t,e.tagName))||(c=$d.has(t)))||(a=e.nodeName.includes("-")||"is"in i)){if(d)t=t.slice(5),c=!0;else if(tn(e))return n;t==="class"||t==="className"?qd(e,n):a&&!c&&!l?e[tf(t)]=n:e[u||t]=n}else{const f=o&&t.indexOf(":")>-1&&jd[t.split(":")[0]];f?Gd(e,f,t,n):xn(e,Nd[t]||t,n)}return n}function nf(e){if(Y.registry&&Y.events&&Y.events.find(([c,l])=>l===e))return;let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,s=c=>Object.defineProperty(e,"target",{configurable:!0,value:c}),i=()=>{const c=t[n];if(c&&!t.disabled){const l=t[`${n}Data`];if(l!==void 0?c.call(t,l,e):c.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},a=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),Y.registry&&!Y.done&&(Y.done=_$HY.done=!0),e.composedPath){const c=e.composedPath();s(c[0]);for(let l=0;l<c.length-2&&(t=c[l],!!i());l++){if(t._$host){t=t._$host,a();break}if(t.parentNode===o)break}}else a();s(r)}function Zn(e,t,n,r,o){const s=tn(e);if(s){!n&&(n=[...e.childNodes]);let c=[];for(let l=0;l<n.length;l++){const u=n[l];u.nodeType===8&&u.data.slice(0,2)==="!$"?u.remove():c.push(u)}n=c}for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(s||i==="number"&&(t=t.toString(),t===n))return n;if(a){let c=n[0];c&&c.nodeType===3?c.data!==t&&(c.data=t):c=document.createTextNode(t),n=cn(e,n,r,c)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean"){if(s)return n;n=cn(e,n,r)}else{if(i==="function")return $e(()=>{let c=t();for(;typeof c=="function";)c=c();n=Zn(e,c,n,r)}),()=>n;if(Array.isArray(t)){const c=[],l=n&&Array.isArray(n);if(Jo(c,t,n,o))return $e(()=>n=Zn(e,c,n,r,!0)),()=>n;if(s){if(!c.length)return n;if(r===void 0)return n=[...e.childNodes];let u=c[0];if(u.parentNode!==e)return n;const d=[u];for(;(u=u.nextSibling)!==r;)d.push(u);return n=d}if(c.length===0){if(n=cn(e,n,r),a)return n}else l?n.length===0?Di(e,c,r):Vd(e,n,c):(n&&cn(e),Di(e,c));n=c}else if(t.nodeType){if(s&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=cn(e,n,r,t);cn(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Jo(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let a=t[s],c=n&&n[e.length],l;if(!(a==null||a===!0||a===!1))if((l=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))o=Jo(e,a,c)||o;else if(l==="function")if(r){for(;typeof a=="function";)a=a();o=Jo(e,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||o}else e.push(a),o=!0;else{const u=String(a);c&&c.nodeType===3&&c.data===u?e.push(c):e.push(document.createTextNode(u))}}return o}function Di(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function cn(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const a=t[i];if(o!==a){const c=a.parentNode===e;!s&&!i?c?e.replaceChild(o,a):e.insertBefore(o,n):c&&a.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}function rf(){return Y.getNextContextId()}const of="http://www.w3.org/2000/svg";function pc(e,t=!1,n=void 0){return t?document.createElementNS(of,e):document.createElement(e,{is:n})}function gc(e){const{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,o=Ho();let s,i=!!Y.context;return V(()=>{i&&(Ho().user=i=!1),s||(s=rc(o,()=>H(()=>e.children)));const a=r();if(a instanceof HTMLHeadElement){const[c,l]=j(!1),u=()=>l(!0);mn(d=>se(a,()=>c()?d():s(),null)),J(u)}else{const c=pc(e.isSVG?"g":"div",e.isSVG),l=t&&c.attachShadow?c.attachShadow({mode:"open"}):c;Object.defineProperty(c,"_$host",{get(){return n.parentNode},configurable:!0}),se(l,s),a.appendChild(c),e.ref&&e.ref(c),J(()=>a.removeChild(c))}},void 0,{render:!i}),n}function sf(e,t){const n=H(e);return H(()=>{const r=n();switch(typeof r){case"function":return pe(()=>r(t));case"string":const o=zd.has(r),s=Y.context?ef():pc(r,o,pe(()=>t.is));return pt(s,t,o),s}})}function De(e){const[,t]=q(e,["component"]);return sf(()=>e.component,t)}const Xo=new WeakMap,af=new WeakMap,$r={current:[]};let Co=!1,Yn=0;const jn=new Set,gr=new Map;function mc(e){for(const t of e){if($r.current.includes(t))continue;$r.current.push(t),t.recompute();const n=af.get(t);if(n)for(const r of n){const o=Xo.get(r);o?.length&&mc(o)}}}function cf(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function lf(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function yc(e){if(Yn>0&&!gr.has(e)&&gr.set(e,e.prevState),jn.add(e),!(Yn>0)&&!Co)try{for(Co=!0;jn.size>0;){const t=Array.from(jn);jn.clear();for(const n of t){const r=gr.get(n)??n.prevState;n.prevState=r,cf(n)}for(const n of t){const r=Xo.get(n);r&&($r.current.push(n),mc(r))}for(const n of t){const r=Xo.get(n);if(r)for(const o of r)lf(o)}}}finally{Co=!1,$r.current=[],gr.clear()}}function Jn(e){Yn++;try{e()}finally{if(Yn--,Yn===0){const t=jn.values().next().value;t&&yc(t)}}}function uf(e){return typeof e=="function"}class df{constructor(t,n){this.listeners=new Set,this.subscribe=r=>{var o,s;this.listeners.add(r);const i=(s=(o=this.options)==null?void 0:o.onSubscribe)==null?void 0:s.call(o,r,this);return()=>{this.listeners.delete(r),i?.()}},this.prevState=t,this.state=t,this.options=n}setState(t){var n,r,o;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(t):uf(t)?this.state=t(this.prevState):this.state=t,(o=(r=this.options)==null?void 0:r.onUpdate)==null||o.call(r),yc(this)}}const Lt="__TSR_index",$i="popstate",Fi="beforeunload";function ff(e){let t=e.getLocation();const n=new Set,r=i=>{t=e.getLocation(),n.forEach(a=>a({location:t,action:i}))},o=i=>{e.notifyOnIndexChange??!0?r(i):t=e.getLocation()},s=async({task:i,navigateOpts:a,...c})=>{if(a?.ignoreBlocker??!1){i();return}const u=e.getBlockers?.()??[],d=c.type==="PUSH"||c.type==="REPLACE";if(typeof document<"u"&&u.length&&d)for(const f of u){const h=Fr(c.path,c.state);if(await f.blockerFn({currentLocation:t,nextLocation:h,action:c.type})){e.onBlocked?.();return}}i()};return{get location(){return t},get length(){return e.getLength()},subscribers:n,subscribe:i=>(n.add(i),()=>{n.delete(i)}),push:(i,a,c)=>{const l=t.state[Lt];a=Ni(l+1,a),s({task:()=>{e.pushState(i,a),r({type:"PUSH"})},navigateOpts:c,type:"PUSH",path:i,state:a})},replace:(i,a,c)=>{const l=t.state[Lt];a=Ni(l,a),s({task:()=>{e.replaceState(i,a),r({type:"REPLACE"})},navigateOpts:c,type:"REPLACE",path:i,state:a})},go:(i,a)=>{s({task:()=>{e.go(i),o({type:"GO",index:i})},navigateOpts:a,type:"GO"})},back:i=>{s({task:()=>{e.back(i?.ignoreBlocker??!1),o({type:"BACK"})},navigateOpts:i,type:"BACK"})},forward:i=>{s({task:()=>{e.forward(i?.ignoreBlocker??!1),o({type:"FORWARD"})},navigateOpts:i,type:"FORWARD"})},canGoBack:()=>t.state[Lt]!==0,createHref:i=>e.createHref(i),block:i=>{if(!e.setBlockers)return()=>{};const a=e.getBlockers?.()??[];return e.setBlockers([...a,i]),()=>{const c=e.getBlockers?.()??[];e.setBlockers?.(c.filter(l=>l!==i))}},flush:()=>e.flush?.(),destroy:()=>e.destroy?.(),notify:r}}function Ni(e,t){t||(t={});const n=Ts();return{...t,key:n,__TSR_key:n,[Lt]:e}}function hf(e){const t=typeof document<"u"?window:void 0,n=t.history.pushState,r=t.history.replaceState;let o=[];const s=()=>o,i=x=>o=x,a=(x=>x),c=(()=>Fr(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state));if(!t.history.state?.__TSR_key&&!t.history.state?.key){const x=Ts();t.history.replaceState({[Lt]:0,key:x,__TSR_key:x},"")}let l=c(),u,d=!1,f=!1,h=!1,p=!1;const m=()=>l;let g,y;const v=()=>{g&&(R._ignoreSubscribers=!0,(g.isPush?t.history.pushState:t.history.replaceState)(g.state,"",g.href),R._ignoreSubscribers=!1,g=void 0,y=void 0,u=void 0)},b=(x,P,F)=>{const O=a(P);y||(u=l),l=Fr(P,F),g={href:O,state:F,isPush:g?.isPush||x==="push"},y||(y=Promise.resolve().then(()=>v()))},C=x=>{l=c(),R.notify({type:x})},w=async()=>{if(f){f=!1;return}const x=c(),P=x.state[Lt]-l.state[Lt],F=P===1,O=P===-1,L=!F&&!O||d;d=!1;const W=L?"GO":O?"BACK":"FORWARD",$=L?{type:"GO",index:P}:{type:O?"BACK":"FORWARD"};if(h)h=!1;else{const Q=s();if(typeof document<"u"&&Q.length){for(const ne of Q)if(await ne.blockerFn({currentLocation:l,nextLocation:x,action:W})){f=!0,t.history.go(1),R.notify($);return}}}l=c(),R.notify($)},k=x=>{if(p){p=!1;return}let P=!1;const F=s();if(typeof document<"u"&&F.length)for(const O of F){const L=O.enableBeforeUnload??!0;if(L===!0){P=!0;break}if(typeof L=="function"&&L()===!0){P=!0;break}}if(P)return x.preventDefault(),x.returnValue=""},R=ff({getLocation:m,getLength:()=>t.history.length,pushState:(x,P)=>b("push",x,P),replaceState:(x,P)=>b("replace",x,P),back:x=>(x&&(h=!0),p=!0,t.history.back()),forward:x=>{x&&(h=!0),p=!0,t.history.forward()},go:x=>{d=!0,t.history.go(x)},createHref:x=>a(x),flush:v,destroy:()=>{t.history.pushState=n,t.history.replaceState=r,t.removeEventListener(Fi,k,{capture:!0}),t.removeEventListener($i,w)},onBlocked:()=>{u&&l!==u&&(l=u)},getBlockers:s,setBlockers:i,notifyOnIndexChange:!1});return t.addEventListener(Fi,k,{capture:!0}),t.addEventListener($i,w),t.history.pushState=function(...x){const P=n.apply(t.history,x);return R._ignoreSubscribers||C("PUSH"),P},t.history.replaceState=function(...x){const P=r.apply(t.history,x);return R._ignoreSubscribers||C("REPLACE"),P},R}function pf(e){let t=e.replace(/[\x00-\x1f\x7f]/g,"");return t.startsWith("//")&&(t="/"+t.replace(/^\/+/,"")),t}function Fr(e,t){const n=pf(e),r=n.indexOf("#"),o=n.indexOf("?"),s=Ts();return{href:n,pathname:n.substring(0,r>0?o>0?Math.min(r,o):r:o>0?o:n.length),hash:r>-1?n.substring(r):"",search:o>-1?n.slice(o,r===-1?void 0:r):"",state:t||{[Lt]:0,key:s,__TSR_key:s}}}function Ts(){return(Math.random()+1).toString(36).substring(7)}function Nr(e){return e[e.length-1]}function gf(e){return typeof e=="function"}function Tt(e,t){return gf(e)?e(t):e}const mf=Object.prototype.hasOwnProperty;function nt(e,t){if(e===t)return e;const n=t,r=Ui(e)&&Ui(n);if(!r&&!(Br(e)&&Br(n)))return n;const o=r?e:Bi(e);if(!o)return n;const s=r?n:Bi(n);if(!s)return n;const i=o.length,a=s.length,c=r?new Array(a):{};let l=0;for(let u=0;u<a;u++){const d=r?u:s[u],f=e[d],h=n[d];if(f===h){c[d]=f,(r?u<i:mf.call(e,d))&&l++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){c[d]=h;continue}const p=nt(f,h);c[d]=p,p===f&&l++}return i===a&&l===i?e:c}function Bi(e){const t=[],n=Object.getOwnPropertyNames(e);for(const o of n){if(!Object.prototype.propertyIsEnumerable.call(e,o))return!1;t.push(o)}const r=Object.getOwnPropertySymbols(e);for(const o of r){if(!Object.prototype.propertyIsEnumerable.call(e,o))return!1;t.push(o)}return t}function Br(e){if(!Ki(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!Ki(n)||!n.hasOwnProperty("isPrototypeOf"))}function Ki(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ui(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Gt(e,t,n){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0,o=e.length;r<o;r++)if(!Gt(e[r],t[r],n))return!1;return!0}if(Br(e)&&Br(t)){const r=n?.ignoreUndefined??!0;if(n?.partial){for(const i in t)if((!r||t[i]!==void 0)&&!Gt(e[i],t[i],n))return!1;return!0}let o=0;if(!r)o=Object.keys(e).length;else for(const i in e)e[i]!==void 0&&o++;let s=0;for(const i in t)if((!r||t[i]!==void 0)&&(s++,s>o||!Gt(e[i],t[i],n)))return!1;return o===s}return!1}function Sn(e){let t,n;const r=new Promise((o,s)=>{t=o,n=s});return r.status="pending",r.resolve=o=>{r.status="resolved",r.value=o,t(o),e?.(o)},r.reject=o=>{r.status="rejected",n(o)},r}function yf(e){return typeof e?.message!="string"?!1:e.message.startsWith("Failed to fetch dynamically imported module")||e.message.startsWith("error loading dynamically imported module")||e.message.startsWith("Importing a module script failed")}function Ot(e){return!!(e&&typeof e=="object"&&typeof e.then=="function")}function vf(e){return e.replace(/[\x00-\x1f\x7f]/g,"")}function zi(e){let t;try{t=decodeURI(e)}catch{t=e.replaceAll(/%[0-9A-F]{2}/gi,n=>{try{return decodeURI(n)}catch{return n}})}return vf(t)}const vc=["http:","https:","mailto:","tel:"];function Kr(e){if(!e)return!1;try{const t=new URL(e);return!vc.includes(t.protocol)}catch{return!1}}const bf={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},xf=/[&><\u2028\u2029]/g;function Sf(e){return e.replace(xf,t=>bf[t])}function ji(e,t){if(!e)return e;const n=/%25|%5C/gi;let r=0,o="",s;for(;(s=n.exec(e))!==null;)o+=zi(e.slice(r,s.index))+s[0],r=n.lastIndex;return o=o+zi(r?e.slice(r):e),o.startsWith("//")&&(o="/"+o.replace(/^\/+/,"")),o}var Cf="Invariant failed";function Xt(e,t){if(!e)throw new Error(Cf)}function Ur(e){const t=new Map;let n,r;const o=s=>{s.next&&(s.prev?(s.prev.next=s.next,s.next.prev=s.prev,s.next=void 0,r&&(r.next=s,s.prev=r)):(s.next.prev=void 0,n=s.next,s.next=void 0,r&&(s.prev=r,r.next=s)),r=s)};return{get(s){const i=t.get(s);if(i)return o(i),i.value},set(s,i){if(t.size>=e&&n){const c=n;t.delete(c.key),c.next&&(n=c.next,c.next.prev=void 0),c===r&&(r=void 0)}const a=t.get(s);if(a)a.value=i,o(a);else{const c={key:s,value:i,prev:r};r&&(r.next=c),r=c,n||(n=c),t.set(s,c)}},clear(){t.clear(),n=void 0,r=void 0}}}const Cn=0,Zt=1,Qt=2,Qn=3,gn=4,_f=5,wf=/^([^{]*)\{\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,Pf=/^([^{]*)\{-\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,kf=/^([^{]*)\{\$\}([^}]*)$/;function Is(e,t,n=new Uint16Array(6)){const r=e.indexOf("/",t),o=r===-1?e.length:r,s=e.substring(t,o);if(!s||!s.includes("$"))return n[0]=Cn,n[1]=t,n[2]=t,n[3]=o,n[4]=o,n[5]=o,n;if(s==="$"){const l=e.length;return n[0]=Qt,n[1]=t,n[2]=t,n[3]=l,n[4]=l,n[5]=l,n}if(s.charCodeAt(0)===36)return n[0]=Zt,n[1]=t,n[2]=t+1,n[3]=o,n[4]=o,n[5]=o,n;const i=s.match(kf);if(i){const u=i[1].length;return n[0]=Qt,n[1]=t+u,n[2]=t+u+1,n[3]=t+u+2,n[4]=t+u+3,n[5]=e.length,n}const a=s.match(Pf);if(a){const l=a[1],u=a[2],d=a[3],f=l.length;return n[0]=Qn,n[1]=t+f,n[2]=t+f+3,n[3]=t+f+3+u.length,n[4]=o-d.length,n[5]=o,n}const c=s.match(wf);if(c){const l=c[1],u=c[2],d=c[3],f=l.length;return n[0]=Zt,n[1]=t+f,n[2]=t+f+2,n[3]=t+f+2+u.length,n[4]=o-d.length,n[5]=o,n}return n[0]=Cn,n[1]=t,n[2]=t,n[3]=o,n[4]=o,n[5]=o,n}function eo(e,t,n,r,o,s,i){i?.(n);let a=r;{const c=n.fullPath??n.from,l=c.length,u=n.options?.caseSensitive??e,d=!!(n.options?.params?.parse&&n.options?.skipRouteOnParseError?.params);for(;a<l;){const h=Is(c,a,t);let p;const m=a,g=h[5];switch(a=g+1,s++,h[0]){case Cn:{const v=c.substring(h[2],h[3]);if(u){const b=o.static?.get(v);if(b)p=b;else{o.static??=new Map;const C=Vt(n.fullPath??n.from);C.parent=o,C.depth=s,p=C,o.static.set(v,C)}}else{const b=v.toLowerCase(),C=o.staticInsensitive?.get(b);if(C)p=C;else{o.staticInsensitive??=new Map;const w=Vt(n.fullPath??n.from);w.parent=o,w.depth=s,p=w,o.staticInsensitive.set(b,w)}}break}case Zt:{const v=c.substring(m,h[1]),b=c.substring(h[4],g),C=u&&!!(v||b),w=v?C?v:v.toLowerCase():void 0,k=b?C?b:b.toLowerCase():void 0,R=!d&&o.dynamic?.find(x=>!x.skipOnParamError&&x.caseSensitive===C&&x.prefix===w&&x.suffix===k);if(R)p=R;else{const x=wo(Zt,n.fullPath??n.from,C,w,k);p=x,x.depth=s,x.parent=o,o.dynamic??=[],o.dynamic.push(x)}break}case Qn:{const v=c.substring(m,h[1]),b=c.substring(h[4],g),C=u&&!!(v||b),w=v?C?v:v.toLowerCase():void 0,k=b?C?b:b.toLowerCase():void 0,R=!d&&o.optional?.find(x=>!x.skipOnParamError&&x.caseSensitive===C&&x.prefix===w&&x.suffix===k);if(R)p=R;else{const x=wo(Qn,n.fullPath??n.from,C,w,k);p=x,x.parent=o,x.depth=s,o.optional??=[],o.optional.push(x)}break}case Qt:{const v=c.substring(m,h[1]),b=c.substring(h[4],g),C=u&&!!(v||b),w=v?C?v:v.toLowerCase():void 0,k=b?C?b:b.toLowerCase():void 0,R=wo(Qt,n.fullPath??n.from,C,w,k);p=R,R.parent=o,R.depth=s,o.wildcard??=[],o.wildcard.push(R)}}o=p}if(d&&n.children&&!n.isRoot&&n.id&&n.id.charCodeAt(n.id.lastIndexOf("/")+1)===95){const h=Vt(n.fullPath??n.from);h.kind=_f,h.parent=o,s++,h.depth=s,o.pathless??=[],o.pathless.push(h),o=h}const f=(n.path||!n.children)&&!n.isRoot;if(f&&c.endsWith("/")){const h=Vt(n.fullPath??n.from);h.kind=gn,h.parent=o,s++,h.depth=s,o.index=h,o=h}o.parse=n.options?.params?.parse??null,o.skipOnParamError=d,o.parsingPriority=n.options?.skipRouteOnParseError?.priority??0,f&&!o.route&&(o.route=n,o.fullPath=n.fullPath??n.from)}if(n.children)for(const c of n.children)eo(e,t,c,a,o,s,i)}function _o(e,t){if(e.skipOnParamError&&!t.skipOnParamError)return-1;if(!e.skipOnParamError&&t.skipOnParamError)return 1;if(e.skipOnParamError&&t.skipOnParamError&&(e.parsingPriority||t.parsingPriority))return t.parsingPriority-e.parsingPriority;if(e.prefix&&t.prefix&&e.prefix!==t.prefix){if(e.prefix.startsWith(t.prefix))return-1;if(t.prefix.startsWith(e.prefix))return 1}if(e.suffix&&t.suffix&&e.suffix!==t.suffix){if(e.suffix.endsWith(t.suffix))return-1;if(t.suffix.endsWith(e.suffix))return 1}return e.prefix&&!t.prefix?-1:!e.prefix&&t.prefix?1:e.suffix&&!t.suffix?-1:!e.suffix&&t.suffix?1:e.caseSensitive&&!t.caseSensitive?-1:!e.caseSensitive&&t.caseSensitive?1:0}function Rt(e){if(e.pathless)for(const t of e.pathless)Rt(t);if(e.static)for(const t of e.static.values())Rt(t);if(e.staticInsensitive)for(const t of e.staticInsensitive.values())Rt(t);if(e.dynamic?.length){e.dynamic.sort(_o);for(const t of e.dynamic)Rt(t)}if(e.optional?.length){e.optional.sort(_o);for(const t of e.optional)Rt(t)}if(e.wildcard?.length){e.wildcard.sort(_o);for(const t of e.wildcard)Rt(t)}}function Vt(e){return{kind:Cn,depth:0,pathless:null,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null,parse:null,skipOnParamError:!1,parsingPriority:0}}function wo(e,t,n,r,o){return{kind:e,depth:0,pathless:null,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null,parse:null,skipOnParamError:!1,parsingPriority:0,caseSensitive:n,prefix:r,suffix:o}}function Rf(e,t){const n=Vt("/"),r=new Uint16Array(6);for(const o of e)eo(!1,r,o,1,n,0);Rt(n),t.masksTree=n,t.flatCache=Ur(1e3)}function Tf(e,t){e||="/";const n=t.flatCache.get(e);if(n)return n;const r=Es(e,t.masksTree);return t.flatCache.set(e,r),r}function If(e,t,n,r,o){e||="/",r||="/";const s=t?`case\0${e}`:e;let i=o.singleCache.get(s);if(!i){i=Vt("/");const a=new Uint16Array(6);eo(t,a,{from:e},1,i,0),o.singleCache.set(s,i)}return Es(r,i,n)}function Ef(e,t,n=!1){const r=n?e:`nofuzz\0${e}`,o=t.matchCache.get(r);if(o!==void 0)return o;e||="/";const s=Es(e,t.segmentTree,n);return s&&(s.branch=Of(s.route)),t.matchCache.set(r,s),s}function Mf(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function Lf(e,t=!1,n){const r=Vt(e.fullPath),o=new Uint16Array(6),s={},i={};let a=0;return eo(t,o,e,1,r,0,l=>{if(n?.(l,a),Xt(!(l.id in s),`Duplicate routes found with id: ${String(l.id)}`),s[l.id]=l,a!==0&&l.path){const u=Mf(l.fullPath);(!i[u]||l.fullPath.endsWith("/"))&&(i[u]=l)}a++}),Rt(r),{processedTree:{segmentTree:r,singleCache:Ur(1e3),matchCache:Ur(1e3),flatCache:null,masksTree:null},routesById:s,routesByPath:i}}function Es(e,t,n=!1){const r=e.split("/"),o=Df(e,r,t,n);if(!o)return null;const[s]=bc(e,r,o);return{route:o.node.route,rawParams:s,parsedParams:o.parsedParams}}function bc(e,t,n){const r=Af(n.node);let o=null;const s={};let i=n.extract?.part??0,a=n.extract?.node??0,c=n.extract?.path??0;for(;a<r.length;i++,a++,c++){const l=r[a],u=t[i],d=c;if(u&&(c+=u.length),l.kind===Zt){o??=n.node.fullPath.split("/");const f=o[a],h=l.prefix?.length??0;if(f.charCodeAt(h)===123){const m=l.suffix?.length??0,g=f.substring(h+2,f.length-m-1),y=u.substring(h,u.length-m);s[g]=decodeURIComponent(y)}else{const m=f.substring(1);s[m]=decodeURIComponent(u)}}else if(l.kind===Qn){if(n.skipped&1<<a){i--;continue}o??=n.node.fullPath.split("/");const f=o[a],h=l.prefix?.length??0,p=l.suffix?.length??0,m=f.substring(h+3,f.length-p-1),g=l.suffix||l.prefix?u.substring(h,u.length-p):u;g&&(s[m]=decodeURIComponent(g))}else if(l.kind===Qt){const f=l,h=e.substring(d+(f.prefix?.length??0),e.length-(f.suffix?.length??0)),p=decodeURIComponent(h);s["*"]=p,s._splat=p;break}}return n.rawParams&&Object.assign(s,n.rawParams),[s,{part:i,node:a,path:c}]}function Of(e){const t=[e];for(;e.parentRoute;)e=e.parentRoute,t.push(e);return t.reverse(),t}function Af(e){const t=Array(e.depth+1);do t[e.depth]=e,e=e.parent;while(e);return t}function Df(e,t,n,r){if(e==="/"&&n.index)return{node:n.index,skipped:0};const o=!Nr(t),s=o&&e!=="/",i=t.length-(o?1:0),a=[{node:n,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let c=null,l=null,u=null;for(;a.length;){const d=a.pop(),{node:f,index:h,skipped:p,depth:m,statics:g,dynamics:y,optionals:v}=d;let{extract:b,rawParams:C,parsedParams:w}=d;if(f.skipOnParamError){if(!Po(e,t,d))continue;C=d.rawParams,b=d.extract,w=d.parsedParams}r&&f.route&&f.kind!==gn&&On(l,d)&&(l=d);const k=h===i;if(k&&(f.route&&!s&&On(u,d)&&(u=d),!f.optional&&!f.wildcard&&!f.index&&!f.pathless))continue;const R=k?void 0:t[h];let x;if(k&&f.index){const P={node:f.index,index:h,skipped:p,depth:m+1,statics:g,dynamics:y,optionals:v,extract:b,rawParams:C,parsedParams:w};if(f.index.skipOnParamError&&!Po(e,t,P))continue;if(g===i&&!y&&!v&&!p)return P;On(u,P)&&(u=P)}if(f.wildcard&&On(c,d))for(const P of f.wildcard){const{prefix:F,suffix:O}=P;if(F&&(k||!(P.caseSensitive?R:x??=R.toLowerCase()).startsWith(F)))continue;if(O){if(k)continue;const W=t.slice(h).join("/").slice(-O.length);if((P.caseSensitive?W:W.toLowerCase())!==O)continue}const L={node:P,index:i,skipped:p,depth:m,statics:g,dynamics:y,optionals:v,extract:b,rawParams:C,parsedParams:w};if(!(P.skipOnParamError&&!Po(e,t,L))){c=L;break}}if(f.optional){const P=p|1<<m,F=m+1;for(let O=f.optional.length-1;O>=0;O--){const L=f.optional[O];a.push({node:L,index:h,skipped:P,depth:F,statics:g,dynamics:y,optionals:v,extract:b,rawParams:C,parsedParams:w})}if(!k)for(let O=f.optional.length-1;O>=0;O--){const L=f.optional[O],{prefix:W,suffix:$}=L;if(W||$){const Q=L.caseSensitive?R:x??=R.toLowerCase();if(W&&!Q.startsWith(W)||$&&!Q.endsWith($))continue}a.push({node:L,index:h+1,skipped:p,depth:F,statics:g,dynamics:y,optionals:v+1,extract:b,rawParams:C,parsedParams:w})}}if(!k&&f.dynamic&&R)for(let P=f.dynamic.length-1;P>=0;P--){const F=f.dynamic[P],{prefix:O,suffix:L}=F;if(O||L){const W=F.caseSensitive?R:x??=R.toLowerCase();if(O&&!W.startsWith(O)||L&&!W.endsWith(L))continue}a.push({node:F,index:h+1,skipped:p,depth:m+1,statics:g,dynamics:y+1,optionals:v,extract:b,rawParams:C,parsedParams:w})}if(!k&&f.staticInsensitive){const P=f.staticInsensitive.get(x??=R.toLowerCase());P&&a.push({node:P,index:h+1,skipped:p,depth:m+1,statics:g+1,dynamics:y,optionals:v,extract:b,rawParams:C,parsedParams:w})}if(!k&&f.static){const P=f.static.get(R);P&&a.push({node:P,index:h+1,skipped:p,depth:m+1,statics:g+1,dynamics:y,optionals:v,extract:b,rawParams:C,parsedParams:w})}if(f.pathless){const P=m+1;for(let F=f.pathless.length-1;F>=0;F--){const O=f.pathless[F];a.push({node:O,index:h,skipped:p,depth:P,statics:g,dynamics:y,optionals:v,extract:b,rawParams:C,parsedParams:w})}}}if(u&&c)return On(c,u)?u:c;if(u)return u;if(c)return c;if(r&&l){let d=l.index;for(let h=0;h<l.index;h++)d+=t[h].length;const f=d===e.length?"/":e.slice(d);return l.rawParams??={},l.rawParams["**"]=decodeURIComponent(f),l}return null}function Po(e,t,n){try{const[r,o]=bc(e,t,n);n.rawParams=r,n.extract=o;const s=n.node.parse(r);return n.parsedParams=Object.assign({},n.parsedParams,s),!0}catch{return null}}function On(e,t){return e?t.statics>e.statics||t.statics===e.statics&&(t.dynamics>e.dynamics||t.dynamics===e.dynamics&&(t.optionals>e.optionals||t.optionals===e.optionals&&((t.node.kind===gn)>(e.node.kind===gn)||t.node.kind===gn==(e.node.kind===gn)&&t.depth>e.depth))):!0}function wr(e){return Ms(e.filter(t=>t!==void 0).join("/"))}function Ms(e){return e.replace(/\/{2,}/g,"/")}function xc(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function Ht(e){const t=e.length;return t>1&&e[t-1]==="/"?e.replace(/\/{1,}$/,""):e}function Sc(e){return Ht(xc(e))}function zr(e,t){return e?.endsWith("/")&&e!=="/"&&e!==`${t}/`?e.slice(0,-1):e}function $f(e,t,n){return zr(e,n)===zr(t,n)}function Ff({base:e,to:t,trailingSlash:n="never",cache:r}){const o=t.startsWith("/"),s=!o&&t===".";let i;if(r){i=o?t:s?e:e+"\0"+t;const d=r.get(i);if(d)return d}let a;if(s)a=e.split("/");else if(o)a=t.split("/");else{for(a=e.split("/");a.length>1&&Nr(a)==="";)a.pop();const d=t.split("/");for(let f=0,h=d.length;f<h;f++){const p=d[f];p===""?f?f===h-1&&a.push(p):a=[p]:p===".."?a.pop():p==="."||a.push(p)}}a.length>1&&(Nr(a)===""?n==="never"&&a.pop():n==="always"&&a.push(""));let c,l="";for(let d=0;d<a.length;d++){d>0&&(l+="/");const f=a[d];if(!f)continue;c=Is(f,0,c);const h=c[0];if(h===Cn){l+=f;continue}const p=c[5],m=f.substring(0,c[1]),g=f.substring(c[4],p),y=f.substring(c[2],c[3]);h===Zt?l+=m||g?`${m}{$${y}}${g}`:`$${y}`:h===Qt?l+=m||g?`${m}{$}${g}`:"$":l+=`${m}{-$${y}}${g}`}l=Ms(l);const u=l||"/";return i&&r&&r.set(i,u),u}function ko(e,t,n){const r=t[e];return typeof r!="string"?r:e==="_splat"?encodeURI(r):Nf(r,n)}function Ro({path:e,params:t,decodeCharMap:n}){let r=!1;const o={};if(!e||e==="/")return{interpolatedPath:"/",usedParams:o,isMissingParams:r};if(!e.includes("$"))return{interpolatedPath:e,usedParams:o,isMissingParams:r};const s=e.length;let i=0,a,c="";for(;i<s;){const u=i;a=Is(e,u,a);const d=a[5];if(i=d+1,u===d)continue;const f=a[0];if(f===Cn){c+="/"+e.substring(u,d);continue}if(f===Qt){const h=t._splat;o._splat=h,o["*"]=h;const p=e.substring(u,a[1]),m=e.substring(a[4],d);if(!h){r=!0,(p||m)&&(c+="/"+p+m);continue}const g=ko("_splat",t,n);c+="/"+p+g+m;continue}if(f===Zt){const h=e.substring(a[2],a[3]);!r&&!(h in t)&&(r=!0),o[h]=t[h];const p=e.substring(u,a[1]),m=e.substring(a[4],d),g=ko(h,t,n)??"undefined";c+="/"+p+g+m;continue}if(f===Qn){const h=e.substring(a[2],a[3]),p=t[h];if(p==null)continue;o[h]=p;const m=e.substring(u,a[1]),g=e.substring(a[4],d),y=ko(h,t,n)??"";c+="/"+m+y+g;continue}}return e.endsWith("/")&&(c+="/"),{usedParams:o,interpolatedPath:c||"/",isMissingParams:r}}function Nf(e,t){let n=encodeURIComponent(e);if(t)for(const[r,o]of t)n=n.replaceAll(r,o);return n}function je(e){return!!e?.isNotFound}function Bf(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const jr="tsr-scroll-restoration-v1_3",Kf=(e,t)=>{let n;return(...r)=>{n||(n=setTimeout(()=>{e(...r),n=null},t))}};function Uf(){const e=Bf();if(!e)return null;const t=e.getItem(jr);let n=t?JSON.parse(t):{};return{state:n,set:r=>{n=Tt(r,n)||n;try{e.setItem(jr,JSON.stringify(n))}catch{console.warn("[ts-router] Could not persist scroll restoration state to sessionStorage.")}}}}const mr=Uf(),Zo=e=>e.state.__TSR_key||e.href;function zf(e){const t=[];let n;for(;n=e.parentNode;)t.push(`${e.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,e)+1})`),e=n;return`${t.reverse().join(" > ")}`.toLowerCase()}let Vr=!1;function Cc({storageKey:e,key:t,behavior:n,shouldScrollRestoration:r,scrollToTopSelectors:o,location:s}){let i;try{i=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(l){console.error(l);return}const a=t||window.history.state?.__TSR_key,c=i[a];Vr=!0;e:{if(r&&c&&Object.keys(c).length>0){for(const d in c){const f=c[d];if(d==="window")window.scrollTo({top:f.scrollY,left:f.scrollX,behavior:n});else if(d){const h=document.querySelector(d);h&&(h.scrollLeft=f.scrollX,h.scrollTop=f.scrollY)}}break e}const l=(s??window.location).hash.split("#",2)[1];if(l){const d=window.history.state?.__hashScrollIntoViewOptions??!0;if(d){const f=document.getElementById(l);f&&f.scrollIntoView(d)}break e}const u={top:0,left:0,behavior:n};if(window.scrollTo(u),o)for(const d of o){if(d==="window")continue;const f=typeof d=="function"?d():document.querySelector(d);f&&f.scrollTo(u)}}Vr=!1}function jf(e,t){if(!mr&&!e.isServer||((e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),e.isServer||e.isScrollRestorationSetup||!mr))return;e.isScrollRestorationSetup=!0,Vr=!1;const r=e.options.getScrollRestorationKey||Zo;window.history.scrollRestoration="manual";const o=s=>{if(Vr||!e.isScrollRestoring)return;let i="";if(s.target===document||s.target===window)i="window";else{const c=s.target.getAttribute("data-scroll-restoration-id");c?i=`[data-scroll-restoration-id="${c}"]`:i=zf(s.target)}const a=r(e.state.location);mr.set(c=>{const l=c[a]||={},u=l[i]||={};if(i==="window")u.scrollX=window.scrollX||0,u.scrollY=window.scrollY||0;else if(i){const d=document.querySelector(i);d&&(u.scrollX=d.scrollLeft||0,u.scrollY=d.scrollTop||0)}return c})};typeof document<"u"&&document.addEventListener("scroll",Kf(o,100),!0),e.subscribe("onRendered",s=>{const i=r(s.toLocation);if(!e.resetNextScroll){e.resetNextScroll=!0;return}typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation})||(Cc({storageKey:jr,key:i,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&mr.set(a=>(a[i]||={},a)))})}function Vf(e){if(typeof document<"u"&&document.querySelector){const t=e.state.location.state.__hashScrollIntoViewOptions??!0;if(t&&e.state.location.hash!==""){const n=document.getElementById(e.state.location.hash);n&&n.scrollIntoView(t)}}}function Wf(e,t=String){const n=new URLSearchParams;for(const r in e){const o=e[r];o!==void 0&&n.set(r,t(o))}return n.toString()}function To(e){return e?e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e:""}function Gf(e){const t=new URLSearchParams(e),n={};for(const[r,o]of t.entries()){const s=n[r];s==null?n[r]=To(o):Array.isArray(s)?s.push(To(o)):n[r]=[s,To(o)]}return n}const Hf=Yf(JSON.parse),qf=Jf(JSON.stringify,JSON.parse);function Yf(e){return t=>{t[0]==="?"&&(t=t.substring(1));const n=Gf(t);for(const r in n){const o=n[r];if(typeof o=="string")try{n[r]=e(o)}catch{}}return n}}function Jf(e,t){const n=typeof t=="function";function r(o){if(typeof o=="object"&&o!==null)try{return e(o)}catch{}else if(n&&typeof o=="string")try{return t(o),e(o)}catch{}return o}return o=>{const s=Wf(o,r);return s?`?${s}`:""}}const Ae="__root__";function Xf(e){if(e.statusCode=e.statusCode||e.code||307,typeof e.href=="string"&&Kr(e.href))throw new Error(`Redirect blocked: unsafe protocol in href "${e.href}". Only ${vc.join(", ")} protocols are allowed.`);if(!e.reloadDocument&&typeof e.href=="string")try{new URL(e.href),e.reloadDocument=!0}catch{}const t=new Headers(e.headers);e.href&&t.get("Location")===null&&t.set("Location",e.href);const n=new Response(null,{status:e.statusCode,headers:t});if(n.options=e,e.throw)throw n;return n}function Ye(e){return e instanceof Response&&!!e.options}const Pr=e=>{if(!e.rendered)return e.rendered=!0,e.onReady?.()},to=(e,t)=>!!(e.preload&&!e.router.state.matches.some(n=>n.id===t)),Ls=(e,t,n=!0)=>{const r={...e.router.options.context??{}},o=n?t:t-1;for(let s=0;s<=o;s++){const i=e.matches[s];if(!i)continue;const a=e.router.getMatch(i.id);a&&Object.assign(r,a.__routeContext,a.__beforeLoadContext)}return r},_c=(e,t)=>{const n=e.router.routesById[t.routeId??""]??e.router.routeTree;!n.options.notFoundComponent&&e.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=e.router.options.defaultNotFoundComponent),Xt(n.options.notFoundComponent);const r=e.matches.find(o=>o.routeId===n.id);Xt(r,"Could not find match for route: "+n.id),e.updateMatch(r.id,o=>({...o,status:"notFound",error:t,isFetching:!1})),t.routerCode==="BEFORE_LOAD"&&n.parentRoute&&(t.routeId=n.parentRoute.id,_c(e,t))},It=(e,t,n)=>{if(!(!Ye(n)&&!je(n))){if(Ye(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(t){t._nonReactive.beforeLoadPromise?.resolve(),t._nonReactive.loaderPromise?.resolve(),t._nonReactive.beforeLoadPromise=void 0,t._nonReactive.loaderPromise=void 0;const r=Ye(n)?"redirected":"notFound";t._nonReactive.error=n,e.updateMatch(t.id,o=>({...o,status:r,isFetching:!1,error:n})),je(n)&&!n.routeId&&(n.routeId=t.routeId),t._nonReactive.loadPromise?.resolve()}throw Ye(n)?(e.rendered=!0,n.options._fromLocation=e.location,n.redirectHandled=!0,n=e.router.resolveRedirect(n),n):(_c(e,n),n)}},wc=(e,t)=>{const n=e.router.getMatch(t);return!!(!e.router.isServer&&n._nonReactive.dehydrated||e.router.isServer&&n.ssr===!1)},An=(e,t,n,r)=>{const{id:o,routeId:s}=e.matches[t],i=e.router.looseRoutesById[s];if(n instanceof Promise)throw n;n.routerCode=r,e.firstBadMatchIndex??=t,It(e,e.router.getMatch(o),n);try{i.options.onError?.(n)}catch(a){n=a,It(e,e.router.getMatch(o),n)}e.updateMatch(o,a=>(a._nonReactive.beforeLoadPromise?.resolve(),a._nonReactive.beforeLoadPromise=void 0,a._nonReactive.loadPromise?.resolve(),{...a,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},Zf=(e,t,n,r)=>{const o=e.router.getMatch(t),s=e.matches[n-1]?.id,i=s?e.router.getMatch(s):void 0;if(e.router.isShell()){o.ssr=r.id===Ae;return}if(i?.ssr===!1){o.ssr=!1;return}const a=h=>h===!0&&i?.ssr==="data-only"?"data-only":h,c=e.router.options.defaultSsr??!0;if(r.options.ssr===void 0){o.ssr=a(c);return}if(typeof r.options.ssr!="function"){o.ssr=a(r.options.ssr);return}const{search:l,params:u}=o,d={search:yr(l,o.searchError),params:yr(u,o.paramsError),location:e.location,matches:e.matches.map(h=>({index:h.index,pathname:h.pathname,fullPath:h.fullPath,staticData:h.staticData,id:h.id,routeId:h.routeId,search:yr(h.search,h.searchError),params:yr(h.params,h.paramsError),ssr:h.ssr}))},f=r.options.ssr(d);if(Ot(f))return f.then(h=>{o.ssr=a(h??c)});o.ssr=a(f??c)},Pc=(e,t,n,r)=>{if(r._nonReactive.pendingTimeout!==void 0)return;const o=n.options.pendingMs??e.router.options.defaultPendingMs;if(!!(e.onReady&&!e.router.isServer&&!to(e,t)&&(n.options.loader||n.options.beforeLoad||Tc(n))&&typeof o=="number"&&o!==1/0&&(n.options.pendingComponent??e.router.options?.defaultPendingComponent))){const i=setTimeout(()=>{Pr(e)},o);r._nonReactive.pendingTimeout=i}},Qf=(e,t,n)=>{const r=e.router.getMatch(t);if(!r._nonReactive.beforeLoadPromise&&!r._nonReactive.loaderPromise)return;Pc(e,t,n,r);const o=()=>{const s=e.router.getMatch(t);s.preload&&(s.status==="redirected"||s.status==="notFound")&&It(e,s,s.error)};return r._nonReactive.beforeLoadPromise?r._nonReactive.beforeLoadPromise.then(o):o()},eh=(e,t,n,r)=>{const o=e.router.getMatch(t),s=o._nonReactive.loadPromise;o._nonReactive.loadPromise=Sn(()=>{s?.resolve()});const{paramsError:i,searchError:a}=o;i&&An(e,n,i,"PARSE_PARAMS"),a&&An(e,n,a,"VALIDATE_SEARCH"),Pc(e,t,r,o);const c=new AbortController,l=e.matches[n-1]?.id;(l?e.router.getMatch(l):void 0)?.context??e.router.options.context;let d=!1;const f=()=>{d||(d=!0,e.updateMatch(t,k=>({...k,isFetching:"beforeLoad",fetchCount:k.fetchCount+1,abortController:c})))},h=()=>{o._nonReactive.beforeLoadPromise?.resolve(),o._nonReactive.beforeLoadPromise=void 0,e.updateMatch(t,k=>({...k,isFetching:!1}))};if(!r.options.beforeLoad){Jn(()=>{f(),h()});return}o._nonReactive.beforeLoadPromise=Sn();const p={...Ls(e,n,!1),...o.__routeContext},{search:m,params:g,cause:y}=o,v=to(e,t),b={search:m,abortController:c,params:g,preload:v,context:p,location:e.location,navigate:k=>e.router.navigate({...k,_fromLocation:e.location}),buildLocation:e.router.buildLocation,cause:v?"preload":y,matches:e.matches,...e.router.options.additionalContext},C=k=>{if(k===void 0){Jn(()=>{f(),h()});return}(Ye(k)||je(k))&&(f(),An(e,n,k,"BEFORE_LOAD")),Jn(()=>{f(),e.updateMatch(t,R=>({...R,__beforeLoadContext:k})),h()})};let w;try{if(w=r.options.beforeLoad(b),Ot(w))return f(),w.catch(k=>{An(e,n,k,"BEFORE_LOAD")}).then(C)}catch(k){f(),An(e,n,k,"BEFORE_LOAD")}C(w)},th=(e,t)=>{const{id:n,routeId:r}=e.matches[t],o=e.router.looseRoutesById[r],s=()=>{if(e.router.isServer){const c=Zf(e,n,t,o);if(Ot(c))return c.then(a)}return a()},i=()=>eh(e,n,t,o),a=()=>{if(wc(e,n))return;const c=Qf(e,n,o);return Ot(c)?c.then(i):i()};return s()},nh=(e,t,n)=>{const r=e.router.getMatch(t);if(!r||!n.options.head&&!n.options.scripts&&!n.options.headers)return;const o={matches:e.matches,match:r,params:r.params,loaderData:r.loaderData};return Promise.all([n.options.head?.(o),n.options.scripts?.(o),n.options.headers?.(o)]).then(([s,i,a])=>{const c=s?.meta,l=s?.links,u=s?.scripts,d=s?.styles;return{meta:c,links:l,headScripts:u,headers:a,scripts:i,styles:d}})},kc=(e,t,n,r)=>{const o=e.matchPromises[n-1],{params:s,loaderDeps:i,abortController:a,cause:c}=e.router.getMatch(t),l=Ls(e,n),u=to(e,t);return{params:s,deps:i,preload:!!u,parentMatchPromise:o,abortController:a,context:l,location:e.location,navigate:d=>e.router.navigate({...d,_fromLocation:e.location}),cause:u?"preload":c,route:r,...e.router.options.additionalContext}},Vi=async(e,t,n,r)=>{try{const o=e.router.getMatch(t);try{(!e.router.isServer||o.ssr===!0)&&Rc(r);const s=r.options.loader?.(kc(e,t,n,r)),i=r.options.loader&&Ot(s);if((i||r._lazyPromise||r._componentsPromise||r.options.head||r.options.scripts||r.options.headers||o._nonReactive.minPendingPromise)&&e.updateMatch(t,l=>({...l,isFetching:"loader"})),r.options.loader){const l=i?await s:s;It(e,e.router.getMatch(t),l),l!==void 0&&e.updateMatch(t,u=>({...u,loaderData:l}))}r._lazyPromise&&await r._lazyPromise;const c=o._nonReactive.minPendingPromise;c&&await c,r._componentsPromise&&await r._componentsPromise,e.updateMatch(t,l=>({...l,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(s){let i=s;if(i?.name==="AbortError"){e.updateMatch(t,c=>({...c,status:c.status==="pending"?"success":c.status,isFetching:!1}));return}const a=o._nonReactive.minPendingPromise;a&&await a,je(s)&&await r.options.notFoundComponent?.preload?.(),It(e,e.router.getMatch(t),s);try{r.options.onError?.(s)}catch(c){i=c,It(e,e.router.getMatch(t),c)}e.updateMatch(t,c=>({...c,error:i,status:"error",isFetching:!1}))}}catch(o){const s=e.router.getMatch(t);s&&(s._nonReactive.loaderPromise=void 0),It(e,s,o)}},rh=async(e,t)=>{const{id:n,routeId:r}=e.matches[t];let o=!1,s=!1;const i=e.router.looseRoutesById[r],a=()=>{e.updateMatch(n,u=>({...u,context:Ls(e,t)}))};if(wc(e,n)){if(e.router.isServer)return e.router.getMatch(n)}else{const u=e.router.getMatch(n);if(u._nonReactive.loaderPromise){if(u.status==="success"&&!e.sync&&!u.preload)return u;await u._nonReactive.loaderPromise;const d=e.router.getMatch(n),f=d._nonReactive.error||d.error;f&&It(e,d,f)}else{const d=Date.now()-u.updatedAt,f=to(e,n),h=f?i.options.preloadStaleTime??e.router.options.defaultPreloadStaleTime??3e4:i.options.staleTime??e.router.options.defaultStaleTime??0,p=i.options.shouldReload,m=typeof p=="function"?p(kc(e,n,t,i)):p,g=!!f&&!e.router.state.matches.some(C=>C.id===n),y=e.router.getMatch(n);y._nonReactive.loaderPromise=Sn(),g!==y.preload&&e.updateMatch(n,C=>({...C,preload:g}));const{status:v,invalid:b}=y;o=v==="success"&&(b||(m??d>h)),f&&i.options.preload===!1||(o&&!e.sync?(s=!0,(async()=>{try{await Vi(e,n,t,i),a();const C=e.router.getMatch(n);C._nonReactive.loaderPromise?.resolve(),C._nonReactive.loadPromise?.resolve(),C._nonReactive.loaderPromise=void 0}catch(C){Ye(C)&&await e.router.navigate(C.options)}})()):(v!=="success"||o&&e.sync)&&await Vi(e,n,t,i))}}const c=e.router.getMatch(n);s||(c._nonReactive.loaderPromise?.resolve(),c._nonReactive.loadPromise?.resolve()),clearTimeout(c._nonReactive.pendingTimeout),c._nonReactive.pendingTimeout=void 0,s||(c._nonReactive.loaderPromise=void 0),c._nonReactive.dehydrated=void 0,s||a();const l=s?c.isFetching:!1;return l!==c.isFetching||c.invalid!==!1?(e.updateMatch(n,u=>({...u,isFetching:l,invalid:!1})),e.router.getMatch(n)):c};async function Wi(e){const t=Object.assign(e,{matchPromises:[]});!t.router.isServer&&t.router.state.matches.some(n=>n._forcePending)&&Pr(t);try{for(let a=0;a<t.matches.length;a++){const c=th(t,a);Ot(c)&&await c}const n=t.firstBadMatchIndex??t.matches.length;for(let a=0;a<n;a++)t.matchPromises.push(rh(t,a));const o=(await Promise.allSettled(t.matchPromises)).filter(a=>a.status==="rejected").map(a=>a.reason);let s;for(const a of o){if(Ye(a))throw a;!s&&je(a)&&(s=a)}for(const a of t.matches){const{id:c,routeId:l}=a,u=t.router.looseRoutesById[l];try{const d=nh(t,c,u);if(d){const f=await d;t.updateMatch(c,h=>({...h,...f}))}}catch(d){console.error(`Error executing head for route ${l}:`,d)}}if(s)throw s;const i=Pr(t);Ot(i)&&await i}catch(n){if(je(n)&&!t.preload){const r=Pr(t);throw Ot(r)&&await r,n}if(Ye(n))throw n}return t.matches}async function Rc(e){if(!e._lazyLoaded&&e._lazyPromise===void 0&&(e.lazyFn?e._lazyPromise=e.lazyFn().then(t=>{const{id:n,...r}=t.options;Object.assign(e.options,r),e._lazyLoaded=!0,e._lazyPromise=void 0}):e._lazyLoaded=!0),!e._componentsLoaded&&e._componentsPromise===void 0){const t=()=>{const n=[];for(const r of Ic){const o=e.options[r]?.preload;o&&n.push(o())}if(n.length)return Promise.all(n).then(()=>{e._componentsLoaded=!0,e._componentsPromise=void 0});e._componentsLoaded=!0,e._componentsPromise=void 0};e._componentsPromise=e._lazyPromise?e._lazyPromise.then(t):t()}return e._componentsPromise}function yr(e,t){return t?{status:"error",error:t}:{status:"success",value:e}}function Tc(e){for(const t of Ic)if(e.options[t]?.preload)return!0;return!1}const Ic=["component","errorComponent","pendingComponent","notFoundComponent"];function oh(e){return{input:({url:t})=>{for(const n of e)t=Qo(n,t);return t},output:({url:t})=>{for(let n=e.length-1;n>=0;n--)t=Ec(e[n],t);return t}}}function sh(e){const t=Sc(e.basepath),n=`/${t}`,r=`${n}/`,o=e.caseSensitive?n:n.toLowerCase(),s=e.caseSensitive?r:r.toLowerCase();return{input:({url:i})=>{const a=e.caseSensitive?i.pathname:i.pathname.toLowerCase();return a===o?i.pathname="/":a.startsWith(s)&&(i.pathname=i.pathname.slice(n.length)),i},output:({url:i})=>(i.pathname=wr(["/",t,i.pathname]),i)}}function Qo(e,t){const n=e?.input?.({url:t});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return t}function Ec(e,t){const n=e?.output?.({url:t});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return t}function qt(e){const t=e.resolvedLocation,n=e.location,r=t?.pathname!==n.pathname,o=t?.href!==n.href,s=t?.hash!==n.hash;return{fromLocation:t,toLocation:n,pathChanged:r,hrefChanged:o,hashChanged:s}}class ih{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=n=>n(),this.update=n=>{n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const r=this.options,o=this.basepath??r?.basepath??"/",s=this.basepath===void 0,i=r?.rewrite;this.options={...r,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(f=>[encodeURIComponent(f),f])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=hf())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new df(ch(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(f=>!["redirected"].includes(f.status))}}}),jf(this));let a=!1;const c=this.options.basepath??"/",l=this.options.rewrite;if(s||o!==c||i!==l){this.basepath=c;const f=[];Sc(c)!==""&&f.push(sh({basepath:c})),l&&f.push(l),this.rewrite=f.length===0?void 0:f.length===1?f[0]:oh(f),this.history&&this.updateLatestLocation(),a=!0}a&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:n,routesByPath:r,processedTree:o}=Lf(this.routeTree,this.options.caseSensitive,(i,a)=>{i.init({originalIndex:a})});this.options.routeMasks&&Rf(this.options.routeMasks,o),this.routesById=n,this.routesByPath=r,this.processedTree=o;const s=this.options.notFoundRoute;s&&(s.init({originalIndex:99999999999}),this.routesById[s.id]=s)},this.subscribe=(n,r)=>{const o={eventType:n,fn:r};return this.subscribers.add(o),()=>{this.subscribers.delete(o)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const o=({href:c,state:l})=>{const u=new URL(c,this.origin),d=Qo(this.rewrite,u),f=this.options.parseSearch(d.search),h=this.options.stringifySearch(f);return d.search=h,{href:d.href.replace(d.origin,""),publicHref:c,url:d,pathname:ji(d.pathname),searchStr:h,search:nt(r?.search,f),hash:d.hash.split("#").reverse()[0]??"",state:nt(r?.state,l)}},s=o(n),{__tempLocation:i,__tempKey:a}=s.state;if(i&&(!a||a===this.tempLocationKey)){const c=o(i);return c.state.key=s.state.key,c.state.__TSR_key=s.state.__TSR_key,delete c.state.__tempLocation,{...c,maskedLocation:s}}return s},this.resolvePathCache=Ur(1e3),this.resolvePathWithBase=(n,r)=>Ff({base:n,to:Ms(r),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(n,r,o)=>typeof n=="string"?this.matchRoutesInternal({pathname:n,search:r},o):this.matchRoutesInternal(n,r),this.getMatchedRoutes=n=>lh({pathname:n,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r._nonReactive.pendingTimeout),r._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const n=this.state.matches.filter(s=>s.status==="pending"),r=this.state.matches.filter(s=>s.isFetching==="loader");new Set([...this.state.pendingMatches??[],...n,...r]).forEach(s=>{this.cancelMatch(s.id)})},this.buildLocation=n=>{const r=(s={})=>{const i=s._fromLocation||this.pendingBuiltLocation||this.latestLocation,a=this.matchRoutes(i,{_buildLocation:!0}),c=Nr(a);s.from;const l=s.unsafeRelative==="path"?i.pathname:s.from??c.fullPath,u=this.resolvePathWithBase(l,"."),d=c.search,f={...c.params},h=s.to?this.resolvePathWithBase(u,`${s.to}`):this.resolvePathWithBase(u,"."),p=s.params===!1||s.params===null?{}:(s.params??!0)===!0?f:Object.assign(f,Tt(s.params,f)),m=Ro({path:h,params:p}).interpolatedPath,g=this.matchRoutes(m,void 0,{_buildLocation:!0}).map(F=>this.looseRoutesById[F.routeId]);if(Object.keys(p).length>0)for(const F of g){const O=F.options.params?.stringify??F.options.stringifyParams;O&&Object.assign(p,O(p))}const y=n.leaveParams?h:ji(Ro({path:h,params:p,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath);let v=d;if(n._includeValidateSearch&&this.options.search?.strict){const F={};g.forEach(O=>{if(O.options.validateSearch)try{Object.assign(F,es(O.options.validateSearch,{...F,...v}))}catch{}}),v=F}v=uh({search:v,dest:s,destRoutes:g,_includeValidateSearch:n._includeValidateSearch}),v=nt(d,v);const b=this.options.stringifySearch(v),C=s.hash===!0?i.hash:s.hash?Tt(s.hash,i.hash):void 0,w=C?`#${C}`:"";let k=s.state===!0?i.state:s.state?Tt(s.state,i.state):{};k=nt(i.state,k);const R=`${y}${b}${w}`,x=new URL(R,this.origin),P=Ec(this.rewrite,x);return{publicHref:P.pathname+P.search+P.hash,href:R,url:P,pathname:y,search:v,searchStr:b,state:k,hash:C??"",unmaskOnReload:s.unmaskOnReload}},o=(s={},i)=>{const a=r(s);let c=i?r(i):void 0;if(!c){const l={};if(this.options.routeMasks){const u=Tf(a.pathname,this.processedTree);if(u){Object.assign(l,u.rawParams);const{from:d,params:f,...h}=u.route,p=f===!1||f===null?{}:(f??!0)===!0?l:Object.assign(l,Tt(f,l));i={from:n.from,...h,params:p},c=r(i)}}}return c&&(a.maskedLocation=c),a};return n.mask?o(n,{from:n.from,...n.mask}):o(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...o})=>{const s=()=>{const c=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];c.forEach(u=>{o.state[u]=this.latestLocation.state[u]});const l=Gt(o.state,this.latestLocation.state);return c.forEach(u=>{delete o.state[u]}),l},i=Ht(this.latestLocation.href)===Ht(o.href),a=this.commitLocationPromise;if(this.commitLocationPromise=Sn(()=>{a?.resolve()}),i&&s())this.load();else{let{maskedLocation:c,hashScrollIntoView:l,url:u,...d}=o;c&&(d={...c,state:{...c.state,__tempKey:void 0,__tempLocation:{...d,search:d.searchStr,state:{...d.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(d.unmaskOnReload??this.options.unmaskOnReload??!1)&&(d.state.__tempKey=this.tempLocationKey)),d.state.__hashScrollIntoViewOptions=l??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[o.replace?"replace":"push"](d.publicHref,d.state,{ignoreBlocker:r})}return this.resetNextScroll=o.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:o,viewTransition:s,ignoreBlocker:i,href:a,...c}={})=>{if(a){const d=this.history.location.state.__TSR_index,f=Fr(a,{__TSR_index:n?d:d+1}),h=new URL(f.pathname,this.origin),p=Qo(this.rewrite,h);c.to=p.pathname,c.search=this.options.parseSearch(f.search),c.hash=f.hash.slice(1)}const l=this.buildLocation({...c,_includeValidateSearch:!0});this.pendingBuiltLocation=l;const u=this.commitLocation({...l,viewTransition:s,replace:n,resetScroll:r,hashScrollIntoView:o,ignoreBlocker:i});return Promise.resolve().then(()=>{this.pendingBuiltLocation===l&&(this.pendingBuiltLocation=void 0)}),u},this.navigate=async({to:n,reloadDocument:r,href:o,publicHref:s,...i})=>{let a=!1;if(o)try{new URL(`${o}`),a=!0}catch{}if(a&&!r&&(r=!0),r){if(n!==void 0||!o){const l=this.buildLocation({to:n,...i});o=o??l.url.href,s=s??l.url.href}const c=!a&&s?s:o;if(Kr(c))return Promise.resolve();if(!i.ignoreBlocker){const u=this.history.getBlockers?.()??[];for(const d of u)if(d?.blockerFn&&await d.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}return i.replace?window.location.replace(c):window.location.href=c,Promise.resolve()}return this.buildAndCommitLocation({...i,href:o,to:n,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const r=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});if(this.latestLocation.publicHref!==r.publicHref||r.url.origin!==this.origin){const o=this.getParsedLocationHref(r);throw Xf({href:o})}}const n=this.matchRoutes(this.latestLocation);this.__store.setState(r=>({...r,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:n,cachedMatches:r.cachedMatches.filter(o=>!n.some(s=>s.id===o.id))}))},this.load=async n=>{let r,o,s;for(s=new Promise(a=>{this.startTransition(async()=>{try{this.beforeLoad();const c=this.latestLocation,l=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...qt({resolvedLocation:l,location:c})}),this.emit({type:"onBeforeLoad",...qt({resolvedLocation:l,location:c})}),await Wi({router:this,sync:n?.sync,matches:this.state.pendingMatches,location:c,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let u=[],d=[],f=[];Jn(()=>{this.__store.setState(h=>{const p=h.matches,m=h.pendingMatches||h.matches;return u=p.filter(g=>!m.some(y=>y.id===g.id)),d=m.filter(g=>!p.some(y=>y.id===g.id)),f=m.filter(g=>p.some(y=>y.id===g.id)),{...h,isLoading:!1,loadedAt:Date.now(),matches:m,pendingMatches:void 0,cachedMatches:[...h.cachedMatches,...u.filter(g=>g.status!=="error"&&g.status!=="notFound")]}}),this.clearExpiredCache()}),[[u,"onLeave"],[d,"onEnter"],[f,"onStay"]].forEach(([h,p])=>{h.forEach(m=>{this.looseRoutesById[m.routeId].options[p]?.(m)})})})})}})}catch(c){Ye(c)?(r=c,this.isServer||this.navigate({...r.options,replace:!0,ignoreBlocker:!0})):je(c)&&(o=c),this.__store.setState(l=>({...l,statusCode:r?r.status:o?404:l.matches.some(u=>u.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===s&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),a()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise;let i;this.hasNotFoundMatch()?i=404:this.__store.state.matches.some(a=>a.status==="error")&&(i=500),i!==void 0&&this.__store.setState(a=>({...a,statusCode:i}))},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let o;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const s=this.latestLocation,i=this.state.resolvedLocation,a=typeof r.types=="function"?r.types(qt({resolvedLocation:i,location:s})):r.types;if(a===!1){n();return}o={update:n,types:a}}else o=n;document.startViewTransition(o)}else n()},this.updateMatch=(n,r)=>{this.startTransition(()=>{const o=this.state.pendingMatches?.some(s=>s.id===n)?"pendingMatches":this.state.matches.some(s=>s.id===n)?"matches":this.state.cachedMatches.some(s=>s.id===n)?"cachedMatches":"";o&&this.__store.setState(s=>({...s,[o]:s[o]?.map(i=>i.id===n?r(i):i)}))})},this.getMatch=n=>{const r=o=>o.id===n;return this.state.cachedMatches.find(r)??this.state.pendingMatches?.find(r)??this.state.matches.find(r)},this.invalidate=n=>{const r=o=>n?.filter?.(o)??!0?{...o,invalid:!0,...n?.forcePending||o.status==="error"||o.status==="notFound"?{status:"pending",error:void 0}:void 0}:o;return this.__store.setState(o=>({...o,matches:o.matches.map(r),cachedMatches:o.cachedMatches.map(r),pendingMatches:o.pendingMatches?.map(r)})),this.shouldViewTransition=!1,this.load({sync:n?.sync})},this.getParsedLocationHref=n=>{let r=n.url.href;return this.origin&&n.url.origin===this.origin&&(r=r.replace(this.origin,"")||"/"),r},this.resolveRedirect=n=>{const r=n.headers.get("Location");if(n.options.href){if(r)try{const o=new URL(r);if(this.origin&&o.origin===this.origin){const s=o.pathname+o.search+o.hash;n.options.href=s,n.headers.set("Location",s)}}catch{}}else{const o=this.buildLocation(n.options),s=this.getParsedLocationHref(o);n.options.href=s,n.headers.set("Location",s)}return n.headers.get("Location")||n.headers.set("Location",n.options.href),n},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(o=>({...o,cachedMatches:o.cachedMatches.filter(s=>!r(s))})):this.__store.setState(o=>({...o,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const o=this.looseRoutesById[r.routeId];if(!o.options.loader)return!0;const s=(r.preload?o.options.preloadGcTime??this.options.defaultPreloadGcTime:o.options.gcTime??this.options.defaultGcTime)??300*1e3;return r.status==="error"?!0:Date.now()-r.updatedAt>=s};this.clearCache({filter:n})},this.loadRouteChunk=Rc,this.preloadRoute=async n=>{const r=this.buildLocation(n);let o=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),i=new Set([...s,...this.state.cachedMatches.map(a=>a.id)]);Jn(()=>{o.forEach(a=>{i.has(a.id)||this.__store.setState(c=>({...c,cachedMatches:[...c.cachedMatches,a]}))})});try{return o=await Wi({router:this,matches:o,location:r,preload:!0,updateMatch:(a,c)=>{s.has(a)?o=o.map(l=>l.id===a?c(l):l):this.updateMatch(a,c)}}),o}catch(a){if(Ye(a))return a.options.reloadDocument?void 0:await this.preloadRoute({...a.options,_fromLocation:r});je(a)||console.error(a);return}},this.matchRoute=(n,r)=>{const o={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},s=this.buildLocation(o);if(r?.pending&&this.state.status!=="pending")return!1;const a=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,c=If(s.pathname,r?.caseSensitive??!1,r?.fuzzy??!1,a.pathname,this.processedTree);return!c||n.params&&!Gt(c.rawParams,n.params,{partial:!0})?!1:r?.includeSearch??!0?Gt(a.search,s.search,{partial:!0})?c.rawParams:!1:c.rawParams},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,caseSensitive:t.caseSensitive??!1,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??qf,parseSearch:t.parseSearch??Hf}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(t,n){const r=this.getMatchedRoutes(t.pathname),{foundRoute:o,routeParams:s,parsedParams:i}=r;let{matchedRoutes:a}=r,c=!1;(o?o.path!=="/"&&s["**"]:Ht(t.pathname))&&(this.options.notFoundRoute?a=[...a,this.options.notFoundRoute]:c=!0);const l=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let f=a.length-1;f>=0;f--){const h=a[f];if(h.children)return h.id}return Ae}})(),u=[],d=f=>f?.id?f.context??this.options.context??void 0:this.options.context??void 0;return a.forEach((f,h)=>{const p=u[h-1],[m,g,y]=(()=>{const $=p?.search??t.search,Q=p?._strictSearch??void 0;try{const ne=es(f.options.validateSearch,{...$})??void 0;return[{...$,...ne},{...Q,...ne},void 0]}catch(ne){let A=ne;if(ne instanceof Wr||(A=new Wr(ne.message,{cause:ne})),n?.throwOnError)throw A;return[$,{},A]}})(),v=f.options.loaderDeps?.({search:m})??"",b=v?JSON.stringify(v):"",{interpolatedPath:C,usedParams:w}=Ro({path:f.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),k=f.id+C+b,R=this.getMatch(k),x=this.state.matches.find($=>$.routeId===f.id),P=R?._strictParams??w;let F;if(!R)if(f.options.skipRouteOnParseError)for(const $ in w)$ in i&&(P[$]=i[$]);else{const $=f.options.params?.parse??f.options.parseParams;if($)try{Object.assign(P,$(P))}catch(Q){if(je(Q)||Ye(Q)?F=Q:F=new ah(Q.message,{cause:Q}),n?.throwOnError)throw F}}Object.assign(s,P);const O=x?"stay":"enter";let L;if(R)L={...R,cause:O,params:x?nt(x.params,s):s,_strictParams:P,search:nt(x?x.search:R.search,m),_strictSearch:g};else{const $=f.options.loader||f.options.beforeLoad||f.lazyFn||Tc(f)?"pending":"success";L={id:k,ssr:this.isServer?void 0:f.options.ssr,index:h,routeId:f.id,params:x?nt(x.params,s):s,_strictParams:P,pathname:C,updatedAt:Date.now(),search:x?nt(x.search,m):m,_strictSearch:g,searchError:void 0,status:$,isFetching:!1,error:void 0,paramsError:F,__routeContext:void 0,_nonReactive:{loadPromise:Sn()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:O,loaderDeps:x?nt(x.loaderDeps,v):v,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:f.options.staticData||{},fullPath:f.fullPath}}n?.preload||(L.globalNotFound=l===f.id),L.searchError=y;const W=d(p);L.context={...W,...L.__routeContext,...L.__beforeLoadContext},u.push(L)}),u.forEach((f,h)=>{const p=this.looseRoutesById[f.routeId];if(!this.getMatch(f.id)&&n?._buildLocation!==!0){const g=u[h-1],y=d(g);if(p.options.context){const v={deps:f.loaderDeps,params:f.params,context:y??{},location:t,navigate:b=>this.navigate({...b,_fromLocation:t}),buildLocation:this.buildLocation,cause:f.cause,abortController:f.abortController,preload:!!f.preload,matches:u};f.__routeContext=p.options.context(v)??void 0}f.context={...y,...f.__routeContext,...f.__beforeLoadContext}}}),u}}class Wr extends Error{}class ah extends Error{}function ch(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function es(e,t){if(e==null)return{};if("~standard"in e){const n=e["~standard"].validate(t);if(n instanceof Promise)throw new Wr("Async validation not supported");if(n.issues)throw new Wr(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in e?e.parse(t):typeof e=="function"?e(t):{}}function lh({pathname:e,routesById:t,processedTree:n}){const r={},o=Ht(e);let s,i;const a=Ef(o,n,!0);return a&&(s=a.route,Object.assign(r,a.rawParams),i=Object.assign({},a.parsedParams)),{matchedRoutes:a?.branch||[t[Ae]],routeParams:r,foundRoute:s,parsedParams:i}}function uh({search:e,dest:t,destRoutes:n,_includeValidateSearch:r}){const o=n.reduce((a,c)=>{const l=[];if("search"in c.options)c.options.search?.middlewares&&l.push(...c.options.search.middlewares);else if(c.options.preSearchFilters||c.options.postSearchFilters){const u=({search:d,next:f})=>{let h=d;"preSearchFilters"in c.options&&c.options.preSearchFilters&&(h=c.options.preSearchFilters.reduce((m,g)=>g(m),d));const p=f(h);return"postSearchFilters"in c.options&&c.options.postSearchFilters?c.options.postSearchFilters.reduce((m,g)=>g(m),p):p};l.push(u)}if(r&&c.options.validateSearch){const u=({search:d,next:f})=>{const h=f(d);try{return{...h,...es(c.options.validateSearch,h)??void 0}}catch{return h}};l.push(u)}return a.concat(l)},[])??[],s=({search:a})=>t.search?t.search===!0?a:Tt(t.search,a):{};o.push(s);const i=(a,c)=>{if(a>=o.length)return c;const l=o[a];return l({search:c,next:d=>i(a+1,d)})};return i(0,e)}const dh="Error preloading route! ";class Mc{constructor(t){if(this.init=n=>{this.originalIndex=n.originalIndex;const r=this.options,o=!r?.path&&!r?.id;this.parentRoute=this.options.getParentRoute?.(),o?this._path=Ae:this.parentRoute||Xt(!1);let s=o?Ae:r?.path;s&&s!=="/"&&(s=xc(s));const i=r?.id||s;let a=o?Ae:wr([this.parentRoute.id===Ae?"":this.parentRoute.id,i]);s===Ae&&(s="/"),a!==Ae&&(a=wr(["/",a]));const c=a===Ae?"/":wr([this.parentRoute.fullPath,s]);this._path=s,this._id=a,this._fullPath=c,this._to=c},this.addChildren=n=>this._addFileChildren(n),this._addFileChildren=n=>(Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this),this._addFileTypes=()=>this,this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.options=t||{},this.isRoot=!t?.getParentRoute,t?.id&&t?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class fh extends Mc{constructor(t){super(t)}}var hh=te("<div><div><strong>Something went wrong!</strong><button></button></div><div>"),ph=te("<div><pre>"),gh=te("<code>");function Os(e){return S(Od,{fallback:(t,n)=>(e.onCatch?.(t),V(ct([e.getResetKey],()=>n(),{defer:!0})),S(De,{get component(){return e.errorComponent??cr},error:t,reset:n})),get children(){return e.children}})}function cr({error:e}){const[t,n]=j(!1);return(()=>{var r=hh(),o=r.firstChild,s=o.firstChild,i=s.nextSibling,a=o.nextSibling;return r.style.setProperty("padding",".5rem"),r.style.setProperty("max-width","100%"),o.style.setProperty("display","flex"),o.style.setProperty("align-items","center"),o.style.setProperty("gap",".5rem"),s.style.setProperty("font-size","1rem"),i.$$click=()=>n(c=>!c),i.style.setProperty("appearance","none"),i.style.setProperty("font-size",".6em"),i.style.setProperty("border","1px solid currentColor"),i.style.setProperty("padding",".1rem .2rem"),i.style.setProperty("font-weight","bold"),i.style.setProperty("border-radius",".25rem"),se(i,()=>t()?"Hide Error":"Show Error"),a.style.setProperty("height",".25rem"),se(r,(()=>{var c=he(()=>!!t());return()=>c()?(()=>{var l=ph(),u=l.firstChild;return u.style.setProperty("font-size",".7em"),u.style.setProperty("border","1px solid red"),u.style.setProperty("border-radius",".25rem"),u.style.setProperty("padding",".3rem"),u.style.setProperty("color","red"),u.style.setProperty("overflow","auto"),se(u,(()=>{var d=he(()=>!!e.message);return()=>d()?(()=>{var f=gh();return se(f,()=>e.message),f})():null})()),l})():null})(),null),r})()}hc(["click"]);function mh(e){return(...t)=>{for(const n of e)n&&n(...t)}}const M=e=>typeof e=="function"&&!e.length?e():e,Gi=e=>Array.isArray(e)?e:e?[e]:[];function yh(e,...t){return typeof e=="function"?e(...t):e}const vh=J;function Ie(...e){return mh(e)}function bh(e,t=r=>r,n={}){const[r,o]=j(t(e.state)),s=n.equal??xh,i=e.subscribe(()=>{const a=t(e.state);s(r(),a)||o(()=>a)});return J(()=>{i()}),r}function xh(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!t.has(r)||!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}const Io=me(null);function Lc(){return typeof document>"u"?Io:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Io,Io)}function Fe(e){const t=de(Lc());return e?.warn,t}function Oc(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Oc(e[o],t[o]))return!1;return!0}function we(e){const t=Fe({warn:e?.router===void 0}),n=e?.router||t;return bh(n.__store,r=>e?.select?e.select(r):r,{equal:Oc})}const Eo=e=>H((t={current:null,previous:null})=>{const n=e();return t.current!==n&&(t.previous=t.current,t.current=n),t});function Sh(e,t,n={},r={}){const o=typeof IntersectionObserver=="function";let s=null;return V(()=>{const i=e();!i||!o||r.disabled||(s=new IntersectionObserver(([a])=>{t(a)},n),s.observe(i),J(()=>{s?.disconnect()}))}),()=>s}var Ch=te("<svg><a>");function _h(e){const t=Fe(),[n,r]=j(!1);let o=!1;const[s,i]=q(B({activeProps:()=>({class:"active"}),inactiveProps:()=>({})},e),["activeProps","inactiveProps","activeOptions","to","preload","preloadDelay","hashScrollIntoView","replace","startTransition","resetScroll","viewTransition","target","disabled","style","class","onClick","onFocus","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","onTouchStart","ignoreBlocker"]),[a,c]=q(i,["params","search","hash","state","mask","reloadDocument","unsafeRelative"]),l=we({select:A=>A.location.searchStr}),u=e.from,d=()=>({...e,from:u}),f=H(()=>(l(),t.buildLocation(d()))),h=H(()=>{if(d().disabled)return;let A;const I=f().maskedLocation;I?A=I.url.href:A=f().url.href;let ie=!1;return t.origin&&(A.startsWith(t.origin)?A=t.history.createHref(A.replace(t.origin,"")):ie=!0),{href:A,external:ie}}),p=H(()=>{const A=h();if(A?.external)return Kr(A.href)?void 0:A.href;try{return new URL(d().to),Kr(d().to)?void 0:d().to}catch{}}),m=H(()=>d().reloadDocument||p()?!1:s.preload??t.options.defaultPreload),g=()=>s.preloadDelay??t.options.defaultPreloadDelay??0,y=we({select:A=>{if(p())return!1;if(s.activeOptions?.exact){if(!$f(A.location.pathname,f().pathname,t.basepath))return!1}else{const I=zr(A.location.pathname,t.basepath).split("/");if(!zr(f()?.pathname,t.basepath)?.split("/")?.every((at,Qe)=>at===I[Qe]))return!1}return(s.activeOptions?.includeSearch??!0)&&!Gt(A.location.search,f().search,{partial:!s.activeOptions?.exact,ignoreUndefined:!s.activeOptions?.explicitUndefined})?!1:s.activeOptions?.includeHash?A.location.hash===f().hash:!0}}),v=()=>t.preloadRoute(d()).catch(A=>{console.warn(A),console.warn(dh)}),b=A=>{A?.isIntersecting&&v()},[C,w]=j(null);if(Sh(C,b,{rootMargin:"100px"},{disabled:!!s.disabled||m()!=="viewport"}),V(()=>{o||!s.disabled&&m()==="render"&&(v(),o=!0)}),p())return B(c,{ref:Ie(w,d().ref),href:p()},q(s,["target","disabled","style","class","onClick","onFocus","onMouseEnter","onMouseLeave","onMouseOut","onMouseOver","onTouchStart"])[0]);const k=A=>{const I=A.currentTarget.getAttribute("target"),ie=s.target!==void 0?s.target:I;if(!s.disabled&&!wh(A)&&!A.defaultPrevented&&(!ie||ie==="_self")&&A.button===0){A.preventDefault(),r(!0);const We=t.subscribe("onResolved",()=>{We(),r(!1)});t.navigate({...d(),replace:s.replace,resetScroll:s.resetScroll,hashScrollIntoView:s.hashScrollIntoView,startTransition:s.startTransition,viewTransition:s.viewTransition,ignoreBlocker:s.ignoreBlocker})}},R=A=>{s.disabled||m()&&v()},x=R,P=A=>{if(s.disabled)return;const I=A.currentTarget||{};if(m()){if(I.preloadTimeout)return;I.preloadTimeout=setTimeout(()=>{I.preloadTimeout=null,v()},g())}},F=A=>{if(s.disabled)return;const I=A.currentTarget||{};I.preloadTimeout&&(clearTimeout(I.preloadTimeout),I.preloadTimeout=null)};function O(A,I){return I&&(typeof I=="function"?I(A):I[0](I[1],A)),A.defaultPrevented}function L(A){return I=>{for(const ie of A)O(I,ie)}}const W=()=>y()?Tt(s.activeProps,{})??{}:{},$=()=>y()?{}:Tt(s.inactiveProps,{}),Q=()=>[s.class,W().class,$().class].filter(Boolean).join(" "),ne=()=>({...s.style,...W().style,...$().style});return B(c,W,$,()=>({href:h()?.href,ref:Ie(w,d().ref),onClick:L([s.onClick,k]),onFocus:L([s.onFocus,R]),onMouseEnter:L([s.onMouseEnter,P]),onMouseOver:L([s.onMouseOver,P]),onMouseLeave:L([s.onMouseLeave,F]),onMouseOut:L([s.onMouseOut,F]),onTouchStart:L([s.onTouchStart,x]),disabled:!!s.disabled,target:s.target,...(()=>{const A=ne();return Object.keys(A).length?{style:A}:{}})(),...(()=>{const A=Q();return A?{class:A}:{}})(),...s.disabled&&{role:"link","aria-disabled":!0},...y()&&{"data-status":"active","aria-current":"page"},...n()&&{"data-transitioning":"transitioning"}}))}const _n=e=>{const[t,n]=q(e,["_asChild","children"]),[r,o]=q(_h(n),["type"]),s=H(()=>{const i=t.children;return typeof i=="function"?i({get isActive(){return o["data-status"]==="active"},get isTransitioning(){return o["data-transitioning"]==="transitioning"}}):i});if(t._asChild==="svg"){const[i,a]=q(o,["class"]);return(()=>{var c=Ch(),l=c.firstChild;return pt(l,a,!1,!0),se(l,s),c})()}return S(De,B({get component(){return t._asChild?t._asChild:"a"}},o,{get children(){return s()}}))};function wh(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const no=me(()=>{}),Ph=me(()=>{});function ot(e){const t=de(e.from?Ph:no),n=we({select:r=>{const o=r.matches.find(s=>e.from?e.from===s.routeId:s.id===t());return o===void 0?{match:void 0,shouldThrowError:!r.pendingMatches?.find(a=>e.from?e.from===a.routeId:a.id===t())&&!r.isTransitioning&&(e.shouldThrow??!0)}:{match:e.select?e.select(o):o,shouldThrowError:!1}}});return V(()=>{n().shouldThrowError&&Xt(!1,`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`)}),H(()=>n().match)}function As(e){return ot({from:e.from,strict:e.strict,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function Ds(e){const{select:t,...n}=e;return ot({...n,select:r=>t?t(r.loaderDeps):r.loaderDeps})}function $s(e){return ot({from:e.from,shouldThrow:e.shouldThrow,strict:e.strict,select:t=>{const n=e.strict===!1?t.params:t._strictParams;return e.select?e.select(n):n}})}function Fs(e){return ot({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,select:t=>e.select?e.select(t.search):t.search})}function Ns(e){const t=Fe();return n=>t.navigate({...n,from:n.from??e?.from})}let kh=class extends Mc{constructor(t){super(t),this.useMatch=n=>ot({select:n?.select,from:this.id}),this.useRouteContext=n=>ot({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Fs({select:n?.select,from:this.id}),this.useParams=n=>$s({select:n?.select,from:this.id}),this.useLoaderDeps=n=>Ds({...n,from:this.id}),this.useLoaderData=n=>As({...n,from:this.id}),this.useNavigate=()=>Ns({from:this.fullPath}),this.Link=n=>{const r=this;return S(_n,B({get from(){return r.fullPath}},n))}}};function Rh(e){return new kh(e)}class Th extends fh{constructor(t){super(t),this.useMatch=n=>ot({select:n?.select,from:this.id}),this.useRouteContext=n=>ot({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Fs({select:n?.select,from:this.id}),this.useParams=n=>$s({select:n?.select,from:this.id}),this.useLoaderDeps=n=>Ds({...n,from:this.id}),this.useLoaderData=n=>As({...n,from:this.id}),this.useNavigate=()=>Ns({from:this.fullPath}),this.Link=n=>{const r=this;return S(_n,B({get from(){return r.fullPath}},n))}}}function Ih(e){return new Th(e)}function wn(e){return typeof e=="object"?new Hi(e,{silent:!0}).createRoute(e):new Hi(e,{silent:!0}).createRoute}class Hi{constructor(t,n){this.path=t,this.createRoute=r=>{this.silent;const o=Rh(r);return o.isRoot=!1,o},this.silent=n?.silent}}class qi{constructor(t){this.useMatch=n=>ot({select:n?.select,from:this.options.id}),this.useRouteContext=n=>ot({from:this.options.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Fs({select:n?.select,from:this.options.id}),this.useParams=n=>$s({select:n?.select,from:this.options.id}),this.useLoaderDeps=n=>Ds({...n,from:this.options.id}),this.useLoaderData=n=>As({...n,from:this.options.id}),this.useNavigate=()=>{const n=Fe();return Ns({from:n.routesById[this.options.id].fullPath})},this.options=t}}function Yi(e){return typeof e=="object"?new qi(e):t=>new qi({id:e,...t})}function ro(e,t){let n,r,o;const s=()=>(n||(n=e().then(a=>(n=void 0,r=a[t],r)).catch(a=>{o=a})),n),i=function(c){if(o){if(yf(o)&&o instanceof Error&&typeof window<"u"&&typeof sessionStorage<"u"){const l=`tanstack_router_reload:${o.message}`;if(!sessionStorage.getItem(l))return sessionStorage.setItem(l,"1"),window.location.reload(),{default:()=>null}}throw o}if(!r){const[l]=zn(s,{initialValue:r,ssrLoadFrom:"initial"});return S(De,B({get component(){return l()}},c))}return S(De,B({component:r},c))};return i.preload=s,i}function Eh(){const e=Fe();let t={router:e,mounted:!1};const n=we({select:({isLoading:d})=>d});if(e.isServer)return null;const[r,o]=Cd(),s=we({select:d=>d.matches.some(f=>f.status==="pending")}),i=Eo(n),a=()=>n()||r()||s(),c=Eo(a),l=()=>n()||s(),u=Eo(l);return e.startTransition=d=>{oc(()=>{o(d)})},kn(()=>{const d=e.history.subscribe(e.load),f=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});Ht(e.latestLocation.publicHref)!==Ht(f.publicHref)&&e.commitLocation({...f,replace:!0}),J(()=>{d()})}),$e(()=>{pe(()=>{if(typeof window<"u"&&e.ssr||t.router===e&&t.mounted)return;t={router:e,mounted:!0},(async()=>{try{await e.load()}catch(f){console.error(f)}})()})}),$e(ct([i,n],([d,f])=>{d.previous&&!f&&e.emit({type:"onLoad",...qt(e.state)})})),Or(ct([l,u],([d,f])=>{f.previous&&!d&&e.emit({type:"onBeforeRouteMount",...qt(e.state)})})),$e(ct([a,c],([d,f])=>{if(f.previous&&!d){const h=qt(e.state);e.emit({type:"onResolved",...h}),e.__store.setState(p=>({...p,status:"idle",resolvedLocation:p.location})),h.hrefChanged&&Vf(e)}})),null}function Wt(e){return he(()=>e.children)}var Mh=te("<p>Not Found");function Lh(e){const t=we({select:n=>`not-found-${n.location.pathname}-${n.status}`});return S(Os,{getResetKey:()=>t(),onCatch:n=>{if(je(n))e.onCatch?.(n);else throw n},errorComponent:({error:n})=>{if(je(n))return e.fallback?.(n);throw n},get children(){return e.children}})}function Oh(){return Mh()}function Ac(e,t,n){return t.options.notFoundComponent?S(t.options.notFoundComponent,n):e.options.defaultNotFoundComponent?S(e.options.defaultNotFoundComponent,n):S(Oh,{})}var Ah=te("<script class=$tsr>");function Dh({children:e}){const t=Fe();return t.isServer?(()=>{var n=Ah();return n.innerHTML=e+";document.currentScript.remove()",$e(()=>xn(n,"nonce",t.options.ssr?.nonce)),n})():null}function $h(){const e=Fe();if(!e.isScrollRestoring||!e.isServer||typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation}))return null;const n=(e.options.getScrollRestorationKey||Zo)(e.latestLocation),r=n!==Zo(e.latestLocation)?n:void 0,o={storageKey:jr,shouldScrollRestoration:!0};return r&&(o.key=r),S(Dh,{get children(){return`(${Cc.toString()})(${Sf(JSON.stringify(o))})`}})}const ts=e=>{const t=Fe(),n=we({select:m=>{const g=m.matches.find(y=>y.id===e.matchId);return g?{routeId:g.routeId,ssr:g.ssr,_displayPending:g._displayPending}:null}});if(!n())return null;const r=()=>t.routesById[n().routeId],o=()=>r().options.pendingComponent??t.options.defaultPendingComponent,s=()=>r().options.errorComponent??t.options.defaultErrorComponent,i=()=>r().options.onCatch??t.options.defaultOnCatch,a=()=>r().isRoot?r().options.notFoundComponent??t.options.notFoundRoute?.options.component:r().options.notFoundComponent,c=n().ssr===!1||n().ssr==="data-only",l=()=>Rs,u=()=>s()?Os:Wt,d=()=>a()?Lh:Wt,f=we({select:m=>m.loadedAt}),h=we({select:m=>{const g=m.matches.findIndex(y=>y.id===e.matchId);return m.matches[g-1]?.routeId}}),p=r().isRoot?r().options.shellComponent??Wt:Wt;return S(p,{get children(){return[S(no.Provider,{value:()=>e.matchId,get children(){return S(De,{get component(){return l()},get fallback(){return he(()=>!!(t.isServer||c))()?void 0:S(De,{get component(){return o()}})},get children(){return S(De,{get component(){return u()},getResetKey:()=>f(),get errorComponent(){return s()||cr},onCatch:m=>{if(je(m))throw m;`${n().routeId}`,i()?.(m)},get children(){return S(De,{get component(){return d()},fallback:m=>{if(!a()||m.routeId&&m.routeId!==n().routeId||!m.routeId&&!r().isRoot)throw m;return S(De,B({get component(){return a()}},m))},get children(){return S(fc,{get children(){return[S(vt,{when:c,get children(){return S(Me,{get when(){return!t.isServer},get fallback(){return S(De,{get component(){return o()}})},get children(){return S(Ji,{get matchId(){return e.matchId}})}})}}),S(vt,{when:!c,get children(){return S(Ji,{get matchId(){return e.matchId}})}})]}})}})}})}})}}),he(()=>he(()=>h()===Ae)()?[S(Fh,{}),S($h,{})]:null)]}})};function Fh(){const e=Fe(),t=we({select:n=>n.resolvedLocation?.state.__TSR_key});return V(ct([t],()=>{e.emit({type:"onRendered",...qt(e.state)})})),null}const Ji=e=>{const t=Fe(),n=we({select:c=>{const l=c.matches.find(p=>p.id===e.matchId);if(!l)return null;const u=l.routeId,f=(t.routesById[u].options.remountDeps??t.options.defaultRemountDeps)?.({routeId:u,loaderDeps:l.loaderDeps,params:l._strictParams,search:l._strictSearch});return{key:f?JSON.stringify(f):void 0,routeId:u,match:{id:l.id,status:l.status,error:l.error,_forcePending:l._forcePending,_displayPending:l._displayPending}}}});if(!n())return null;const r=()=>t.routesById[n().routeId],o=()=>n().match,s=()=>n().key??n().match.id,i=()=>{const c=r().options.component??t.options.defaultComponent;return c?S(c,{}):S(Dc,{})},a=()=>S(Me,{get when(){return s()},keyed:!0,children:c=>i()});return S(fc,{get children(){return[S(vt,{get when(){return o()._displayPending},children:c=>{const[l]=zn(()=>t.getMatch(o().id)?._nonReactive.displayPendingPromise);return he(l)}}),S(vt,{get when(){return o()._forcePending},children:c=>{const[l]=zn(()=>t.getMatch(o().id)?._nonReactive.minPendingPromise);return he(l)}}),S(vt,{get when(){return o().status==="pending"},children:c=>{const l=r().options.pendingMinMs??t.options.defaultPendingMinMs;if(l){const f=t.getMatch(o().id);if(f&&!f._nonReactive.minPendingPromise&&!t.isServer){const h=Sn();f._nonReactive.minPendingPromise=h,setTimeout(()=>{h.resolve(),f._nonReactive.minPendingPromise=void 0},l)}}const[u]=zn(async()=>(await new Promise(f=>setTimeout(f,0)),t.getMatch(o().id)?._nonReactive.loadPromise)),d=r().options.pendingComponent??t.options.defaultPendingComponent;return[d&&l>0?S(De,{component:d}):null,he(u)]}}),S(vt,{get when(){return o().status==="notFound"},children:c=>(Xt(je(o().error)),S(Me,{get when(){return n().routeId},keyed:!0,children:l=>Ac(t,r(),o().error)}))}),S(vt,{get when(){return o().status==="redirected"},children:c=>{Xt(Ye(o().error));const[l]=zn(async()=>(await new Promise(u=>setTimeout(u,0)),t.getMatch(o().id)?._nonReactive.loadPromise));return he(l)}}),S(vt,{get when(){return o().status==="error"},children:c=>{if(t.isServer){const l=(r().options.errorComponent??t.options.defaultErrorComponent)||cr;return S(l,{get error(){return o().error},info:{componentStack:""}})}throw o().error}}),S(vt,{get when(){return o().status==="success"},get children(){return a()}})]}})},Dc=()=>{const e=Fe(),t=de(no),n=we({select:c=>c.matches.find(l=>l.id===t())?.routeId}),r=()=>e.routesById[n()],o=we({select:c=>{const u=c.matches.find(d=>d.id===t());return u?u.globalNotFound:!1}}),s=we({select:c=>{const l=c.matches,u=l.findIndex(f=>f.id===t());return l[u+1]?.id}}),i=we({select:c=>{const l=c.matches,u=l.findIndex(d=>d.id===t());return l[u+1]?.status}}),a=()=>i()!=="redirected"&&o();return S(Me,{get when(){return he(()=>!a())()&&s()},get fallback(){return S(Me,{get when(){return a()},get children(){return Ac(e,r(),void 0)}})},children:c=>{const l=H(()=>c());return S(Me,{get when(){return n()===Ae},get fallback(){return S(ts,{get matchId(){return l()}})},get children(){return S(Rs,{get fallback(){return S(De,{get component(){return e.options.defaultPendingComponent}})},get children(){return S(ts,{get matchId(){return l()}})}})}})}})};function Nh(){const e=Fe(),t=e.isServer||typeof document<"u"&&e.ssr?Wt:Rs,r=e.routesById[Ae].options.pendingComponent??e.options.defaultPendingComponent,o=e.options.InnerWrap||Wt;return S(o,{get children(){return S(t,{get fallback(){return r?S(r,{}):null},get children(){return[S(Eh,{}),S(Bh,{})]}})}})}function Bh(){const e=Fe(),t=we({select:o=>o.matches[0]?.id}),n=we({select:o=>o.loadedAt}),r=()=>S(Me,{get when(){return t()},get children(){return S(ts,{get matchId(){return t()}})}});return S(no.Provider,{value:t,get children(){return he(()=>!!e.options.disableGlobalCatchBoundary)()?r():S(Os,{getResetKey:()=>n(),errorComponent:cr,onCatch:o=>{o.message||o.toString()},get children(){return r()}})}})}const Kh=e=>new Uh(e);class Uh extends ih{constructor(t){super(t)}}typeof globalThis<"u"?(globalThis.createFileRoute=wn,globalThis.createLazyFileRoute=Yi):typeof window<"u"&&(window.createFileRoute=wn,window.createLazyFileRoute=Yi);function zh({router:e,children:t,...n}){e.update({...e.options,...n,context:{...e.options.context,...n.context}});const r=Lc(),o=e.options.Wrap||Wt;return S(o,{get children(){return S(r.Provider,{value:e,get children(){return t()}})}})}function jh({router:e,...t}){return S(zh,B({router:e},t,{children:()=>S(Nh,{})}))}function Vh(e,t,n,r){return e.addEventListener(t,n,r),vh(e.removeEventListener.bind(e,t,n,r))}function Wh(e,t,n,r){const o=()=>{Gi(M(e)).forEach(s=>{s&&Gi(M(t)).forEach(i=>Vh(s,i,n,r))})};typeof e=="function"?V(o):$e(o)}const Gh=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g;function Xi(e){const t={};let n;for(;n=Gh.exec(e);)t[n[1]]=n[2];return t}function oo(e,t){if(typeof e=="string"){if(typeof t=="string")return`${e};${t}`;e=Xi(e)}else typeof t=="string"&&(t=Xi(t));return{...e,...t}}function Hh(e,t,n=-1){return n in e?[...e.slice(0,n),t,...e.slice(n)]:[...e,t]}function ns(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function qh(e){return typeof e=="number"}function fn(e){return Object.prototype.toString.call(e)==="[object String]"}function Yh(e){return typeof e=="function"}function so(e){return t=>`${e()}-${t}`}function Ue(e,t){return e?e===t||e.contains(t):!1}function Vn(e,t=!1){const{activeElement:n}=ut(e);if(!n?.nodeName)return null;if($c(n)&&n.contentDocument)return Vn(n.contentDocument.body,t);if(t){const r=n.getAttribute("aria-activedescendant");if(r){const o=ut(n).getElementById(r);if(o)return o}}return n}function Jh(e){return ut(e).defaultView||window}function ut(e){return e?e.ownerDocument||e:document}function $c(e){return e.tagName==="IFRAME"}var Fc=(e=>(e.Escape="Escape",e.Enter="Enter",e.Tab="Tab",e.Space=" ",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e))(Fc||{});function Bs(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.userAgentData?.platform||window.navigator.platform):!1}function io(){return Bs(/^Mac/i)}function Xh(){return Bs(/^iPhone/i)}function Zh(){return Bs(/^iPad/i)||io()&&navigator.maxTouchPoints>1}function Qh(){return Xh()||Zh()}function ep(){return io()||Qh()}function fe(e,t){return t&&(Yh(t)?t(e):t[0](t[1],e)),e?.defaultPrevented}function Ce(e){return t=>{for(const n of e)fe(t,n)}}function tp(e){return io()?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey}function Se(e){if(e)if(np())e.focus({preventScroll:!0});else{const t=rp(e);e.focus(),op(t)}}var vr=null;function np(){if(vr==null){vr=!1;try{document.createElement("div").focus({get preventScroll(){return vr=!0,!0}})}catch{}}return vr}function rp(e){let t=e.parentNode;const n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function op(e){for(const{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}var Nc=["input:not([type='hidden']):not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","[tabindex]","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]:not([contenteditable='false'])"],sp=[...Nc,'[tabindex]:not([tabindex="-1"]):not([disabled])'],Ks=`${Nc.join(":not([hidden]),")},[tabindex]:not([disabled]):not([hidden])`,ip=sp.join(':not([hidden]):not([tabindex="-1"]),');function Bc(e,t){const r=Array.from(e.querySelectorAll(Ks)).filter(Zi);return t&&Zi(e)&&r.unshift(e),r.forEach((o,s)=>{if($c(o)&&o.contentDocument){const i=o.contentDocument.body,a=Bc(i,!1);r.splice(s,1,...a)}}),r}function Zi(e){return Kc(e)&&!ap(e)}function Kc(e){return e.matches(Ks)&&Us(e)}function ap(e){return Number.parseInt(e.getAttribute("tabindex")||"0",10)<0}function Us(e,t){return e.nodeName!=="#comment"&&cp(e)&&lp(e,t)&&(!e.parentElement||Us(e.parentElement,e))}function cp(e){if(!(e instanceof HTMLElement)&&!(e instanceof SVGElement))return!1;const{display:t,visibility:n}=e.style;let r=t!=="none"&&n!=="hidden"&&n!=="collapse";if(r){if(!e.ownerDocument.defaultView)return r;const{getComputedStyle:o}=e.ownerDocument.defaultView,{display:s,visibility:i}=o(e);r=s!=="none"&&i!=="hidden"&&i!=="collapse"}return r}function lp(e,t){return!e.hasAttribute("hidden")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function up(e,t,n){const r=t?.tabbable?ip:Ks,o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(s){return t?.from?.contains(s)?NodeFilter.FILTER_REJECT:s.matches(r)&&Us(s)&&(!t?.accept||t.accept(s))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t?.from&&(o.currentNode=t.from),o}function Qi(e){let t=e;for(;t&&!dp(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}function dp(e){const t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function fp(){}function hp(e,t){const[n,r]=e;let o=!1;const s=t.length;for(let i=s,a=0,c=i-1;a<i;c=a++){const[l,u]=t[a],[d,f]=t[c],[,h]=t[c===0?i-1:c-1]||[0,0],p=(u-f)*(n-l)-(l-d)*(r-u);if(f<u){if(r>=f&&r<u){if(p===0)return!0;p>0&&(r===f?r>h&&(o=!o):o=!o)}}else if(u<f){if(r>u&&r<=f){if(p===0)return!0;p<0&&(r===f?r<h&&(o=!o):o=!o)}}else if(r===u&&(n>=d&&n<=l||n>=l&&n<=d))return!0}return o}function ce(e,t){return B(e,t)}var Dn=new Map,ea=new Set;function ta(){if(typeof window>"u")return;const e=n=>{if(!n.target)return;let r=Dn.get(n.target);r||(r=new Set,Dn.set(n.target,r),n.target.addEventListener("transitioncancel",t)),r.add(n.propertyName)},t=n=>{if(!n.target)return;const r=Dn.get(n.target);if(r&&(r.delete(n.propertyName),r.size===0&&(n.target.removeEventListener("transitioncancel",t),Dn.delete(n.target)),Dn.size===0)){for(const o of ea)o();ea.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?ta():document.addEventListener("DOMContentLoaded",ta));function rs(e,t){const n=na(e,t,"left"),r=na(e,t,"top"),o=t.offsetWidth,s=t.offsetHeight;let i=e.scrollLeft,a=e.scrollTop;const c=i+e.offsetWidth,l=a+e.offsetHeight;n<=i?i=n:n+o>c&&(i+=n+o-c),r<=a?a=r:r+s>l&&(a+=r+s-l),e.scrollLeft=i,e.scrollTop=a}function na(e,t,n){const r=n==="left"?"offsetLeft":"offsetTop";let o=0;for(;t.offsetParent&&(o+=t[r],t.offsetParent!==e);){if(t.offsetParent.contains(e)){o-=e[r];break}t=t.offsetParent}return o}function pp(e,t){if(document.contains(e)){const n=document.scrollingElement||document.documentElement;if(window.getComputedStyle(n).overflow==="hidden"){let o=Qi(e);for(;e&&o&&e!==n&&o!==n;)rs(o,e),e=o,o=Qi(e)}else{const{left:o,top:s}=e.getBoundingClientRect();e?.scrollIntoView?.({block:"nearest"});const{left:i,top:a}=e.getBoundingClientRect();(Math.abs(o-i)>1||Math.abs(s-a)>1)&&e.scrollIntoView?.({block:"nearest"})}}}var gp={border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:"0",position:"absolute",width:"1px","white-space":"nowrap"};function zs(e,t){const[n,r]=j(ra(t?.()));return V(()=>{r(e()?.tagName.toLowerCase()||ra(t?.()))}),n}function ra(e){return fn(e)?e:void 0}function Pe(e){const[t,n]=q(e,["as"]);if(!t.as)throw new Error("[kobalte]: Polymorphic is missing the required `as` prop.");return S(De,B(n,{get component(){return t.as}}))}var mp=Object.defineProperty,ao=(e,t)=>{for(var n in t)mp(e,n,{get:t[n],enumerable:!0})},yp={};ao(yp,{Button:()=>xp,Root:()=>Tn});var vp=["button","color","file","image","reset","submit"];function bp(e){const t=e.tagName.toLowerCase();return t==="button"?!0:t==="input"&&e.type?vp.indexOf(e.type)!==-1:!1}function Tn(e){let t;const n=ce({type:"button"},e),[r,o]=q(n,["ref","type","disabled"]),s=zs(()=>t,()=>"button"),i=H(()=>{const l=s();return l==null?!1:bp({tagName:l,type:r.type})}),a=H(()=>s()==="input"),c=H(()=>s()==="a"&&t?.getAttribute("href")!=null);return S(Pe,B({as:"button",ref(l){var u=Ie(d=>t=d,r.ref);typeof u=="function"&&u(l)},get type(){return i()||a()?r.type:void 0},get role(){return!i()&&!c()?"button":void 0},get tabIndex(){return!i()&&!c()&&!r.disabled?0:void 0},get disabled(){return i()||a()?r.disabled:void 0},get"aria-disabled"(){return!i()&&!a()&&r.disabled?!0:void 0},get"data-disabled"(){return r.disabled?"":void 0}},o))}var xp=Tn;function Uc(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Uc(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function zc(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Uc(e))&&(r&&(r+=" "),r+=t);return r}const oa=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,sa=zc,Sp=(e,t)=>n=>{var r;if(t?.variants==null)return sa(e,n?.class,n?.className);const{variants:o,defaultVariants:s}=t,i=Object.keys(o).map(l=>{const u=n?.[l],d=s?.[l];if(u===null)return null;const f=oa(u)||oa(d);return o[l][f]}),a=n&&Object.entries(n).reduce((l,u)=>{let[d,f]=u;return f===void 0||(l[d]=f),l},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((l,u)=>{let{class:d,className:f,...h}=u;return Object.entries(h).every(p=>{let[m,g]=p;return Array.isArray(g)?g.includes({...s,...a}[m]):{...s,...a}[m]===g})?[...l,d,f]:l},[]);return sa(e,i,c,n?.class,n?.className)},js="-",Cp=e=>{const t=wp(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const a=i.split(js);return a[0]===""&&a.length!==1&&a.shift(),jc(a,t)||_p(i)},getConflictingClassGroupIds:(i,a)=>{const c=n[i]||[];return a&&r[i]?[...c,...r[i]]:c}}},jc=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?jc(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const s=e.join(js);return t.validators.find(({validator:i})=>i(s))?.classGroupId},ia=/^\[(.+)\]$/,_p=e=>{if(ia.test(e)){const t=ia.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},wp=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const o in n)os(n[o],r,o,t);return r},os=(e,t,n,r)=>{e.forEach(o=>{if(typeof o=="string"){const s=o===""?t:aa(t,o);s.classGroupId=n;return}if(typeof o=="function"){if(Pp(o)){os(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,i])=>{os(i,aa(t,s),n,r)})})},aa=(e,t)=>{let n=e;return t.split(js).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Pp=e=>e.isThemeGetter,kp=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(s,i)=>{n.set(s,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=r.get(s))!==void 0)return o(s,i),i},set(s,i){n.has(s)?n.set(s,i):o(s,i)}}},ss="!",is=":",Rp=is.length,Tp=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=o=>{const s=[];let i=0,a=0,c=0,l;for(let p=0;p<o.length;p++){let m=o[p];if(i===0&&a===0){if(m===is){s.push(o.slice(c,p)),c=p+Rp;continue}if(m==="/"){l=p;continue}}m==="["?i++:m==="]"?i--:m==="("?a++:m===")"&&a--}const u=s.length===0?o:o.substring(c),d=Ip(u),f=d!==u,h=l&&l>c?l-c:void 0;return{modifiers:s,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:h}};if(t){const o=t+is,s=r;r=i=>i.startsWith(o)?s(i.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(n){const o=r;r=s=>n({className:s,parseClassName:o})}return r},Ip=e=>e.endsWith(ss)?e.substring(0,e.length-1):e.startsWith(ss)?e.substring(1):e,Ep=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let s=[];return r.forEach(i=>{i[0]==="["||t[i]?(o.push(...s.sort(),i),s=[]):s.push(i)}),o.push(...s.sort()),o}},Mp=e=>({cache:kp(e.cacheSize),parseClassName:Tp(e),sortModifiers:Ep(e),...Cp(e)}),Lp=/\s+/,Op=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:s}=t,i=[],a=e.trim().split(Lp);let c="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{isExternal:d,modifiers:f,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(u);if(d){c=u+(c.length>0?" "+c:c);continue}let g=!!m,y=r(g?p.substring(0,m):p);if(!y){if(!g){c=u+(c.length>0?" "+c:c);continue}if(y=r(p),!y){c=u+(c.length>0?" "+c:c);continue}g=!1}const v=s(f).join(":"),b=h?v+ss:v,C=b+y;if(i.includes(C))continue;i.push(C);const w=o(y,g);for(let k=0;k<w.length;++k){const R=w[k];i.push(b+R)}c=u+(c.length>0?" "+c:c)}return c};function Ap(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Vc(t))&&(r&&(r+=" "),r+=n);return r}const Vc=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Vc(e[r]))&&(n&&(n+=" "),n+=t);return n};function Dp(e,...t){let n,r,o,s=i;function i(c){const l=t.reduce((u,d)=>d(u),e());return n=Mp(l),r=n.cache.get,o=n.cache.set,s=a,a(c)}function a(c){const l=r(c);if(l)return l;const u=Op(c,n);return o(c,u),u}return function(){return s(Ap.apply(null,arguments))}}const be=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Wc=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Gc=/^\((?:(\w[\w-]*):)?(.+)\)$/i,$p=/^\d+\/\d+$/,Fp=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Np=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Bp=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Kp=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Up=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ln=e=>$p.test(e),ee=e=>!!e&&!Number.isNaN(Number(e)),Pt=e=>!!e&&Number.isInteger(Number(e)),Mo=e=>e.endsWith("%")&&ee(e.slice(0,-1)),yt=e=>Fp.test(e),zp=()=>!0,jp=e=>Np.test(e)&&!Bp.test(e),Hc=()=>!1,Vp=e=>Kp.test(e),Wp=e=>Up.test(e),Gp=e=>!K(e)&&!U(e),Hp=e=>In(e,Jc,Hc),K=e=>Wc.test(e),jt=e=>In(e,Xc,jp),Lo=e=>In(e,Zp,ee),ca=e=>In(e,qc,Hc),qp=e=>In(e,Yc,Wp),br=e=>In(e,Zc,Vp),U=e=>Gc.test(e),$n=e=>En(e,Xc),Yp=e=>En(e,Qp),la=e=>En(e,qc),Jp=e=>En(e,Jc),Xp=e=>En(e,Yc),xr=e=>En(e,Zc,!0),In=(e,t,n)=>{const r=Wc.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},En=(e,t,n=!1)=>{const r=Gc.exec(e);return r?r[1]?t(r[1]):n:!1},qc=e=>e==="position"||e==="percentage",Yc=e=>e==="image"||e==="url",Jc=e=>e==="length"||e==="size"||e==="bg-size",Xc=e=>e==="length",Zp=e=>e==="number",Qp=e=>e==="family-name",Zc=e=>e==="shadow",eg=()=>{const e=be("color"),t=be("font"),n=be("text"),r=be("font-weight"),o=be("tracking"),s=be("leading"),i=be("breakpoint"),a=be("container"),c=be("spacing"),l=be("radius"),u=be("shadow"),d=be("inset-shadow"),f=be("text-shadow"),h=be("drop-shadow"),p=be("blur"),m=be("perspective"),g=be("aspect"),y=be("ease"),v=be("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],w=()=>[...C(),U,K],k=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],x=()=>[U,K,c],P=()=>[ln,"full","auto",...x()],F=()=>[Pt,"none","subgrid",U,K],O=()=>["auto",{span:["full",Pt,U,K]},Pt,U,K],L=()=>[Pt,"auto",U,K],W=()=>["auto","min","max","fr",U,K],$=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Q=()=>["start","end","center","stretch","center-safe","end-safe"],ne=()=>["auto",...x()],A=()=>[ln,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],I=()=>[e,U,K],ie=()=>[...C(),la,ca,{position:[U,K]}],We=()=>["no-repeat",{repeat:["","x","y","space","round"]}],at=()=>["auto","cover","contain",Jp,Hp,{size:[U,K]}],Qe=()=>[Mo,$n,jt],ye=()=>["","none","full",l,U,K],_e=()=>["",ee,$n,jt],T=()=>["solid","dashed","dotted","double"],G=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],N=()=>[ee,Mo,la,ca],E=()=>["","none",p,U,K],ue=()=>["none",ee,U,K],ve=()=>["none",ee,U,K],ae=()=>[ee,U,K],Ge=()=>[ln,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[yt],breakpoint:[yt],color:[zp],container:[yt],"drop-shadow":[yt],ease:["in","out","in-out"],font:[Gp],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[yt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[yt],shadow:[yt],spacing:["px",ee],text:[yt],"text-shadow":[yt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ln,K,U,g]}],container:["container"],columns:[{columns:[ee,K,U,a]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:w()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[Pt,"auto",U,K]}],basis:[{basis:[ln,"full","auto",a,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ee,ln,"auto","initial","none",K]}],grow:[{grow:["",ee,U,K]}],shrink:[{shrink:["",ee,U,K]}],order:[{order:[Pt,"first","last","none",U,K]}],"grid-cols":[{"grid-cols":F()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":F()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:[...$(),"normal"]}],"justify-items":[{"justify-items":[...Q(),"normal"]}],"justify-self":[{"justify-self":["auto",...Q()]}],"align-content":[{content:["normal",...$()]}],"align-items":[{items:[...Q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Q(),{baseline:["","last"]}]}],"place-content":[{"place-content":$()}],"place-items":[{"place-items":[...Q(),"baseline"]}],"place-self":[{"place-self":["auto",...Q()]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:ne()}],mx:[{mx:ne()}],my:[{my:ne()}],ms:[{ms:ne()}],me:[{me:ne()}],mt:[{mt:ne()}],mr:[{mr:ne()}],mb:[{mb:ne()}],ml:[{ml:ne()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:A()}],w:[{w:[a,"screen",...A()]}],"min-w":[{"min-w":[a,"screen","none",...A()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[i]},...A()]}],h:[{h:["screen","lh",...A()]}],"min-h":[{"min-h":["screen","lh","none",...A()]}],"max-h":[{"max-h":["screen","lh",...A()]}],"font-size":[{text:["base",n,$n,jt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,U,Lo]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Mo,K]}],"font-family":[{font:[Yp,K,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,U,K]}],"line-clamp":[{"line-clamp":[ee,"none",U,Lo]}],leading:[{leading:[s,...x()]}],"list-image":[{"list-image":["none",U,K]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",U,K]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...T(),"wavy"]}],"text-decoration-thickness":[{decoration:[ee,"from-font","auto",U,jt]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[ee,"auto",U,K]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",U,K]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",U,K]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:We()}],"bg-size":[{bg:at()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Pt,U,K],radial:["",U,K],conic:[Pt,U,K]},Xp,qp]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:Qe()}],"gradient-via-pos":[{via:Qe()}],"gradient-to-pos":[{to:Qe()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:ye()}],"rounded-s":[{"rounded-s":ye()}],"rounded-e":[{"rounded-e":ye()}],"rounded-t":[{"rounded-t":ye()}],"rounded-r":[{"rounded-r":ye()}],"rounded-b":[{"rounded-b":ye()}],"rounded-l":[{"rounded-l":ye()}],"rounded-ss":[{"rounded-ss":ye()}],"rounded-se":[{"rounded-se":ye()}],"rounded-ee":[{"rounded-ee":ye()}],"rounded-es":[{"rounded-es":ye()}],"rounded-tl":[{"rounded-tl":ye()}],"rounded-tr":[{"rounded-tr":ye()}],"rounded-br":[{"rounded-br":ye()}],"rounded-bl":[{"rounded-bl":ye()}],"border-w":[{border:_e()}],"border-w-x":[{"border-x":_e()}],"border-w-y":[{"border-y":_e()}],"border-w-s":[{"border-s":_e()}],"border-w-e":[{"border-e":_e()}],"border-w-t":[{"border-t":_e()}],"border-w-r":[{"border-r":_e()}],"border-w-b":[{"border-b":_e()}],"border-w-l":[{"border-l":_e()}],"divide-x":[{"divide-x":_e()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":_e()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...T(),"hidden","none"]}],"divide-style":[{divide:[...T(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...T(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ee,U,K]}],"outline-w":[{outline:["",ee,$n,jt]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",u,xr,br]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",d,xr,br]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:_e()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[ee,jt]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":_e()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",f,xr,br]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[ee,U,K]}],"mix-blend":[{"mix-blend":[...G(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":G()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ee]}],"mask-image-linear-from-pos":[{"mask-linear-from":N()}],"mask-image-linear-to-pos":[{"mask-linear-to":N()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":N()}],"mask-image-t-to-pos":[{"mask-t-to":N()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":N()}],"mask-image-r-to-pos":[{"mask-r-to":N()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":N()}],"mask-image-b-to-pos":[{"mask-b-to":N()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":N()}],"mask-image-l-to-pos":[{"mask-l-to":N()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":N()}],"mask-image-x-to-pos":[{"mask-x-to":N()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":N()}],"mask-image-y-to-pos":[{"mask-y-to":N()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[U,K]}],"mask-image-radial-from-pos":[{"mask-radial-from":N()}],"mask-image-radial-to-pos":[{"mask-radial-to":N()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[ee]}],"mask-image-conic-from-pos":[{"mask-conic-from":N()}],"mask-image-conic-to-pos":[{"mask-conic-to":N()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:We()}],"mask-size":[{mask:at()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",U,K]}],filter:[{filter:["","none",U,K]}],blur:[{blur:E()}],brightness:[{brightness:[ee,U,K]}],contrast:[{contrast:[ee,U,K]}],"drop-shadow":[{"drop-shadow":["","none",h,xr,br]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",ee,U,K]}],"hue-rotate":[{"hue-rotate":[ee,U,K]}],invert:[{invert:["",ee,U,K]}],saturate:[{saturate:[ee,U,K]}],sepia:[{sepia:["",ee,U,K]}],"backdrop-filter":[{"backdrop-filter":["","none",U,K]}],"backdrop-blur":[{"backdrop-blur":E()}],"backdrop-brightness":[{"backdrop-brightness":[ee,U,K]}],"backdrop-contrast":[{"backdrop-contrast":[ee,U,K]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ee,U,K]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ee,U,K]}],"backdrop-invert":[{"backdrop-invert":["",ee,U,K]}],"backdrop-opacity":[{"backdrop-opacity":[ee,U,K]}],"backdrop-saturate":[{"backdrop-saturate":[ee,U,K]}],"backdrop-sepia":[{"backdrop-sepia":["",ee,U,K]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",U,K]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ee,"initial",U,K]}],ease:[{ease:["linear","initial",y,U,K]}],delay:[{delay:[ee,U,K]}],animate:[{animate:["none",v,U,K]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,U,K]}],"perspective-origin":[{"perspective-origin":w()}],rotate:[{rotate:ue()}],"rotate-x":[{"rotate-x":ue()}],"rotate-y":[{"rotate-y":ue()}],"rotate-z":[{"rotate-z":ue()}],scale:[{scale:ve()}],"scale-x":[{"scale-x":ve()}],"scale-y":[{"scale-y":ve()}],"scale-z":[{"scale-z":ve()}],"scale-3d":["scale-3d"],skew:[{skew:ae()}],"skew-x":[{"skew-x":ae()}],"skew-y":[{"skew-y":ae()}],transform:[{transform:[U,K,"","none","gpu","cpu"]}],"transform-origin":[{origin:w()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ge()}],"translate-x":[{"translate-x":Ge()}],"translate-y":[{"translate-y":Ge()}],"translate-z":[{"translate-z":Ge()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",U,K]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",U,K]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[ee,$n,jt,Lo]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},tg=Dp(eg);function Ne(...e){return tg(zc(e))}const ng=Sp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-semibold ring-offset-background transition-[transform,box-shadow,background-color,border-color,color] duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:translate-y-px [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-[0_1px_0_rgba(0,0,0,0.05),0_18px_50px_-40px_rgba(0,0,0,0.6)] hover:-translate-y-0.5 hover:bg-primary/92 hover:shadow-[0_1px_0_rgba(0,0,0,0.05),0_22px_60px_-42px_rgba(0,0,0,0.62)]",destructive:"bg-destructive text-destructive-foreground shadow-[0_1px_0_rgba(0,0,0,0.05),0_18px_50px_-40px_rgba(0,0,0,0.6)] hover:-translate-y-0.5 hover:bg-destructive/92",outline:"border border-border bg-card/70 text-foreground shadow-[0_1px_0_rgba(0,0,0,0.04),0_16px_40px_-38px_rgba(0,0,0,0.55)] hover:-translate-y-0.5 hover:bg-accent/25 hover:text-foreground",secondary:"bg-secondary text-secondary-foreground shadow-[0_1px_0_rgba(0,0,0,0.05),0_18px_50px_-40px_rgba(0,0,0,0.6)] hover:-translate-y-0.5 hover:bg-secondary/88",ghost:"bg-transparent hover:bg-accent/20 hover:text-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4",sm:"h-9 px-3 text-xs",lg:"h-11 px-8 text-base",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}}),Yt=e=>{const[t,n]=q(e,["variant","size","class"]);return S(Tn,B({get class(){return Ne(ng({variant:t.variant,size:t.size}),t.class)}},n))};var co=te("<div>"),rg=te("<h3>"),og=te("<p>");const Qc=e=>{const[t,n]=q(e,["class"]);return(()=>{var r=co();return pt(r,B({get class(){return Ne("rounded-2xl border bg-card/75 text-card-foreground backdrop-blur-sm shadow-[0_1px_0_rgba(0,0,0,0.05),0_18px_50px_-42px_rgba(0,0,0,0.55)]",t.class)}},n),!1,!1),r})()},el=e=>{const[t,n]=q(e,["class"]);return(()=>{var r=co();return pt(r,B({get class(){return Ne("flex flex-col space-y-1.5 p-6",t.class)}},n),!1,!1),r})()},tl=e=>{const[t,n]=q(e,["class"]);return(()=>{var r=rg();return pt(r,B({get class(){return Ne("text-lg font-semibold leading-none tracking-tight",t.class)}},n),!1,!1),r})()},f0=e=>{const[t,n]=q(e,["class"]);return(()=>{var r=og();return pt(r,B({get class(){return Ne("text-sm text-muted-foreground",t.class)}},n),!1,!1),r})()},nl=e=>{const[t,n]=q(e,["class"]);return(()=>{var r=co();return pt(r,B({get class(){return Ne("p-6 pt-0",t.class)}},n),!1,!1),r})()},h0=e=>{const[t,n]=q(e,["class"]);return(()=>{var r=co();return pt(r,B({get class(){return Ne("flex items-center p-6 pt-0",t.class)}},n),!1,!1),r})()};var sg=te("<span aria-hidden=true>"),ig=te('<div class="rounded-2xl border border-border bg-card/40 p-4 text-sm">'),ag=te('<div class="flex flex-wrap items-center gap-2">'),cg=te('<div class="py-10 sm:py-14"><div class="mx-auto max-w-2xl">');function rl(e){const t=Fe(),n=ot({strict:!1,select:r=>r.id===Ae});return console.error("DefaultCatchBoundary Error:",e.error),(()=>{var r=cg(),o=r.firstChild;return se(o,S(Qc,{class:"animate-paper-rise",get children(){return[S(el,{get children(){return S(tl,{class:"flex items-center gap-2",get children(){return[sg(),"Something went wrong"]}})}}),S(nl,{class:"space-y-4",get children(){return[(()=>{var s=ig();return se(s,S(cr,{get error(){return e.error}})),s})(),(()=>{var s=ag();return se(s,S(Yt,{onClick:()=>{t.invalidate()},class:"ink-glow",children:"Try Again"}),null),se(s,(()=>{var i=he(()=>!!n());return()=>i()?S(_n,{to:"/",get children(){return S(Yt,{variant:"outline",children:"Home"})}}):S(Yt,{variant:"outline",onClick:()=>{window.history.back()},children:"Go Back"})})(),null),s})()]}})]}})),r})()}var lg=te("<span aria-hidden=true>"),ug=te('<div class="text-sm text-muted-foreground">'),dg=te('<div class="flex flex-wrap items-center gap-2">'),fg=te('<div class="py-10 sm:py-14"><div class="mx-auto max-w-lg">'),hg=te("<p>The page you are looking for does not exist.");function ol(e){return(()=>{var t=fg(),n=t.firstChild;return se(n,S(Qc,{class:"animate-paper-rise",get children(){return[S(el,{get children(){return S(tl,{class:"flex items-center gap-2",get children(){return[lg(),"Not Found"]}})}}),S(nl,{class:"space-y-4",get children(){return[(()=>{var r=ug();return se(r,()=>e.children||hg()),r})(),(()=>{var r=dg();return se(r,S(Yt,{variant:"outline",onClick:()=>window.history.back(),children:"Go back"}),null),se(r,S(_n,{to:"/",get children(){return S(Yt,{class:"ink-glow",children:"Start Over"})}}),null),r})()]}})]}})),t})()}function lo(e){const[t,n]=j(e.defaultValue?.()),r=H(()=>e.value?.()!==void 0),o=H(()=>r()?e.value?.():t());return[o,i=>{pe(()=>{const a=yh(i,o());return Object.is(a,o())||(r()||n(a),e.onChange?.(a)),a})}]}function sl(e){const[t,n]=lo(e);return[()=>t()??!1,n]}function pg(e){const[t,n]=lo(e);return[()=>t()??[],n]}function gg(e={}){const[t,n]=sl({value:()=>M(e.isSelected),defaultValue:()=>!!M(e.defaultIsSelected),onChange:s=>e.onSelectedChange?.(s)});return{isSelected:t,setIsSelected:s=>{!M(e.isReadOnly)&&!M(e.isDisabled)&&n(s)},toggle:()=>{!M(e.isReadOnly)&&!M(e.isDisabled)&&n(!t())}}}function il(e){let t=e.startIndex??0;const n=e.startLevel??0,r=[],o=c=>{if(c==null)return"";const l=e.getKey??"key",u=fn(l)?c[l]:l(c);return u!=null?String(u):""},s=c=>{if(c==null)return"";const l=e.getTextValue??"textValue",u=fn(l)?c[l]:l(c);return u!=null?String(u):""},i=c=>{if(c==null)return!1;const l=e.getDisabled??"disabled";return(fn(l)?c[l]:l(c))??!1},a=c=>{if(c!=null)return fn(e.getSectionChildren)?c[e.getSectionChildren]:e.getSectionChildren?.(c)};for(const c of e.dataSource){if(fn(c)||qh(c)){r.push({type:"item",rawValue:c,key:String(c),textValue:String(c),disabled:i(c),level:n,index:t}),t++;continue}if(a(c)!=null){r.push({type:"section",rawValue:c,key:"",textValue:"",disabled:!1,level:n,index:t}),t++;const l=a(c)??[];if(l.length>0){const u=il({dataSource:l,getKey:e.getKey,getTextValue:e.getTextValue,getDisabled:e.getDisabled,getSectionChildren:e.getSectionChildren,startIndex:t,startLevel:n+1});r.push(...u),t+=u.length}}else r.push({type:"item",rawValue:c,key:o(c),textValue:s(c),disabled:i(c),level:n,index:t}),t++}return r}function mg(e,t=[]){return H(()=>{const n=il({dataSource:M(e.dataSource),getKey:M(e.getKey),getTextValue:M(e.getTextValue),getDisabled:M(e.getDisabled),getSectionChildren:M(e.getSectionChildren)});for(let r=0;r<t.length;r++)t[r]();return e.factory(n)})}var yg=new Set(["Avst","Arab","Armi","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),vg=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function bg(e){if(Intl.Locale){const n=new Intl.Locale(e).maximize().script??"";return yg.has(n)}const t=e.split("-")[0];return vg.has(t)}function xg(e){return bg(e)?"rtl":"ltr"}function al(){let e=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:xg(e)}}var as=al(),Wn=new Set;function ua(){as=al();for(const e of Wn)e(as)}function Sg(){const[e,t]=j(as),n=H(()=>e());return kn(()=>{Wn.size===0&&window.addEventListener("languagechange",ua),Wn.add(t),J(()=>{Wn.delete(t),Wn.size===0&&window.removeEventListener("languagechange",ua)})}),{locale:()=>n().locale,direction:()=>n().direction}}var Cg=me();function Ut(){const e=Sg();return de(Cg)||e}var Oo=new Map;function _g(e){const{locale:t}=Ut(),n=H(()=>t()+(e?Object.entries(e).sort((r,o)=>r[0]<o[0]?-1:1).join():""));return H(()=>{const r=n();let o;return Oo.has(r)&&(o=Oo.get(r)),o||(o=new Intl.Collator(t(),e),Oo.set(r,o)),o})}var bt=class cl extends Set{anchorKey;currentKey;constructor(t,n,r){super(t),t instanceof cl?(this.anchorKey=n||t.anchorKey,this.currentKey=r||t.currentKey):(this.anchorKey=n,this.currentKey=r)}};function wg(e){const[t,n]=lo(e);return[()=>t()??new bt,n]}function ll(e){return ep()?e.altKey:e.ctrlKey}function hn(e){return io()?e.metaKey:e.ctrlKey}function da(e){return new bt(e)}function Pg(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function kg(e){const t=ce({selectionMode:"none",selectionBehavior:"toggle"},e),[n,r]=j(!1),[o,s]=j(),i=H(()=>{const m=M(t.selectedKeys);return m!=null?da(m):m}),a=H(()=>{const m=M(t.defaultSelectedKeys);return m!=null?da(m):new bt}),[c,l]=wg({value:i,defaultValue:a,onChange:m=>t.onSelectionChange?.(m)}),[u,d]=j(M(t.selectionBehavior)),f=()=>M(t.selectionMode),h=()=>M(t.disallowEmptySelection)??!1,p=m=>{(M(t.allowDuplicateSelectionEvents)||!Pg(m,c()))&&l(m)};return V(()=>{const m=c();M(t.selectionBehavior)==="replace"&&u()==="toggle"&&typeof m=="object"&&m.size===0&&d("replace")}),V(()=>{d(M(t.selectionBehavior)??"toggle")}),{selectionMode:f,disallowEmptySelection:h,selectionBehavior:u,setSelectionBehavior:d,isFocused:n,setFocused:r,focusedKey:o,setFocusedKey:s,selectedKeys:c,setSelectedKeys:p}}function Rg(e){const[t,n]=j(""),[r,o]=j(-1);return{typeSelectHandlers:{onKeyDown:i=>{if(M(e.isDisabled))return;const a=M(e.keyboardDelegate),c=M(e.selectionManager);if(!a.getKeyForSearch)return;const l=Tg(i.key);if(!l||i.ctrlKey||i.metaKey)return;l===" "&&t().trim().length>0&&(i.preventDefault(),i.stopPropagation());let u=n(f=>f+l),d=a.getKeyForSearch(u,c.focusedKey())??a.getKeyForSearch(u);d==null&&Ig(u)&&(u=u[0],d=a.getKeyForSearch(u,c.focusedKey())??a.getKeyForSearch(u)),d!=null&&(c.setFocusedKey(d),e.onTypeSelect?.(d)),clearTimeout(r()),o(window.setTimeout(()=>n(""),500))}}}}function Tg(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function Ig(e){return e.split("").every(t=>t===e[0])}function Eg(e,t,n){const o=B({selectOnFocus:()=>M(e.selectionManager).selectionBehavior()==="replace"},e),s=()=>t(),{direction:i}=Ut();let a={top:0,left:0};Wh(()=>M(o.isVirtualized)?void 0:s(),"scroll",()=>{const g=s();g&&(a={top:g.scrollTop,left:g.scrollLeft})});const{typeSelectHandlers:c}=Rg({isDisabled:()=>M(o.disallowTypeAhead),keyboardDelegate:()=>M(o.keyboardDelegate),selectionManager:()=>M(o.selectionManager)}),l=()=>M(o.orientation)??"vertical",u=g=>{fe(g,c.onKeyDown),g.altKey&&g.key==="Tab"&&g.preventDefault();const y=t();if(!y?.contains(g.target))return;const v=M(o.selectionManager),b=M(o.selectOnFocus),C=x=>{x!=null&&(v.setFocusedKey(x),g.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(x):b&&!ll(g)&&v.replaceSelection(x))},w=M(o.keyboardDelegate),k=M(o.shouldFocusWrap),R=v.focusedKey();switch(g.key){case(l()==="vertical"?"ArrowDown":"ArrowRight"):{if(w.getKeyBelow){g.preventDefault();let x;R!=null?x=w.getKeyBelow(R):x=w.getFirstKey?.(),x==null&&k&&(x=w.getFirstKey?.(R)),C(x)}break}case(l()==="vertical"?"ArrowUp":"ArrowLeft"):{if(w.getKeyAbove){g.preventDefault();let x;R!=null?x=w.getKeyAbove(R):x=w.getLastKey?.(),x==null&&k&&(x=w.getLastKey?.(R)),C(x)}break}case(l()==="vertical"?"ArrowLeft":"ArrowUp"):{if(w.getKeyLeftOf){g.preventDefault();const x=i()==="rtl";let P;R!=null?P=w.getKeyLeftOf(R):P=x?w.getFirstKey?.():w.getLastKey?.(),C(P)}break}case(l()==="vertical"?"ArrowRight":"ArrowDown"):{if(w.getKeyRightOf){g.preventDefault();const x=i()==="rtl";let P;R!=null?P=w.getKeyRightOf(R):P=x?w.getLastKey?.():w.getFirstKey?.(),C(P)}break}case"Home":if(w.getFirstKey){g.preventDefault();const x=w.getFirstKey(R,hn(g));x!=null&&(v.setFocusedKey(x),hn(g)&&g.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(x):b&&v.replaceSelection(x))}break;case"End":if(w.getLastKey){g.preventDefault();const x=w.getLastKey(R,hn(g));x!=null&&(v.setFocusedKey(x),hn(g)&&g.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(x):b&&v.replaceSelection(x))}break;case"PageDown":if(w.getKeyPageBelow&&R!=null){g.preventDefault();const x=w.getKeyPageBelow(R);C(x)}break;case"PageUp":if(w.getKeyPageAbove&&R!=null){g.preventDefault();const x=w.getKeyPageAbove(R);C(x)}break;case"a":hn(g)&&v.selectionMode()==="multiple"&&M(o.disallowSelectAll)!==!0&&(g.preventDefault(),v.selectAll());break;case"Escape":g.defaultPrevented||(g.preventDefault(),M(o.disallowEmptySelection)||v.clearSelection());break;case"Tab":if(!M(o.allowsTabNavigation)){if(g.shiftKey)y.focus();else{const x=up(y,{tabbable:!0});let P,F;do F=x.lastChild(),F&&(P=F);while(F);P&&!P.contains(document.activeElement)&&Se(P)}break}}},d=g=>{const y=M(o.selectionManager),v=M(o.keyboardDelegate),b=M(o.selectOnFocus);if(y.isFocused()){g.currentTarget.contains(g.target)||y.setFocused(!1);return}if(g.currentTarget.contains(g.target)){if(y.setFocused(!0),y.focusedKey()==null){const C=k=>{k!=null&&(y.setFocusedKey(k),b&&y.replaceSelection(k))},w=g.relatedTarget;w&&g.currentTarget.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_FOLLOWING?C(y.lastSelectedKey()??v.getLastKey?.()):C(y.firstSelectedKey()??v.getFirstKey?.())}else if(!M(o.isVirtualized)){const C=s();if(C){C.scrollTop=a.top,C.scrollLeft=a.left;const w=C.querySelector(`[data-key="${y.focusedKey()}"]`);w&&(Se(w),rs(C,w))}}}},f=g=>{const y=M(o.selectionManager);g.currentTarget.contains(g.relatedTarget)||y.setFocused(!1)},h=g=>{s()===g.target&&g.preventDefault()},p=()=>{const g=M(o.autoFocus);if(!g)return;const y=M(o.selectionManager),v=M(o.keyboardDelegate);let b;g==="first"&&(b=v.getFirstKey?.()),g==="last"&&(b=v.getLastKey?.());const C=y.selectedKeys();C.size&&(b=C.values().next().value),y.setFocused(!0),y.setFocusedKey(b);const w=t();w&&b==null&&!M(o.shouldUseVirtualFocus)&&Se(w)};return kn(()=>{o.deferAutoFocus?setTimeout(p,0):p()}),V(ct([s,()=>M(o.isVirtualized),()=>M(o.selectionManager).focusedKey()],g=>{const[y,v,b]=g;if(v)b&&o.scrollToKey?.(b);else if(b&&y){const C=y.querySelector(`[data-key="${b}"]`);C&&rs(y,C)}})),{tabIndex:H(()=>{if(!M(o.shouldUseVirtualFocus))return M(o.selectionManager).focusedKey()==null?0:-1}),onKeyDown:u,onMouseDown:h,onFocusIn:d,onFocusOut:f}}function ul(e,t){const n=()=>M(e.selectionManager),r=()=>M(e.key),o=()=>M(e.shouldUseVirtualFocus),s=v=>{n().selectionMode()!=="none"&&(n().selectionMode()==="single"?n().isSelected(r())&&!n().disallowEmptySelection()?n().toggleSelection(r()):n().replaceSelection(r()):v?.shiftKey?n().extendSelection(r()):n().selectionBehavior()==="toggle"||hn(v)||"pointerType"in v&&v.pointerType==="touch"?n().toggleSelection(r()):n().replaceSelection(r()))},i=()=>n().isSelected(r()),a=()=>M(e.disabled)||n().isDisabled(r()),c=()=>!a()&&n().canSelectItem(r());let l=null;const u=v=>{c()&&(l=v.pointerType,v.pointerType==="mouse"&&v.button===0&&!M(e.shouldSelectOnPressUp)&&s(v))},d=v=>{c()&&v.pointerType==="mouse"&&v.button===0&&M(e.shouldSelectOnPressUp)&&M(e.allowsDifferentPressOrigin)&&s(v)},f=v=>{c()&&(M(e.shouldSelectOnPressUp)&&!M(e.allowsDifferentPressOrigin)||l!=="mouse")&&s(v)},h=v=>{!c()||!["Enter"," "].includes(v.key)||(ll(v)?n().toggleSelection(r()):s(v))},p=v=>{a()&&v.preventDefault()},m=v=>{const b=t();o()||a()||!b||v.target===b&&n().setFocusedKey(r())},g=H(()=>{if(!(o()||a()))return r()===n().focusedKey()?0:-1}),y=H(()=>M(e.virtualized)?void 0:r());return V(ct([t,r,o,()=>n().focusedKey(),()=>n().isFocused()],([v,b,C,w,k])=>{v&&b===w&&k&&!C&&document.activeElement!==v&&(e.focus?e.focus():Se(v))})),{isSelected:i,isDisabled:a,allowsSelection:c,tabIndex:g,dataKey:y,onPointerDown:u,onPointerUp:d,onClick:f,onKeyDown:h,onMouseDown:p,onFocus:m}}var Mg=class{collection;state;constructor(e,t){this.collection=e,this.state=t}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}isFocused(){return this.state.isFocused()}setFocused(e){this.state.setFocused(e)}focusedKey(){return this.state.focusedKey()}setFocusedKey(e){(e==null||this.collection().getItem(e))&&this.state.setFocusedKey(e)}selectedKeys(){return this.state.selectedKeys()}isSelected(e){if(this.state.selectionMode()==="none")return!1;const t=this.getKey(e);return t==null?!1:this.state.selectedKeys().has(t)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return!1;const e=this.state.selectedKeys();return this.getAllSelectableKeys().every(t=>e.has(t))}firstSelectedKey(){let e;for(const t of this.state.selectedKeys()){const n=this.collection().getItem(t),r=n?.index!=null&&e?.index!=null&&n.index<e.index;(!e||r)&&(e=n)}return e?.key}lastSelectedKey(){let e;for(const t of this.state.selectedKeys()){const n=this.collection().getItem(t),r=n?.index!=null&&e?.index!=null&&n.index>e.index;(!e||r)&&(e=n)}return e?.key}extendSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const n=this.state.selectedKeys(),r=n.anchorKey||t,o=new bt(n,r,t);for(const s of this.getKeyRange(r,n.currentKey||t))o.delete(s);for(const s of this.getKeyRange(t,r))this.canSelectItem(s)&&o.add(s);this.state.setSelectedKeys(o)}getKeyRange(e,t){const n=this.collection().getItem(e),r=this.collection().getItem(t);return n&&r?n.index!=null&&r.index!=null&&n.index<=r.index?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){const n=[];let r=e;for(;r!=null;){const o=this.collection().getItem(r);if(o&&o.type==="item"&&n.push(r),r===t)return n;r=this.collection().getKeyAfter(r)}return[]}getKey(e){const t=this.collection().getItem(e);return t?!t||t.type!=="item"?null:t.key:e}toggleSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const n=new bt(this.state.selectedKeys());n.has(t)?n.delete(t):this.canSelectItem(t)&&(n.add(t),n.anchorKey=t,n.currentKey=t),!(this.disallowEmptySelection()&&n.size===0)&&this.state.setSelectedKeys(n)}replaceSelection(e){if(this.selectionMode()==="none")return;const t=this.getKey(e);if(t==null)return;const n=this.canSelectItem(t)?new bt([t],t,t):new bt;this.state.setSelectedKeys(n)}setSelectedKeys(e){if(this.selectionMode()==="none")return;const t=new bt;for(const n of e){const r=this.getKey(n);if(r!=null&&(t.add(r),this.selectionMode()==="single"))break}this.state.setSelectedKeys(t)}selectAll(){this.selectionMode()==="multiple"&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()))}clearSelection(){const e=this.state.selectedKeys();!this.disallowEmptySelection()&&e.size>0&&this.state.setSelectedKeys(new bt)}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode()!=="none"&&(this.selectionMode()==="single"?this.isSelected(e)&&!this.disallowEmptySelection()?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior()==="toggle"||t&&t.pointerType==="touch"?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys())return!0;const t=this.selectedKeys();if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;for(const n of t)if(!e.has(n))return!1;return!0}canSelectItem(e){if(this.state.selectionMode()==="none")return!1;const t=this.collection().getItem(e);return t!=null&&!t.disabled}isDisabled(e){const t=this.collection().getItem(e);return!t||t.disabled}getAllSelectableKeys(){const e=[];return(n=>{for(;n!=null;){if(this.canSelectItem(n)){const r=this.collection().getItem(n);if(!r)continue;r.type==="item"&&e.push(n)}n=this.collection().getKeyAfter(n)}})(this.collection().getFirstKey()),e}},fa=class{keyMap=new Map;iterable;firstKey;lastKey;constructor(e){this.iterable=e;for(const r of e)this.keyMap.set(r.key,r);if(this.keyMap.size===0)return;let t,n=0;for(const[r,o]of this.keyMap)t?(t.nextKey=r,o.prevKey=t.key):(this.firstKey=r,o.prevKey=void 0),o.type==="item"&&(o.index=n++),t=o,t.nextKey=void 0;this.lastKey=t.key}*[Symbol.iterator](){yield*this.iterable}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){return this.keyMap.get(e)?.prevKey}getKeyAfter(e){return this.keyMap.get(e)?.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}};function Lg(e){const t=kg(e),r=mg({dataSource:()=>M(e.dataSource),getKey:()=>M(e.getKey),getTextValue:()=>M(e.getTextValue),getDisabled:()=>M(e.getDisabled),getSectionChildren:()=>M(e.getSectionChildren),factory:s=>e.filter?new fa(e.filter(s)):new fa(s)},[()=>e.filter]),o=new Mg(r,t);return Or(()=>{const s=t.focusedKey();s!=null&&!r().getItem(s)&&t.setFocusedKey(void 0)}),{collection:r,selectionManager:()=>o}}var dl=me();function fl(){return de(dl)}function Og(){const e=fl();if(e===void 0)throw new Error("[kobalte]: `useDomCollectionContext` must be used within a `DomCollectionProvider` component");return e}function hl(e,t){return!!(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}function Ag(e,t){const n=t.ref();if(!n)return-1;let r=e.length;if(!r)return-1;for(;r--;){const o=e[r]?.ref();if(o&&hl(o,n))return r+1}return 0}function Dg(e){const t=e.map((r,o)=>[o,r]);let n=!1;return t.sort(([r,o],[s,i])=>{const a=o.ref(),c=i.ref();return a===c||!a||!c?0:hl(a,c)?(r>s&&(n=!0),-1):(r<s&&(n=!0),1)}),n?t.map(([r,o])=>o):e}function pl(e,t){const n=Dg(e);e!==n&&t(n)}function $g(e){const t=e[0],n=e[e.length-1]?.ref();let r=t?.ref()?.parentElement;for(;r;){if(n&&r.contains(n))return r;r=r.parentElement}return ut(r).body}function Fg(e,t){V(()=>{const n=setTimeout(()=>{pl(e(),t)});J(()=>clearTimeout(n))})}function Ng(e,t){if(typeof IntersectionObserver!="function"){Fg(e,t);return}let n=[];V(()=>{const r=()=>{const i=!!n.length;n=e(),i&&pl(e(),t)},o=$g(e()),s=new IntersectionObserver(r,{root:o});for(const i of e()){const a=i.ref();a&&s.observe(a)}J(()=>s.disconnect())})}function Bg(e={}){const[t,n]=pg({value:()=>M(e.items),onChange:s=>e.onItemsChange?.(s)});Ng(t,n);const r=s=>(n(i=>{const a=Ag(i,s);return Hh(i,s,a)}),()=>{n(i=>{const a=i.filter(c=>c.ref()!==s.ref());return i.length===a.length?i:a})});return{DomCollectionProvider:s=>S(dl.Provider,{value:{registerItem:r},get children(){return s.children}})}}function Kg(e){const t=Og(),n=ce({shouldRegisterItem:!0},e);V(()=>{if(!n.shouldRegisterItem)return;const r=t.registerItem(n.getItem());J(r)})}const Ug=["top","right","bottom","left"],Ft=Math.min,Ke=Math.max,Gr=Math.round,Sr=Math.floor,lt=e=>({x:e,y:e}),zg={left:"right",right:"left",bottom:"top",top:"bottom"},jg={start:"end",end:"start"};function cs(e,t,n){return Ke(e,Ft(t,n))}function nn(e,t){return typeof e=="function"?e(t):e}function Nt(e){return e.split("-")[0]}function Mn(e){return e.split("-")[1]}function gl(e){return e==="x"?"y":"x"}function Vs(e){return e==="y"?"height":"width"}const Vg=new Set(["top","bottom"]);function St(e){return Vg.has(Nt(e))?"y":"x"}function Ws(e){return gl(St(e))}function Wg(e,t,n){n===void 0&&(n=!1);const r=Mn(e),o=Ws(e),s=Vs(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=Hr(i)),[i,Hr(i)]}function Gg(e){const t=Hr(e);return[ls(e),t,ls(t)]}function ls(e){return e.replace(/start|end/g,t=>jg[t])}const ha=["left","right"],pa=["right","left"],Hg=["top","bottom"],qg=["bottom","top"];function Yg(e,t,n){switch(e){case"top":case"bottom":return n?t?pa:ha:t?ha:pa;case"left":case"right":return t?Hg:qg;default:return[]}}function Jg(e,t,n,r){const o=Mn(e);let s=Yg(Nt(e),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),t&&(s=s.concat(s.map(ls)))),s}function Hr(e){return e.replace(/left|right|bottom|top/g,t=>zg[t])}function Xg(e){return{top:0,right:0,bottom:0,left:0,...e}}function ml(e){return typeof e!="number"?Xg(e):{top:e,right:e,bottom:e,left:e}}function qr(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function ga(e,t,n){let{reference:r,floating:o}=e;const s=St(t),i=Ws(t),a=Vs(i),c=Nt(t),l=s==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[a]/2-o[a]/2;let h;switch(c){case"top":h={x:u,y:r.y-o.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-o.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Mn(t)){case"start":h[i]-=f*(n&&l?-1:1);break;case"end":h[i]+=f*(n&&l?-1:1);break}return h}const Zg=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=ga(l,r,c),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:C,reset:w}=await y({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:h,rects:l,platform:i,elements:{reference:e,floating:t}});u=v??u,d=b??d,h={...h,[g]:{...h[g],...C}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(l=w.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):w.rects),{x:u,y:d}=ga(l,f,c)),m=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:h}};async function er(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=nn(t,e),p=ml(h),g=a[f?d==="floating"?"reference":"floating":d],y=qr(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),v=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),C=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},w=qr(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:c}):v);return{top:(y.top-w.top+p.top)/C.y,bottom:(w.bottom-y.bottom+p.bottom)/C.y,left:(y.left-w.left+p.left)/C.x,right:(w.right-y.right+p.right)/C.x}}const Qg=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:c}=t,{element:l,padding:u=0}=nn(e,t)||{};if(l==null)return{};const d=ml(u),f={x:n,y:r},h=Ws(o),p=Vs(h),m=await i.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",C=s.reference[p]+s.reference[h]-f[h]-s.floating[p],w=f[h]-s.reference[h],k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l));let R=k?k[b]:0;(!R||!await(i.isElement==null?void 0:i.isElement(k)))&&(R=a.floating[b]||s.floating[p]);const x=C/2-w/2,P=R/2-m[p]/2-1,F=Ft(d[y],P),O=Ft(d[v],P),L=F,W=R-m[p]-O,$=R/2-m[p]/2+x,Q=cs(L,$,W),ne=!c.arrow&&Mn(o)!=null&&$!==Q&&s.reference[p]/2-($<L?F:O)-m[p]/2<0,A=ne?$<L?$-L:$-W:0;return{[h]:f[h]+A,data:{[h]:Q,centerOffset:$-Q-A,...ne&&{alignmentOffset:A}},reset:ne}}}),em=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=nn(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Nt(o),v=St(a),b=Nt(a)===a,C=await(c.isRTL==null?void 0:c.isRTL(l.floating)),w=f||(b||!m?[Hr(a)]:Gg(a)),k=p!=="none";!f&&k&&w.push(...Jg(a,m,p,C));const R=[a,...w],x=await er(t,g),P=[];let F=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&P.push(x[y]),d){const $=Wg(o,i,C);P.push(x[$[0]],x[$[1]])}if(F=[...F,{placement:o,overflows:P}],!P.every($=>$<=0)){var O,L;const $=(((O=s.flip)==null?void 0:O.index)||0)+1,Q=R[$];if(Q&&(!(d==="alignment"?v!==St(Q):!1)||F.every(I=>St(I.placement)===v?I.overflows[0]>0:!0)))return{data:{index:$,overflows:F},reset:{placement:Q}};let ne=(L=F.filter(A=>A.overflows[0]<=0).sort((A,I)=>A.overflows[1]-I.overflows[1])[0])==null?void 0:L.placement;if(!ne)switch(h){case"bestFit":{var W;const A=(W=F.filter(I=>{if(k){const ie=St(I.placement);return ie===v||ie==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(ie=>ie>0).reduce((ie,We)=>ie+We,0)]).sort((I,ie)=>I[1]-ie[1])[0])==null?void 0:W[0];A&&(ne=A);break}case"initialPlacement":ne=a;break}if(o!==ne)return{reset:{placement:ne}}}return{}}}};function ma(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ya(e){return Ug.some(t=>e[t]>=0)}const tm=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=nn(e,t);switch(r){case"referenceHidden":{const s=await er(t,{...o,elementContext:"reference"}),i=ma(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:ya(i)}}}case"escaped":{const s=await er(t,{...o,altBoundary:!0}),i=ma(s,n.floating);return{data:{escapedOffsets:i,escaped:ya(i)}}}default:return{}}}}},nm=new Set(["left","top"]);async function rm(e,t){const{placement:n,platform:r,elements:o}=e,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Nt(n),a=Mn(n),c=St(n)==="y",l=nm.has(i)?-1:1,u=s&&c?-1:1,d=nn(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),c?{x:h*u,y:f*l}:{x:f*l,y:h*u}}const om=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=t,c=await rm(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+c.x,y:s+c.y,data:{...c,placement:i}}}}},sm=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...c}=nn(e,t),l={x:n,y:r},u=await er(t,c),d=St(Nt(o)),f=gl(d);let h=l[f],p=l[d];if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=h+u[g],b=h-u[y];h=cs(v,h,b)}if(i){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=p+u[g],b=p-u[y];p=cs(v,p,b)}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:s,[d]:i}}}}}},im=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:s,platform:i,elements:a}=t,{apply:c=()=>{},...l}=nn(e,t),u=await er(t,l),d=Nt(o),f=Mn(o),h=St(o)==="y",{width:p,height:m}=s.floating;let g,y;d==="top"||d==="bottom"?(g=d,y=f===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g=f==="end"?"top":"bottom");const v=m-u.top-u.bottom,b=p-u.left-u.right,C=Ft(m-u[g],v),w=Ft(p-u[y],b),k=!t.middlewareData.shift;let R=C,x=w;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(x=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(R=v),k&&!f){const F=Ke(u.left,0),O=Ke(u.right,0),L=Ke(u.top,0),W=Ke(u.bottom,0);h?x=p-2*(F!==0||O!==0?F+O:Ke(u.left,u.right)):R=m-2*(L!==0||W!==0?L+W:Ke(u.top,u.bottom))}await c({...t,availableWidth:x,availableHeight:R});const P=await i.getDimensions(a.floating);return p!==P.width||m!==P.height?{reset:{rects:!0}}:{}}}};function uo(){return typeof window<"u"}function Ln(e){return yl(e)?(e.nodeName||"").toLowerCase():"#document"}function Ve(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gt(e){var t;return(t=(yl(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function yl(e){return uo()?e instanceof Node||e instanceof Ve(e).Node:!1}function st(e){return uo()?e instanceof Element||e instanceof Ve(e).Element:!1}function dt(e){return uo()?e instanceof HTMLElement||e instanceof Ve(e).HTMLElement:!1}function va(e){return!uo()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ve(e).ShadowRoot}const am=new Set(["inline","contents"]);function lr(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=it(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!am.has(o)}const cm=new Set(["table","td","th"]);function lm(e){return cm.has(Ln(e))}const um=[":popover-open",":modal"];function fo(e){return um.some(t=>{try{return e.matches(t)}catch{return!1}})}const dm=["transform","translate","scale","rotate","perspective"],fm=["transform","translate","scale","rotate","perspective","filter"],hm=["paint","layout","strict","content"];function Gs(e){const t=Hs(),n=st(e)?it(e):e;return dm.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||fm.some(r=>(n.willChange||"").includes(r))||hm.some(r=>(n.contain||"").includes(r))}function pm(e){let t=Bt(e);for(;dt(t)&&!Pn(t);){if(Gs(t))return t;if(fo(t))return null;t=Bt(t)}return null}function Hs(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const gm=new Set(["html","body","#document"]);function Pn(e){return gm.has(Ln(e))}function it(e){return Ve(e).getComputedStyle(e)}function ho(e){return st(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Bt(e){if(Ln(e)==="html")return e;const t=e.assignedSlot||e.parentNode||va(e)&&e.host||gt(e);return va(t)?t.host:t}function vl(e){const t=Bt(e);return Pn(t)?e.ownerDocument?e.ownerDocument.body:e.body:dt(t)&&lr(t)?t:vl(t)}function tr(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=vl(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),i=Ve(o);if(s){const a=us(i);return t.concat(i,i.visualViewport||[],lr(o)?o:[],a&&n?tr(a):[])}return t.concat(o,tr(o,[],n))}function us(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function bl(e){const t=it(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=dt(e),s=o?e.offsetWidth:n,i=o?e.offsetHeight:r,a=Gr(n)!==s||Gr(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function qs(e){return st(e)?e:e.contextElement}function yn(e){const t=qs(e);if(!dt(t))return lt(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:s}=bl(t);let i=(s?Gr(n.width):n.width)/r,a=(s?Gr(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const mm=lt(0);function xl(e){const t=Ve(e);return!Hs()||!t.visualViewport?mm:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ym(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ve(e)?!1:t}function en(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=qs(e);let i=lt(1);t&&(r?st(r)&&(i=yn(r)):i=yn(e));const a=ym(s,n,r)?xl(s):lt(0);let c=(o.left+a.x)/i.x,l=(o.top+a.y)/i.y,u=o.width/i.x,d=o.height/i.y;if(s){const f=Ve(s),h=r&&st(r)?Ve(r):r;let p=f,m=us(p);for(;m&&r&&h!==p;){const g=yn(m),y=m.getBoundingClientRect(),v=it(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,C=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;c*=g.x,l*=g.y,u*=g.x,d*=g.y,c+=b,l+=C,p=Ve(m),m=us(p)}}return qr({width:u,height:d,x:c,y:l})}function Ys(e,t){const n=ho(e).scrollLeft;return t?t.left+n:en(gt(e)).left+n}function Sl(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),o=r.left+t.scrollLeft-(n?0:Ys(e,r)),s=r.top+t.scrollTop;return{x:o,y:s}}function vm(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const s=o==="fixed",i=gt(r),a=t?fo(t.floating):!1;if(r===i||a&&s)return n;let c={scrollLeft:0,scrollTop:0},l=lt(1);const u=lt(0),d=dt(r);if((d||!d&&!s)&&((Ln(r)!=="body"||lr(i))&&(c=ho(r)),dt(r))){const h=en(r);l=yn(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=i&&!d&&!s?Sl(i,c,!0):lt(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+f.x,y:n.y*l.y-c.scrollTop*l.y+u.y+f.y}}function bm(e){return Array.from(e.getClientRects())}function xm(e){const t=gt(e),n=ho(e),r=e.ownerDocument.body,o=Ke(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Ke(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Ys(e);const a=-n.scrollTop;return it(r).direction==="rtl"&&(i+=Ke(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}function Sm(e,t){const n=Ve(e),r=gt(e),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,c=0;if(o){s=o.width,i=o.height;const l=Hs();(!l||l&&t==="fixed")&&(a=o.offsetLeft,c=o.offsetTop)}return{width:s,height:i,x:a,y:c}}const Cm=new Set(["absolute","fixed"]);function _m(e,t){const n=en(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=dt(e)?yn(e):lt(1),i=e.clientWidth*s.x,a=e.clientHeight*s.y,c=o*s.x,l=r*s.y;return{width:i,height:a,x:c,y:l}}function ba(e,t,n){let r;if(t==="viewport")r=Sm(e,n);else if(t==="document")r=xm(gt(e));else if(st(t))r=_m(t,n);else{const o=xl(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return qr(r)}function Cl(e,t){const n=Bt(e);return n===t||!st(n)||Pn(n)?!1:it(n).position==="fixed"||Cl(n,t)}function wm(e,t){const n=t.get(e);if(n)return n;let r=tr(e,[],!1).filter(a=>st(a)&&Ln(a)!=="body"),o=null;const s=it(e).position==="fixed";let i=s?Bt(e):e;for(;st(i)&&!Pn(i);){const a=it(i),c=Gs(i);!c&&a.position==="fixed"&&(o=null),(s?!c&&!o:!c&&a.position==="static"&&!!o&&Cm.has(o.position)||lr(i)&&!c&&Cl(e,i))?r=r.filter(u=>u!==i):o=a,i=Bt(i)}return t.set(e,r),r}function Pm(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?fo(t)?[]:wm(t,this._c):[].concat(n),r],a=i[0],c=i.reduce((l,u)=>{const d=ba(t,u,o);return l.top=Ke(d.top,l.top),l.right=Ft(d.right,l.right),l.bottom=Ft(d.bottom,l.bottom),l.left=Ke(d.left,l.left),l},ba(t,a,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function km(e){const{width:t,height:n}=bl(e);return{width:t,height:n}}function Rm(e,t,n){const r=dt(t),o=gt(t),s=n==="fixed",i=en(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const c=lt(0);function l(){c.x=Ys(o)}if(r||!r&&!s)if((Ln(t)!=="body"||lr(o))&&(a=ho(t)),r){const h=en(t,!0,s,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else o&&l();s&&!r&&o&&l();const u=o&&!r&&!s?Sl(o,a):lt(0),d=i.left+a.scrollLeft-c.x-u.x,f=i.top+a.scrollTop-c.y-u.y;return{x:d,y:f,width:i.width,height:i.height}}function Ao(e){return it(e).position==="static"}function xa(e,t){if(!dt(e)||it(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return gt(e)===n&&(n=n.ownerDocument.body),n}function _l(e,t){const n=Ve(e);if(fo(e))return n;if(!dt(e)){let o=Bt(e);for(;o&&!Pn(o);){if(st(o)&&!Ao(o))return o;o=Bt(o)}return n}let r=xa(e,t);for(;r&&lm(r)&&Ao(r);)r=xa(r,t);return r&&Pn(r)&&Ao(r)&&!Gs(r)?n:r||pm(e)||n}const Tm=async function(e){const t=this.getOffsetParent||_l,n=this.getDimensions,r=await n(e.floating);return{reference:Rm(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Im(e){return it(e).direction==="rtl"}const wl={convertOffsetParentRelativeRectToViewportRelativeRect:vm,getDocumentElement:gt,getClippingRect:Pm,getOffsetParent:_l,getElementRects:Tm,getClientRects:bm,getDimensions:km,getScale:yn,isElement:st,isRTL:Im};function Pl(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Em(e,t){let n=null,r;const o=gt(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const l=e.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=l;if(a||t(),!f||!h)return;const p=Sr(d),m=Sr(o.clientWidth-(u+f)),g=Sr(o.clientHeight-(d+h)),y=Sr(u),b={rootMargin:-p+"px "+-m+"px "+-g+"px "+-y+"px",threshold:Ke(0,Ft(1,c))||1};let C=!0;function w(k){const R=k[0].intersectionRatio;if(R!==c){if(!C)return i();R?i(!1,R):r=setTimeout(()=>{i(!1,1e-7)},1e3)}R===1&&!Pl(l,e.getBoundingClientRect())&&i(),C=!1}try{n=new IntersectionObserver(w,{...b,root:o.ownerDocument})}catch{n=new IntersectionObserver(w,b)}n.observe(e)}return i(!0),s}function Mm(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=qs(e),u=o||s?[...l?tr(l):[],...tr(t)]:[];u.forEach(y=>{o&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=l&&a?Em(l,n):null;let f=-1,h=null;i&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!c&&h.observe(l),h.observe(t));let p,m=c?en(e):null;c&&g();function g(){const y=en(e);m&&!Pl(m,y)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;u.forEach(v=>{o&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d?.(),(y=h)==null||y.disconnect(),h=null,c&&cancelAnimationFrame(p)}}const Lm=om,Om=sm,Am=em,Dm=im,$m=tm,Fm=Qg,Nm=(e,t,n)=>{const r=new Map,o={platform:wl,...n},s={...o.platform,_c:r};return Zg(e,t,{...o,platform:s})};var Bm=te('<svg display=block viewBox="0 0 30 30"style=transform:scale(1.02)><g><path fill=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z></path><path stroke=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z>'),Js=me();function Xs(){const e=de(Js);if(e===void 0)throw new Error("[kobalte]: `usePopperContext` must be used within a `Popper` component");return e}var ds=30,Sa=ds/2,Km={top:180,right:-90,bottom:0,left:90};function Zs(e){const t=Xs(),n=ce({size:ds},e),[r,o]=q(n,["ref","style","size"]),s=()=>t.currentPlacement().split("-")[0],i=Um(t.contentRef),a=()=>i()?.getPropertyValue("background-color")||"none",c=()=>i()?.getPropertyValue(`border-${s()}-color`)||"none",l=()=>i()?.getPropertyValue(`border-${s()}-width`)||"0px",u=()=>Number.parseInt(l())*2*(ds/r.size),d=()=>`rotate(${Km[s()]} ${Sa} ${Sa}) translate(0 2)`;return S(Pe,B({as:"div",ref(f){var h=Ie(t.setArrowRef,r.ref);typeof h=="function"&&h(f)},"aria-hidden":"true",get style(){return oo({position:"absolute","font-size":`${r.size}px`,width:"1em",height:"1em","pointer-events":"none",fill:a(),stroke:c(),"stroke-width":u()},r.style)}},o,{get children(){var f=Bm(),h=f.firstChild,p=h.firstChild;return p.nextSibling,$e(()=>xn(h,"transform",d())),f}}))}function Um(e){const[t,n]=j();return V(()=>{const r=e();r&&n(Jh(r).getComputedStyle(r))}),t}function zm(e){const t=Xs(),[n,r]=q(e,["ref","style"]);return S(Pe,B({as:"div",ref(o){var s=Ie(t.setPositionerRef,n.ref);typeof s=="function"&&s(o)},"data-popper-positioner":"",get style(){return oo({position:"absolute",top:0,left:0,"min-width":"max-content"},n.style)}},r))}function Ca(e){const{x:t=0,y:n=0,width:r=0,height:o=0}=e??{};if(typeof DOMRect=="function")return new DOMRect(t,n,r,o);const s={x:t,y:n,width:r,height:o,top:n,right:t+r,bottom:n+o,left:t};return{...s,toJSON:()=>s}}function jm(e,t){return{contextElement:e,getBoundingClientRect:()=>{const r=t(e);return r?Ca(r):e?e.getBoundingClientRect():Ca()}}}function Vm(e){return/^(?:top|bottom|left|right)(?:-(?:start|end))?$/.test(e)}var Wm={top:"bottom",right:"left",bottom:"top",left:"right"};function Gm(e,t){const[n,r]=e.split("-"),o=Wm[n];return r?n==="left"||n==="right"?`${o} ${r==="start"?"top":"bottom"}`:r==="start"?`${o} ${t==="rtl"?"right":"left"}`:`${o} ${t==="rtl"?"left":"right"}`:`${o} center`}function Hm(e){const t=ce({getAnchorRect:f=>f?.getBoundingClientRect(),placement:"bottom",gutter:0,shift:0,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,hideWhenDetached:!1,detachedPadding:0,arrowPadding:4,overflowPadding:8},e),[n,r]=j(),[o,s]=j(),[i,a]=j(t.placement),c=()=>jm(t.anchorRef?.(),t.getAnchorRect),{direction:l}=Ut();async function u(){const f=c(),h=n(),p=o();if(!f||!h)return;const m=(p?.clientHeight||0)/2,g=typeof t.gutter=="number"?t.gutter+m:t.gutter??m;h.style.setProperty("--kb-popper-content-overflow-padding",`${t.overflowPadding}px`),f.getBoundingClientRect();const y=[Lm(({placement:k})=>{const R=!!k.split("-")[1];return{mainAxis:g,crossAxis:R?void 0:t.shift,alignmentAxis:t.shift}})];if(t.flip!==!1){const k=typeof t.flip=="string"?t.flip.split(" "):void 0;if(k!==void 0&&!k.every(Vm))throw new Error("`flip` expects a spaced-delimited list of placements");y.push(Am({padding:t.overflowPadding,fallbackPlacements:k}))}(t.slide||t.overlap)&&y.push(Om({mainAxis:t.slide,crossAxis:t.overlap,padding:t.overflowPadding})),y.push(Dm({padding:t.overflowPadding,apply({availableWidth:k,availableHeight:R,rects:x}){const P=Math.round(x.reference.width);k=Math.floor(k),R=Math.floor(R),h.style.setProperty("--kb-popper-anchor-width",`${P}px`),h.style.setProperty("--kb-popper-content-available-width",`${k}px`),h.style.setProperty("--kb-popper-content-available-height",`${R}px`),t.sameWidth&&(h.style.width=`${P}px`),t.fitViewport&&(h.style.maxWidth=`${k}px`,h.style.maxHeight=`${R}px`)}})),t.hideWhenDetached&&y.push($m({padding:t.detachedPadding})),p&&y.push(Fm({element:p,padding:t.arrowPadding}));const v=await Nm(f,h,{placement:t.placement,strategy:"absolute",middleware:y,platform:{...wl,isRTL:()=>l()==="rtl"}});if(a(v.placement),t.onCurrentPlacementChange?.(v.placement),!h)return;h.style.setProperty("--kb-popper-content-transform-origin",Gm(v.placement,l()));const b=Math.round(v.x),C=Math.round(v.y);let w;if(t.hideWhenDetached&&(w=v.middlewareData.hide?.referenceHidden?"hidden":"visible"),Object.assign(h.style,{top:"0",left:"0",transform:`translate3d(${b}px, ${C}px, 0)`,visibility:w}),p&&v.middlewareData.arrow){const{x:k,y:R}=v.middlewareData.arrow,x=v.placement.split("-")[0];Object.assign(p.style,{left:k!=null?`${k}px`:"",top:R!=null?`${R}px`:"",[x]:"100%"})}}V(()=>{const f=c(),h=n();if(!f||!h)return;const p=Mm(f,h,u,{elementResize:typeof ResizeObserver=="function"});J(p)}),V(()=>{const f=n(),h=t.contentRef?.();!f||!h||queueMicrotask(()=>{f.style.zIndex=getComputedStyle(h).zIndex})});const d={currentPlacement:i,contentRef:()=>t.contentRef?.(),setPositionerRef:r,setArrowRef:s};return S(Js.Provider,{value:d,get children(){return t.children}})}var kl=Object.assign(Hm,{Arrow:Zs,Context:Js,usePopperContext:Xs,Positioner:zm}),Yr="data-kb-top-layer",Rl,fs=!1,Ct=[];function nr(e){return Ct.findIndex(t=>t.node===e)}function qm(e){return Ct[nr(e)]}function Ym(e){return Ct[Ct.length-1].node===e}function Tl(){return Ct.filter(e=>e.isPointerBlocking)}function Jm(){return[...Tl()].slice(-1)[0]}function Qs(){return Tl().length>0}function Il(e){const t=nr(Jm()?.node);return nr(e)<t}function Xm(e){Ct.push(e)}function Zm(e){const t=nr(e);t<0||Ct.splice(t,1)}function Qm(){for(const{node:e}of Ct)e.style.pointerEvents=Il(e)?"none":"auto"}function ey(e){if(Qs()&&!fs){const t=ut(e);Rl=document.body.style.pointerEvents,t.body.style.pointerEvents="none",fs=!0}}function ty(e){if(Qs())return;const t=ut(e);t.body.style.pointerEvents=Rl,t.body.style.length===0&&t.body.removeAttribute("style"),fs=!1}var Be={layers:Ct,isTopMostLayer:Ym,hasPointerBlockingLayer:Qs,isBelowPointerBlockingLayer:Il,addLayer:Xm,removeLayer:Zm,indexOf:nr,find:qm,assignPointerEventToLayers:Qm,disableBodyPointerEvents:ey,restoreBodyPointerEvents:ty},_a="interactOutside.pointerDownOutside",wa="interactOutside.focusOutside";function ny(e,t){let n,r=fp;const o=()=>ut(t()),s=d=>e.onPointerDownOutside?.(d),i=d=>e.onFocusOutside?.(d),a=d=>e.onInteractOutside?.(d),c=d=>{const f=d.target;return!(f instanceof Element)||f.closest(`[${Yr}]`)||!Ue(o(),f)||Ue(t(),f)?!1:!e.shouldExcludeElement?.(f)},l=d=>{function f(){const h=t(),p=d.target;if(!h||!p||!c(d))return;const m=Ce([s,a]);p.addEventListener(_a,m,{once:!0});const g=new CustomEvent(_a,{bubbles:!1,cancelable:!0,detail:{originalEvent:d,isContextMenu:d.button===2||tp(d)&&d.button===0}});p.dispatchEvent(g)}d.pointerType==="touch"?(o().removeEventListener("click",f),r=f,o().addEventListener("click",f,{once:!0})):f()},u=d=>{const f=t(),h=d.target;if(!f||!h||!c(d))return;const p=Ce([i,a]);h.addEventListener(wa,p,{once:!0});const m=new CustomEvent(wa,{bubbles:!1,cancelable:!0,detail:{originalEvent:d,isContextMenu:!1}});h.dispatchEvent(m)};V(()=>{M(e.isDisabled)||(n=window.setTimeout(()=>{o().addEventListener("pointerdown",l,!0)},0),o().addEventListener("focusin",u,!0),J(()=>{window.clearTimeout(n),o().removeEventListener("click",r),o().removeEventListener("pointerdown",l,!0),o().removeEventListener("focusin",u,!0)}))})}function ry(e){const t=n=>{n.key===Fc.Escape&&e.onEscapeKeyDown?.(n)};V(()=>{if(M(e.isDisabled))return;const n=e.ownerDocument?.()??ut();n.addEventListener("keydown",t),J(()=>{n.removeEventListener("keydown",t)})})}var El=me();function oy(){return de(El)}function Ml(e){let t;const n=oy(),[r,o]=q(e,["ref","disableOutsidePointerEvents","excludedElements","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","bypassTopMostLayerCheck"]),s=new Set([]),i=d=>{s.add(d);const f=n?.registerNestedLayer(d);return()=>{s.delete(d),f?.()}};ny({shouldExcludeElement:d=>t?r.excludedElements?.some(f=>Ue(f(),d))||[...s].some(f=>Ue(f,d)):!1,onPointerDownOutside:d=>{!t||Be.isBelowPointerBlockingLayer(t)||!r.bypassTopMostLayerCheck&&!Be.isTopMostLayer(t)||(r.onPointerDownOutside?.(d),r.onInteractOutside?.(d),d.defaultPrevented||r.onDismiss?.())},onFocusOutside:d=>{r.onFocusOutside?.(d),r.onInteractOutside?.(d),d.defaultPrevented||r.onDismiss?.()}},()=>t),ry({ownerDocument:()=>ut(t),onEscapeKeyDown:d=>{!t||!Be.isTopMostLayer(t)||(r.onEscapeKeyDown?.(d),!d.defaultPrevented&&r.onDismiss&&(d.preventDefault(),r.onDismiss()))}}),kn(()=>{if(!t)return;Be.addLayer({node:t,isPointerBlocking:r.disableOutsidePointerEvents,dismiss:r.onDismiss});const d=n?.registerNestedLayer(t);Be.assignPointerEventToLayers(),Be.disableBodyPointerEvents(t),J(()=>{t&&(Be.removeLayer(t),d?.(),Be.assignPointerEventToLayers(),Be.restoreBodyPointerEvents(t))})}),V(ct([()=>t,()=>r.disableOutsidePointerEvents],([d,f])=>{if(!d)return;const h=Be.find(d);h&&h.isPointerBlocking!==f&&(h.isPointerBlocking=f,Be.assignPointerEventToLayers()),f&&Be.disableBodyPointerEvents(d),J(()=>{Be.restoreBodyPointerEvents(d)})},{defer:!0}));const u={registerNestedLayer:i};return S(El.Provider,{value:u,get children(){return S(Pe,B({as:"div",ref(d){var f=Ie(h=>t=h,r.ref);typeof f=="function"&&f(d)}},o))}})}function ei(e={}){const[t,n]=sl({value:()=>M(e.open),defaultValue:()=>!!M(e.defaultOpen),onChange:i=>e.onOpenChange?.(i)}),r=()=>{n(!0)},o=()=>{n(!1)};return{isOpen:t,setIsOpen:n,open:r,close:o,toggle:()=>{t()?o():r()}}}function At(e){return t=>(e(t),()=>e(void 0))}var ke=e=>typeof e=="function"?e():e,sy=e=>{const t=H(()=>{const i=ke(e.element);if(i)return getComputedStyle(i)}),n=()=>t()?.animationName??"none",[r,o]=j(ke(e.show)?"present":"hidden");let s="none";return V(i=>{const a=ke(e.show);return pe(()=>{if(i===a)return a;const c=s,l=n();a?o("present"):l==="none"||t()?.display==="none"?o("hidden"):o(i===!0&&c!==l?"hiding":"hidden")}),a}),V(()=>{const i=ke(e.element);if(!i)return;const a=l=>{l.target===i&&(s=n())},c=l=>{const d=n().includes(l.animationName);l.target===i&&d&&r()==="hiding"&&o("hidden")};i.addEventListener("animationstart",a),i.addEventListener("animationcancel",c),i.addEventListener("animationend",c),J(()=>{i.removeEventListener("animationstart",a),i.removeEventListener("animationcancel",c),i.removeEventListener("animationend",c)})}),{present:()=>r()==="present"||r()==="hiding",state:r,setState:o}},iy=sy,hs=iy;const ps=Symbol("store-raw"),vn=Symbol("store-node"),xt=Symbol("store-has"),Ll=Symbol("store-self");function Ol(e){let t=e[rt];if(!t&&(Object.defineProperty(e,rt,{value:t=new Proxy(e,ly)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const i=n[o];r[i].get&&Object.defineProperty(e,i,{enumerable:r[i].enumerable,get:r[i].get.bind(t)})}}return t}function Kt(e){let t;return e!=null&&typeof e=="object"&&(e[rt]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ft(e,t=new Set){let n,r,o,s;if(n=e!=null&&e[ps])return n;if(!Kt(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,a=e.length;i<a;i++)o=e[i],(r=ft(o,t))!==o&&(e[i]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let c=0,l=i.length;c<l;c++)s=i[c],!a[s].get&&(o=e[s],(r=ft(o,t))!==o&&(e[s]=r))}return e}function Jr(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function rr(e,t,n){if(e[t])return e[t];const[r,o]=j(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function ay(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===rt||t===vn||(delete n.value,delete n.writable,n.get=()=>e[rt][t]),n}function Al(e){Go()&&rr(Jr(e,vn),Ll)()}function cy(e){return Al(e),Reflect.ownKeys(e)}const ly={get(e,t,n){if(t===ps)return e;if(t===rt)return n;if(t===Wo)return Al(e),n;const r=Jr(e,vn),o=r[t];let s=o?o():e[t];if(t===vn||t===xt||t==="__proto__")return s;if(!o){const i=Object.getOwnPropertyDescriptor(e,t);Go()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(s=rr(r,t,s)())}return Kt(s)?Ol(s):s},has(e,t){return t===ps||t===rt||t===Wo||t===vn||t===xt||t==="__proto__"?!0:(Go()&&rr(Jr(e,xt),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:cy,getOwnPropertyDescriptor:ay};function qe(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;n===void 0?(delete e[t],e[xt]&&e[xt][t]&&o!==void 0&&e[xt][t].$()):(e[t]=n,e[xt]&&e[xt][t]&&o===void 0&&e[xt][t].$());let i=Jr(e,vn),a;if((a=rr(i,t,o))&&a.$(()=>n),Array.isArray(e)&&e.length!==s){for(let c=e.length;c<s;c++)(a=i[c])&&a.$();(a=rr(i,"length",s))&&a.$(e.length)}(a=i[Ll])&&a.$()}function Dl(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];qe(e,o,t[o])}}function uy(e,t){if(typeof t=="function"&&(t=t(e)),t=ft(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const o=t[n];e[n]!==o&&qe(e,n,o)}qe(e,"length",r)}else Dl(e,t)}function Gn(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const i=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let c=0;c<r.length;c++)Gn(e,[r[c]].concat(t),n);return}else if(a&&i==="function"){for(let c=0;c<e.length;c++)r(e[c],c)&&Gn(e,[c].concat(t),n);return}else if(a&&i==="object"){const{from:c=0,to:l=e.length-1,by:u=1}=r;for(let d=c;d<=l;d+=u)Gn(e,[d].concat(t),n);return}else if(t.length>1){Gn(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(o,n),s===o)||r===void 0&&s==null||(s=ft(s),r===void 0||Kt(o)&&Kt(s)&&!Array.isArray(s)?Dl(o,s):qe(e,r,s))}function dy(...[e,t]){const n=ft(e||{}),r=Array.isArray(n),o=Ol(n);function s(...i){bd(()=>{r&&i.length===1?uy(n,i[0]):Gn(n,i)})}return[o,s]}const gs=Symbol("store-root");function pn(e,t,n,r,o){const s=t[n];if(e===s)return;const i=Array.isArray(e);if(n!==gs&&(!Kt(e)||!Kt(s)||i!==Array.isArray(s)||o&&e[o]!==s[o])){qe(t,n,e);return}if(i){if(e.length&&s.length&&(!r||o&&e[0]&&e[0][o]!=null)){let l,u,d,f,h,p,m,g;for(d=0,f=Math.min(s.length,e.length);d<f&&(s[d]===e[d]||o&&s[d]&&e[d]&&s[d][o]&&s[d][o]===e[d][o]);d++)pn(e[d],s,d,r,o);const y=new Array(e.length),v=new Map;for(f=s.length-1,h=e.length-1;f>=d&&h>=d&&(s[f]===e[h]||o&&s[f]&&e[h]&&s[f][o]&&s[f][o]===e[h][o]);f--,h--)y[h]=s[f];if(d>h||d>f){for(u=d;u<=h;u++)qe(s,u,e[u]);for(;u<e.length;u++)qe(s,u,y[u]),pn(e[u],s,u,r,o);s.length>e.length&&qe(s,"length",e.length);return}for(m=new Array(h+1),u=h;u>=d;u--)p=e[u],g=o&&p?p[o]:p,l=v.get(g),m[u]=l===void 0?-1:l,v.set(g,u);for(l=d;l<=f;l++)p=s[l],g=o&&p?p[o]:p,u=v.get(g),u!==void 0&&u!==-1&&(y[u]=s[l],u=m[u],v.set(g,u));for(u=d;u<e.length;u++)u in y?(qe(s,u,y[u]),pn(e[u],s,u,r,o)):qe(s,u,e[u])}else for(let l=0,u=e.length;l<u;l++)pn(e[l],s,l,r,o);s.length>e.length&&qe(s,"length",e.length);return}const a=Object.keys(e);for(let l=0,u=a.length;l<u;l++)pn(e[a[l]],s,a[l],r,o);const c=Object.keys(s);for(let l=0,u=c.length;l<u;l++)e[c[l]]===void 0&&qe(s,c[l],void 0)}function et(e,t={}){const{merge:n,key:r="id"}=t,o=ft(e);return s=>{if(!Kt(s)||!Kt(o))return o;const i=pn(o,{[gs]:s},gs,n,r);return i===void 0?s:i}}var Do="focusScope.autoFocusOnMount",$o="focusScope.autoFocusOnUnmount",Pa={bubbles:!1,cancelable:!0},ka={stack:[],active(){return this.stack[0]},add(e){e!==this.active()&&this.active()?.pause(),this.stack=ns(this.stack,e),this.stack.unshift(e)},remove(e){this.stack=ns(this.stack,e),this.active()?.resume()}};function $l(e,t){const[n,r]=j(!1),o={pause(){r(!0)},resume(){r(!1)}};let s=null;const i=p=>e.onMountAutoFocus?.(p),a=p=>e.onUnmountAutoFocus?.(p),c=()=>ut(t()),l=()=>{const p=c().createElement("span");return p.setAttribute("data-focus-trap",""),p.tabIndex=0,Object.assign(p.style,gp),p},u=()=>{const p=t();return p?Bc(p,!0).filter(m=>!m.hasAttribute("data-focus-trap")):[]},d=()=>{const p=u();return p.length>0?p[0]:null},f=()=>{const p=u();return p.length>0?p[p.length-1]:null},h=()=>{const p=t();if(!p)return!1;const m=Vn(p);return!m||Ue(p,m)?!1:Kc(m)};V(()=>{const p=t();if(!p)return;ka.add(o);const m=Vn(p);if(!Ue(p,m)){const y=new CustomEvent(Do,Pa);p.addEventListener(Do,i),p.dispatchEvent(y),y.defaultPrevented||setTimeout(()=>{Se(d()),Vn(p)===m&&Se(p)},0)}J(()=>{p.removeEventListener(Do,i),setTimeout(()=>{const y=new CustomEvent($o,Pa);h()&&y.preventDefault(),p.addEventListener($o,a),p.dispatchEvent(y),y.defaultPrevented||Se(m??c().body),p.removeEventListener($o,a),ka.remove(o)},0)})}),V(()=>{const p=t();if(!p||!M(e.trapFocus)||n())return;const m=y=>{const v=y.target;v?.closest(`[${Yr}]`)||(Ue(p,v)?s=v:Se(s))},g=y=>{const b=y.relatedTarget??Vn(p);b?.closest(`[${Yr}]`)||Ue(p,b)||Se(s)};c().addEventListener("focusin",m),c().addEventListener("focusout",g),J(()=>{c().removeEventListener("focusin",m),c().removeEventListener("focusout",g)})}),V(()=>{const p=t();if(!p||!M(e.trapFocus)||n())return;const m=l();p.insertAdjacentElement("afterbegin",m);const g=l();p.insertAdjacentElement("beforeend",g);function y(b){const C=d(),w=f();b.relatedTarget===C?Se(w):Se(C)}m.addEventListener("focusin",y),g.addEventListener("focusin",y);const v=new MutationObserver(b=>{for(const C of b)C.previousSibling===g&&(g.remove(),p.insertAdjacentElement("beforeend",g)),C.nextSibling===m&&(m.remove(),p.insertAdjacentElement("afterbegin",m))});v.observe(p,{childList:!0,subtree:!1}),J(()=>{m.removeEventListener("focusin",y),g.removeEventListener("focusin",y),m.remove(),g.remove(),v.disconnect()})})}var fy="data-live-announcer";function Fl(e){V(()=>{M(e.isDisabled)||J(hy(M(e.targets),M(e.root)))})}var Fn=new WeakMap,He=[];function hy(e,t=document.body){const n=new Set(e),r=new Set,o=c=>{for(const f of c.querySelectorAll(`[${fy}], [${Yr}]`))n.add(f);const l=f=>{if(n.has(f)||f.parentElement&&r.has(f.parentElement)&&f.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(const h of n)if(f.contains(h))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},u=document.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,{acceptNode:l}),d=l(c);if(d===NodeFilter.FILTER_ACCEPT&&s(c),d!==NodeFilter.FILTER_REJECT){let f=u.nextNode();for(;f!=null;)s(f),f=u.nextNode()}},s=c=>{const l=Fn.get(c)??0;c.getAttribute("aria-hidden")==="true"&&l===0||(l===0&&c.setAttribute("aria-hidden","true"),r.add(c),Fn.set(c,l+1))};He.length&&He[He.length-1].disconnect(),o(t);const i=new MutationObserver(c=>{for(const l of c)if(!(l.type!=="childList"||l.addedNodes.length===0)&&![...n,...r].some(u=>u.contains(l.target))){for(const u of l.removedNodes)u instanceof Element&&(n.delete(u),r.delete(u));for(const u of l.addedNodes)(u instanceof HTMLElement||u instanceof SVGElement)&&(u.dataset.liveAnnouncer==="true"||u.dataset.reactAriaTopLayer==="true")?n.add(u):u instanceof Element&&o(u)}});i.observe(t,{childList:!0,subtree:!0});const a={observe(){i.observe(t,{childList:!0,subtree:!0})},disconnect(){i.disconnect()}};return He.push(a),()=>{i.disconnect();for(const c of r){const l=Fn.get(c);if(l==null)return;l===1?(c.removeAttribute("aria-hidden"),Fn.delete(c)):Fn.set(c,l-1)}a===He[He.length-1]?(He.pop(),He.length&&He[He.length-1].observe()):He.splice(He.indexOf(a),1)}}var ms=(e,t)=>{if(e.contains(t))return!0;let n=t;for(;n;){if(n===e)return!0;n=n._$host??n.parentElement}return!1},Cr=new Map,py=e=>{V(()=>{const t=ke(e.style)??{},n=ke(e.properties)??[],r={};for(const s in t)r[s]=e.element.style[s];const o=Cr.get(e.key);o?o.activeCount++:Cr.set(e.key,{activeCount:1,originalStyles:r,properties:n.map(s=>s.key)}),Object.assign(e.element.style,e.style);for(const s of n)e.element.style.setProperty(s.key,s.value);J(()=>{const s=Cr.get(e.key);if(s){if(s.activeCount!==1){s.activeCount--;return}Cr.delete(e.key);for(const[i,a]of Object.entries(s.originalStyles))e.element.style[i]=a;for(const i of s.properties)e.element.style.removeProperty(i);e.element.style.length===0&&e.element.removeAttribute("style"),e.cleanup?.()}})})},Ra=py,gy=(e,t)=>{switch(t){case"x":return[e.clientWidth,e.scrollLeft,e.scrollWidth];case"y":return[e.clientHeight,e.scrollTop,e.scrollHeight]}},my=(e,t)=>{const n=getComputedStyle(e),r=t==="x"?n.overflowX:n.overflowY;return r==="auto"||r==="scroll"||e.tagName==="HTML"&&r==="visible"},yy=(e,t,n)=>{const r=t==="x"&&window.getComputedStyle(e).direction==="rtl"?-1:1;let o=e,s=0,i=0,a=!1;do{const[c,l,u]=gy(o,t),d=u-c-r*l;(l!==0||d!==0)&&my(o,t)&&(s+=d,i+=l),o===(n??document.documentElement)?a=!0:o=o._$host??o.parentElement}while(o&&!a);return[s,i]},[Ta,Ia]=j([]),vy=e=>Ta().indexOf(e)===Ta().length-1,by=e=>{const t=B({element:null,enabled:!0,hideScrollbar:!0,preventScrollbarShift:!0,preventScrollbarShiftMode:"padding",restoreScrollPosition:!0,allowPinchZoom:!1},e),n=_t();let r=[0,0],o=null,s=null;V(()=>{ke(t.enabled)&&(Ia(l=>[...l,n]),J(()=>{Ia(l=>l.filter(u=>u!==n))}))}),V(()=>{if(!ke(t.enabled)||!ke(t.hideScrollbar))return;const{body:l}=document,u=window.innerWidth-l.offsetWidth;if(ke(t.preventScrollbarShift)){const d={overflow:"hidden"},f=[];u>0&&(ke(t.preventScrollbarShiftMode)==="padding"?d.paddingRight=`calc(${window.getComputedStyle(l).paddingRight} + ${u}px)`:d.marginRight=`calc(${window.getComputedStyle(l).marginRight} + ${u}px)`,f.push({key:"--scrollbar-width",value:`${u}px`}));const h=window.scrollY,p=window.scrollX;Ra({key:"prevent-scroll",element:l,style:d,properties:f,cleanup:()=>{ke(t.restoreScrollPosition)&&u>0&&window.scrollTo(p,h)}})}else Ra({key:"prevent-scroll",element:l,style:{overflow:"hidden"}})}),V(()=>{!vy(n)||!ke(t.enabled)||(document.addEventListener("wheel",a,{passive:!1}),document.addEventListener("touchstart",i,{passive:!1}),document.addEventListener("touchmove",c,{passive:!1}),J(()=>{document.removeEventListener("wheel",a),document.removeEventListener("touchstart",i),document.removeEventListener("touchmove",c)}))});const i=l=>{r=Ea(l),o=null,s=null},a=l=>{const u=l.target,d=ke(t.element),f=xy(l),h=Math.abs(f[0])>Math.abs(f[1])?"x":"y",p=h==="x"?f[0]:f[1],m=Ma(u,h,p,d);let g;d&&ms(d,u)?g=!m:g=!0,g&&l.cancelable&&l.preventDefault()},c=l=>{const u=ke(t.element),d=l.target;let f;if(l.touches.length===2)f=!ke(t.allowPinchZoom);else{if(o==null||s===null){const h=Ea(l).map((m,g)=>r[g]-m),p=Math.abs(h[0])>Math.abs(h[1])?"x":"y";o=p,s=p==="x"?h[0]:h[1]}if(d.type==="range")f=!1;else{const h=Ma(d,o,s,u);u&&ms(u,d)?f=!h:f=!0}}f&&l.cancelable&&l.preventDefault()}},xy=e=>[e.deltaX,e.deltaY],Ea=e=>e.changedTouches[0]?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0],Ma=(e,t,n,r)=>{const o=r!==null&&ms(r,e),[s,i]=yy(e,t,o?r:void 0);return!(n>0&&Math.abs(s)<=1||n<0&&Math.abs(i)<1)},Sy=by,Nl=Sy,Cy=class{collection;ref;collator;constructor(e,t,n){this.collection=e,this.ref=t,this.collator=n}getKeyBelow(e){let t=this.collection().getKeyAfter(e);for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyAfter(t)}}getKeyAbove(e){let t=this.collection().getKeyBefore(e);for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyBefore(t)}}getFirstKey(){let e=this.collection().getFirstKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyAfter(e)}}getLastKey(){let e=this.collection().getLastKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyBefore(e)}}getItem(e){return this.ref?.()?.querySelector(`[data-key="${e}"]`)??null}getKeyPageAbove(e){const t=this.ref?.();let n=this.getItem(e);if(!t||!n)return;const r=Math.max(0,n.offsetTop+n.offsetHeight-t.offsetHeight);let o=e;for(;o&&n&&n.offsetTop>r;)o=this.getKeyAbove(o),n=o!=null?this.getItem(o):null;return o}getKeyPageBelow(e){const t=this.ref?.();let n=this.getItem(e);if(!t||!n)return;const r=Math.min(t.scrollHeight,n.offsetTop-n.offsetHeight+t.offsetHeight);let o=e;for(;o&&n&&n.offsetTop<r;)o=this.getKeyBelow(o),n=o!=null?this.getItem(o):null;return o}getKeyForSearch(e,t){const n=this.collator?.();if(!n)return;let r=t!=null?this.getKeyBelow(t):this.getFirstKey();for(;r!=null;){const o=this.collection().getItem(r);if(o){const s=o.textValue.slice(0,e.length);if(o.textValue&&n.compare(s,e)===0)return r}r=this.getKeyBelow(r)}}};function _y(e,t,n){const r=_g({usage:"search",sensitivity:"base"}),o=H(()=>{const s=M(e.keyboardDelegate);return s||new Cy(e.collection,t,r)});return Eg({selectionManager:()=>M(e.selectionManager),keyboardDelegate:o,autoFocus:()=>M(e.autoFocus),deferAutoFocus:()=>M(e.deferAutoFocus),shouldFocusWrap:()=>M(e.shouldFocusWrap),disallowEmptySelection:()=>M(e.disallowEmptySelection),selectOnFocus:()=>M(e.selectOnFocus),disallowTypeAhead:()=>M(e.disallowTypeAhead),shouldUseVirtualFocus:()=>M(e.shouldUseVirtualFocus),allowsTabNavigation:()=>M(e.allowsTabNavigation),isVirtualized:()=>M(e.isVirtualized),scrollToKey:s=>M(e.scrollToKey)?.(s),orientation:()=>M(e.orientation)},t)}var wy=me();function po(){return de(wy)}var Py=me();function Bl(){return de(Py)}var Kl=me();function Ul(){return de(Kl)}function wt(){const e=Ul();if(e===void 0)throw new Error("[kobalte]: `useMenuContext` must be used within a `Menu` component");return e}var zl=me();function ti(){const e=de(zl);if(e===void 0)throw new Error("[kobalte]: `useMenuItemContext` must be used within a `Menu.Item` component");return e}var jl=me();function mt(){const e=de(jl);if(e===void 0)throw new Error("[kobalte]: `useMenuRootContext` must be used within a `MenuRoot` component");return e}function ni(e){let t;const n=mt(),r=wt(),o=ce({id:n.generateId(`item-${_t()}`)},e),[s,i]=q(o,["ref","textValue","disabled","closeOnSelect","checked","indeterminate","onSelect","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[a,c]=j(),[l,u]=j(),[d,f]=j(),h=()=>r.listState().selectionManager(),p=()=>i.id,m=()=>h().focusedKey()===p(),g=()=>{s.onSelect?.(),s.closeOnSelect&&setTimeout(()=>{r.close(!0)})};Kg({getItem:()=>({ref:()=>t,type:"item",key:p(),textValue:s.textValue??d()?.textContent??t?.textContent??"",disabled:s.disabled??!1})});const y=ul({key:p,selectionManager:h,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>t),v=P=>{fe(P,s.onPointerMove),P.pointerType==="mouse"&&(s.disabled?r.onItemLeave(P):(r.onItemEnter(P),P.defaultPrevented||(Se(P.currentTarget),r.listState().selectionManager().setFocused(!0),r.listState().selectionManager().setFocusedKey(p()))))},b=P=>{fe(P,s.onPointerLeave),P.pointerType==="mouse"&&r.onItemLeave(P)},C=P=>{fe(P,s.onPointerUp),!s.disabled&&P.button===0&&g()},w=P=>{if(fe(P,s.onKeyDown),!P.repeat&&!s.disabled)switch(P.key){case"Enter":case" ":g();break}},k=H(()=>{if(s.indeterminate)return"mixed";if(s.checked!=null)return s.checked}),R=H(()=>({"data-indeterminate":s.indeterminate?"":void 0,"data-checked":s.checked&&!s.indeterminate?"":void 0,"data-disabled":s.disabled?"":void 0,"data-highlighted":m()?"":void 0})),x={isChecked:()=>s.checked,dataset:R,setLabelRef:f,generateId:so(()=>i.id),registerLabel:At(c),registerDescription:At(u)};return S(zl.Provider,{value:x,get children(){return S(Pe,B({as:"div",ref(P){var F=Ie(O=>t=O,s.ref);typeof F=="function"&&F(P)},get tabIndex(){return y.tabIndex()},get"aria-checked"(){return k()},get"aria-disabled"(){return s.disabled},get"aria-labelledby"(){return a()},get"aria-describedby"(){return l()},get"data-key"(){return y.dataKey()},get onPointerDown(){return Ce([s.onPointerDown,y.onPointerDown])},get onPointerUp(){return Ce([C,y.onPointerUp])},get onClick(){return Ce([s.onClick,y.onClick])},get onKeyDown(){return Ce([w,y.onKeyDown])},get onMouseDown(){return Ce([s.onMouseDown,y.onMouseDown])},get onFocus(){return Ce([s.onFocus,y.onFocus])},onPointerMove:v,onPointerLeave:b},R,i))}})}function Vl(e){const t=ce({closeOnSelect:!1},e),[n,r]=q(t,["checked","defaultChecked","onChange","onSelect"]),o=gg({isSelected:()=>n.checked,defaultIsSelected:()=>n.defaultChecked,onSelectedChange:i=>n.onChange?.(i),isDisabled:()=>r.disabled});return S(ni,B({role:"menuitemcheckbox",get checked(){return o.isSelected()},onSelect:()=>{n.onSelect?.(),o.toggle()}},r))}var or={next:(e,t)=>e==="ltr"?t==="horizontal"?"ArrowRight":"ArrowDown":t==="horizontal"?"ArrowLeft":"ArrowUp",previous:(e,t)=>or.next(e==="ltr"?"rtl":"ltr",t)},La={first:e=>e==="horizontal"?"ArrowDown":"ArrowRight",last:e=>e==="horizontal"?"ArrowUp":"ArrowLeft"};function ri(e){const t=mt(),n=wt(),r=po(),{direction:o}=Ut(),s=ce({id:t.generateId("trigger")},e),[i,a]=q(s,["ref","id","disabled","onPointerDown","onClick","onKeyDown","onMouseOver","onFocus"]);let c=()=>t.value();r!==void 0&&(c=()=>t.value()??i.id,r.lastValue()===void 0&&r.setLastValue(c));const l=zs(()=>n.triggerRef(),()=>"button"),u=H(()=>l()==="a"&&n.triggerRef()?.getAttribute("href")!=null);V(ct(()=>r?.value(),y=>{u()&&y===c()&&n.triggerRef()?.focus()}));const d=()=>{r!==void 0?n.isOpen()?r.value()===c()&&r.closeMenu():(r.autoFocusMenu()||r.setAutoFocusMenu(!0),n.open(!1)):n.toggle(!0)},f=y=>{fe(y,i.onPointerDown),y.currentTarget.dataset.pointerType=y.pointerType,!i.disabled&&y.pointerType!=="touch"&&y.button===0&&d()},h=y=>{fe(y,i.onClick),i.disabled||y.currentTarget.dataset.pointerType==="touch"&&d()},p=y=>{if(fe(y,i.onKeyDown),!i.disabled){if(u())switch(y.key){case"Enter":case" ":return}switch(y.key){case"Enter":case" ":case La.first(t.orientation()):y.stopPropagation(),y.preventDefault(),pp(y.currentTarget),n.open("first"),r?.setAutoFocusMenu(!0),r?.setValue(c);break;case La.last(t.orientation()):y.stopPropagation(),y.preventDefault(),n.open("last");break;case or.next(o(),t.orientation()):if(r===void 0)break;y.stopPropagation(),y.preventDefault(),r.nextMenu();break;case or.previous(o(),t.orientation()):if(r===void 0)break;y.stopPropagation(),y.preventDefault(),r.previousMenu();break}}},m=y=>{fe(y,i.onMouseOver),n.triggerRef()?.dataset.pointerType!=="touch"&&!i.disabled&&r!==void 0&&r.value()!==void 0&&r.setValue(c)},g=y=>{fe(y,i.onFocus),r!==void 0&&y.currentTarget.dataset.pointerType!=="touch"&&r.setValue(c)};return V(()=>J(n.registerTriggerId(i.id))),S(Tn,B({ref(y){var v=Ie(n.setTriggerRef,i.ref);typeof v=="function"&&v(y)},get"data-kb-menu-value-trigger"(){return t.value()},get id(){return i.id},get disabled(){return i.disabled},"aria-haspopup":"true",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return he(()=>!!n.isOpen())()?n.contentId():void 0},get"data-highlighted"(){return c()!==void 0&&r?.value()===c()?!0:void 0},get tabIndex(){return r!==void 0?r.value()===c()||r.lastValue()===c()?0:-1:void 0},onPointerDown:f,onMouseOver:m,onClick:h,onKeyDown:p,onFocus:g,role:r!==void 0?"menuitem":void 0},()=>n.dataset(),a))}function Wl(e){let t;const n=mt(),r=wt(),o=po(),s=Bl(),{direction:i}=Ut(),a=ce({id:n.generateId(`content-${_t()}`)},e),[c,l]=q(a,["ref","id","style","onOpenAutoFocus","onCloseAutoFocus","onEscapeKeyDown","onFocusOutside","onPointerEnter","onPointerMove","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]);let u=0;const d=()=>r.parentMenuContext()==null&&o===void 0&&n.isModal(),f=_y({selectionManager:r.listState().selectionManager,collection:r.listState().collection,autoFocus:r.autoFocus,deferAutoFocus:!0,shouldFocusWrap:!0,disallowTypeAhead:()=>!r.listState().selectionManager().isFocused(),orientation:()=>n.orientation()==="horizontal"?"vertical":"horizontal"},()=>t);$l({trapFocus:()=>d()&&r.isOpen(),onMountAutoFocus:b=>{o===void 0&&c.onOpenAutoFocus?.(b)},onUnmountAutoFocus:c.onCloseAutoFocus},()=>t);const h=b=>{if(Ue(b.currentTarget,b.target)&&(b.key==="Tab"&&r.isOpen()&&b.preventDefault(),o!==void 0&&b.currentTarget.getAttribute("aria-haspopup")!=="true"))switch(b.key){case or.next(i(),n.orientation()):b.stopPropagation(),b.preventDefault(),r.close(!0),o.setAutoFocusMenu(!0),o.nextMenu();break;case or.previous(i(),n.orientation()):if(b.currentTarget.hasAttribute("data-closed"))break;b.stopPropagation(),b.preventDefault(),r.close(!0),o.setAutoFocusMenu(!0),o.previousMenu();break}},p=b=>{c.onEscapeKeyDown?.(b),o?.setAutoFocusMenu(!1),r.close(!0)},m=b=>{c.onFocusOutside?.(b),n.isModal()&&b.preventDefault()},g=b=>{fe(b,c.onPointerEnter),r.isOpen()&&(r.parentMenuContext()?.listState().selectionManager().setFocused(!1),r.parentMenuContext()?.listState().selectionManager().setFocusedKey(void 0))},y=b=>{if(fe(b,c.onPointerMove),b.pointerType!=="mouse")return;const C=b.target,w=u!==b.clientX;Ue(b.currentTarget,C)&&w&&(r.setPointerDir(b.clientX>u?"right":"left"),u=b.clientX)};V(()=>J(r.registerContentId(c.id))),J(()=>r.setContentRef(void 0));const v={ref:Ie(b=>{r.setContentRef(b),t=b},c.ref),role:"menu",get id(){return c.id},get tabIndex(){return f.tabIndex()},get"aria-labelledby"(){return r.triggerId()},onKeyDown:Ce([c.onKeyDown,f.onKeyDown,h]),onMouseDown:Ce([c.onMouseDown,f.onMouseDown]),onFocusIn:Ce([c.onFocusIn,f.onFocusIn]),onFocusOut:Ce([c.onFocusOut,f.onFocusOut]),onPointerEnter:g,onPointerMove:y,get"data-orientation"(){return n.orientation()}};return S(Me,{get when(){return r.contentPresent()},get children(){return S(Me,{get when(){return s===void 0||r.parentMenuContext()!=null},get fallback(){return S(Pe,B({as:"div"},()=>r.dataset(),v,l))},get children(){return S(kl.Positioner,{get children(){return S(Ml,B({get disableOutsidePointerEvents(){return he(()=>!!d())()&&r.isOpen()},get excludedElements(){return[r.triggerRef]},bypassTopMostLayerCheck:!0,get style(){return oo({"--kb-menu-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},c.style)},onEscapeKeyDown:p,onFocusOutside:m,get onDismiss(){return r.close}},()=>r.dataset(),v,l))}})}})}})}function ky(e){let t;const n=mt(),r=wt(),[o,s]=q(e,["ref"]);return Nl({element:()=>t??null,enabled:()=>r.contentPresent()&&n.preventScroll()}),S(Wl,B({ref(i){var a=Ie(c=>{t=c},o.ref);typeof a=="function"&&a(i)}},s))}var Gl=me();function Ry(){const e=de(Gl);if(e===void 0)throw new Error("[kobalte]: `useMenuGroupContext` must be used within a `Menu.Group` component");return e}function oi(e){const t=mt(),n=ce({id:t.generateId(`group-${_t()}`)},e),[r,o]=j(),s={generateId:so(()=>n.id),registerLabelId:At(o)};return S(Gl.Provider,{value:s,get children(){return S(Pe,B({as:"div",role:"group",get"aria-labelledby"(){return r()}},n))}})}function Hl(e){const t=Ry(),n=ce({id:t.generateId("label")},e),[r,o]=q(n,["id"]);return V(()=>J(t.registerLabelId(r.id))),S(Pe,B({as:"span",get id(){return r.id},"aria-hidden":"true"},o))}function ql(e){const t=wt(),n=ce({children:""},e);return S(Pe,B({as:"span","aria-hidden":"true"},()=>t.dataset(),n))}function si(e){return S(ni,B({role:"menuitem",closeOnSelect:!0},e))}function Yl(e){const t=ti(),n=ce({id:t.generateId("description")},e),[r,o]=q(n,["id"]);return V(()=>J(t.registerDescription(r.id))),S(Pe,B({as:"div",get id(){return r.id}},()=>t.dataset(),o))}function Jl(e){const t=ti(),n=ce({id:t.generateId("indicator")},e),[r,o]=q(n,["forceMount"]);return S(Me,{get when(){return r.forceMount||t.isChecked()},get children(){return S(Pe,B({as:"div"},()=>t.dataset(),o))}})}function Xl(e){const t=ti(),n=ce({id:t.generateId("label")},e),[r,o]=q(n,["ref","id"]);return V(()=>J(t.registerLabel(r.id))),S(Pe,B({as:"div",ref(s){var i=Ie(t.setLabelRef,r.ref);typeof i=="function"&&i(s)},get id(){return r.id}},()=>t.dataset(),o))}function ii(e){const t=wt();return S(Me,{get when(){return t.contentPresent()},get children(){return S(gc,e)}})}var Zl=me();function Ty(){const e=de(Zl);if(e===void 0)throw new Error("[kobalte]: `useMenuRadioGroupContext` must be used within a `Menu.RadioGroup` component");return e}function Ql(e){const n=mt().generateId(`radiogroup-${_t()}`),r=ce({id:n},e),[o,s]=q(r,["value","defaultValue","onChange","disabled"]),[i,a]=lo({value:()=>o.value,defaultValue:()=>o.defaultValue,onChange:l=>o.onChange?.(l)}),c={isDisabled:()=>o.disabled,isSelectedValue:l=>l===i(),setSelectedValue:l=>a(l)};return S(Zl.Provider,{value:c,get children(){return S(oi,s)}})}function eu(e){const t=Ty(),n=ce({closeOnSelect:!1},e),[r,o]=q(n,["value","onSelect"]);return S(ni,B({role:"menuitemradio",get checked(){return t.isSelectedValue(r.value)},onSelect:()=>{r.onSelect?.(),t.setSelectedValue(r.value)}},o))}function Iy(e,t,n){const r=e.split("-")[0],o=n.getBoundingClientRect(),s=[],i=t.clientX,a=t.clientY;switch(r){case"top":s.push([i,a+5]),s.push([o.left,o.bottom]),s.push([o.left,o.top]),s.push([o.right,o.top]),s.push([o.right,o.bottom]);break;case"right":s.push([i-5,a]),s.push([o.left,o.top]),s.push([o.right,o.top]),s.push([o.right,o.bottom]),s.push([o.left,o.bottom]);break;case"bottom":s.push([i,a-5]),s.push([o.right,o.top]),s.push([o.right,o.bottom]),s.push([o.left,o.bottom]),s.push([o.left,o.top]);break;case"left":s.push([i+5,a]),s.push([o.right,o.bottom]),s.push([o.left,o.bottom]),s.push([o.left,o.top]),s.push([o.right,o.top]);break}return s}function Ey(e,t){return t?hp([e.clientX,e.clientY],t):!1}function tu(e){const t=mt(),n=fl(),r=Ul(),o=po(),s=Bl(),i=ce({placement:t.orientation()==="horizontal"?"bottom-start":"right-start"},e),[a,c]=q(i,["open","defaultOpen","onOpenChange"]);let l=0,u=null,d="right";const[f,h]=j(),[p,m]=j(),[g,y]=j(),[v,b]=j(),[C,w]=j(!0),[k,R]=j(c.placement),[x,P]=j([]),[F,O]=j([]),{DomCollectionProvider:L}=Bg({items:F,onItemsChange:O}),W=ei({open:()=>a.open,defaultOpen:()=>a.defaultOpen,onOpenChange:E=>a.onOpenChange?.(E)}),{present:$}=hs({show:()=>t.forceMount()||W.isOpen(),element:()=>v()??null}),Q=Lg({selectionMode:"none",dataSource:F}),ne=E=>{w(E),W.open()},A=(E=!1)=>{W.close(),E&&r&&r.close(!0)},I=E=>{w(E),W.toggle()},ie=()=>{const E=v();E&&(Se(E),Q.selectionManager().setFocused(!0),Q.selectionManager().setFocusedKey(void 0))},We=()=>{s!=null?setTimeout(()=>ie()):ie()},at=E=>{P(ve=>[...ve,E]);const ue=r?.registerNestedMenu(E);return()=>{P(ve=>ns(ve,E)),ue?.()}},Qe=E=>d===u?.side&&Ey(E,u?.area),ye=E=>{Qe(E)&&E.preventDefault()},_e=E=>{Qe(E)||We()},T=E=>{Qe(E)&&E.preventDefault()};Fl({isDisabled:()=>!(r==null&&W.isOpen()&&t.isModal()),targets:()=>[v(),...x()].filter(Boolean)}),V(()=>{const E=v();if(!E||!r)return;const ue=r.registerNestedMenu(E);J(()=>{ue()})}),V(()=>{r===void 0&&o?.registerMenu(t.value(),[v(),...x()])}),V(()=>{r!==void 0||o===void 0||(o.value()===t.value()?(g()?.focus(),o.autoFocusMenu()&&ne(!0)):A())}),V(()=>{r!==void 0||o===void 0||W.isOpen()&&o.setValue(t.value())}),J(()=>{r===void 0&&o?.unregisterMenu(t.value())});const N={dataset:H(()=>({"data-expanded":W.isOpen()?"":void 0,"data-closed":W.isOpen()?void 0:""})),isOpen:W.isOpen,contentPresent:$,nestedMenus:x,currentPlacement:k,pointerGraceTimeoutId:()=>l,autoFocus:C,listState:()=>Q,parentMenuContext:()=>r,triggerRef:g,contentRef:v,triggerId:f,contentId:p,setTriggerRef:y,setContentRef:b,open:ne,close:A,toggle:I,focusContent:We,onItemEnter:ye,onItemLeave:_e,onTriggerLeave:T,setPointerDir:E=>d=E,setPointerGraceTimeoutId:E=>l=E,setPointerGraceIntent:E=>u=E,registerNestedMenu:at,registerItemToParentDomCollection:n?.registerItem,registerTriggerId:At(h),registerContentId:At(m)};return S(L,{get children(){return S(Kl.Provider,{value:N,get children(){return S(Me,{when:s===void 0,get fallback(){return c.children},get children(){return S(kl,B({anchorRef:g,contentRef:v,onCurrentPlacementChange:R},c))}})}})}})}function nu(e){const{direction:t}=Ut();return S(tu,B({get placement(){return t()==="rtl"?"left-start":"right-start"},flip:!0},e))}var My={close:(e,t)=>e==="ltr"?[t==="horizontal"?"ArrowLeft":"ArrowUp"]:[t==="horizontal"?"ArrowRight":"ArrowDown"]};function ru(e){const t=wt(),n=mt(),[r,o]=q(e,["onFocusOutside","onKeyDown"]),{direction:s}=Ut();return S(Wl,B({onOpenAutoFocus:u=>{u.preventDefault()},onCloseAutoFocus:u=>{u.preventDefault()},onFocusOutside:u=>{r.onFocusOutside?.(u);const d=u.target;Ue(t.triggerRef(),d)||t.close()},onKeyDown:u=>{fe(u,r.onKeyDown);const d=Ue(u.currentTarget,u.target),f=My.close(s(),n.orientation()).includes(u.key),h=t.parentMenuContext()!=null;d&&f&&h&&(t.close(),Se(t.triggerRef()))}},o))}var Oa=["Enter"," "],Ly={open:(e,t)=>e==="ltr"?[...Oa,t==="horizontal"?"ArrowRight":"ArrowDown"]:[...Oa,t==="horizontal"?"ArrowLeft":"ArrowUp"]};function ou(e){let t;const n=mt(),r=wt(),o=ce({id:n.generateId(`sub-trigger-${_t()}`)},e),[s,i]=q(o,["ref","id","textValue","disabled","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]);let a=null;const c=()=>{a&&window.clearTimeout(a),a=null},{direction:l}=Ut(),u=()=>s.id,d=()=>{const b=r.parentMenuContext();if(b==null)throw new Error("[kobalte]: `Menu.SubTrigger` must be used within a `Menu.Sub` component");return b.listState().selectionManager()},f=()=>r.listState().collection(),h=()=>d().focusedKey()===u(),p=ul({key:u,selectionManager:d,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>t),m=b=>{fe(b,s.onClick),!r.isOpen()&&!s.disabled&&r.open(!0)},g=b=>{if(fe(b,s.onPointerMove),b.pointerType!=="mouse")return;const C=r.parentMenuContext();if(C?.onItemEnter(b),!b.defaultPrevented){if(s.disabled){C?.onItemLeave(b);return}!r.isOpen()&&!a&&(r.parentMenuContext()?.setPointerGraceIntent(null),a=window.setTimeout(()=>{r.open(!1),c()},100)),C?.onItemEnter(b),b.defaultPrevented||(r.listState().selectionManager().isFocused()&&(r.listState().selectionManager().setFocused(!1),r.listState().selectionManager().setFocusedKey(void 0)),Se(b.currentTarget),C?.listState().selectionManager().setFocused(!0),C?.listState().selectionManager().setFocusedKey(u()))}},y=b=>{if(fe(b,s.onPointerLeave),b.pointerType!=="mouse")return;c();const C=r.parentMenuContext(),w=r.contentRef();if(w){C?.setPointerGraceIntent({area:Iy(r.currentPlacement(),b,w),side:r.currentPlacement().split("-")[0]}),window.clearTimeout(C?.pointerGraceTimeoutId());const k=window.setTimeout(()=>{C?.setPointerGraceIntent(null)},300);C?.setPointerGraceTimeoutId(k)}else{if(C?.onTriggerLeave(b),b.defaultPrevented)return;C?.setPointerGraceIntent(null)}C?.onItemLeave(b)},v=b=>{fe(b,s.onKeyDown),!b.repeat&&(s.disabled||Ly.open(l(),n.orientation()).includes(b.key)&&(b.stopPropagation(),b.preventDefault(),d().setFocused(!1),d().setFocusedKey(void 0),r.isOpen()||r.open("first"),r.focusContent(),r.listState().selectionManager().setFocused(!0),r.listState().selectionManager().setFocusedKey(f().getFirstKey())))};return V(()=>{if(r.registerItemToParentDomCollection==null)throw new Error("[kobalte]: `Menu.SubTrigger` must be used within a `Menu.Sub` component");const b=r.registerItemToParentDomCollection({ref:()=>t,type:"item",key:u(),textValue:s.textValue??t?.textContent??"",disabled:s.disabled??!1});J(b)}),V(ct(()=>r.parentMenuContext()?.pointerGraceTimeoutId(),b=>{J(()=>{window.clearTimeout(b),r.parentMenuContext()?.setPointerGraceIntent(null)})})),V(()=>J(r.registerTriggerId(s.id))),J(()=>{c()}),S(Pe,B({as:"div",ref(b){var C=Ie(w=>{r.setTriggerRef(w),t=w},s.ref);typeof C=="function"&&C(b)},get id(){return s.id},role:"menuitem",get tabIndex(){return p.tabIndex()},"aria-haspopup":"true",get"aria-expanded"(){return r.isOpen()},get"aria-controls"(){return he(()=>!!r.isOpen())()?r.contentId():void 0},get"aria-disabled"(){return s.disabled},get"data-key"(){return p.dataKey()},get"data-highlighted"(){return h()?"":void 0},get"data-disabled"(){return s.disabled?"":void 0},get onPointerDown(){return Ce([s.onPointerDown,p.onPointerDown])},get onPointerUp(){return Ce([s.onPointerUp,p.onPointerUp])},get onClick(){return Ce([m,p.onClick])},get onKeyDown(){return Ce([v,p.onKeyDown])},get onMouseDown(){return Ce([s.onMouseDown,p.onMouseDown])},get onFocus(){return Ce([s.onFocus,p.onFocus])},onPointerMove:g,onPointerLeave:y},()=>r.dataset(),i))}function Oy(e){const t=po(),n=`menu-${_t()}`,r=ce({id:n,modal:!0},e),[o,s]=q(r,["id","modal","preventScroll","forceMount","open","defaultOpen","onOpenChange","value","orientation"]),i=ei({open:()=>o.open,defaultOpen:()=>o.defaultOpen,onOpenChange:c=>o.onOpenChange?.(c)}),a={isModal:()=>o.modal??!0,preventScroll:()=>o.preventScroll??a.isModal(),forceMount:()=>o.forceMount??!1,generateId:so(()=>o.id),value:()=>o.value,orientation:()=>o.orientation??t?.orientation()??"horizontal"};return S(jl.Provider,{value:a,get children(){return S(tu,B({get open(){return i.isOpen()},get onOpenChange(){return i.setIsOpen}},s))}})}var Ay={};ao(Ay,{Root:()=>go,Separator:()=>Dy});function go(e){let t;const n=ce({orientation:"horizontal"},e),[r,o]=q(n,["ref","orientation"]),s=zs(()=>t,()=>"hr");return S(Pe,B({as:"hr",ref(i){var a=Ie(c=>t=c,r.ref);typeof a=="function"&&a(i)},get role(){return s()!=="hr"?"separator":void 0},get"aria-orientation"(){return r.orientation==="vertical"?"vertical":void 0},get"data-orientation"(){return r.orientation}},o))}var Dy=go,$y={};ao($y,{Arrow:()=>Zs,CheckboxItem:()=>Vl,Content:()=>ai,DropdownMenu:()=>Fy,Group:()=>oi,GroupLabel:()=>Hl,Icon:()=>ql,Item:()=>si,ItemDescription:()=>Yl,ItemIndicator:()=>Jl,ItemLabel:()=>Xl,Portal:()=>ii,RadioGroup:()=>Ql,RadioItem:()=>eu,Root:()=>ci,Separator:()=>go,Sub:()=>nu,SubContent:()=>ru,SubTrigger:()=>ou,Trigger:()=>ri});function ai(e){const t=mt(),n=wt(),[r,o]=q(e,["onCloseAutoFocus","onInteractOutside"]);let s=!1;return S(ky,B({onCloseAutoFocus:c=>{r.onCloseAutoFocus?.(c),s||Se(n.triggerRef()),s=!1,c.preventDefault()},onInteractOutside:c=>{r.onInteractOutside?.(c),(!t.isModal()||c.detail.isContextMenu)&&(s=!0)}},o))}function ci(e){const t=`dropdownmenu-${_t()}`,n=ce({id:t},e);return S(Oy,n)}var Fy=Object.assign(ci,{Arrow:Zs,CheckboxItem:Vl,Content:ai,Group:oi,GroupLabel:Hl,Icon:ql,Item:si,ItemDescription:Yl,ItemIndicator:Jl,ItemLabel:Xl,Portal:ii,RadioGroup:Ql,RadioItem:eu,Separator:go,Sub:nu,SubContent:ru,SubTrigger:ou,Trigger:ri}),Ny=te("<script id=kb-color-mode-script>"),su=me();function By(){const e=de(su);if(e===void 0)throw new Error("[kobalte]: `useColorMode` must be used within a `ColorModeProvider`");return e}var iu="kb-color-mode";function Ky(e){return{ssr:!1,type:"localStorage",get:t=>{let n;try{n=localStorage.getItem(e)}catch{}return n??t},set:t=>{try{localStorage.setItem(e,t)}catch{}}}}var Uy=Ky(iu),li="system";function au(){return window.matchMedia("(prefers-color-scheme: dark)")}function zy(){const e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(e)})})}}function jy(e,t=!0){const n=t?zy():void 0;document.documentElement.dataset.kbTheme=e,document.documentElement.style.colorScheme=e,n?.()}function cu(e){return au().matches??e==="dark"?"dark":"light"}function Vy(e){const t="light",n=e.get(t)??t;return n==="system"?cu():n}function Wy(e){const t=au(),n=r=>{e(r.matches?"dark":"light")};return t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}}function Gy(e){const t=()=>e.initialColorMode??li,n=()=>e.storageManager??Uy;let r;const[o,s]=j(Vy(n())),i=u=>{s(u),jy(u,e.disableTransitionOnChange)},a=u=>{r&&(r(),r=void 0);const d=u==="system";d&&(r=Wy(i)),i(d?cu():u),n().set(u)},c=()=>{a(o()==="dark"?"light":"dark")};V(()=>{a(n().get()??t())}),J(()=>{r?.()});const l={colorMode:o,setColorMode:a,toggleColorMode:c};return S(su.Provider,{value:l,get children(){return e.children}})}var Hy=new Set(["light","dark","system"]);function qy(e){return Hy.has(e)?e:li}function Yy(e){const t=B({initialColorMode:li,storageType:"localStorage",storageKey:iu},e),n=H(()=>{const r=qy(t.initialColorMode),o=`(function(){try{var a=function(o){var l="(prefers-color-scheme: dark)",v=window.matchMedia(l).matches?"dark":"light",e=o==="system"?v:o,d=document.documentElement,s=e==="dark";return d.style.colorScheme=e,d.dataset.kbTheme=e,o},u=a,h="${r}",r="${t.storageKey}",t=document.cookie.match(new RegExp("(^| )".concat(r,"=([^;]+)"))),c=t?t[2]:null;c?a(c):document.cookie="".concat(r,"=").concat(a(h),"; max-age=31536000; path=/")}catch(a){}})();`,s=`(function(){try{var a=function(c){var v="(prefers-color-scheme: dark)",h=window.matchMedia(v).matches?"dark":"light",r=c==="system"?h:c,o=document.documentElement,i=r==="dark";return o.style.colorScheme=r,o.dataset.kbTheme=r,c},n=a,m="${r}",e="${t.storageKey}",t=localStorage.getItem(e);t?a(t):localStorage.setItem(e,a(m))}catch(a){}})();`;return`!${t.storageType==="cookie"?o:s}`.trim()});return(()=>{var r=Ny();return $e(o=>{var s=t.nonce,i=n();return s!==o.e&&xn(r,"nonce",o.e=s),i!==o.t&&(r.innerHTML=o.t=i),o},{e:void 0,t:void 0}),r})()}var Jy={};ao(Jy,{CloseButton:()=>ui,Content:()=>di,Description:()=>fi,Dialog:()=>Xy,Overlay:()=>hi,Portal:()=>pi,Root:()=>gi,Title:()=>mi,Trigger:()=>yi,useDialogContext:()=>zt});var lu=me();function zt(){const e=de(lu);if(e===void 0)throw new Error("[kobalte]: `useDialogContext` must be used within a `Dialog` component");return e}function ui(e){const t=zt(),[n,r]=q(e,["aria-label","onClick"]);return S(Tn,B({get"aria-label"(){return n["aria-label"]||t.translations().dismiss},onClick:s=>{fe(s,n.onClick),t.close()}},r))}function di(e){let t;const n=zt(),r=ce({id:n.generateId("content")},e),[o,s]=q(r,["ref","onOpenAutoFocus","onCloseAutoFocus","onPointerDownOutside","onFocusOutside","onInteractOutside"]);let i=!1,a=!1;const c=f=>{o.onPointerDownOutside?.(f),n.modal()&&f.detail.isContextMenu&&f.preventDefault()},l=f=>{o.onFocusOutside?.(f),n.modal()&&f.preventDefault()},u=f=>{o.onInteractOutside?.(f),!n.modal()&&(f.defaultPrevented||(i=!0,f.detail.originalEvent.type==="pointerdown"&&(a=!0)),Ue(n.triggerRef(),f.target)&&f.preventDefault(),f.detail.originalEvent.type==="focusin"&&a&&f.preventDefault())},d=f=>{o.onCloseAutoFocus?.(f),n.modal()?(f.preventDefault(),Se(n.triggerRef())):(f.defaultPrevented||(i||Se(n.triggerRef()),f.preventDefault()),i=!1,a=!1)};return Fl({isDisabled:()=>!(n.isOpen()&&n.modal()),targets:()=>t?[t]:[]}),Nl({element:()=>t??null,enabled:()=>n.contentPresent()&&n.preventScroll()}),$l({trapFocus:()=>n.isOpen()&&n.modal(),onMountAutoFocus:o.onOpenAutoFocus,onUnmountAutoFocus:d},()=>t),V(()=>J(n.registerContentId(s.id))),S(Me,{get when(){return n.contentPresent()},get children(){return S(Ml,B({ref(f){var h=Ie(p=>{n.setContentRef(p),t=p},o.ref);typeof h=="function"&&h(f)},role:"dialog",tabIndex:-1,get disableOutsidePointerEvents(){return he(()=>!!n.modal())()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},get"aria-labelledby"(){return n.titleId()},get"aria-describedby"(){return n.descriptionId()},get"data-expanded"(){return n.isOpen()?"":void 0},get"data-closed"(){return n.isOpen()?void 0:""},onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,get onDismiss(){return n.close}},s))}})}function fi(e){const t=zt(),n=ce({id:t.generateId("description")},e),[r,o]=q(n,["id"]);return V(()=>J(t.registerDescriptionId(r.id))),S(Pe,B({as:"p",get id(){return r.id}},o))}function hi(e){const t=zt(),[n,r]=q(e,["ref","style","onPointerDown"]),o=s=>{fe(s,n.onPointerDown),s.target===s.currentTarget&&s.preventDefault()};return S(Me,{get when(){return t.overlayPresent()},get children(){return S(Pe,B({as:"div",ref(s){var i=Ie(t.setOverlayRef,n.ref);typeof i=="function"&&i(s)},get style(){return oo({"pointer-events":"auto"},n.style)},get"data-expanded"(){return t.isOpen()?"":void 0},get"data-closed"(){return t.isOpen()?void 0:""},onPointerDown:o},r))}})}function pi(e){const t=zt();return S(Me,{get when(){return t.contentPresent()||t.overlayPresent()},get children(){return S(gc,e)}})}var Aa={dismiss:"Dismiss"};function gi(e){const t=`dialog-${_t()}`,n=ce({id:t,modal:!0,translations:Aa},e),[r,o]=j(),[s,i]=j(),[a,c]=j(),[l,u]=j(),[d,f]=j(),[h,p]=j(),m=ei({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:C=>n.onOpenChange?.(C)}),g=()=>n.forceMount||m.isOpen(),{present:y}=hs({show:g,element:()=>l()??null}),{present:v}=hs({show:g,element:()=>d()??null}),b={translations:()=>n.translations??Aa,isOpen:m.isOpen,modal:()=>n.modal??!0,preventScroll:()=>n.preventScroll??b.modal(),contentId:r,titleId:s,descriptionId:a,triggerRef:h,overlayRef:l,setOverlayRef:u,contentRef:d,setContentRef:f,overlayPresent:y,contentPresent:v,close:m.close,toggle:m.toggle,setTriggerRef:p,generateId:so(()=>n.id),registerContentId:At(o),registerTitleId:At(i),registerDescriptionId:At(c)};return S(lu.Provider,{value:b,get children(){return n.children}})}function mi(e){const t=zt(),n=ce({id:t.generateId("title")},e),[r,o]=q(n,["id"]);return V(()=>J(t.registerTitleId(r.id))),S(Pe,B({as:"h2",get id(){return r.id}},o))}function yi(e){const t=zt(),[n,r]=q(e,["ref","onClick"]);return S(Tn,B({ref(s){var i=Ie(t.setTriggerRef,n.ref);typeof i=="function"&&i(s)},"aria-haspopup":"dialog",get"aria-expanded"(){return t.isOpen()},get"aria-controls"(){return he(()=>!!t.isOpen())()?t.contentId():void 0},get"data-expanded"(){return t.isOpen()?"":void 0},get"data-closed"(){return t.isOpen()?void 0:""},onClick:s=>{fe(s,n.onClick),t.toggle()}},r))}var Xy=Object.assign(gi,{CloseButton:ui,Content:di,Description:fi,Overlay:hi,Portal:pi,Title:mi,Trigger:yi});const Zy="modulepreload",Qy=function(e){return"/where-to-eat/previews/pr-5/"+e},Da={},mo=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let c=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");o=c(n.map(l=>{if(l=Qy(l),l in Da)return;Da[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Zy,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},ev=function(){return null};var tv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},un=tv,nv=te("<svg>"),$a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rv=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),ov=e=>{const t=rv(e);return t.charAt(0).toUpperCase()+t.slice(1)},sv=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),iv=e=>{const[t,n]=q(e,["color","size","strokeWidth","children","class","name","iconNode","absoluteStrokeWidth"]);return(()=>{var r=nv();return pt(r,B(un,{get width(){return t.size??un.width},get height(){return t.size??un.height},get stroke(){return t.color??un.stroke},get"stroke-width"(){return he(()=>!!t.absoluteStrokeWidth)()?Number(t.strokeWidth??un["stroke-width"])*24/Number(t.size):Number(t.strokeWidth??un["stroke-width"])},get class(){return sv("lucide","lucide-icon",...t.name!=null?[`lucide-${$a(ov(t.name))}`,`lucide-${$a(t.name)}`]:[],t.class!=null?t.class:"")}},n),!0,!0),se(r,S(Ld,{get each(){return t.iconNode},children:([o,s])=>S(De,B({component:o},s))})),r})()},yo=iv,av=[["rect",{width:"18",height:"12",x:"3",y:"4",rx:"2",ry:"2",key:"1qhy41"}],["line",{x1:"2",x2:"22",y1:"20",y2:"20",key:"ni3hll"}]],cv=e=>S(yo,B(e,{iconNode:av,name:"laptop-minimal"})),lv=cv,uv=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],dv=e=>S(yo,B(e,{iconNode:uv,name:"moon"})),Fa=dv,fv=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],hv=e=>S(yo,B(e,{iconNode:fv,name:"sun"})),Na=hv,pv=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],gv=e=>S(yo,B(e,{iconNode:pv,name:"users"})),mv=gv;const uu=me(),yv=()=>{const e=de(uu);if(!e)throw new Error("missing storage settings provider");return e??{store:{connections:[]}}};function vv(e){const t=typeof localStorage<"u"?localStorage.getItem("wte-connections"):null,n=t?JSON.parse(t):[],[r,o]=dy({connections:n});kn(()=>{if(typeof window>"u")return;const i=a=>{if(a.key==="wte-connections"&&a.newValue)try{const c=JSON.parse(a.newValue);o("connections",et(c))}catch(c){console.error("Failed to parse storage update",c)}};window.addEventListener("storage",i),J(()=>window.removeEventListener("storage",i))}),V(()=>{typeof localStorage<"u"&&localStorage.setItem("wte-connections",JSON.stringify(r.connections))});const s={store:r,addNewConnection:i=>{const a=crypto.randomUUID(),c=[{id:crypto.randomUUID(),name:"Pizza place on the corner",updatedAt:Date.now()},{id:crypto.randomUUID(),name:"Chinese takeout",updatedAt:Date.now()}],l=[{id:crypto.randomUUID(),name:"Ben",email:null,updatedAt:Date.now()},{id:crypto.randomUUID(),name:"Daniel",email:null,updatedAt:Date.now()}],u=[{userId:l[0].id,eateryId:c[0].id,score:75,updatedAt:Date.now()},{userId:l[0].id,eateryId:c[1].id,score:20,updatedAt:Date.now()},{userId:l[1].id,eateryId:c[0].id,score:25,updatedAt:Date.now()},{userId:l[1].id,eateryId:c[1].id,score:45,updatedAt:Date.now()}],d={id:a,settings:{connection:{name:i,updatedAt:Date.now()},eateries:c,eateryScores:u,users:l,eateryVetoes:[]}};return o("connections",r.connections.length,{...d}),a},removeConnection:i=>{o("connections",r.connections.filter(a=>a.id!==i))},updateConnection:(i,a,c)=>{const l=r.connections.findIndex(u=>u.id===i);l!==-1&&o("connections",l,"settings","connection",et({name:a,updatedAt:c??Date.now()}))},upsertConnectionInfo:(i,a)=>{const c=r.connections.findIndex(u=>u.id===i);if(c===-1){const u={id:i,settings:{connection:a,eateries:[],users:[],eateryScores:[],eateryVetoes:[]}};o("connections",r.connections.length,u);return}const l=r.connections[c].settings.connection;(a.updatedAt??0)<=(l.updatedAt??0)||o("connections",c,"settings","connection",et(a))},setConnection:i=>{const a=r.connections.findIndex(c=>c.id===i.id);if(a!==-1){const c=r.connections[a],l=(h,p)=>{const m=new Map;for(const g of h)m.set(g.id,g);for(const g of p){const y=m.get(g.id);(!y||(g.updatedAt??0)>(y.updatedAt??0))&&m.set(g.id,g)}return Array.from(m.values())},u=l(c.settings.users,i.settings.users),d=l(c.settings.eateries,i.settings.eateries),f=(h,p)=>{const m=new Map;for(const g of h)m.set(`${g.userId}|${g.eateryId}`,g);for(const g of p){const y=`${g.userId}|${g.eateryId}`,v=m.get(y);(!v||(g.updatedAt??0)>(v.updatedAt??0))&&m.set(y,g)}return Array.from(m.values())};o("connections",a,et({id:c.id,settings:{connection:i.settings.connection.updatedAt>c.settings.connection.updatedAt?i.settings.connection:c.settings.connection,users:u,eateries:d,eateryScores:f(c.settings.eateryScores,i.settings.eateryScores),eateryVetoes:f(c.settings.eateryVetoes??[],i.settings.eateryVetoes??[])}}))}else o("connections",r.connections.length,i)},addUser:(i,a,c)=>{const l=r.connections.findIndex(d=>d.id===i);if(l===-1)throw new Error("Connection not found");const u={id:crypto.randomUUID(),name:a,email:c??null,updatedAt:Date.now()};return o("connections",l,"settings","users",r.connections[l].settings.users.length,{...u}),u.id},removeUser:(i,a)=>{const c=r.connections.findIndex(d=>d.id===i);if(c===-1)return;const l=r.connections[c].settings.users.findIndex(d=>d.id===a);if(l!==-1){const d=ft(r.connections[c].settings.users[l]);o("connections",c,"settings","users",l,{...d,_deleted:!0,updatedAt:Date.now()})}const u=r.connections[c].settings.eateryScores;for(let d=0;d<u.length;d++)u[d].userId===a&&o("connections",c,"settings","eateryScores",d,et({...u[d],_deleted:!0,updatedAt:Date.now()}))},updateUser:(i,a,c,l)=>{const u=r.connections.findIndex(f=>f.id===i);if(u===-1)return;const d=r.connections[u].settings.users.findIndex(f=>f.id===a);d!==-1&&o("connections",u,"settings","users",d,et({id:a,name:c,email:l??null,updatedAt:Date.now()}))},updateScore:(i,a,c,l)=>{const u=r.connections.findIndex(h=>h.id===i);if(u===-1)return;const d=r.connections[u].settings.eateryScores.findIndex(h=>h.userId===a&&h.eateryId===c),f={userId:a,eateryId:c,score:l,updatedAt:Date.now()};d===-1?o("connections",u,"settings","eateryScores",r.connections[u].settings.eateryScores.length,f):o("connections",u,"settings","eateryScores",d,et(f))},addEatery:(i,a)=>{const c=r.connections.findIndex(p=>p.id===i);if(c===-1)throw new Error("Connection not found");const l={id:crypto.randomUUID(),name:a,updatedAt:Date.now()},u=[];o("connections",c,"settings","eateries",r.connections[c].settings.eateries.length,{...l});const d=r.connections[c].settings.users.filter(p=>!p._deleted),f=r.connections[c].settings.eateryScores;let h=f.length;for(const p of d){const m=f.findIndex(y=>y.userId===p.id&&y.eateryId===l.id),g={userId:p.id,eateryId:l.id,score:50,updatedAt:Date.now(),_deleted:!1};m===-1?(o("connections",c,"settings","eateryScores",h,g),h++,u.push(g)):f[m]._deleted&&(o("connections",c,"settings","eateryScores",m,et(g)),u.push(g))}return{eateryId:l.id,createdScores:u}},removeEatery:(i,a)=>{const c=r.connections.findIndex(d=>d.id===i);if(c===-1)return;const l=r.connections[c].settings.eateries.findIndex(d=>d.id===a);if(l!==-1){const d=ft(r.connections[c].settings.eateries[l]);o("connections",c,"settings","eateries",l,{...d,_deleted:!0,updatedAt:Date.now()})}const u=r.connections[c].settings.eateryScores;for(let d=0;d<u.length;d++)u[d].eateryId===a&&o("connections",c,"settings","eateryScores",d,et({...u[d],_deleted:!0,updatedAt:Date.now()}))},updateEatery:(i,a,c)=>{const l=r.connections.findIndex(d=>d.id===i);if(l===-1)return;const u=r.connections[l].settings.eateries.findIndex(d=>d.id===a);u!==-1&&o("connections",l,"settings","eateries",u,et({id:a,name:c,updatedAt:Date.now()}))},upsertEatery:(i,a)=>{const c=r.connections.findIndex(u=>u.id===i);if(c===-1)return;const l=r.connections[c].settings.eateries.findIndex(u=>u.id===a.id);if(l===-1)o("connections",c,"settings","eateries",r.connections[c].settings.eateries.length,a);else{const u=r.connections[c].settings.eateries[l];a.updatedAt>(u.updatedAt??0)&&o("connections",c,"settings","eateries",l,a)}},upsertUser:(i,a)=>{const c=r.connections.findIndex(u=>u.id===i);if(c===-1)return;const l=r.connections[c].settings.users.findIndex(u=>u.id===a.id);if(l===-1)o("connections",c,"settings","users",r.connections[c].settings.users.length,a);else{const u=r.connections[c].settings.users[l];a.updatedAt>(u.updatedAt??0)&&o("connections",c,"settings","users",l,a)}},upsertScore:(i,a)=>{const c=r.connections.findIndex(u=>u.id===i);if(c===-1)return;const l=r.connections[c].settings.eateryScores.findIndex(u=>u.userId===a.userId&&u.eateryId===a.eateryId);if(l===-1)o("connections",c,"settings","eateryScores",u=>[...u,a]);else{const u=r.connections[c].settings.eateryScores[l];a.updatedAt>(u.updatedAt??0)&&o("connections",c,"settings","eateryScores",l,a)}},toggleVeto:(i,a,c)=>{const l=r.connections.findIndex(m=>m.id===i);if(l===-1)return;const u=r.connections[l].settings.eateryVetoes??[],d=u.findIndex(m=>m.userId===a&&m.eateryId===c),f=Date.now();if(d===-1){const m={userId:a,eateryId:c,updatedAt:f,_deleted:!1};return o("connections",l,"settings","eateryVetoes",g=>[...g??[],m]),m}const h=u[d],p={...h,_deleted:!h._deleted,updatedAt:f};return o("connections",l,"settings","eateryVetoes",d,et(p)),p},upsertVeto:(i,a)=>{const c=r.connections.findIndex(d=>d.id===i);if(c===-1)return;const l=r.connections[c].settings.eateryVetoes??[],u=l.findIndex(d=>d.userId===a.userId&&d.eateryId===a.eateryId);if(u===-1)o("connections",c,"settings","eateryVetoes",d=>[...d??[],a]);else{const d=l[u];a.updatedAt>(d.updatedAt??0)&&o("connections",c,"settings","eateryVetoes",u,a)}}};return S(uu.Provider,{value:s,get children(){return e.children}})}var bv=te('<div class="fixed inset-0 z-50 flex items-start justify-center sm:items-center">'),xv=te('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class=size-4 aria-hidden=true><path d="M18 6l-12 12"></path><path d="M6 6l12 12">'),Sv=te("<span class=sr-only>Close"),Cv=te("<div>");const _v=gi,wv=yi,Pv=e=>{const[,t]=q(e,["children"]);return S(pi,B(t,{get children(){var n=bv();return se(n,()=>e.children),n}}))},kv=e=>{const[,t]=q(e,["class"]);return S(hi,B({get class(){return Ne("fixed inset-0 z-50 bg-background/65 backdrop-blur-sm data-[expanded]:animate-in data-[closed]:animate-out data-[closed]:fade-out-0 data-[expanded]:fade-in-0",e.class)}},t))},Rv=e=>{const[,t]=q(e,["class","children"]);return S(Pv,{get children(){return[S(kv,{}),S(di,B({get class(){return Ne("fixed left-1/2 top-1/2 z-50 grid max-h-[85vh] w-[calc(100%-1.5rem)] max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 overflow-y-auto border border-border bg-card/85 p-6 text-card-foreground backdrop-blur-sm shadow-[0_1px_0_rgba(0,0,0,0.05),0_22px_70px_-50px_rgba(0,0,0,0.7)] duration-200 data-[expanded]:animate-in data-[closed]:animate-out data-[closed]:fade-out-0 data-[expanded]:fade-in-0 data-[closed]:zoom-out-95 data-[expanded]:zoom-in-95 data-[closed]:slide-out-to-left-1/2 data-[closed]:slide-out-to-top-[48%] data-[expanded]:slide-in-from-left-1/2 data-[expanded]:slide-in-from-top-[48%] sm:w-full sm:rounded-2xl",e.class)}},t,{get children(){return[he(()=>e.children),S(ui,{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[expanded]:bg-accent data-[expanded]:text-muted-foreground",get children(){return[xv(),Sv()]}})]}}))]}})},Tv=e=>{const[,t]=q(e,["class"]);return(()=>{var n=Cv();return pt(n,B({get class(){return Ne("flex flex-col space-y-1.5 text-center sm:text-left",e.class)}},t),!1,!1),n})()},Iv=e=>{const[,t]=q(e,["class"]);return S(mi,B({get class(){return Ne("text-lg font-semibold leading-none tracking-tight",e.class)}},t))},Ev=e=>{const[,t]=q(e,["class"]);return S(fi,B({get class(){return Ne("text-sm text-muted-foreground",e.class)}},t))},Mv=ri,Lv=e=>S(ci,B({gutter:4},e)),Ov=e=>{const[,t]=q(e,["class"]);return S(ii,{get children(){return S(ai,B({get class(){return Ne("z-50 min-w-32 origin-[var(--kb-menu-content-transform-origin)] animate-content-hide overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[expanded]:animate-content-show",e.class)}},t))}})},Fo=e=>{const[,t]=q(e,["class"]);return S(si,B({get class(){return Ne("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e.class)}},t))};class Av{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return Dv(t).buffer}}function Dv(e){let t=0;for(const o of e)t+=o.byteLength;const n=new Uint8Array(t);let r=0;for(const o of e){const s=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);n.set(s,r),r+=o.byteLength}return n}function du(e){return new $v(e).unpack()}function fu(e){const t=new Fv,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class $v{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,o="",s,i;for(;r<t;)s=n[r],s<160?(i=s,r++):(s^192)<32?(i=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(i=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(i=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),o+=String.fromCodePoint(i);return this.index+=t,o}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const o=this.unpack();n[o]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,o=t&8388607|8388608;return(n===0?1:-1)*o*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,o=(t>>20&2047)-1023,i=(t&1048575|1048576)*2**(o-20)+n*2**(o-52);return(r===0?1:-1)*i}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class Fv{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=o=>{if(o<n){const s=this.pack(t[o]);return s instanceof Promise?s.then(()=>r(o+1)):r(o+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),o=t/2**r-1,s=Math.floor(o*2**52),i=2**32,a=n<<31|r+1023<<20|s/i&1048575,c=s%i;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(c)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const o=s=>{if(s<n.length){const i=n[s];if(t.hasOwnProperty(i)){this.pack(i);const a=this.pack(t[i]);if(a instanceof Promise)return a.then(()=>o(s+1))}return o(s+1)}};return o(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new Av,this._textEncoder=new TextEncoder}}let hu=!0,pu=!0;function Hn(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function rn(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(i,a){if(i!==t)return o.apply(this,arguments);const c=l=>{const u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(a,c),o.apply(this,[i,c])};const s=r.removeEventListener;r.removeEventListener=function(i,a){if(i!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(a))return s.apply(this,arguments);const c=this._eventMap[t].get(a);return this._eventMap[t].delete(a),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[i,c])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(i){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),i&&this.addEventListener(t,this["_on"+t]=i)},enumerable:!0,configurable:!0})}function Nv(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(hu=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Bv(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(pu=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function gu(){if(typeof window=="object"){if(hu)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function vi(e,t){pu&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Kv(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(o=>o.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Hn(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Hn(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Hn(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=Hn(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function Ba(e){return Object.prototype.toString.call(e)==="[object Object]"}function mu(e){return Ba(e)?Object.keys(e).reduce(function(t,n){const r=Ba(e[n]),o=r?mu(e[n]):e[n],s=r&&!Object.keys(o).length;return o===void 0||s?t:Object.assign(t,{[n]:o})},{}):e}function ys(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?ys(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(o=>{ys(e,e.get(o),n)})}))}function Ka(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(t===null)return o;const s=[];return e.forEach(i=>{i.type==="track"&&i.trackIdentifier===t.id&&s.push(i)}),s.forEach(i=>{e.forEach(a=>{a.type===r&&a.trackId===i.id&&ys(e,a,o)})}),o}const Ua=gu;function yu(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(u.ideal!==void 0){c.optional=c.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",l)]=u.ideal,c.optional.push(f),f={},f[d("max",l)]=u.ideal,c.optional.push(f)):(f[d("",l)]=u.ideal,c.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(f,l)]=u[f])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},o=function(a,c){if(t.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=t.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(p=>p.kind==="videoinput");let h=f.find(p=>d.some(m=>p.label.toLowerCase().includes(m)));return!h&&f.length&&d.includes("back")&&(h=f[f.length-1]),h&&(a.video.deviceId=l.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=r(a.video),Ua("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return Ua("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},i=function(a,c,l){o(a,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(s(d))})})};if(n.getUserMedia=i.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return o(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function vu(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function bu(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",o=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===o.track.id):s={track:o.track};const i=new Event("track");i.track=o.track,i.receiver=s,i.transceiver={receiver:s},i.streams=[r.stream],this.dispatchEvent(i)}),r.stream.getTracks().forEach(o=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===o.id):s={track:o};const i=new Event("track");i.track=o,i.receiver=s,i.transceiver={receiver:s},i.streams=[r.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else rn(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function xu(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(o,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=o.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:o}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,c){let l=o.apply(this,arguments);return l||(l=t(this,a),this._senders.push(l)),l};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(i=>{this._senders.push(t(this,i))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(i=>{const a=this._senders.find(c=>c.track===i);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(o=>o._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Su(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(i=>i._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(i=>Ka(i,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o}),rn(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>Ka(s,o.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let o,s,i;return this.getSenders().forEach(a=>{a.track===r&&(o?i=!0:o=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?i=!0:s=a),a.track===r)),i||o&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Cu(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(i=>this._shimmedLocalStreams[i][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(i,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(i){this._shimmedLocalStreams=this._shimmedLocalStreams||{},i.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[i.id]=[i].concat(c)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(i){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[i.id],r.apply(this,arguments)};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(i){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},i&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(i);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),o.apply(this,arguments)}}function _u(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Cu(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new e.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(m=>m===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new e.MediaStream([u]);this._streams[d.id]=m,this._reverseStreams[m.id]=d,this.addStream(m)}return this.getSenders().find(m=>m.track===u)};function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function i(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=e.RTCPeerConnection.prototype[l],d={[l](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{const m=s(this,p);f[0].apply(null,[m])},p=>{f[1]&&f[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>s(this,p))}};e.RTCPeerConnection.prototype[l]=d[l]});const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=i(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:s(this,l)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(m=>u.track===m)&&(f=this._streams[h])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function vs(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],o={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=o[n]})}function wu(e,t){rn(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const za=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:wu,shimAddTrackRemoveTrack:_u,shimAddTrackRemoveTrackWithNative:Cu,shimGetSendersWithDtmf:xu,shimGetUserMedia:yu,shimMediaStream:vu,shimOnTrack:bu,shimPeerConnection:vs,shimSenderReceiverGetStats:Su},Symbol.toStringTag,{value:"Module"}));function Pu(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(o,s,i){vi("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(o).then(s,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const o=function(i,a,c){a in i&&!(c in i)&&(i[c]=i[a],delete i[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(i){return typeof i=="object"&&typeof i.audio=="object"&&(i=JSON.parse(JSON.stringify(i)),o(i.audio,"autoGainControl","mozAutoGainControl"),o(i.audio,"noiseSuppression","mozNoiseSuppression")),s(i)},r&&r.prototype.getSettings){const i=r.prototype.getSettings;r.prototype.getSettings=function(){const a=i.apply(this,arguments);return o(a,"mozAutoGainControl","autoGainControl"),o(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const i=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),o(a,"autoGainControl","mozAutoGainControl"),o(a,"noiseSuppression","mozNoiseSuppression")),i.apply(this,[a])}}}}function Uv(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function ku(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function bs(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const s=e.RTCPeerConnection.prototype[o],i={[o](){return arguments[0]=new(o==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[o]=i[o]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,i,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(t.version<53&&!i)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(i,a)}}function Ru(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=t.apply(this,[]);return o.forEach(s=>s._pc=this),o});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Tu(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(o=>o._pc=this),r}),rn(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Iu(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){vi("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Eu(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Mu(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const o=r.length>0;o&&r.forEach(i=>{if("rid"in i&&!/^[a-z0-9]{0,16}$/i.test(i.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in i&&!(parseFloat(i.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in i&&!(parseFloat(i.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(o){const{sender:i}=s,a=i.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,i.sendEncodings=r,this.setParametersPromises.push(i.setParameters(a).then(()=>{delete i.sendEncodings}).catch(()=>{delete i.sendEncodings})))}return s})}function Lu(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Ou(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Au(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const ja=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Mu,shimCreateAnswer:Au,shimCreateOffer:Ou,shimGetDisplayMedia:Uv,shimGetParameters:Lu,shimGetUserMedia:Pu,shimOnTrack:ku,shimPeerConnection:bs,shimRTCDataChannel:Eu,shimReceiverGetStats:Tu,shimRemoveStream:Iu,shimSenderGetStats:Ru},Symbol.toStringTag,{value:"Module"}));function Du(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(o=>t.call(this,o,r)),r.getVideoTracks().forEach(o=>t.call(this,o,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...o){return o&&o.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const o=n.getTracks();this.getSenders().forEach(s=>{o.includes(s.track)&&this.removeTrack(s)})})}}function $u(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const i=new Event("addstream");i.stream=s,r.dispatchEvent(i)})}),t.apply(r,arguments)}}}function Fu(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,s=t.setRemoteDescription,i=t.addIceCandidate;t.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f},t.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f};let a=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};t.setLocalDescription=a,a=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.setRemoteDescription=a,a=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.addIceCandidate=a}function Nu(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=o=>r(Bu(o))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,o,s){t.mediaDevices.getUserMedia(r).then(o,s)}).bind(t))}function Bu(e){return e&&e.video!==void 0?Object.assign({},e,{video:mu(e.video)}):e}function Ku(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,o){if(r&&r.iceServers){const s=[];for(let i=0;i<r.iceServers.length;i++){let a=r.iceServers[i];a.urls===void 0&&a.url?(vi("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[i])}r.iceServers=s}return new t(r,o)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function Uu(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function zu(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const o=this.getTransceivers().find(i=>i.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(i=>i.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function ju(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const Va=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:ju,shimCallbacksAPI:Fu,shimConstraints:Bu,shimCreateOfferLegacy:zu,shimGetUserMedia:Nu,shimLocalStreamsAPI:Du,shimRTCIceServerUrls:Ku,shimRemoteStreamsAPI:$u,shimTrackEventTransceiver:Uu},Symbol.toStringTag,{value:"Module"}));function zv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var No={exports:{}},Wa;function jv(){return Wa||(Wa=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((o,s)=>(s>0?"m="+o:o).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(o=>o.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const o={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":o.relatedAddress=r[s+1];break;case"rport":o.relatedPort=parseInt(r[s+1],10);break;case"tcptype":o.tcpType=r[s+1];break;case"ufrag":o.ufrag=r[s+1],o.usernameFragment=r[s+1];break;default:o[r[s]]===void 0&&(o[r[s]]=r[s+1]);break}return o},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const o=n.component;o==="rtp"?r.push(1):o==="rtcp"?r.push(2):r.push(o),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const o={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),o.name=r[0],o.clockRate=parseInt(r[1],10),o.channels=r.length===3?parseInt(r[2],10):1,o.numChannels=o.channels,o},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const o=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(o!==1?"/"+o:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let o;const s=n.substring(n.indexOf(" ")+1).split(";");for(let i=0;i<s.length;i++)o=s[i].trim().split("="),r[o[0].trim()]=o[1];return r},t.writeFmtp=function(n){let r="",o=n.payloadType;if(n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(i=>{n.parameters[i]!==void 0?s.push(i+"="+n.parameters[i]):s.push(i)}),r+="a=fmtp:"+o+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",o=n.payloadType;return n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+o+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),o={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(o.attribute=n.substring(r+1,s),o.value=n.substring(s+1)):o.attribute=n.substring(r+1),o},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(o=>parseInt(o,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let o="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{o+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),o},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const o=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return o&&s?{usernameFragment:o.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const c=s[a],l=t.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=t.parseRtpMap(l),d=t.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?t.parseFmtp(d[0]):{},u.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(t.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(t.parseExtmap(a))});const i=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(a=>{i.forEach(c=>{a.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},t.writeRtpDescription=function(n,r){let o="";o+="m="+n+" ",o+=r.codecs.length>0?"9":"0",o+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=r.codecs.map(i=>i.preferredPayloadType!==void 0?i.preferredPayloadType:i.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(i=>{o+=t.writeRtpMap(i),o+=t.writeFmtp(i),o+=t.writeRtcpFb(i)});let s=0;return r.codecs.forEach(i=>{i.maxptime>s&&(s=i.maxptime)}),s>0&&(o+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(i=>{o+=t.writeExtmap(i)}),o},t.parseRtpEncodingParameters=function(n){const r=[],o=t.parseRtpParameters(n),s=o.fecMechanisms.indexOf("RED")!==-1,i=o.fecMechanisms.indexOf("ULPFEC")!==-1,a=t.matchPrefix(n,"a=ssrc:").map(f=>t.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const u=t.matchPrefix(n,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),o.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let h={ssrc:c,codecPayloadType:parseInt(f.parameters.apt,10)};c&&l&&(h.rtx={ssrc:l}),r.push(h),s&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:c,mechanism:i?"red+ulpfec":"red"},r.push(h))}}),r.length===0&&c&&r.push({ssrc:c});let d=t.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-2e3*8:d=void 0,r.forEach(f=>{f.maxBitrate=d})),r},t.parseRtcpParameters=function(n){const r={},o=t.matchPrefix(n,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];o&&(r.cname=o.value,r.ssrc=o.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const i=t.matchPrefix(n,"a=rtcp-mux");return r.mux=i.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const o=t.matchPrefix(n,"a=msid:");if(o.length===1)return r=o[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(i=>t.parseSsrcMedia(i)).filter(i=>i.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),o=t.matchPrefix(n,"a=max-message-size:");let s;o.length>0&&(s=parseInt(o[0].substring(19),10)),isNaN(s)&&(s=65536);const i=t.matchPrefix(n,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=t.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let o=[];return n.protocol!=="DTLS/SCTP"?o=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:o=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&o.push("a=max-message-size:"+r.maxMessageSize+`\r
`),o.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,o){let s;const i=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+s+" "+i+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const o=t.splitLines(n);for(let s=0;s<o.length;s++)switch(o[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const o=t.splitLines(n)[0].substring(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},t.parseOLine=function(n){const o=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let o=0;o<r.length;o++)if(r[o].length<2||r[o].charAt(1)!=="=")return!1;return!0},e.exports=t})(No)),No.exports}var Vu=jv();const bn=zv(Vu),Vv=pd({__proto__:null,default:bn},[Vu]);function kr(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const o=new t(r),s=bn.parseCandidate(r.candidate);for(const i in s)i in o||Object.defineProperty(o,i,{value:s[i]});return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,rn(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function xs(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||rn(e,"icecandidate",t=>{if(t.candidate){const n=bn.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Rr(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=bn.splitSections(a.sdp);return c.shift(),c.some(l=>{const u=bn.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},o=function(a){let c=65536;return t.browser==="firefox"&&(t.version<57?a===-1?c=16384:c=2147483637:t.version<60?c=t.version===57?65535:65536:c=2147483637),c},s=function(a,c){let l=65536;t.browser==="firefox"&&t.version===57&&(l=65535);const u=bn.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):t.browser==="firefox"&&c!==-1&&(l=2147483637),l},i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=o(c),u=s(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return i.apply(this,arguments)}}function Tr(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,o){const s=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&o.sctp&&c>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const o=n.apply(this,arguments);return t(o,this),o},rn(e,"datachannel",r=>(t(r.channel,r.target),r))}function Ss(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const s=o.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const i=new Event("connectionstatechange",o);s.dispatchEvent(i)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Cs(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=o.sdp.split(`
`).filter(i=>i.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&o instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:o.type,sdp:s}):o.sdp=s}return n.apply(this,arguments)}}function Ir(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Er(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let o=arguments[0]||{};if(typeof o!="object"||o.type&&o.sdp)return n.apply(this,arguments);if(o={type:o.type,sdp:o.sdp},!o.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":o.type="offer";break;default:o.type="answer";break}return o.sdp||o.type!=="offer"&&o.type!=="answer"?n.apply(this,[o]):(o.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(i=>n.apply(this,[i]))})}const Wv=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Cs,shimAddIceCandidateNullOrEmpty:Ir,shimConnectionState:Ss,shimMaxMessageSize:Rr,shimParameterlessSetLocalDescription:Er,shimRTCIceCandidate:kr,shimRTCIceCandidateRelayProtocol:xs,shimSendThrowTypeError:Tr},Symbol.toStringTag,{value:"Module"}));function Gv({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=gu,r=Kv(e),o={browserDetails:r,commonShim:Wv,extractVersion:Hn,disableLog:Nv,disableWarnings:Bv,sdp:Vv};switch(r.browser){case"chrome":if(!za||!vs||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),o;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),o;n("adapter.js shimming chrome."),o.browserShim=za,Ir(e,r),Er(e),yu(e,r),vu(e),vs(e,r),bu(e),_u(e,r),xu(e),Su(e),wu(e,r),kr(e),xs(e),Ss(e),Rr(e,r),Tr(e),Cs(e,r);break;case"firefox":if(!ja||!bs||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),o;n("adapter.js shimming firefox."),o.browserShim=ja,Ir(e,r),Er(e),Pu(e,r),bs(e,r),ku(e),Iu(e),Ru(e),Tu(e),Eu(e),Mu(e),Lu(e),Ou(e),Au(e),kr(e),Ss(e),Rr(e,r),Tr(e);break;case"safari":if(!Va||!t.shimSafari)return n("Safari shim is not included in this adapter release."),o;n("adapter.js shimming safari."),o.browserShim=Va,Ir(e,r),Er(e),Ku(e),zu(e),Fu(e),Du(e),$u(e),Uu(e),Nu(e),ju(e),kr(e),xs(e),Rr(e,r),Tr(e),Cs(e,r);break;default:n("Unsupported browser!");break}return o}const Ga=Gv({window:typeof window>"u"?void 0:window});function on(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class Wu{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,o=Math.ceil(r/this.chunkedMTU);let s=0,i=0;for(;i<r;){const a=Math.min(r,i+this.chunkedMTU),c=t.slice(i,a),l={__peerData:this._dataCount,n:s,data:c,total:o};n.push(l),i=a,s++}return this._dataCount++,n}}}function Hv(e){let t=0;for(const o of e)t+=o.byteLength;const n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.byteLength;return n}const Bo=Ga.default||Ga,Nn=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return Bo.browserDetails.browser}getVersion(){return Bo.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=Bo.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},qv=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),Gu=()=>Math.random().toString(36).slice(2),Ha={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class Yv extends Wu{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(o){o.target&&n(o.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Ha,this.browser=Nn.getBrowser(),this.browserVersion=Nn.getVersion(),this.pack=fu,this.unpack=du,this.supports=(function(){const n={browser:Nn.isBrowserSupported(),webRTC:Nn.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(Ha),n.audioVideo=!0;let o;try{o=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!o.ordered;try{o.binaryType="blob",n.binaryBlob=!Nn.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=qv,this.randomToken=Gu}}const Oe=new Yv,Jv="PeerJS: ";class Xv{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[Jv,...n];for(const o in r)r[o]instanceof Error&&(r[o]="("+r[o].name+") "+r[o].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var z=new Xv,bi={},Zv=Object.prototype.hasOwnProperty,Le="~";function sr(){}Object.create&&(sr.prototype=Object.create(null),new sr().__proto__||(Le=!1));function Qv(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function Hu(e,t,n,r,o){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new Qv(n,r||e,o),i=Le?Le+t:t;return e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],s]:e._events[i].push(s):(e._events[i]=s,e._eventsCount++),e}function Mr(e,t){--e._eventsCount===0?e._events=new sr:delete e._events[t]}function Ee(){this._events=new sr,this._eventsCount=0}Ee.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)Zv.call(n,r)&&t.push(Le?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Ee.prototype.listeners=function(t){var n=Le?Le+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i};Ee.prototype.listenerCount=function(t){var n=Le?Le+t:t,r=this._events[n];return r?r.fn?1:r.length:0};Ee.prototype.emit=function(t,n,r,o,s,i){var a=Le?Le+t:t;if(!this._events[a])return!1;var c=this._events[a],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,n),!0;case 3:return c.fn.call(c.context,n,r),!0;case 4:return c.fn.call(c.context,n,r,o),!0;case 5:return c.fn.call(c.context,n,r,o,s),!0;case 6:return c.fn.call(c.context,n,r,o,s,i),!0}for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var f=c.length,h;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(t,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,n);break;case 3:c[d].fn.call(c[d].context,n,r);break;case 4:c[d].fn.call(c[d].context,n,r,o);break;default:if(!u)for(h=1,u=new Array(l-1);h<l;h++)u[h-1]=arguments[h];c[d].fn.apply(c[d].context,u)}}return!0};Ee.prototype.on=function(t,n,r){return Hu(this,t,n,r,!1)};Ee.prototype.once=function(t,n,r){return Hu(this,t,n,r,!0)};Ee.prototype.removeListener=function(t,n,r,o){var s=Le?Le+t:t;if(!this._events[s])return this;if(!n)return Mr(this,s),this;var i=this._events[s];if(i.fn)i.fn===n&&(!o||i.once)&&(!r||i.context===r)&&Mr(this,s);else{for(var a=0,c=[],l=i.length;a<l;a++)(i[a].fn!==n||o&&!i[a].once||r&&i[a].context!==r)&&c.push(i[a]);c.length?this._events[s]=c.length===1?c[0]:c:Mr(this,s)}return this};Ee.prototype.removeAllListeners=function(t){var n;return t?(n=Le?Le+t:t,this._events[n]&&Mr(this,n)):(this._events=new sr,this._eventsCount=0),this};Ee.prototype.off=Ee.prototype.removeListener;Ee.prototype.addListener=Ee.prototype.on;Ee.prefixed=Le;Ee.EventEmitter=Ee;bi=Ee;var sn={};on(sn,"ConnectionType",()=>Dt);on(sn,"PeerErrorType",()=>ge);on(sn,"BaseConnectionErrorType",()=>_s);on(sn,"DataConnectionErrorType",()=>xi);on(sn,"SerializationType",()=>vo);on(sn,"SocketEventType",()=>Et);on(sn,"ServerMessageType",()=>Re);var Dt=(function(e){return e.Data="data",e.Media="media",e})({}),ge=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),_s=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),xi=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),vo=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),Et=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),Re=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const qu="1.5.5";class eb extends bi.EventEmitter{constructor(t,n,r,o,s,i=5e3){super(),this.pingInterval=i,this._disconnected=!0,this._messagesQueue=[];const a=t?"wss://":"ws://";this._baseUrl=a+n+":"+r+o+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+qu),this._disconnected=!1,this._socket.onmessage=o=>{let s;try{s=JSON.parse(o.data),z.log("Server message received:",s)}catch{z.log("Invalid server message",o.data);return}this.emit(Et.Message,s)},this._socket.onclose=o=>{this._disconnected||(z.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit(Et.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),z.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){z.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:Re.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Et.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Yu{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Dt.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,o={ordered:!!t.reliable},s=n.createDataChannel(r.label,o);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){z.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,o=this.connection.type,s=this.connection.provider;z.log("Listening for ICE candidates."),t.onicecandidate=i=>{!i.candidate||!i.candidate.candidate||(z.log(`Received ICE candidates for ${n}:`,i.candidate),s.socket.send({type:Re.Candidate,payload:{candidate:i.candidate,type:o,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":z.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(_s.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":z.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(_s.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":z.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},z.log("Listening for data channel"),t.ondatachannel=i=>{z.log("Received data channel");const a=i.channel;s.getConnection(n,r)._initializeDataChannel(a)},z.log("Listening for remote stream"),t.ontrack=i=>{z.log("Received remote stream");const a=i.streams[0],c=s.getConnection(n,r);if(c.type===Dt.Media){const l=c;this._addStreamToMediaConnection(a,l)}}}cleanup(){z.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const o=this.connection.dataChannel;o&&(r=!!o.readyState&&o.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);z.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),z.log("Set localDescription:",r,`for:${this.connection.peer}`);let o={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Dt.Data){const s=this.connection;o={...o,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:Re.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(ge.WebRTC,o),z.log("Failed to setLocalDescription, ",o))}}catch(r){n.emitError(ge.WebRTC,r),z.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();z.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),z.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Re.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){n.emitError(ge.WebRTC,o),z.log("Failed to setLocalDescription, ",o)}}catch(r){n.emitError(ge.WebRTC,r),z.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,o=this.connection.provider;z.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),z.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(i){o.emitError(ge.WebRTC,i),z.log("Failed to setRemoteDescription, ",i)}}async handleCandidate(t){z.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),z.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(ge.WebRTC,n),z.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(z.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return z.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){z.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class Ju extends bi.EventEmitter{emitError(t,n){z.error("Error:",n),this.emit("error",new tb(`${t}`,n))}}class tb extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class Xu extends Ju{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class Xr extends Xu{static#e=this.ID_PREFIX="mc_";get type(){return Dt.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Xr.ID_PREFIX+Oe.randomToken(),this._negotiator=new Yu(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{z.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{z.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){z.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case Re.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Re.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:z.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){z.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const o of r)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class nb{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:o,path:s,key:i}=this._options,a=new URL(`${n}://${r}:${o}${s}${i}/${t}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",qu),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){z.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Oe.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Oe.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw z.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class Zr extends Xu{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Dt.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||Zr.ID_PREFIX+Gu(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Yu(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{z.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{z.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{z.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(xi.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case Re.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case Re.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:z.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class Si extends Zr{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Zr.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return z.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Ko extends Si{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new Wu,this.serialization=vo.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=du(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const o=Hv(r.data);this._handleDataMessage({data:o})}}_send(t,n){const r=fu(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);z.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class rb extends Si{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=vo.None}}class ob extends Si{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=Oe.chunkedMTU){this.emitError(xi.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=vo.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Ci extends Ju{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:rb,json:ob,binary:Ko,"binary-utf8":Ko,default:Ko},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:Oe.CLOUD_HOST,port:Oe.CLOUD_PORT,path:"/",key:Ci.DEFAULT_KEY,token:Oe.randomToken(),config:Oe.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Oe.CLOUD_HOST?this._options.secure=Oe.isSecure():this._options.host==Oe.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&z.setLogFunction(this._options.logFunction),z.logLevel=this._options.debug||0,this._api=new nb(n),this._socket=this._createServerConnection(),!Oe.supports.audioVideo&&!Oe.supports.data){this._delayedAbort(ge.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Oe.validateId(r)){this._delayedAbort(ge.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort(ge.ServerError,o))}_createServerConnection(){const t=new eb(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Et.Message,n=>{this._handleMessage(n)}),t.on(Et.Error,n=>{this._abort(ge.SocketError,n)}),t.on(Et.Disconnected,()=>{this.disconnected||(this.emitError(ge.Network,"Lost connection to server."),this.disconnect())}),t.on(Et.Close,()=>{this.disconnected||this._abort(ge.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,o=t.src;switch(n){case Re.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Re.Error:this._abort(ge.ServerError,r.msg);break;case Re.IdTaken:this._abort(ge.UnavailableID,`ID "${this.id}" is taken`);break;case Re.InvalidKey:this._abort(ge.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Re.Leave:z.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case Re.Expire:this.emitError(ge.PeerUnavailable,`Could not connect to peer ${o}`);break;case Re.Offer:{const s=r.connectionId;let i=this.getConnection(o,s);if(i&&(i.close(),z.warn(`Offer received for existing Connection ID:${s}`)),r.type===Dt.Media){const c=new Xr(o,this,{connectionId:s,_payload:r,metadata:r.metadata});i=c,this._addConnection(o,i),this.emit("call",c)}else if(r.type===Dt.Data){const c=new this._serializers[r.serialization](o,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});i=c,this._addConnection(o,i),this.emit("connection",c)}else{z.warn(`Received malformed connection type:${r.type}`);return}const a=this._getMessages(s);for(const c of a)i.handleMessage(c);break}default:{if(!r){z.warn(`You received a malformed message from ${o} of type ${n}`);return}const s=r.connectionId,i=this.getConnection(o,s);i&&i.peerConnection?i.handleMessage(t):s?this._storeMessage(s,t):z.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){z.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(ge.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){z.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(ge.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){z.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new Xr(t,this,{...r,_stream:n});return this._addConnection(t,o),o}_addConnection(t,n){z.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const o of r)if(o.connectionId===n)return o;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){z.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(z.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;z.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)z.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)z.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(ge.ServerError,n))}}var sb=Ci,Uo;function Zu(e){return{lang:e?.lang??Uo?.lang,message:e?.message,abortEarly:e?.abortEarly??Uo?.abortEarly,abortPipeEarly:e?.abortPipeEarly??Uo?.abortPipeEarly}}var ib;function ab(e){return ib?.get(e)}var cb;function lb(e){return cb?.get(e)}var ub;function db(e,t){return ub?.get(e)?.get(t)}function Qu(e){const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function Xe(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=o?.expected??e.expects??null,a=o?.received??Qu(s),c={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o?.path,issues:o?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l=e.kind==="schema",u=o?.message??e.message??db(e.reference,c.lang)??(l?lb(c.lang):null)??r.message??ab(c.lang);u!==void 0&&(c.message=typeof u=="function"?u(c):u),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function Ze(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},Zu())}}}function ed(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var fb=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu;function td(e){return{kind:"validation",type:"email",reference:td,expects:null,async:!1,requirement:fb,message:e,"~run"(t,n){return t.typed&&!this.requirement.test(t.value)&&Xe(this,"email",t,n),t}}}function hb(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function _i(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Mt(e,t){return{kind:"schema",type:"array",reference:Mt,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return Ze(this)},"~run"(n,r){const o=n.value;if(Array.isArray(o)){n.typed=!0,n.value=[];for(let s=0;s<o.length;s++){const i=o[s],a=this.item["~run"]({value:i},r);if(a.issues){const c={type:"array",origin:"value",input:o,key:s,value:i};for(const l of a.issues)l.path?l.path.unshift(c):l.path=[c],n.issues?.push(l);if(n.issues||(n.issues=a.issues),r.abortEarly){n.typed=!1;break}}a.typed||(n.typed=!1),n.value.push(a.value)}}else Xe(this,"type",n,r);return n}}}function ur(e){return{kind:"schema",type:"boolean",reference:ur,expects:"boolean",async:!1,message:e,get"~standard"(){return Ze(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:Xe(this,"type",t,n),t}}}function le(e,t){return{kind:"schema",type:"literal",reference:le,expects:Qu(e),async:!1,literal:e,message:t,get"~standard"(){return Ze(this)},"~run"(n,r){return n.value===this.literal?n.typed=!0:Xe(this,"type",n,r),n}}}function nd(e,t){return{kind:"schema",type:"nullable",reference:nd,expects:`(${e.expects} | null)`,async:!1,wrapped:e,default:t,get"~standard"(){return Ze(this)},"~run"(n,r){return n.value===null&&(this.default!==void 0&&(n.value=_i(this,n,r)),n.value===null)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function ht(e){return{kind:"schema",type:"number",reference:ht,expects:"number",async:!1,message:e,get"~standard"(){return Ze(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:Xe(this,"type",t,n),t}}}function X(e,t){return{kind:"schema",type:"object",reference:X,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Ze(this)},"~run"(n,r){const o=n.value;if(o&&typeof o=="object"){n.typed=!0,n.value={};for(const s in this.entries){const i=this.entries[s];if(s in o||(i.type==="exact_optional"||i.type==="optional"||i.type==="nullish")&&i.default!==void 0){const a=s in o?o[s]:_i(i),c=i["~run"]({value:a},r);if(c.issues){const l={type:"object",origin:"value",input:o,key:s,value:a};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],n.issues?.push(u);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[s]=c.value}else if(i.fallback!==void 0)n.value[s]=hb(i);else if(i.type!=="exact_optional"&&i.type!=="optional"&&i.type!=="nullish"&&(Xe(this,"key",n,r,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:o,key:s,value:o[s]}]}),r.abortEarly))break}}else Xe(this,"type",n,r);return n}}}function an(e,t){return{kind:"schema",type:"optional",reference:an,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Ze(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=_i(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function re(e){return{kind:"schema",type:"string",reference:re,expects:"string",async:!1,message:e,get"~standard"(){return Ze(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:Xe(this,"type",t,n),t}}}function qa(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function rd(e,t){return{kind:"schema",type:"union",reference:rd,expects:ed(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return Ze(this)},"~run"(n,r){let o,s,i;for(const a of this.options){const c=a["~run"]({value:n.value},r);if(c.typed)if(c.issues)s?s.push(c):s=[c];else{o=c;break}else i?i.push(c):i=[c]}if(o)return o;if(s){if(s.length===1)return s[0];Xe(this,"type",n,r,{issues:qa(s)}),n.typed=!0}else{if(i?.length===1)return i[0];Xe(this,"type",n,r,{issues:qa(i)})}return n}}}function ws(){return{kind:"schema",type:"unknown",reference:ws,expects:"unknown",async:!1,get"~standard"(){return Ze(this)},"~run"(e){return e.typed=!0,e}}}function wi(e,t,n){return{kind:"schema",type:"variant",reference:wi,expects:"Object",async:!1,key:e,options:t,message:n,get"~standard"(){return Ze(this)},"~run"(r,o){const s=r.value;if(s&&typeof s=="object"){let i,a=0,c=this.key,l=[];const u=(d,f)=>{for(const h of d.options){if(h.type==="variant")u(h,new Set(f).add(h.key));else{let p=!0,m=0;for(const g of f){const y=h.entries[g];if(g in s?y["~run"]({typed:!1,value:s[g]},{abortEarly:!0}).issues:y.type!=="exact_optional"&&y.type!=="optional"&&y.type!=="nullish"){p=!1,c!==g&&(a<m||a===m&&g in s&&!(c in s))&&(a=m,c=g,l=[]),c===g&&l.push(h.entries[g].expects);break}m++}if(p){const g=h["~run"]({value:s},o);(!i||!i.typed&&g.typed)&&(i=g)}}if(i&&!i.issues)break}};if(u(this,new Set([this.key])),i)return i;Xe(this,"type",r,o,{input:s[c],expected:ed(l,"|"),path:[{type:"object",origin:"value",input:s,key:c,value:s[c]}]})}else Xe(this,"type",r,o);return r}}}function pb(...e){return{...e[0],pipe:e,get"~standard"(){return Ze(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function od(e,t,n){const r=e["~run"]({value:t},Zu(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}try{self["workbox:window:7.3.0"]&&_()}catch{}function Ya(e,t){return new Promise((function(n){var r=new MessageChannel;r.port1.onmessage=function(o){n(o.data)},e.postMessage(t,[r.port2])}))}function Ja(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function gb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yb(r.key),r)}}function mb(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=(function(o,s){if(o){if(typeof o=="string")return Ja(o,s);var i={}.toString.call(o).slice(8,-1);return i==="Object"&&o.constructor&&(i=o.constructor.name),i==="Map"||i==="Set"?Array.from(o):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ja(o,s):void 0}})(e))||t){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ps(e,t){return Ps=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ps(e,t)}function yb(e){var t=(function(n,r){if(typeof n!="object"||!n)return n;var o=n[Symbol.toPrimitive];if(o!==void 0){var s=o.call(n,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)})(e,"string");return typeof t=="symbol"?t:t+""}try{self["workbox:core:7.3.0"]&&_()}catch{}var zo=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function jo(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var Bn=function(e,t){this.type=e,Object.assign(this,t)};function kt(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function vb(){}var bb={type:"SKIP_WAITING"};function Xa(e,t){return e&&e.then?e.then(vb):Promise.resolve()}var xb=(function(e){function t(s,i){var a,c;return i===void 0&&(i={}),(a=e.call(this)||this).nn={},a.tn=0,a.rn=new zo,a.en=new zo,a.on=new zo,a.un=0,a.an=new Set,a.cn=function(){var l=a.fn,u=l.installing;a.tn>0||!jo(u.scriptURL,a.sn.toString())||performance.now()>a.un+6e4?(a.vn=u,l.removeEventListener("updatefound",a.cn)):(a.hn=u,a.an.add(u),a.rn.resolve(u)),++a.tn,u.addEventListener("statechange",a.ln)},a.ln=function(l){var u=a.fn,d=l.target,f=d.state,h=d===a.vn,p={sw:d,isExternal:h,originalEvent:l};!h&&a.mn&&(p.isUpdate=!0),a.dispatchEvent(new Bn(f,p)),f==="installed"?a.wn=self.setTimeout((function(){f==="installed"&&u.waiting===d&&a.dispatchEvent(new Bn("waiting",p))}),200):f==="activating"&&(clearTimeout(a.wn),h||a.en.resolve(d))},a.yn=function(l){var u=a.hn,d=u!==navigator.serviceWorker.controller;a.dispatchEvent(new Bn("controlling",{isExternal:d,originalEvent:l,sw:u,isUpdate:a.mn})),d||a.on.resolve(u)},a.gn=(c=function(l){var u=l.data,d=l.ports,f=l.source;return kt(a.getSW(),(function(){a.an.has(f)&&a.dispatchEvent(new Bn("message",{data:u,originalEvent:l,ports:d,sw:f}))}))},function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];try{return Promise.resolve(c.apply(this,l))}catch(d){return Promise.reject(d)}}),a.sn=s,a.nn=i,navigator.serviceWorker.addEventListener("message",a.gn),a}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,Ps(n,r);var o=t.prototype;return o.register=function(s){var i=(s===void 0?{}:s).immediate,a=i!==void 0&&i;try{var c=this;return kt((function(l,u){var d=l();return d&&d.then?d.then(u):u(d)})((function(){if(!a&&document.readyState!=="complete")return Xa(new Promise((function(l){return window.addEventListener("load",l)})))}),(function(){return c.mn=!!navigator.serviceWorker.controller,c.dn=c.pn(),kt(c.bn(),(function(l){c.fn=l,c.dn&&(c.hn=c.dn,c.en.resolve(c.dn),c.on.resolve(c.dn),c.dn.addEventListener("statechange",c.ln,{once:!0}));var u=c.fn.waiting;return u&&jo(u.scriptURL,c.sn.toString())&&(c.hn=u,Promise.resolve().then((function(){c.dispatchEvent(new Bn("waiting",{sw:u,wasWaitingBeforeRegister:!0}))})).then((function(){}))),c.hn&&(c.rn.resolve(c.hn),c.an.add(c.hn)),c.fn.addEventListener("updatefound",c.cn),navigator.serviceWorker.addEventListener("controllerchange",c.yn),c.fn}))})))}catch(l){return Promise.reject(l)}},o.update=function(){try{return this.fn?kt(Xa(this.fn.update())):kt()}catch(s){return Promise.reject(s)}},o.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},o.messageSW=function(s){try{return kt(this.getSW(),(function(i){return Ya(i,s)}))}catch(i){return Promise.reject(i)}},o.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Ya(this.fn.waiting,bb)},o.pn=function(){var s=navigator.serviceWorker.controller;return s&&jo(s.scriptURL,this.sn.toString())?s:void 0},o.bn=function(){try{var s=this;return kt((function(i,a){try{var c=i()}catch(l){return a(l)}return c&&c.then?c.then(void 0,a):c})((function(){return kt(navigator.serviceWorker.register(s.sn,s.nn),(function(i){return s.un=performance.now(),i}))}),(function(i){throw i})))}catch(i){return Promise.reject(i)}},(function(s,i,a){return i&&gb(s.prototype,i),Object.defineProperty(s,"prototype",{writable:!1}),s})(t,[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])})((function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(n,r){this.jn(n).add(r)},t.removeEventListener=function(n,r){this.jn(n).delete(r)},t.dispatchEvent=function(n){n.target=this;for(var r,o=mb(this.jn(n.type));!(r=o()).done;)(0,r.value)(n)},t.jn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},e})());const sd=X({id:re(),name:re(),updatedAt:ht(),_deleted:an(ur())}),id=X({id:re(),name:re(),email:nd(pb(re(),td())),updatedAt:ht(),_deleted:an(ur())}),ad=X({userId:re(),eateryId:re(),score:ht(),updatedAt:ht(),_deleted:an(ur())}),cd=X({userId:re(),eateryId:re(),updatedAt:ht(),_deleted:an(ur())}),Sb=X({id:re(),settings:X({connection:X({name:re(),updatedAt:ht()}),eateries:Mt(sd),users:Mt(id),eateryScores:Mt(ad),eateryVetoes:an(Mt(cd))})}),ld=wi("type",[X({type:le("request-known-peers")}),X({type:le("known-peers"),data:Mt(re())}),X({type:le("request-connection-ids")}),X({type:le("connection-ids"),data:Mt(re())}),X({type:le("request-storage"),data:X({connectionId:re()})}),X({type:le("storage"),data:Sb}),X({type:le("updated-eatery"),data:X({connectionId:re(),eatery:sd})}),X({type:le("updated-eateryScore"),data:X({connectionId:re(),eateryScore:ad})}),X({type:le("updated-eateryVeto"),data:X({connectionId:re(),eateryVeto:cd})}),X({type:le("updated-user"),data:X({connectionId:re(),user:id})}),X({type:le("updated-connection"),data:X({connectionId:re(),connection:X({name:re(),updatedAt:ht()})})}),X({type:le("removed-user"),data:X({connectionId:re(),userId:re()})}),X({type:le("removed-eatery"),data:X({connectionId:re(),eateryId:re()})})]);let Vo=null;function Cb(){return typeof BroadcastChannel>"u"?null:(Vo||(Vo=new BroadcastChannel("peer-data-to-client")),Vo)}function ud(e){const t=Cb();if(!t)return()=>{};const n=r=>{const o=od(_b,r.data);o.success&&e(o.output)};return t.addEventListener("message",n),()=>{t.removeEventListener("message",n)}}const _b=wi("type",[X({type:le("p2p-peer-count"),data:ht()}),X({type:le("p2p-status"),data:X({status:rd([le("connecting"),le("connected"),le("disconnected")]),peerId:an(re())})}),X({type:le("p2p-debug"),data:re()}),X({type:le("p2p-received"),data:ld}),X({type:le("db-collection-share-insert"),data:X({collectionId:re(),data:ws(),key:re()})}),X({type:le("db-collection-share-delete"),data:X({collectionId:re(),data:X({deletedAt:ht()}),key:re()})}),X({type:le("db-collection-share-update"),data:X({collectionId:re(),data:ws(),key:re()})}),X({type:le("share-known-peers"),data:X({peers:Mt(re())})})]);let Kn=null,Za=!1;function dd(){if(typeof window>"u")return null;if(!Kn){const e="/where-to-eat/previews/pr-5/".replace(/\/$/,"");Kn=new xb(`${e}/sw.js`)}return Za||(Za=!0,Kn.register(),Kn.addEventListener("activated",()=>{console.log("SW activated, requesting P2P status"),Pi();const e=localStorage.getItem("knownPeers"),t=e?JSON.parse(e):[];t.length>0&&fd({type:"set-known-peer-ids",data:t})})),Kn}function fd(e){const t=dd();t&&t.messageSW(e)}function Pi(){fd({type:"p2p-request-status"})}function ks(e){return ud(t=>{t.type==="p2p-status"&&e(t.data)})}function wb(){return ud(e=>{e.type==="p2p-debug"&&console.log("[SW DEBUG]",e.data)})}typeof window<"u"&&(dd(),wb());const Pb="wte-p2p-leader",kb=1e3,Qa=3e3,tt=crypto.randomUUID(),[Rb,hd]=j();typeof window<"u"&&(ks(e=>{e.peerId&&hd(e.peerId)}),Pi());let dn;function Tb(){if(dn)return dn;if(typeof sessionStorage<"u"){const e=sessionStorage.getItem("fallback-peer-id");if(e)return dn=e,e;const t=crypto.randomUUID();return sessionStorage.setItem("fallback-peer-id",t),dn=t,t}return dn=crypto.randomUUID(),dn}function p0(){return H(()=>{const t=Rb();return t||Tb()})}const ki=me();function g0(){const e=de(ki);if(!e)throw new Error("Missing peer2peer provider");return e}function Ib(){return de(ki)}function Eb(e){const t=yv(),[n,r]=j(!1),[o,s]=j(null),[i,a]=j(0),[c,l]=j(new Set,{equals(T,G){return T.symmetricDifference(G).size===0}}),[u,d]=j(),[f,h]=j(),[p,m]=j("connecting"),[g,y]=j([]),[v,b]=j([]),[C,w]=j(new Set),[k,R]=j(0);let x=null;const P=H(()=>{const T=C();return new Set([...g(),...v()].filter(G=>T.has(G.peer)).map(G=>G.peer))},void 0,{equals(T,G){return T.symmetricDifference(G).size===0}}),F=H(()=>n()?P().size:k()),O=H(()=>{const T=n()?Array.from(P()):Array.from(C());return T.sort(),T});V(()=>{if(!n())return;const T=P().size;x?.postMessage({type:"peer-count-update",count:T})}),V(()=>{const T=ks(G=>{console.log("P2P: Received peer status from SW:",G),G.peerId&&(d(G.peerId),hd(G.peerId))});J(T)}),kn(()=>{Pi(),x=new BroadcastChannel(Pb),x.onmessage=N=>{const E=N.data;switch(E.type){case"heartbeat":E.tabId!==tt&&(s(E.tabId),a(E.timestamp));break;case"claim-leader":n()&&(console.log("P2P: Someone claiming leadership, re-announcing as leader"),x?.postMessage({type:"leader-announce",tabId:tt}),x?.postMessage({type:"heartbeat",tabId:tt,timestamp:Date.now()}));break;case"leader-announce":console.log("P2P: Leader announced:",E.tabId),s(E.tabId),a(Date.now()),E.tabId!==tt&&r(!1);break;case"p2p-incoming":A(E.data,!0);break;case"add-known-peer":n()&&l(ue=>new Set(ue).add(E.peerId));break;case"p2p-outgoing":n()&&ie(E.data);break;case"peer-count-update":n()||R(E.count);break;case"open-connections":n()||w(new Set(E.peerIds));break}},L();const T=setInterval(()=>{const N=Date.now(),E=i();n()?x?.postMessage({type:"heartbeat",tabId:tt,timestamp:N}):o()&&N-E>Qa&&(console.log("P2P: Leader timeout, attempting takeover"),L())},kb);J(()=>{clearInterval(T),x?.close()});const G=localStorage.getItem("knownPeers");if(G){const N=JSON.parse(G);l(E=>new Set([...E,...N]))}});function L(){console.log("P2P: Attempting to become leader, tabId:",tt),x?.postMessage({type:"claim-leader",tabId:tt}),setTimeout(()=>{const T=Date.now(),G=i();(!o()||T-G>Qa)&&(console.log("P2P: Becoming leader, tabId:",tt),r(!0),s(tt),a(T),x?.postMessage({type:"leader-announce",tabId:tt}),x?.postMessage({type:"heartbeat",tabId:tt,timestamp:T}),W())},300)}function W(){const T=u();if(!T){const E=ks(ue=>{ue.peerId&&(E(),W())});return}const G=void 0;console.log("P2P [Leader]: Creating Peer with config:",G);const N=new sb(T,G);N.on("open",E=>{console.log("P2P [Leader]: Peer open with ID:",E),m("connected")}),N.on("error",E=>{console.error("P2P [Leader]: Peer error:",E.type,E.message)}),N.on("disconnected",()=>{console.log("P2P [Leader]: Peer disconnected from signaling server"),m("disconnected"),setTimeout(()=>{n()&&(m("connecting"),N.reconnect())},1e3)}),N.on("close",()=>{console.log("P2P [Leader]: Peer connection closed"),m("disconnected")}),N.on("connection",E=>{console.log("P2P [Leader]: Incoming peer connection from:",E.peer),Q(E,"incoming")}),J(()=>{n()&&(console.log("P2P [Leader]: Destroying peer"),N.destroy())}),h(N)}function $(T,G){T.open&&T.send(G)}function Q(T,G){T.on("open",()=>{console.log(`P2P [Leader]: ${G} connection opened to:`,T.peer),w(N=>{const E=new Set(N).add(T.peer);return x?.postMessage({type:"open-connections",peerIds:Array.from(E)}),E}),$(T,{type:"request-known-peers"}),$(T,{type:"request-connection-ids"})}),T.on("data",N=>{ne(T,N)}),T.on("close",()=>{console.log(`P2P [Leader]: ${G} connection closed to:`,T.peer),w(N=>{const E=new Set(N);return E.delete(T.peer),x?.postMessage({type:"open-connections",peerIds:Array.from(E)}),E}),G==="incoming"?y(N=>N.filter(E=>E!==T)):b(N=>N.filter(E=>E!==T))}),T.on("error",N=>{console.error(`P2P [Leader]: ${G} connection error:`,N)}),G==="incoming"?(y(N=>[...N,T]),l(N=>new Set(N).add(T.peer))):b(N=>[...N,T])}function ne(T,G){const E=(ae=>{if(typeof ae=="string")try{return JSON.parse(ae)}catch{return ae}if(ae instanceof ArrayBuffer)try{const Ge=new TextDecoder().decode(new Uint8Array(ae));return JSON.parse(Ge)}catch{return ae}if(ArrayBuffer.isView(ae))try{const Ge=new Uint8Array(ae.buffer,ae.byteOffset,ae.byteLength),fr=new TextDecoder().decode(Ge);return JSON.parse(fr)}catch{return ae}return ae})(G),ue=od(ld,E);if(!ue.success){console.warn("P2P [Leader]: Failed to parse peer data:",E);return}const ve=ue.output;switch(console.log("P2P [Leader]: Received peer message type:",ve.type),ve.type){case"request-known-peers":$(T,{type:"known-peers",data:Array.from(c())});return;case"known-peers":l(ae=>new Set([...ae,...ve.data])),I(ve.data);return;case"request-connection-ids":$(T,{type:"connection-ids",data:t.store.connections.map(ae=>ae.id)});return;case"connection-ids":{const ae=new Set(ve.data),Ge=t.store.connections;for(const fr of Ge)if(ae.has(fr.id)){const bo=ft(fr);bo&&(console.log("P2P [Leader]: Sending storage to peer for shared connection:",bo.id),$(T,{type:"storage",data:bo}))}return}}A(ve),x?.postMessage({type:"p2p-incoming",data:ve})}function A(T,G=!1){switch(T.type){case"known-peers":case"request-known-peers":case"request-connection-ids":case"connection-ids":break;case"request-storage":{if(console.log("P2P: Received request-storage for connectionId:",T.data.connectionId),!G||n()){const N=ft(t.store.connections.find(E=>E.id===T.data.connectionId));N&&at({type:"storage",data:N})}break}case"storage":console.log("P2P: Received storage data for connectionId:",T.data.id),t.setConnection(T.data);break;case"updated-eatery":t.upsertEatery(T.data.connectionId,T.data.eatery);break;case"updated-user":t.upsertUser(T.data.connectionId,T.data.user);break;case"updated-eateryScore":t.upsertScore(T.data.connectionId,T.data.eateryScore);break;case"updated-eateryVeto":t.upsertVeto(T.data.connectionId,T.data.eateryVeto);break;case"removed-eatery":t.removeEatery(T.data.connectionId,T.data.eateryId);break;case"removed-user":t.removeUser(T.data.connectionId,T.data.userId);break;case"updated-connection":t.upsertConnectionInfo(T.data.connectionId,T.data.connection);break;default:console.warn("P2P: Unknown message type:",T.type)}}V(()=>console.log("P2P: Leader changed",n())),V(()=>console.log("P2P: Peer status changed",p())),V(()=>console.log("P2P: Peer changed",f())),V(()=>console.log("P2P: My peer ID changed",u())),V(()=>console.log("P2P: Known peers changed",Array.from(c()))),V(()=>console.log("P2P: Currently connected peers changed",Array.from(P()))),V(()=>{const T=n(),G=p(),N=f(),E=u(),ue=c(),ve=P();if(console.log("P2P: Connect effect running",{isLeader:T,peerStatus:G,hasPeer:!!N,selfId:E,knownPeers:Array.from(ue),alreadyConnected:Array.from(ve)}),!!T&&G==="connected"&&N&&E)for(const ae of ue){if(ae===E||ve.has(ae))continue;console.log("P2P [Leader]: Connecting to known peer:",ae);const Ge=N.connect(ae,{serialization:"binary"});Q(Ge,"outgoing")}});function I(T){const G=localStorage.getItem("knownPeers"),N=G?JSON.parse(G):[];let E=!1;for(const ue of T)N.includes(ue)||(N.push(ue),E=!0);E&&localStorage.setItem("knownPeers",JSON.stringify(N))}function ie(T){[...g(),...v()].forEach(N=>$(N,T))}function We(T){console.log("P2P: Adding new known peer:",T),l(G=>new Set(G).add(T)),n()||x?.postMessage({type:"add-known-peer",peerId:T}),I([T]),_e()}function at(T){console.log("P2P: Broadcasting event:",T.type),n()?ie(T):x?.postMessage({type:"p2p-outgoing",data:T})}function Qe(T,G){if(console.log("P2P: Sending to peer:",T,G.type),n()){const N=[...g(),...v()].find(E=>E.peer===T&&E.open);return N?($(N,G),!0):(ie(G),!1)}else return x?.postMessage({type:"p2p-outgoing",data:G}),!0}function ye(T){return C().has(T)}function _e(){const T=t.store.connections.map(G=>G.id);console.log("P2P: Requesting storage for connections:",T);for(const G of T)at({type:"request-storage",data:{connectionId:G}})}return S(ki.Provider,{value:{broadcast:at,sendToPeer:Qe,addNewPeer:We,isPeerConnected:ye,connectedPeerCount:F,connectedPeerIds:O,myPeerId:u},get children(){return e.children}})}var Mb=te('<div class="grid size-9 place-items-center rounded-xl border border-border bg-card/60 shadow-[0_1px_0_rgba(0,0,0,0.04)] transition-transform group-hover:-translate-y-0.5"><span class="text-lg leading-none"aria-hidden=true>'),Lb=te('<div class=leading-tight><div class="font-display text-base sm:text-lg tracking-tight">Where to Eat</div><div class="text-xs text-muted-foreground">spin  sync  decide'),Ob=te('<div class=min-h-screen><header class="sticky top-0 z-40 p-3 sm:p-4"><div class="container mx-auto"><div class="rounded-2xl border border-border bg-background/55 backdrop-blur-md paper-soft"><div class="flex items-center gap-3 px-4 py-3"><div class=flex-1></div><nav class="hidden sm:flex items-center gap-2"></nav></div></div></div></header><main class="container mx-auto px-4 pb-10"></main><footer class="container mx-auto px-4 pb-10"><div class="rounded-2xl border border-border bg-card/45 px-4 py-3 text-sm text-muted-foreground paper-soft"><div class="flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between"><div>Built for indecisive groups. Works offline.</div><div class="font-mono text-xs">tip: open multiple tabs to test sync'),Ab=te("<span class=sr-only>Toggle theme"),Db=te("<span>Light"),$b=te("<span>Dark"),Fb=te("<span>System"),Nb=te("<span data-testid=peer-count-value>"),Bb=te("<span class=sr-only>Open active connections"),Kb=te('<div class="grid gap-2"><div class="text-sm text-muted-foreground">Your peer ID: <span class=font-mono></span></div><div class="grid gap-2">'),Ub=te("<div class=text-sm>No active peer connections."),zb=te('<ul class="grid gap-1">'),jb=te('<li class="rounded border px-2 py-1 font-mono text-sm"data-testid=active-connection-item>');const dr=Ih({errorComponent:rl,notFoundComponent:()=>S(ol,{}),component:Vb});function Vb(){return[S(Yy,{}),S(Gy,{get children(){return[S(vv,{get children(){return S(Eb,{get children(){var e=Ob(),t=e.firstChild,n=t.firstChild,r=n.firstChild,o=r.firstChild,s=o.firstChild,i=s.nextSibling,a=t.nextSibling;return se(o,S(_n,{to:"/",activeOptions:{exact:!0},class:"group flex items-center gap-2",get children(){return[Mb(),Lb()]}}),s),se(i,S(_n,{to:"/",activeOptions:{exact:!0},activeProps:{class:"bg-accent text-accent-foreground border-accent/60"},class:"rounded-xl border border-border bg-card/40 px-3 py-2 text-sm font-semibold text-foreground/85 shadow-[0_1px_0_rgba(0,0,0,0.04)] transition hover:-translate-y-0.5 hover:bg-card/65",children:"Home"})),se(o,S(Gb,{}),null),se(o,S(Wb,{}),null),se(a,S(Dc,{})),e}})}}),S(ev,{position:"bottom-right"})]}})]}function Wb(){const{setColorMode:e}=By();return S(Lv,{get children(){return[S(Mv,{as:Yt,variant:"ghost",size:"sm",class:"w-9 px-0",get children(){return[S(Na,{class:"size-6 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),S(Fa,{class:"absolute size-6 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),Ab()]}}),S(Ov,{get children(){return[S(Fo,{onSelect:()=>e("light"),get children(){return[S(Na,{class:"mr-2 size-4"}),Db()]}}),S(Fo,{onSelect:()=>e("dark"),get children(){return[S(Fa,{class:"mr-2 size-4"}),$b()]}}),S(Fo,{onSelect:()=>e("system"),get children(){return[S(lv,{class:"mr-2 size-4"}),Fb()]}})]}})]}})}function Gb(){const e=Ib(),t=()=>e?.connectedPeerIds()??[];return S(_v,{get children(){return[S(wv,{as:Yt,variant:"ghost",size:"sm",class:"gap-1 px-2 text-sm text-muted-foreground","data-testid":"connected-peer-count",title:"Active connections",get children(){return[S(mv,{class:"size-4"}),(()=>{var n=Nb();return se(n,()=>e?.connectedPeerCount()??0),n})(),Bb()]}}),S(Rv,{"data-testid":"active-connections-dialog",get children(){return[S(Tv,{get children(){return[S(Iv,{children:"Active connections"}),S(Ev,{children:"Peers currently connected to this browser."})]}}),(()=>{var n=Kb(),r=n.firstChild,o=r.firstChild,s=o.nextSibling,i=r.nextSibling;return se(s,()=>e?.myPeerId()??""),se(i,(()=>{var a=he(()=>t().length===0);return()=>a()?Ub():(()=>{var c=zb();return se(c,()=>t().map(l=>(()=>{var u=jb();return se(u,l),u})())),c})()})()),n})()]}})]}})}const Hb=()=>mo(()=>import("./connect-to-BUwD86Ph.js"),[]),qb=X({peerId:re(),connectionId:re()}),Yb=wn("/connect-to")({component:ro(Hb,"component"),validateSearch:qb}),Jb=()=>mo(()=>import("./index-DKd3ZtHb.js"),__vite__mapDeps([0,1])),Xb=wn("/")({component:ro(Jb,"component")}),Zb=()=>mo(()=>import("./wheel._connectionId-C7J8t825.js"),__vite__mapDeps([2,3])),Qb=wn("/wheel/$connectionId")({component:ro(Zb,"component")}),e0=()=>mo(()=>import("./settings._connectionId-CEVKNUrX.js"),__vite__mapDeps([4,3,1])),t0=wn("/settings/$connectionId")({component:ro(e0,"component")}),n0=Yb.update({id:"/connect-to",path:"/connect-to",getParentRoute:()=>dr}),r0=Xb.update({id:"/",path:"/",getParentRoute:()=>dr}),o0=Qb.update({id:"/wheel/$connectionId",path:"/wheel/$connectionId",getParentRoute:()=>dr}),s0=t0.update({id:"/settings/$connectionId",path:"/settings/$connectionId",getParentRoute:()=>dr}),i0={IndexRoute:r0,ConnectToRoute:n0,SettingsConnectionIdRoute:s0,WheelConnectionIdRoute:o0},a0=dr._addFileChildren(i0)._addFileTypes(),c0="/where-to-eat/previews/pr-5/";function l0(){return Kh({routeTree:a0,basepath:c0,defaultPreload:"intent",defaultErrorComponent:rl,defaultNotFoundComponent:()=>S(ol,{})})}const u0=l0();Wd(()=>S(jh,{router:u0}),document.getElementById("root"));export{ul as $,Tv as A,Yt as B,el as C,_v as D,Iv as E,Ld as F,Ev as G,Zd as H,yo as I,he as J,$e as K,_n as L,vt as M,xn as N,mv as O,hc as P,gg as Q,Yb as R,fc as S,Tn as T,sc as U,Yh as V,fe as W,_t as X,ce as Y,Kg as Z,ao as _,Fe as a,Ce as a0,Ie as a1,Bg as a2,Lg as a3,Ut as a4,Eg as a5,me as a6,so as a7,Pe as a8,de as a9,t0 as aa,Jd as ab,M as ac,At as ad,zs as ae,ct as af,lo as ag,yv as b,j as c,V as d,S as e,tl as f,nl as g,Qc as h,se as i,Me as j,f0 as k,h0 as l,B as m,pt as n,kn as o,Ne as p,Sp as q,Qb as r,q as s,te as t,g0 as u,J as v,H as w,p0 as x,wv as y,Rv as z};
