import{s as J,N as mt,e,g as E,O as ft,P as pt,Q as vt,m as Ee,T as De,_ as Oe,q as j,U as Be,V as He,W as yt,X as xt,Y as P,Z as qe,c as C,$ as bt,a0 as wt,a1 as Ct,a2 as _t,a3 as Je,a4 as $t,a5 as St,a6 as Qe,I as ve,k as It,j as We,a7 as kt,a as Dt,b as Et,u as Nt,d as Ae,l as Pt,t as m,i as s,L as Fe,B as b,D as se,v as Ve,w as ae,x as ie,y as le,z as oe,f as T,F as de,C as ce,J as Se,E as Ie,a8 as Kt}from"./index-BGj6lRSZ.js";import{h as Ut}from"./house-DfLZwSoI.js";import{T as H,b as q,p as ue,a as ee,t as Re}from"./text-field-vZH3_XIl.js";import{e as ge,C as he,a as me,c as fe}from"./card-DvPXDQn5.js";var zt={};Oe(zt,{Root:()=>Ne,ToggleButton:()=>Mt});function Ne(t){const[r,i]=J(t,["children","pressed","defaultPressed","onChange","onClick"]),f=mt({isSelected:()=>r.pressed,defaultIsSelected:()=>r.defaultPressed,onSelectedChange:c=>r.onChange?.(c),isDisabled:()=>i.disabled});return e(ft,E({get"aria-pressed"(){return f.isSelected()},get"data-pressed"(){return f.isSelected()?"":void 0},onClick:c=>{De(c,r.onClick),f.toggle()}},i,{get children(){return e(Tt,{get state(){return{pressed:f.isSelected}},get children(){return r.children}})}}))}function Tt(t){const r=pt(()=>{const i=t.children;return vt(i)?i(t.state):i});return Ee(r)}var Mt=Ne,At=class{collection;direction;orientation;constructor(t,r,i){this.collection=t,this.direction=r,this.orientation=i}flipDirection(){return this.direction()==="rtl"&&this.orientation()==="horizontal"}getKeyLeftOf(t){if(this.flipDirection())return this.getNextKey(t);if(this.orientation()==="horizontal")return this.getPreviousKey(t)}getKeyRightOf(t){if(this.flipDirection())return this.getPreviousKey(t);if(this.orientation()==="horizontal")return this.getNextKey(t)}getKeyAbove(t){if(this.orientation()==="vertical")return this.getPreviousKey(t)}getKeyBelow(t){if(this.orientation()==="vertical")return this.getNextKey(t)}getFirstKey(){let t=this.collection().getFirstKey();return t==null?void 0:(this.collection().getItem(t)?.disabled&&(t=this.getNextKey(t)),t)}getLastKey(){let t=this.collection().getLastKey();return t==null?void 0:(this.collection().getItem(t)?.disabled&&(t=this.getPreviousKey(t)),t)}getNextKey(t){let r=t,i;do if(r=this.collection().getKeyAfter(r)??this.collection().getFirstKey(),r==null||(i=this.collection().getItem(r),i==null))return;while(i.disabled);return r}getPreviousKey(t){let r=t,i;do if(r=this.collection().getKeyBefore(r)??this.collection().getLastKey(),r==null||(i=this.collection().getItem(r),i==null))return;while(i.disabled);return r}},Ft={};Oe(Ft,{Item:()=>Pe,Root:()=>Ke,ToggleGroup:()=>Rt,useToggleGroupContext:()=>Ye});var Xe=Je();function Ye(){const t=Qe(Xe);if(t===void 0)throw new Error("[kobalte]: `useToggleGroupContext` must be used within a `ToggleGroup` component");return t}function Pe(t){let r;const i=Ye(),f=i.generateId(`item-${Be()}`),d=He({id:f},t),[c,N]=J(d,["ref","value","disabled","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),M=()=>i.listState().selectionManager(),K=()=>i.isDisabled()||c.disabled;yt({getItem:()=>({ref:()=>r,type:"item",key:c.value,textValue:"",disabled:c.disabled||i.isDisabled()})});const p=xt({key:()=>c.value,selectionManager:M,disabled:K},()=>r);return e(Ne,E({ref(_){var S=qe(A=>r=A,c.ref);typeof S=="function"&&S(_)},get pressed(){return M().isSelected(c.value)},get tabIndex(){return p.tabIndex()},get"data-orientation"(){return i.orientation()},get disabled(){return K()},get onPointerDown(){return P([c.onPointerDown,p.onPointerDown])},get onPointerUp(){return P([c.onPointerUp,p.onPointerUp])},get onClick(){return P([c.onClick,p.onClick])},onKeyDown:_=>{["Enter"," "].includes(_.key)&&_.preventDefault(),De(_,c.onKeyDown),De(_,p.onKeyDown)},get onMouseDown(){return P([c.onMouseDown,p.onMouseDown])},get onFocus(){return P([c.onFocus,p.onFocus])}},N))}function Vt(t){let r;const i=`group-${Be()}`,f=He({id:i,selectionMode:"single",orientation:"horizontal"},t),[d,c]=J(f,["ref","value","defaultValue","disabled","orientation","selectionMode","onChange","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]),[N,M]=C([]),{DomCollectionProvider:K}=bt({items:N,onItemsChange:M}),p=wt({selectedKeys:()=>d.value,defaultSelectedKeys:()=>d.defaultValue,onSelectionChange:G=>d.onChange?.(Array.from(G)),disallowEmptySelection:!1,selectionMode:()=>d.selectionMode,dataSource:N}),{direction:te}=Ct(),_=new At(()=>A.listState().collection(),te,()=>d.orientation),S=_t({selectionManager:()=>p.selectionManager(),keyboardDelegate:()=>_,disallowEmptySelection:()=>p.selectionManager().disallowEmptySelection(),disallowTypeAhead:!0},()=>r),A={listState:()=>p,isDisabled:()=>d.disabled??!1,isMultiple:()=>d.selectionMode==="multiple",generateId:$t(()=>c.id),orientation:()=>d.orientation};return e(K,{get children(){return e(Xe.Provider,{value:A,get children(){return e(St,E({as:"div",role:"group",ref(G){var L=qe(Q=>r=Q,d.ref);typeof L=="function"&&L(G)},get tabIndex(){return Ee(()=>!d.disabled)()?S.tabIndex():void 0},get"data-orientation"(){return d.orientation},get onKeyDown(){return P([d.onKeyDown,S.onKeyDown])},get onMouseDown(){return P([d.onMouseDown,S.onMouseDown])},get onFocusIn(){return P([d.onFocusIn,S.onFocusIn])},get onFocusOut(){return P([d.onFocusOut,S.onFocusOut])}},c))}})}})}function Ke(t){const[r,i]=J(t,["value","defaultValue","onChange","multiple"]),f=j(()=>r.value!=null?r.multiple?r.value:[r.value]:r.value),d=j(()=>r.defaultValue!=null?r.multiple?r.defaultValue:[r.defaultValue]:r.defaultValue);return e(Vt,E({get value(){return f()},get defaultValue(){return d()},onChange:N=>{r.multiple?r.onChange?.(N):r.onChange?.(N[0]??null)},get selectionMode(){return r.multiple?"multiple":"single"}},i))}var Rt=Object.assign(Ke,{Item:Pe}),jt=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Gt=t=>e(ve,E(t,{iconNode:jt,name:"ban"})),je=Gt,Lt=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Ot=t=>e(ve,E(t,{iconNode:Lt,name:"pencil"})),Ge=Ot,Bt=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ht=t=>e(ve,E(t,{iconNode:Bt,name:"arrow-left"})),qt=Ht,Jt=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Qt=t=>e(ve,E(t,{iconNode:Jt,name:"save"})),ke=Qt;const Wt=It("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm"},size:{default:"h-9 px-3",sm:"h-8 px-2",lg:"h-10 px-3"}},defaultVariants:{variant:"default",size:"default"}}),Ze=Je({size:"default",variant:"default"}),Xt=t=>{const[r,i]=J(t,["class","children","size","variant"]);return e(Ke,E({get class(){return We("flex items-center justify-center gap-1",r.class)}},i,{get children(){return e(Ze.Provider,{value:{get size(){return r.size},get variant(){return r.variant}},get children(){return r.children}})}}))},Yt=t=>{const[r,i]=J(t,["class","size","variant"]),f=Qe(Ze);return e(Pe,E({get class(){return We(Wt({size:f.size||r.size,variant:f.variant||r.variant}),"hover:bg-muted hover:text-muted-foreground data-[pressed]:bg-accent data-[pressed]:text-accent-foreground",r.class)}},i))};var Zt=m('<div class="flex flex-col sm:flex-row gap-3 sm:items-end"><div class=flex-1>'),en=m("<span>Restaurants (<!>)"),pe=m('<div class="space-y-4 pt-2">'),Le=m('<div class="space-y-2 max-h-80 overflow-y-auto pr-1">'),tn=m("<span>People (<!>)"),nn=m('<div class=space-y-6><div class=space-y-3><p class="text-sm text-muted-foreground">Select a person to rate for:'),rn=m('<div class="py-6 px-4"><div class="max-w-4xl mx-auto space-y-6"><div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 page-section"><div><h1 class="text-2xl font-bold">Settings</h1><p class="text-sm text-muted-foreground mt-1">Manage restaurants, users, and preferences</p></div><div class="flex gap-2"></div></div><div class="grid md:grid-cols-2 gap-4 page-section">'),sn=m('<div class="text-center py-8 text-muted-foreground"><p class=font-medium>No restaurants yet</p><p class=text-sm>Add your first restaurant to get started'),an=m('<div class="food-list-item flex items-center justify-between animate-slide-up"><div class="flex items-center gap-3 flex-1 min-w-0"><div class="w-8 h-8 rounded-md bg-primary/10 flex items-center justify-center text-primary text-sm font-semibold flex-shrink-0"></div><div class=min-w-0><h3 class="font-medium truncate"></h3></div></div><div class="flex gap-1">'),ln=m('<div class="text-center py-8 text-muted-foreground"><p class=font-medium>No people yet</p><p class=text-sm>Add participants to start rating'),on=m('<div class="food-list-item flex items-center justify-between animate-slide-up"><div class="flex items-center gap-3 flex-1 min-w-0"><div class="w-8 h-8 rounded-full bg-secondary/50 flex items-center justify-center text-sm font-semibold flex-shrink-0"></div><div class=min-w-0><h3 class="font-medium truncate"></h3><p class="text-xs text-muted-foreground"> ratings</p></div></div><div class="flex gap-1">'),dn=m('<div class=space-y-4><div class="flex items-center gap-2 text-sm text-muted-foreground"><span class="font-medium text-foreground">Rating as </span></div><div class="grid gap-3">'),cn=m('<span class="text-xs text-destructive font-medium flex items-center gap-1"> Never pick'),un=m('<div class="text-lg font-bold text-primary min-w-[3ch] text-right">'),gn=m('<div class="space-y-2 mt-3 pt-3 border-t border-border/50"><div class="flex justify-between text-xs text-muted-foreground"><span>Never</span><span>Favorite</span></div><input type=range min=0 max=100 class="w-full h-2 rounded-full appearance-none cursor-pointer accent-primary"data-testid=score-slider>'),hn=m('<div class="food-list-item p-4 space-y-3 animate-slide-up"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-8 h-8 rounded-md bg-primary/10 flex items-center justify-center text-primary text-sm font-semibold flex-shrink-0"></div><div><h4 class=font-medium></h4></div></div><div class="flex items-center gap-3">'),mn=m(`<div class="text-sm text-muted-foreground italic mt-2">This restaurant won't appear in spins`);function xn(){const t=kt.useParams({select:n=>n.connectionId}),r=Dt(),[i,f]=C(""),[d,c]=C(""),[N,M]=C(""),[K,p]=C(""),[te,_]=C(!1),[S,A]=C(!1),[G,L]=C(null),[Q,ye]=C(""),[Ue,xe]=C(null),[be,we]=C(""),I=Et(),k=Nt(),v=j(()=>I.store.connections.find(n=>n.id===t()));Ae(()=>{const n=v();n&&f(n.settings.connection.name??"")});const O=j(()=>v()?.settings.eateries.filter(n=>!n._deleted)??[]),F=j(()=>v()?.settings.users.filter(n=>!n._deleted)??[]);Ae(()=>{const n=v();n===void 0?r.navigate({to:"/",replace:!0}):Pt.log("settings: loaded connection",{id:n.id,users:n.settings.users.length,activeUsers:F().length,eateries:n.settings.eateries.length,activeEateries:O().length})});const[ne,Ce]=C(v()?.settings.users[0]),et=()=>{if(!d().trim())return;const{eateryId:n,createdScores:l}=I.addEatery(t(),d().trim());c(""),M(""),_(!1);const u=v()?.settings.eateries.find(W=>W.id===n);if(u){k.broadcast({type:"updated-eatery",data:{connectionId:t(),eatery:u}});for(const W of l)k.broadcast({type:"updated-eateryScore",data:{connectionId:t(),eateryScore:W}})}},tt=n=>{I.removeEatery(t(),n),k.broadcast({type:"removed-eatery",data:{connectionId:t(),eateryId:n}})},nt=n=>{L(n),ye(n.name)},rt=()=>{const n=G();if(!n||!Q().trim())return;I.updateEatery(t(),n.id,Q().trim());const l=v()?.settings.eateries.find(u=>u.id===n.id);l&&k.broadcast({type:"updated-eatery",data:{connectionId:t(),eatery:l}}),L(null),ye("")},st=()=>{if(!K().trim())return;const n=I.addUser(t(),K().trim(),void 0);p(""),A(!1);const l=v()?.settings.users.find(u=>u.id===n);Ce(l),l&&k.broadcast({type:"updated-user",data:{connectionId:t(),user:l}})},at=n=>{I.removeUser(t(),n);const l=v()?.settings.users;ne()?.id===n&&l&&l.length!==0&&Ce(l[0]),k.broadcast({type:"removed-user",data:{connectionId:t(),userId:n}})},it=n=>{xe(n),we(n.name)},lt=()=>{const n=Ue();if(!n||!be().trim())return;I.updateUser(t(),n.id,be().trim());const l=v()?.settings.users.find(u=>u.id===n.id);l&&k.broadcast({type:"updated-user",data:{connectionId:t(),user:l}}),xe(null),we("")},ot=(n,l,u)=>{I.updateScore(t(),n,l,u),k.broadcast({type:"updated-eateryScore",data:{connectionId:t(),eateryScore:{eateryId:l,userId:n,score:u,updatedAt:Date.now()}}})},_e=j(()=>v()?.settings.eateryScores.filter(n=>n.userId===ne()?.id)),dt=j(()=>(v()?.settings.eateryVetoes??[]).filter(n=>!n._deleted)),ct=(n,l)=>dt().some(u=>u.userId===n&&u.eateryId===l),ut=(n,l)=>{const u=I.toggleVeto(t(),n,l);u&&k.broadcast({type:"updated-eateryVeto",data:{connectionId:t(),eateryVeto:u}})},gt=()=>{const n=i().trim(),l=v();if(!l||!n||n===l.settings.connection.name)return;const u=Date.now();I.updateConnection(t(),n,u),k.broadcast({type:"updated-connection",data:{connectionId:t(),connection:{name:n,updatedAt:u}}})};return e(T,{get when(){return v()},fallback:null,get children(){var n=rn(),l=n.firstChild,u=l.firstChild,W=u.firstChild,ze=W.nextSibling,$e=u.nextSibling;return s(ze,e(Fe,{to:"/wheel/$connectionId",get params(){return{connectionId:t()}},get children(){return e(b,{variant:"outline",size:"sm",get children(){return[e(qt,{class:"w-4 h-4"}),"Back"]}})}}),null),s(ze,e(Fe,{to:"/",get children(){return e(b,{variant:"ghost",size:"icon",class:"w-9 h-9","data-testid":"home-button",get children(){return e(Ut,{class:"w-4 h-4"})}})}}),null),s(l,e(ge,{class:"food-card page-section",get children(){return[e(he,{class:"pb-3",get children(){return e(me,{class:"text-base",children:"Session Name"})}}),e(fe,{get children(){var a=Zt(),o=a.firstChild;return s(o,e(H,{get value(){return i()},onChange:g=>f(g),get children(){return e(q,{type:"text",id:"connection-name",placeholder:"Session name",class:"h-10","data-testid":"connection-name-input"})}})),s(a,e(b,{onClick:gt,"data-testid":"connection-name-save",size:"sm",get children(){return[e(ke,{class:"w-4 h-4"}),"Save"]}}),null),a}})]}}),$e),s($e,e(ge,{class:"food-card",get children(){return[e(he,{class:"pb-3",get children(){return e(me,{class:"flex items-center justify-between text-base",get children(){return[(()=>{var a=en(),o=a.firstChild,g=o.nextSibling;return g.nextSibling,s(a,()=>O().length,g),a})(),e(se,{get open(){return te()},onOpenChange:_,get children(){return[e(Ve,{get children(){return e(b,{size:"sm","data-testid":"add-eatery-open",get children(){return[e(ue,{class:"w-4 h-4"}),"Add"]}})}}),e(ae,{class:"sm:max-w-md",get children(){return[e(ie,{get children(){return[e(le,{children:"Add Restaurant"}),e(oe,{children:"Add a new restaurant to the session"})]}}),(()=>{var a=pe();return s(a,e(H,{get value(){return d()},onChange:o=>c(o),get children(){return[e(ee,{for:"eatery-name",class:"text-sm font-medium",children:"Restaurant Name *"}),e(q,{type:"text",id:"eatery-name",placeholder:"e.g., Pizza Palace",class:"h-10","data-testid":"add-eatery-name"})]}}),null),s(a,e(H,{get value(){return N()},onChange:o=>M(o),get children(){return[e(ee,{for:"eatery-cuisine",class:"text-sm font-medium",children:"Cuisine Type (Optional)"}),e(q,{type:"text",id:"eatery-cuisine",placeholder:"e.g., Italian, Chinese, Mexican",class:"h-10"})]}}),null),s(a,e(b,{onClick:et,class:"w-full","data-testid":"add-eatery-submit",get children(){return[e(ue,{class:"w-4 h-4"}),"Add Restaurant"]}}),null),a})()]}})]}})]}})}}),e(fe,{get children(){var a=Le();return s(a,e(T,{get when(){return O().length>0},get fallback(){return sn()},get children(){return e(de,{get each(){return O()},children:(o,g)=>(()=>{var y=an(),U=y.firstChild,z=U.firstChild,X=z.nextSibling,w=X.firstChild,V=U.nextSibling;return s(z,()=>o.name.charAt(0).toUpperCase()),s(w,()=>o.name),s(V,e(b,{size:"icon",variant:"ghost",onClick:()=>nt(o),"data-testid":"edit-eatery",class:"text-muted-foreground hover:text-primary hover:bg-primary/10 flex-shrink-0 w-8 h-8",get children(){return e(Ge,{class:"w-4 h-4"})}}),null),s(V,e(b,{size:"icon",variant:"ghost",onClick:()=>tt(o.id),"data-testid":"delete-eatery",class:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 flex-shrink-0 w-8 h-8",get children(){return e(Re,{class:"w-4 h-4"})}}),null),ce(x=>{var $=`animation-delay: ${g()*.03}s`,D=o.name;return x.e=Se(y,$,x.e),D!==x.t&&Ie(y,"data-eatery-name",x.t=D),x},{e:void 0,t:void 0}),y})()})}})),a}})]}}),null),s($e,e(ge,{class:"food-card",get children(){return[e(he,{class:"pb-3",get children(){return e(me,{class:"flex items-center justify-between text-base",get children(){return[(()=>{var a=tn(),o=a.firstChild,g=o.nextSibling;return g.nextSibling,s(a,()=>F().length,g),a})(),e(se,{get open(){return S()},onOpenChange:A,get children(){return[e(Ve,{get children(){return e(b,{size:"sm","data-testid":"add-user-open",get children(){return[e(ue,{class:"w-4 h-4"}),"Add"]}})}}),e(ae,{class:"sm:max-w-md",get children(){return[e(ie,{get children(){return[e(le,{children:"Add Person"}),e(oe,{children:"Add someone to rate and vote on restaurants"})]}}),(()=>{var a=pe();return s(a,e(H,{get value(){return K()},onChange:o=>p(o),get children(){return[e(ee,{for:"user-name",class:"text-sm font-medium",children:"Name *"}),e(q,{type:"text",id:"user-name",placeholder:"e.g., Alex",class:"h-10","data-testid":"add-user-name"})]}}),null),s(a,e(b,{onClick:st,class:"w-full","data-testid":"add-user-submit",get children(){return[e(ue,{class:"w-4 h-4"}),"Add Person"]}}),null),a})()]}})]}})]}})}}),e(fe,{get children(){var a=Le();return s(a,e(T,{get when(){return F().length>0},get fallback(){return ln()},get children(){return e(de,{get each(){return F()},children:(o,g)=>(()=>{var y=on(),U=y.firstChild,z=U.firstChild,X=z.nextSibling,w=X.firstChild,V=w.nextSibling,x=V.firstChild,$=U.nextSibling;return s(z,()=>o.name.charAt(0).toUpperCase()),s(w,()=>o.name),s(V,()=>_e()?.length??0,x),s($,e(b,{size:"icon",variant:"ghost",onClick:()=>it(o),"data-testid":"edit-user",class:"text-muted-foreground hover:text-primary hover:bg-primary/10 flex-shrink-0 w-8 h-8",get children(){return e(Ge,{class:"w-4 h-4"})}}),null),s($,e(b,{size:"icon",variant:"ghost",onClick:()=>at(o.id),"data-testid":"delete-user",class:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 flex-shrink-0 w-8 h-8",get children(){return e(Re,{class:"w-4 h-4"})}}),null),ce(D=>{var re=`animation-delay: ${g()*.03}s`,Y=o.name;return D.e=Se(y,re,D.e),Y!==D.t&&Ie(y,"data-user-name",D.t=Y),D},{e:void 0,t:void 0}),y})()})}})),a}})]}}),null),s(l,e(T,{get when(){return Ee(()=>F().length>0)()&&O().length>0},get children(){return e(ge,{class:"food-card page-section",get children(){return[e(he,{class:"pb-3",get children(){return e(me,{class:"text-base",children:"Rate Restaurants"})}}),e(fe,{get children(){var a=nn(),o=a.firstChild;return o.firstChild,s(o,e(Xt,{multiple:!1,get value(){return ne()?.id??null},onChange:g=>Ce(F().find(y=>y.id===g)),"data-testid":"user-selector",class:"flex flex-wrap gap-2",get children(){return e(de,{get each(){return F()},children:g=>e(Yt,{get value(){return g.id},class:"px-3 py-1.5 rounded-md border data-[pressed]:bg-primary data-[pressed]:text-primary-foreground data-[pressed]:border-primary transition-colors text-sm",get children(){return g.name}})})}}),null),s(a,e(T,{get when(){return ne()},children:g=>(()=>{var y=dn(),U=y.firstChild,z=U.firstChild;z.firstChild;var X=U.nextSibling;return s(z,()=>g().name,null),s(X,e(de,{get each(){return O()},children:(w,V)=>{const x=()=>ct(g().id,w.id);return(()=>{var $=hn(),D=$.firstChild,re=D.firstChild,Y=re.firstChild,Te=Y.nextSibling,ht=Te.firstChild,Me=re.nextSibling;return s(Y,()=>w.name.charAt(0).toUpperCase()),s(ht,()=>w.name),s(Te,e(T,{get when(){return x()},get children(){var h=cn(),R=h.firstChild;return s(h,e(je,{class:"w-3 h-3"}),R),h}}),null),s(Me,e(b,{size:"icon",get variant(){return x()?"destructive":"ghost"},onClick:()=>ut(g().id,w.id),get title(){return x()?"Remove never pick":"Never pick this place"},"data-testid":"veto-toggle",class:"w-8 h-8",get children(){return e(je,{class:"w-4 h-4"})}}),null),s(Me,e(T,{get when(){return!x()},get children(){var h=un();return s(h,()=>_e()?.find(R=>R.eateryId===w.id)?.score??0),h}}),null),s($,e(T,{get when(){return!x()},get fallback(){return mn()},get children(){var h=gn(),R=h.firstChild,Z=R.nextSibling;return Z.addEventListener("change",B=>ot(g().id,w.id,Number.parseInt(B.target.value))),Z.style.setProperty("background","linear-gradient(to right, oklch(0.85 0.04 250) 0%, oklch(0.6 0.12 45) 50%, oklch(0.55 0.16 45) 100%)"),ce(()=>Z.value=_e()?.find(B=>B.eateryId===w.id)?.score??0),h}}),null),ce(h=>{var R={"!border-destructive/50 !bg-destructive/5":x()},Z=`animation-delay: ${V()*.03}s`,B=w.name;return h.e=Kt($,R,h.e),h.t=Se($,Z,h.t),B!==h.a&&Ie($,"data-eatery-name",h.a=B),h},{e:void 0,t:void 0,a:void 0}),$})()}})),y})()}),null),a}})]}})}}),null),s(l,e(se,{get open(){return G()!==null},onOpenChange:a=>!a&&L(null),get children(){return e(ae,{class:"sm:max-w-md",get children(){return[e(ie,{get children(){return[e(le,{children:"Edit Restaurant"}),e(oe,{children:"Update the restaurant name"})]}}),(()=>{var a=pe();return s(a,e(H,{get value(){return Q()},onChange:o=>ye(o),get children(){return[e(ee,{for:"edit-eatery-name",class:"text-sm font-medium",children:"Restaurant Name *"}),e(q,{type:"text",id:"edit-eatery-name",placeholder:"e.g., Pizza Palace",class:"h-10","data-testid":"edit-eatery-name"})]}}),null),s(a,e(b,{onClick:rt,class:"w-full","data-testid":"edit-eatery-submit",get children(){return[e(ke,{class:"w-4 h-4"}),"Save Changes"]}}),null),a})()]}})}}),null),s(l,e(se,{get open(){return Ue()!==null},onOpenChange:a=>!a&&xe(null),get children(){return e(ae,{class:"sm:max-w-md",get children(){return[e(ie,{get children(){return[e(le,{children:"Edit Person"}),e(oe,{children:"Update the person's name"})]}}),(()=>{var a=pe();return s(a,e(H,{get value(){return be()},onChange:o=>we(o),get children(){return[e(ee,{for:"edit-user-name",class:"text-sm font-medium",children:"Name *"}),e(q,{type:"text",id:"edit-user-name",placeholder:"e.g., Alex",class:"h-10","data-testid":"edit-user-name"})]}}),null),s(a,e(b,{onClick:lt,class:"w-full","data-testid":"edit-user-submit",get children(){return[e(ke,{class:"w-4 h-4"}),"Save Changes"]}}),null),a})()]}})}}),null),n}})}export{xn as component};
