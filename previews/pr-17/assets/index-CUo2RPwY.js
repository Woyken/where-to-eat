const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/connect-to-D23FwqwU.js","assets/card-CoQVXD3B.js","assets/check-BGkHXVK6.js","assets/house-Cfqe6wTZ.js","assets/index-DC8gRpT7.js","assets/text-field-BC9anx8P.js","assets/trash-2-CkXypayi.js","assets/wheel._connectionId-BE_dsf1K.js","assets/UserSelectionDialog-CRhoj-gi.js","assets/settings._connectionId-CC7_8ofu.js"])))=>i.map(i=>d[i]);
function kd(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const X={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Di(this.context.count)},getNextContextId(){return Di(this.context.count++)}};function Di(e){const t=String(e),n=t.length-1;return X.context.id+(n?String.fromCharCode(96+n):"")+t}function Gn(e){X.context=e}const Td=!1,Rd=(e,t)=>e===t,st=Symbol("solid-proxy"),cc=typeof Proxy=="function",Xo=Symbol("solid-track"),Br={equals:Rd};let Qn=null,lc=mc;const Qe=1,nr=2,uc={owned:null,cleanups:null,context:null,owner:null},Po={};var Q=null;let F=null,Id=null,ie=null,Oe=null,_e=null,io=0;function wn(e,t){const n=ie,r=Q,o=e.length===0,s=t===void 0?r:t,i=o?uc:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=o?e:()=>e(()=>ye(()=>Ut(i)));Q=i,ie=null;try{return We(a,!0)}finally{ie=n,Q=r}}function j(e,t){t=t?Object.assign({},Br,t):Br;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(F&&F.running&&F.sources.has(n)?o=o(n.tValue):o=o(n.value)),gc(n,o));return[pc.bind(n),r]}function Kr(e,t,n){const r=dr(e,t,!0,Qe);Mn(r)}function Ie(e,t,n){const r=dr(e,t,!1,Qe);Mn(r)}function W(e,t,n){lc=Nd;const r=dr(e,t,!1,Qe),o=tn&&ge(tn);o&&(r.suspense=o),(!n||!n.render)&&(r.user=!0),_e?_e.push(r):Mn(r)}function H(e,t,n){n=n?Object.assign({},Br,n):Br;const r=dr(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Mn(r),pc.bind(r)}function Ed(e){return e&&typeof e=="object"&&"then"in e}function Hn(e,t,n){let r,o,s;typeof t=="function"?(r=e,o=t,s={}):(r=!0,o=e,s=t||{});let i=null,a=Po,c=null,l=!1,u=!1,d="initialValue"in s,f=typeof r=="function"&&H(r);const h=new Set,[p,m]=(s.storage||j)(s.initialValue),[g,y]=j(void 0),[v,b]=j(void 0,{equals:!1}),[w,P]=j(d?"ready":"unresolved");X.context&&(c=X.getNextContextId(),s.ssrLoadFrom==="initial"?a=s.initialValue:X.load&&X.has(c)&&(a=X.load(c)));function T(A,O,G,B){return i===A&&(i=null,B!==void 0&&(d=!0),(A===a||O===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(B,{value:O})),a=Po,F&&A&&l?(F.promises.delete(A),l=!1,We(()=>{F.running=!0,R(O,G)},!1)):R(O,G)),O}function R(A,O){We(()=>{O===void 0&&m(()=>A),P(O!==void 0?"errored":d?"ready":"unresolved"),y(O);for(const G of h.keys())G.decrement();h.clear()},!1)}function S(){const A=tn&&ge(tn),O=p(),G=g();if(G!==void 0&&!i)throw G;return ie&&!ie.user&&A&&Kr(()=>{v(),i&&(A.resolved&&F&&l?F.promises.add(i):h.has(A)||(A.increment(),h.add(A)))}),O}function C(A=!0){if(A!==!1&&u)return;u=!1;const O=f?f():r;if(l=F&&F.running,O==null||O===!1){T(i,ye(p));return}F&&i&&F.promises.delete(i);let G;const B=a!==Po?a:ye(()=>{try{return o(O,{value:p(),refetching:A})}catch(q){G=q}});if(G!==void 0){T(i,void 0,Ir(G),O);return}else if(!Ed(B))return T(i,B,void 0,O),B;return i=B,"v"in B?(B.s===1?T(i,B.v,void 0,O):T(i,void 0,Ir(B.v),O),B):(u=!0,queueMicrotask(()=>u=!1),We(()=>{P(d?"refreshing":"pending"),b()},!1),B.then(q=>T(B,q,void 0,O),q=>T(B,void 0,Ir(q),O)))}Object.defineProperties(S,{state:{get:()=>w()},error:{get:()=>g()},loading:{get(){const A=w();return A==="pending"||A==="refreshing"}},latest:{get(){if(!d)return S();const A=g();if(A&&!i)throw A;return p()}}});let L=Q;return f?Kr(()=>(L=Q,C(!1))):C(!1),[S,{refetch:A=>dc(L,()=>C(A)),mutate:m}]}function Md(e){return We(e,!1)}function ye(e){if(ie===null)return e();const t=ie;ie=null;try{return e()}finally{ie=t}}function lt(e,t,n){const r=Array.isArray(e);let o,s=n&&n.defer;return i=>{let a;if(r){a=Array(e.length);for(let l=0;l<e.length;l++)a[l]=e[l]()}else a=e();if(s)return s=!1,i;const c=ye(()=>t(a,o,i));return o=a,c}}function dt(e){W(()=>ye(e))}function Y(e){return Q===null||(Q.cleanups===null?Q.cleanups=[e]:Q.cleanups.push(e)),e}function Ld(e,t){Qn||(Qn=Symbol("error")),Q=dr(void 0,void 0,!0),Q.context={...Q.context,[Qn]:[t]},F&&F.running&&F.sources.add(Q);try{return e()}catch(n){fr(n)}finally{Q=Q.owner}}function Zo(){return ie}function Qo(){return Q}function dc(e,t){const n=Q,r=ie;Q=e,ie=null;try{return We(t,!0)}catch(o){fr(o)}finally{Q=n,ie=r}}function fc(e){if(F&&F.running)return e(),F.done;const t=ie,n=Q;return Promise.resolve().then(()=>{ie=t,Q=n;let r;return tn&&(r=F||(F={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),r.done||(r.done=new Promise(o=>r.resolve=o)),r.running=!0),We(e,!1),ie=Q=null,r?r.done:void 0})}const[Od,$i]=j(!1);function Ad(){return[Od,fc]}function Dd(e){_e.push.apply(_e,e),e.length=0}function ve(e,t){const n=Symbol("context");return{id:n,Provider:Bd(n),defaultValue:e}}function ge(e){let t;return Q&&Q.context&&(t=Q.context[e.id])!==void 0?t:e.defaultValue}function hc(e){const t=H(e),n=H(()=>es(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let tn;function $d(){return tn||(tn=ve())}function pc(){const e=F&&F.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===Qe)Mn(this);else{const t=Oe;Oe=null,We(()=>zr(this),!1),Oe=t}if(ie){const t=this.observers?this.observers.length:0;ie.sources?(ie.sources.push(this),ie.sourceSlots.push(t)):(ie.sources=[this],ie.sourceSlots=[t]),this.observers?(this.observers.push(ie),this.observerSlots.push(ie.sources.length-1)):(this.observers=[ie],this.observerSlots=[ie.sources.length-1])}return e&&F.sources.has(this)?this.tValue:this.value}function gc(e,t,n){let r=F&&F.running&&F.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(r,t)){if(F){const o=F.running;(o||!n&&F.sources.has(e))&&(F.sources.add(e),e.tValue=t),o||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&We(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],i=F&&F.running;i&&F.disposed.has(s)||((i?!s.tState:!s.state)&&(s.pure?Oe.push(s):_e.push(s),s.observers&&yc(s)),i?s.tState=Qe:s.state=Qe)}if(Oe.length>1e6)throw Oe=[],new Error},!1)}return t}function Mn(e){if(!e.fn)return;Ut(e);const t=io;Fi(e,F&&F.running&&F.sources.has(e)?e.tValue:e.value,t),F&&!F.running&&F.sources.has(e)&&queueMicrotask(()=>{We(()=>{F&&(F.running=!0),ie=Q=e,Fi(e,e.tValue,t),ie=Q=null},!1)})}function Fi(e,t,n){let r;const o=Q,s=ie;ie=Q=e;try{r=e.fn(t)}catch(i){return e.pure&&(F&&F.running?(e.tState=Qe,e.tOwned&&e.tOwned.forEach(Ut),e.tOwned=void 0):(e.state=Qe,e.owned&&e.owned.forEach(Ut),e.owned=null)),e.updatedAt=n+1,fr(i)}finally{ie=s,Q=o}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?gc(e,r,!0):F&&F.running&&e.pure?(F.sources.add(e),e.tValue=r):e.value=r,e.updatedAt=n)}function dr(e,t,n,r=Qe,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Q,context:Q?Q.context:null,pure:n};return F&&F.running&&(s.state=0,s.tState=r),Q===null||Q!==uc&&(F&&F.running&&Q.pure?Q.tOwned?Q.tOwned.push(s):Q.tOwned=[s]:Q.owned?Q.owned.push(s):Q.owned=[s]),s}function Ur(e){const t=F&&F.running;if((t?e.tState:e.state)===0)return;if((t?e.tState:e.state)===nr)return zr(e);if(e.suspense&&ye(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<io);){if(t&&F.disposed.has(e))return;(t?e.tState:e.state)&&n.push(e)}for(let r=n.length-1;r>=0;r--){if(e=n[r],t){let o=e,s=n[r+1];for(;(o=o.owner)&&o!==s;)if(F.disposed.has(o))return}if((t?e.tState:e.state)===Qe)Mn(e);else if((t?e.tState:e.state)===nr){const o=Oe;Oe=null,We(()=>zr(e,n[0]),!1),Oe=o}}}function We(e,t){if(Oe)return e();let n=!1;t||(Oe=[]),_e?n=!0:_e=[],io++;try{const r=e();return Fd(n),r}catch(r){n||(_e=null),Oe=null,fr(r)}}function Fd(e){if(Oe&&(mc(Oe),Oe=null),e)return;let t;if(F){if(!F.promises.size&&!F.queue.size){const r=F.sources,o=F.disposed;_e.push.apply(_e,F.effects),t=F.resolve;for(const s of _e)"tState"in s&&(s.state=s.tState),delete s.tState;F=null,We(()=>{for(const s of o)Ut(s);for(const s of r){if(s.value=s.tValue,s.owned)for(let i=0,a=s.owned.length;i<a;i++)Ut(s.owned[i]);s.tOwned&&(s.owned=s.tOwned),delete s.tValue,delete s.tOwned,s.tState=0}$i(!1)},!1)}else if(F.running){F.running=!1,F.effects.push.apply(F.effects,_e),_e=null,$i(!0);return}}const n=_e;_e=null,n.length&&We(()=>lc(n),!1),t&&t()}function mc(e){for(let t=0;t<e.length;t++)Ur(e[t])}function Nd(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Ur(r)}if(X.context){if(X.count){X.effects||(X.effects=[]),X.effects.push(...e.slice(0,n));return}Gn()}for(X.effects&&(X.done||!X.count)&&(e=[...X.effects,...e],n+=X.effects.length,delete X.effects),t=0;t<n;t++)Ur(e[t])}function zr(e,t){const n=F&&F.running;n?e.tState=0:e.state=0;for(let r=0;r<e.sources.length;r+=1){const o=e.sources[r];if(o.sources){const s=n?o.tState:o.state;s===Qe?o!==t&&(!o.updatedAt||o.updatedAt<io)&&Ur(o):s===nr&&zr(o,t)}}}function yc(e){const t=F&&F.running;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(t?!r.tState:!r.state)&&(t?r.tState=nr:r.state=nr,r.pure?Oe.push(r):_e.push(r),r.observers&&yc(r))}}function Ut(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Ut(e.tOwned[t]);delete e.tOwned}if(F&&F.running&&e.pure)vc(e,!0);else if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ut(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}F&&F.running?e.tState=0:e.state=0}function vc(e,t){if(t||(e.tState=0,F.disposed.add(e)),e.owned)for(let n=0;n<e.owned.length;n++)vc(e.owned[n])}function Ir(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Ni(e,t,n){try{for(const r of t)r(e)}catch(r){fr(r,n&&n.owner||null)}}function fr(e,t=Q){const n=Qn&&t&&t.context&&t.context[Qn],r=Ir(e);if(!n)throw r;_e?_e.push({fn(){Ni(r,n,t)},state:Qe}):Ni(r,n,t)}function es(e){if(typeof e=="function"&&!e.length)return es(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=es(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Bd(e,t){return function(r){let o;return Ie(()=>o=ye(()=>(Q.context={...Q.context,[e]:r.value},hc(()=>r.children))),void 0),o}}const Kd=Symbol("fallback");function Bi(e){for(let t=0;t<e.length;t++)e[t]()}function Ud(e,t,n={}){let r=[],o=[],s=[],i=0,a=t.length>1?[]:null;return Y(()=>Bi(s)),()=>{let c=e()||[],l=c.length,u,d;return c[Xo],ye(()=>{let h,p,m,g,y,v,b,w,P;if(l===0)i!==0&&(Bi(s),s=[],r=[],o=[],i=0,a&&(a=[])),n.fallback&&(r=[Kd],o[0]=wn(T=>(s[0]=T,n.fallback())),i=1);else if(i===0){for(o=new Array(l),d=0;d<l;d++)r[d]=c[d],o[d]=wn(f);i=l}else{for(m=new Array(l),g=new Array(l),a&&(y=new Array(l)),v=0,b=Math.min(i,l);v<b&&r[v]===c[v];v++);for(b=i-1,w=l-1;b>=v&&w>=v&&r[b]===c[w];b--,w--)m[w]=o[b],g[w]=s[b],a&&(y[w]=a[b]);for(h=new Map,p=new Array(w+1),d=w;d>=v;d--)P=c[d],u=h.get(P),p[d]=u===void 0?-1:u,h.set(P,d);for(u=v;u<=b;u++)P=r[u],d=h.get(P),d!==void 0&&d!==-1?(m[d]=o[u],g[d]=s[u],a&&(y[d]=a[u]),d=p[d],h.set(P,d)):s[u]();for(d=v;d<l;d++)d in m?(o[d]=m[d],s[d]=g[d],a&&(a[d]=y[d],a[d](d))):o[d]=wn(f);o=o.slice(0,i=l),r=c.slice(0)}return o});function f(h){if(s[d]=h,a){const[p,m]=j(d);return a[d]=m,t(c[d],p)}return t(c[d])}}}function x(e,t){return ye(()=>e(t||{}))}function br(){return!0}const ts={get(e,t,n){return t===st?n:e.get(t)},has(e,t){return t===st?!0:e.has(t)},set:br,deleteProperty:br,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:br,deleteProperty:br}},ownKeys(e){return e.keys()}};function ko(e){return(e=typeof e=="function"?e():e)?e:{}}function zd(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function K(...e){let t=!1;for(let i=0;i<e.length;i++){const a=e[i];t=t||!!a&&st in a,e[i]=typeof a=="function"?(t=!0,H(a)):a}if(cc&&t)return new Proxy({get(i){for(let a=e.length-1;a>=0;a--){const c=ko(e[a])[i];if(c!==void 0)return c}},has(i){for(let a=e.length-1;a>=0;a--)if(i in ko(e[a]))return!0;return!1},keys(){const i=[];for(let a=0;a<e.length;a++)i.push(...Object.keys(ko(e[a])));return[...new Set(i)]}},ts);const n={},r=Object.create(null);for(let i=e.length-1;i>=0;i--){const a=e[i];if(!a)continue;const c=Object.getOwnPropertyNames(a);for(let l=c.length-1;l>=0;l--){const u=c[l];if(u==="__proto__"||u==="constructor")continue;const d=Object.getOwnPropertyDescriptor(a,u);if(!r[u])r[u]=d.get?{enumerable:!0,configurable:!0,get:zd.bind(n[u]=[d.get.bind(a)])}:d.value!==void 0?d:void 0;else{const f=n[u];f&&(d.get?f.push(d.get.bind(a)):d.value!==void 0&&f.push(()=>d.value))}}}const o={},s=Object.keys(r);for(let i=s.length-1;i>=0;i--){const a=s[i],c=r[a];c&&c.get?Object.defineProperty(o,a,c):o[a]=c?c.value:void 0}return o}function Z(e,...t){const n=t.length;if(cc&&st in e){const o=n>1?t.flat():t[0],s=t.map(i=>new Proxy({get(a){return i.includes(a)?e[a]:void 0},has(a){return i.includes(a)&&a in e},keys(){return i.filter(a=>a in e)}},ts));return s.push(new Proxy({get(i){return o.includes(i)?void 0:e[i]},has(i){return o.includes(i)?!1:i in e},keys(){return Object.keys(e).filter(i=>!o.includes(i))}},ts)),s}const r=[];for(let o=0;o<=n;o++)r[o]={};for(const o of Object.getOwnPropertyNames(e)){let s=n;for(let c=0;c<t.length;c++)if(t[c].includes(o)){s=c;break}const i=Object.getOwnPropertyDescriptor(e,o);!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable?r[s][o]=i.value:Object.defineProperty(r[s],o,i)}return r}let jd=0;function kt(){return X.context?X.getNextContextId():`cl-${jd++}`}const bc=e=>`Stale read from <${e}>.`;function xc(e){const t="fallback"in e&&{fallback:()=>e.fallback};return H(Ud(()=>e.each,e.children,t||void 0))}function Se(e){const t=e.keyed,n=H(()=>e.when,void 0,void 0),r=t?n:H(n,void 0,{equals:(o,s)=>!o==!s});return H(()=>{const o=r();if(o){const s=e.children;return typeof s=="function"&&s.length>0?ye(()=>s(t?o:()=>{if(!ye(r))throw bc("Show");return n()})):s}return e.fallback},void 0,void 0)}function Sc(e){const t=hc(()=>e.children),n=H(()=>{const r=t(),o=Array.isArray(r)?r:[r];let s=()=>{};for(let i=0;i<o.length;i++){const a=i,c=o[i],l=s,u=H(()=>l()?void 0:c.when,void 0,void 0),d=c.keyed?u:H(u,void 0,{equals:(f,h)=>!f==!h});s=()=>l()||(d()?[a,u,c]:void 0)}return s});return H(()=>{const r=n()();if(!r)return e.fallback;const[o,s,i]=r,a=i.children;return typeof a=="function"&&a.length>0?ye(()=>a(i.keyed?s():()=>{if(ye(n)()?.[0]!==o)throw bc("Match");return s()})):a},void 0,void 0)}function St(e){return e}let xr;function Vd(e){let t;X.context&&X.load&&(t=X.load(X.getContextId()));const[n,r]=j(t,void 0);return xr||(xr=new Set),xr.add(r),Y(()=>xr.delete(r)),H(()=>{let o;if(o=n()){const s=e.fallback;return typeof s=="function"&&s.length?ye(()=>s(o,()=>r())):s}return Ld(()=>e.children,r)},void 0,void 0)}const Wd=ve();function Ds(e){let t=0,n,r,o,s,i;const[a,c]=j(!1),l=$d(),u={increment:()=>{++t===1&&c(!0)},decrement:()=>{--t===0&&c(!1)},inFallback:a,effects:[],resolved:!1},d=Qo();if(X.context&&X.load){const p=X.getContextId();let m=X.load(p);if(m&&(typeof m!="object"||m.s!==1?o=m:X.gather(p)),o&&o!=="$$f"){const[g,y]=j(void 0,{equals:!1});s=g,o.then(()=>{if(X.done)return y();X.gather(p),Gn(r),y(),Gn()},v=>{i=v,y()})}}const f=ge(Wd);f&&(n=f.register(u.inFallback));let h;return Y(()=>h&&h()),x(l.Provider,{value:u,get children(){return H(()=>{if(i)throw i;if(r=X.context,s)return s(),s=void 0;r&&o==="$$f"&&Gn();const p=H(()=>e.children);return H(m=>{const g=u.inFallback(),{showContent:y=!0,showFallback:v=!0}=n?n():{};if((!g||o&&o!=="$$f")&&y)return u.resolved=!0,h&&h(),h=r=o=void 0,Dd(u.effects),p();if(v)return h?m:wn(b=>(h=b,r&&(Gn({id:r.id+"F",count:0}),r=void 0),e.fallback),d)})})}})}const Gd=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],Hd=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Gd]),qd=new Set(["innerHTML","textContent","innerText","children"]),Yd=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Jd=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Xd(e,t){const n=Jd[e];return typeof n=="object"?n[t]?n.$:void 0:n}const Zd=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Qd=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),ef={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},pe=e=>H(()=>e());function tf(e,t,n){let r=n.length,o=t.length,s=r,i=0,a=0,c=t[o-1].nextSibling,l=null;for(;i<o||a<s;){if(t[i]===n[a]){i++,a++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const u=s<r?a?n[a-1].nextSibling:n[s-a]:c;for(;a<s;)e.insertBefore(n[a++],u)}else if(s===a)for(;i<o;)(!l||!l.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[a]===t[o-1]){const u=t[--o].nextSibling;e.insertBefore(n[a++],t[i++].nextSibling),e.insertBefore(n[--s],u),t[o]=n[s]}else{if(!l){l=new Map;let d=a;for(;d<s;)l.set(n[d],d++)}const u=l.get(t[i]);if(u!=null)if(a<u&&u<s){let d=i,f=1,h;for(;++d<o&&d<s&&!((h=l.get(t[d]))==null||h!==u+f);)f++;if(f>u-a){const p=t[i];for(;a<u;)e.insertBefore(n[a++],p)}else e.replaceChild(n[a++],t[i++])}else i++;else t[i++].remove()}}}const Ki="_$DX_DELEGATE";function nf(e,t,n,r={}){let o;return wn(s=>{o=s,t===document?e():te(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function ee(e,t,n,r){let o;const s=()=>{const a=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return a.innerHTML=e,n?a.content.firstChild.firstChild:r?a.firstChild:a.content.firstChild},i=t?()=>ye(()=>document.importNode(o||(o=s()),!0)):()=>(o||(o=s())).cloneNode(!0);return i.cloneNode=i,i}function ao(e,t=window.document){const n=t[Ki]||(t[Ki]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,hf))}}function zt(e,t,n){an(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function rf(e,t,n,r){an(e)||(r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r))}function of(e,t,n){an(e)||(n?e.setAttribute(t,""):e.removeAttribute(t))}function ns(e,t){an(e)||(t==null?e.removeAttribute("class"):e.className=t)}function sf(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const o=n[0];e.addEventListener(t,n[0]=s=>o.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}function af(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let s,i;for(s=0,i=o.length;s<i;s++){const a=o[s];!a||a==="undefined"||t[a]||(Ui(e,a,!1),delete n[a])}for(s=0,i=r.length;s<i;s++){const a=r[s],c=!!t[a];!a||a==="undefined"||n[a]===c||!c||(Ui(e,a,!0),n[a]=c)}return n}function cf(e,t,n){if(!t)return n?zt(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function co(e,t={},n,r){const o={};return r||Ie(()=>o.children=rr(e,t.children,o.children)),Ie(()=>typeof t.ref=="function"&&lf(t.ref,e)),Ie(()=>uf(e,t,n,!0,o,!0)),o}function lf(e,t,n){return ye(()=>e(t,n))}function te(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return rr(e,t,r,n);Ie(o=>rr(e,t(),o,n),r)}function uf(e,t,n,r,o={},s=!1){t||(t={});for(const i in o)if(!(i in t)){if(i==="children")continue;o[i]=zi(e,i,null,o[i],n,s,t)}for(const i in t){if(i==="children")continue;const a=t[i];o[i]=zi(e,i,a,o[i],n,s,t)}}function df(e){let t,n;return!an()||!(t=X.registry.get(n=pf()))?e():(X.completed&&X.completed.add(t),X.registry.delete(n),t)}function an(e){return!!X.context&&!X.done&&(!e||e.isConnected)}function ff(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Ui(e,t,n){const r=t.trim().split(/\s+/);for(let o=0,s=r.length;o<s;o++)e.classList.toggle(r[o],n)}function zi(e,t,n,r,o,s,i){let a,c,l,u,d;if(t==="style")return cf(e,n,r);if(t==="classList")return af(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const f=t.slice(3);r&&e.removeEventListener(f,r,typeof r!="function"&&r),n&&e.addEventListener(f,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const f=t.slice(10);r&&e.removeEventListener(f,r,!0),n&&e.addEventListener(f,n,!0)}else if(t.slice(0,2)==="on"){const f=t.slice(2).toLowerCase(),h=Zd.has(f);if(!h&&r){const p=Array.isArray(r)?r[0]:r;e.removeEventListener(f,p)}(h||n)&&(sf(e,f,n,h),h&&ao([f]))}else if(t.slice(0,5)==="attr:")zt(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")of(e,t.slice(5),n);else if((d=t.slice(0,5)==="prop:")||(l=qd.has(t))||!o&&((u=Xd(t,e.tagName))||(c=Hd.has(t)))||(a=e.nodeName.includes("-")||"is"in i)){if(d)t=t.slice(5),c=!0;else if(an(e))return n;t==="class"||t==="className"?ns(e,n):a&&!c&&!l?e[ff(t)]=n:e[u||t]=n}else{const f=o&&t.indexOf(":")>-1&&ef[t.split(":")[0]];f?rf(e,f,t,n):zt(e,Yd[t]||t,n)}return n}function hf(e){if(X.registry&&X.events&&X.events.find(([c,l])=>l===e))return;let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,s=c=>Object.defineProperty(e,"target",{configurable:!0,value:c}),i=()=>{const c=t[n];if(c&&!t.disabled){const l=t[`${n}Data`];if(l!==void 0?c.call(t,l,e):c.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},a=()=>{for(;i()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),X.registry&&!X.done&&(X.done=_$HY.done=!0),e.composedPath){const c=e.composedPath();s(c[0]);for(let l=0;l<c.length-2&&(t=c[l],!!i());l++){if(t._$host){t=t._$host,a();break}if(t.parentNode===o)break}}else a();s(r)}function rr(e,t,n,r,o){const s=an(e);if(s){!n&&(n=[...e.childNodes]);let c=[];for(let l=0;l<n.length;l++){const u=n[l];u.nodeType===8&&u.data.slice(0,2)==="!$"?u.remove():c.push(u)}n=c}for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(s||i==="number"&&(t=t.toString(),t===n))return n;if(a){let c=n[0];c&&c.nodeType===3?c.data!==t&&(c.data=t):c=document.createTextNode(t),n=pn(e,n,r,c)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean"){if(s)return n;n=pn(e,n,r)}else{if(i==="function")return Ie(()=>{let c=t();for(;typeof c=="function";)c=c();n=rr(e,c,n,r)}),()=>n;if(Array.isArray(t)){const c=[],l=n&&Array.isArray(n);if(rs(c,t,n,o))return Ie(()=>n=rr(e,c,n,r,!0)),()=>n;if(s){if(!c.length)return n;if(r===void 0)return n=[...e.childNodes];let u=c[0];if(u.parentNode!==e)return n;const d=[u];for(;(u=u.nextSibling)!==r;)d.push(u);return n=d}if(c.length===0){if(n=pn(e,n,r),a)return n}else l?n.length===0?ji(e,c,r):tf(e,n,c):(n&&pn(e),ji(e,c));n=c}else if(t.nodeType){if(s&&t.parentNode)return n=a?[t]:t;if(Array.isArray(n)){if(a)return n=pn(e,n,r,t);pn(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function rs(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let a=t[s],c=n&&n[e.length],l;if(!(a==null||a===!0||a===!1))if((l=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))o=rs(e,a,c)||o;else if(l==="function")if(r){for(;typeof a=="function";)a=a();o=rs(e,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||o}else e.push(a),o=!0;else{const u=String(a);c&&c.nodeType===3&&c.data===u?e.push(c):e.push(document.createTextNode(u))}}return o}function ji(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function pn(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const a=t[i];if(o!==a){const c=a.parentNode===e;!s&&!i?c?e.replaceChild(o,a):e.insertBefore(o,n):c&&a.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}function pf(){return X.getNextContextId()}const gf="http://www.w3.org/2000/svg";function wc(e,t=!1,n=void 0){return t?document.createElementNS(gf,e):document.createElement(e,{is:n})}function Cc(e){const{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,o=Qo();let s,i=!!X.context;return W(()=>{i&&(Qo().user=i=!1),s||(s=dc(o,()=>H(()=>e.children)));const a=r();if(a instanceof HTMLHeadElement){const[c,l]=j(!1),u=()=>l(!0);wn(d=>te(a,()=>c()?d():s(),null)),Y(u)}else{const c=wc(e.isSVG?"g":"div",e.isSVG),l=t&&c.attachShadow?c.attachShadow({mode:"open"}):c;Object.defineProperty(c,"_$host",{get(){return n.parentNode},configurable:!0}),te(l,s),a.appendChild(c),e.ref&&e.ref(c),Y(()=>a.removeChild(c))}},void 0,{render:!i}),n}function mf(e,t){const n=H(e);return H(()=>{const r=n();switch(typeof r){case"function":return ye(()=>r(t));case"string":const o=Qd.has(r),s=X.context?df():wc(r,o,ye(()=>t.is));return co(s,t,o),s}})}function Ke(e){const[,t]=Z(e,["component"]);return mf(()=>e.component,t)}const os=new WeakMap,yf=new WeakMap,jr={current:[]};let To=!1,er=0;const qn=new Set,Sr=new Map;function _c(e){for(const t of e){if(jr.current.includes(t))continue;jr.current.push(t),t.recompute();const n=yf.get(t);if(n)for(const r of n){const o=os.get(r);o?.length&&_c(o)}}}function vf(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function bf(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function Pc(e){if(er>0&&!Sr.has(e)&&Sr.set(e,e.prevState),qn.add(e),!(er>0)&&!To)try{for(To=!0;qn.size>0;){const t=Array.from(qn);qn.clear();for(const n of t){const r=Sr.get(n)??n.prevState;n.prevState=r,vf(n)}for(const n of t){const r=os.get(n);r&&(jr.current.push(n),_c(r))}for(const n of t){const r=os.get(n);if(r)for(const o of r)bf(o)}}}finally{To=!1,jr.current=[],Sr.clear()}}function tr(e){er++;try{e()}finally{if(er--,er===0){const t=qn.values().next().value;t&&Pc(t)}}}function xf(e){return typeof e=="function"}class Sf{constructor(t,n){this.listeners=new Set,this.subscribe=r=>{var o,s;this.listeners.add(r);const i=(s=(o=this.options)==null?void 0:o.onSubscribe)==null?void 0:s.call(o,r,this);return()=>{this.listeners.delete(r),i?.()}},this.prevState=t,this.state=t,this.options=n}setState(t){var n,r,o;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(t):xf(t)?this.state=t(this.prevState):this.state=t,(o=(r=this.options)==null?void 0:r.onUpdate)==null||o.call(r),Pc(this)}}const Ft="__TSR_index",Vi="popstate",Wi="beforeunload";function wf(e){let t=e.getLocation();const n=new Set,r=i=>{t=e.getLocation(),n.forEach(a=>a({location:t,action:i}))},o=i=>{e.notifyOnIndexChange??!0?r(i):t=e.getLocation()},s=async({task:i,navigateOpts:a,...c})=>{if(a?.ignoreBlocker??!1){i();return}const u=e.getBlockers?.()??[],d=c.type==="PUSH"||c.type==="REPLACE";if(typeof document<"u"&&u.length&&d)for(const f of u){const h=Vr(c.path,c.state);if(await f.blockerFn({currentLocation:t,nextLocation:h,action:c.type})){e.onBlocked?.();return}}i()};return{get location(){return t},get length(){return e.getLength()},subscribers:n,subscribe:i=>(n.add(i),()=>{n.delete(i)}),push:(i,a,c)=>{const l=t.state[Ft];a=Gi(l+1,a),s({task:()=>{e.pushState(i,a),r({type:"PUSH"})},navigateOpts:c,type:"PUSH",path:i,state:a})},replace:(i,a,c)=>{const l=t.state[Ft];a=Gi(l,a),s({task:()=>{e.replaceState(i,a),r({type:"REPLACE"})},navigateOpts:c,type:"REPLACE",path:i,state:a})},go:(i,a)=>{s({task:()=>{e.go(i),o({type:"GO",index:i})},navigateOpts:a,type:"GO"})},back:i=>{s({task:()=>{e.back(i?.ignoreBlocker??!1),o({type:"BACK"})},navigateOpts:i,type:"BACK"})},forward:i=>{s({task:()=>{e.forward(i?.ignoreBlocker??!1),o({type:"FORWARD"})},navigateOpts:i,type:"FORWARD"})},canGoBack:()=>t.state[Ft]!==0,createHref:i=>e.createHref(i),block:i=>{if(!e.setBlockers)return()=>{};const a=e.getBlockers?.()??[];return e.setBlockers([...a,i]),()=>{const c=e.getBlockers?.()??[];e.setBlockers?.(c.filter(l=>l!==i))}},flush:()=>e.flush?.(),destroy:()=>e.destroy?.(),notify:r}}function Gi(e,t){t||(t={});const n=$s();return{...t,key:n,__TSR_key:n,[Ft]:e}}function Cf(e){const t=typeof document<"u"?window:void 0,n=t.history.pushState,r=t.history.replaceState;let o=[];const s=()=>o,i=S=>o=S,a=(S=>S),c=(()=>Vr(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state));if(!t.history.state?.__TSR_key&&!t.history.state?.key){const S=$s();t.history.replaceState({[Ft]:0,key:S,__TSR_key:S},"")}let l=c(),u,d=!1,f=!1,h=!1,p=!1;const m=()=>l;let g,y;const v=()=>{g&&(R._ignoreSubscribers=!0,(g.isPush?t.history.pushState:t.history.replaceState)(g.state,"",g.href),R._ignoreSubscribers=!1,g=void 0,y=void 0,u=void 0)},b=(S,C,L)=>{const A=a(C);y||(u=l),l=Vr(C,L),g={href:A,state:L,isPush:g?.isPush||S==="push"},y||(y=Promise.resolve().then(()=>v()))},w=S=>{l=c(),R.notify({type:S})},P=async()=>{if(f){f=!1;return}const S=c(),C=S.state[Ft]-l.state[Ft],L=C===1,A=C===-1,O=!L&&!A||d;d=!1;const G=O?"GO":A?"BACK":"FORWARD",B=O?{type:"GO",index:C}:{type:A?"BACK":"FORWARD"};if(h)h=!1;else{const q=s();if(typeof document<"u"&&q.length){for(const ne of q)if(await ne.blockerFn({currentLocation:l,nextLocation:S,action:G})){f=!0,t.history.go(1),R.notify(B);return}}}l=c(),R.notify(B)},T=S=>{if(p){p=!1;return}let C=!1;const L=s();if(typeof document<"u"&&L.length)for(const A of L){const O=A.enableBeforeUnload??!0;if(O===!0){C=!0;break}if(typeof O=="function"&&O()===!0){C=!0;break}}if(C)return S.preventDefault(),S.returnValue=""},R=wf({getLocation:m,getLength:()=>t.history.length,pushState:(S,C)=>b("push",S,C),replaceState:(S,C)=>b("replace",S,C),back:S=>(S&&(h=!0),p=!0,t.history.back()),forward:S=>{S&&(h=!0),p=!0,t.history.forward()},go:S=>{d=!0,t.history.go(S)},createHref:S=>a(S),flush:v,destroy:()=>{t.history.pushState=n,t.history.replaceState=r,t.removeEventListener(Wi,T,{capture:!0}),t.removeEventListener(Vi,P)},onBlocked:()=>{u&&l!==u&&(l=u)},getBlockers:s,setBlockers:i,notifyOnIndexChange:!1});return t.addEventListener(Wi,T,{capture:!0}),t.addEventListener(Vi,P),t.history.pushState=function(...S){const C=n.apply(t.history,S);return R._ignoreSubscribers||w("PUSH"),C},t.history.replaceState=function(...S){const C=r.apply(t.history,S);return R._ignoreSubscribers||w("REPLACE"),C},R}function _f(e){let t=e.replace(/[\x00-\x1f\x7f]/g,"");return t.startsWith("//")&&(t="/"+t.replace(/^\/+/,"")),t}function Vr(e,t){const n=_f(e),r=n.indexOf("#"),o=n.indexOf("?"),s=$s();return{href:n,pathname:n.substring(0,r>0?o>0?Math.min(r,o):r:o>0?o:n.length),hash:r>-1?n.substring(r):"",search:o>-1?n.slice(o,r===-1?void 0:r):"",state:t||{[Ft]:0,key:s,__TSR_key:s}}}function $s(){return(Math.random()+1).toString(36).substring(7)}function Wr(e){return e[e.length-1]}function Pf(e){return typeof e=="function"}function Ot(e,t){return Pf(e)?e(t):e}const kf=Object.prototype.hasOwnProperty;function nt(e,t){if(e===t)return e;const n=t,r=Yi(e)&&Yi(n);if(!r&&!(Gr(e)&&Gr(n)))return n;const o=r?e:Hi(e);if(!o)return n;const s=r?n:Hi(n);if(!s)return n;const i=o.length,a=s.length,c=r?new Array(a):{};let l=0;for(let u=0;u<a;u++){const d=r?u:s[u],f=e[d],h=n[d];if(f===h){c[d]=f,(r?u<i:kf.call(e,d))&&l++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){c[d]=h;continue}const p=nt(f,h);c[d]=p,p===f&&l++}return i===a&&l===i?e:c}function Hi(e){const t=[],n=Object.getOwnPropertyNames(e);for(const o of n){if(!Object.prototype.propertyIsEnumerable.call(e,o))return!1;t.push(o)}const r=Object.getOwnPropertySymbols(e);for(const o of r){if(!Object.prototype.propertyIsEnumerable.call(e,o))return!1;t.push(o)}return t}function Gr(e){if(!qi(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!qi(n)||!n.hasOwnProperty("isPrototypeOf"))}function qi(e){return Object.prototype.toString.call(e)==="[object Object]"}function Yi(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Zt(e,t,n){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0,o=e.length;r<o;r++)if(!Zt(e[r],t[r],n))return!1;return!0}if(Gr(e)&&Gr(t)){const r=n?.ignoreUndefined??!0;if(n?.partial){for(const i in t)if((!r||t[i]!==void 0)&&!Zt(e[i],t[i],n))return!1;return!0}let o=0;if(!r)o=Object.keys(e).length;else for(const i in e)e[i]!==void 0&&o++;let s=0;for(const i in t)if((!r||t[i]!==void 0)&&(s++,s>o||!Zt(e[i],t[i],n)))return!1;return o===s}return!1}function kn(e){let t,n;const r=new Promise((o,s)=>{t=o,n=s});return r.status="pending",r.resolve=o=>{r.status="resolved",r.value=o,t(o),e?.(o)},r.reject=o=>{r.status="rejected",n(o)},r}function Tf(e){return typeof e?.message!="string"?!1:e.message.startsWith("Failed to fetch dynamically imported module")||e.message.startsWith("error loading dynamically imported module")||e.message.startsWith("Importing a module script failed")}function Nt(e){return!!(e&&typeof e=="object"&&typeof e.then=="function")}function Rf(e){return e.replace(/[\x00-\x1f\x7f]/g,"")}function Ji(e){let t;try{t=decodeURI(e)}catch{t=e.replaceAll(/%[0-9A-F]{2}/gi,n=>{try{return decodeURI(n)}catch{return n}})}return Rf(t)}const kc=["http:","https:","mailto:","tel:"];function Hr(e){if(!e)return!1;try{const t=new URL(e);return!kc.includes(t.protocol)}catch{return!1}}const If={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},Ef=/[&><\u2028\u2029]/g;function Mf(e){return e.replace(Ef,t=>If[t])}function Xi(e,t){if(!e)return e;const n=/%25|%5C/gi;let r=0,o="",s;for(;(s=n.exec(e))!==null;)o+=Ji(e.slice(r,s.index))+s[0],r=n.lastIndex;return o=o+Ji(r?e.slice(r):e),o.startsWith("//")&&(o="/"+o.replace(/^\/+/,"")),o}var Lf="Invariant failed";function nn(e,t){if(!e)throw new Error(Lf)}function qr(e){const t=new Map;let n,r;const o=s=>{s.next&&(s.prev?(s.prev.next=s.next,s.next.prev=s.prev,s.next=void 0,r&&(r.next=s,s.prev=r)):(s.next.prev=void 0,n=s.next,s.next=void 0,r&&(s.prev=r,r.next=s)),r=s)};return{get(s){const i=t.get(s);if(i)return o(i),i.value},set(s,i){if(t.size>=e&&n){const c=n;t.delete(c.key),c.next&&(n=c.next,c.next.prev=void 0),c===r&&(r=void 0)}const a=t.get(s);if(a)a.value=i,o(a);else{const c={key:s,value:i,prev:r};r&&(r.next=c),r=c,n||(n=c),t.set(s,c)}},clear(){t.clear(),n=void 0,r=void 0}}}const Tn=0,rn=1,on=2,or=3,Sn=4,Of=5,Af=/^([^{]*)\{\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,Df=/^([^{]*)\{-\$([a-zA-Z_$][a-zA-Z0-9_$]*)\}([^}]*)$/,$f=/^([^{]*)\{\$\}([^}]*)$/;function Fs(e,t,n=new Uint16Array(6)){const r=e.indexOf("/",t),o=r===-1?e.length:r,s=e.substring(t,o);if(!s||!s.includes("$"))return n[0]=Tn,n[1]=t,n[2]=t,n[3]=o,n[4]=o,n[5]=o,n;if(s==="$"){const l=e.length;return n[0]=on,n[1]=t,n[2]=t,n[3]=l,n[4]=l,n[5]=l,n}if(s.charCodeAt(0)===36)return n[0]=rn,n[1]=t,n[2]=t+1,n[3]=o,n[4]=o,n[5]=o,n;const i=s.match($f);if(i){const u=i[1].length;return n[0]=on,n[1]=t+u,n[2]=t+u+1,n[3]=t+u+2,n[4]=t+u+3,n[5]=e.length,n}const a=s.match(Df);if(a){const l=a[1],u=a[2],d=a[3],f=l.length;return n[0]=or,n[1]=t+f,n[2]=t+f+3,n[3]=t+f+3+u.length,n[4]=o-d.length,n[5]=o,n}const c=s.match(Af);if(c){const l=c[1],u=c[2],d=c[3],f=l.length;return n[0]=rn,n[1]=t+f,n[2]=t+f+2,n[3]=t+f+2+u.length,n[4]=o-d.length,n[5]=o,n}return n[0]=Tn,n[1]=t,n[2]=t,n[3]=o,n[4]=o,n[5]=o,n}function lo(e,t,n,r,o,s,i){i?.(n);let a=r;{const c=n.fullPath??n.from,l=c.length,u=n.options?.caseSensitive??e,d=!!(n.options?.params?.parse&&n.options?.skipRouteOnParseError?.params);for(;a<l;){const h=Fs(c,a,t);let p;const m=a,g=h[5];switch(a=g+1,s++,h[0]){case Tn:{const v=c.substring(h[2],h[3]);if(u){const b=o.static?.get(v);if(b)p=b;else{o.static??=new Map;const w=Jt(n.fullPath??n.from);w.parent=o,w.depth=s,p=w,o.static.set(v,w)}}else{const b=v.toLowerCase(),w=o.staticInsensitive?.get(b);if(w)p=w;else{o.staticInsensitive??=new Map;const P=Jt(n.fullPath??n.from);P.parent=o,P.depth=s,p=P,o.staticInsensitive.set(b,P)}}break}case rn:{const v=c.substring(m,h[1]),b=c.substring(h[4],g),w=u&&!!(v||b),P=v?w?v:v.toLowerCase():void 0,T=b?w?b:b.toLowerCase():void 0,R=!d&&o.dynamic?.find(S=>!S.skipOnParamError&&S.caseSensitive===w&&S.prefix===P&&S.suffix===T);if(R)p=R;else{const S=Io(rn,n.fullPath??n.from,w,P,T);p=S,S.depth=s,S.parent=o,o.dynamic??=[],o.dynamic.push(S)}break}case or:{const v=c.substring(m,h[1]),b=c.substring(h[4],g),w=u&&!!(v||b),P=v?w?v:v.toLowerCase():void 0,T=b?w?b:b.toLowerCase():void 0,R=!d&&o.optional?.find(S=>!S.skipOnParamError&&S.caseSensitive===w&&S.prefix===P&&S.suffix===T);if(R)p=R;else{const S=Io(or,n.fullPath??n.from,w,P,T);p=S,S.parent=o,S.depth=s,o.optional??=[],o.optional.push(S)}break}case on:{const v=c.substring(m,h[1]),b=c.substring(h[4],g),w=u&&!!(v||b),P=v?w?v:v.toLowerCase():void 0,T=b?w?b:b.toLowerCase():void 0,R=Io(on,n.fullPath??n.from,w,P,T);p=R,R.parent=o,R.depth=s,o.wildcard??=[],o.wildcard.push(R)}}o=p}if(d&&n.children&&!n.isRoot&&n.id&&n.id.charCodeAt(n.id.lastIndexOf("/")+1)===95){const h=Jt(n.fullPath??n.from);h.kind=Of,h.parent=o,s++,h.depth=s,o.pathless??=[],o.pathless.push(h),o=h}const f=(n.path||!n.children)&&!n.isRoot;if(f&&c.endsWith("/")){const h=Jt(n.fullPath??n.from);h.kind=Sn,h.parent=o,s++,h.depth=s,o.index=h,o=h}o.parse=n.options?.params?.parse??null,o.skipOnParamError=d,o.parsingPriority=n.options?.skipRouteOnParseError?.priority??0,f&&!o.route&&(o.route=n,o.fullPath=n.fullPath??n.from)}if(n.children)for(const c of n.children)lo(e,t,c,a,o,s,i)}function Ro(e,t){if(e.skipOnParamError&&!t.skipOnParamError)return-1;if(!e.skipOnParamError&&t.skipOnParamError)return 1;if(e.skipOnParamError&&t.skipOnParamError&&(e.parsingPriority||t.parsingPriority))return t.parsingPriority-e.parsingPriority;if(e.prefix&&t.prefix&&e.prefix!==t.prefix){if(e.prefix.startsWith(t.prefix))return-1;if(t.prefix.startsWith(e.prefix))return 1}if(e.suffix&&t.suffix&&e.suffix!==t.suffix){if(e.suffix.endsWith(t.suffix))return-1;if(t.suffix.endsWith(e.suffix))return 1}return e.prefix&&!t.prefix?-1:!e.prefix&&t.prefix?1:e.suffix&&!t.suffix?-1:!e.suffix&&t.suffix?1:e.caseSensitive&&!t.caseSensitive?-1:!e.caseSensitive&&t.caseSensitive?1:0}function Lt(e){if(e.pathless)for(const t of e.pathless)Lt(t);if(e.static)for(const t of e.static.values())Lt(t);if(e.staticInsensitive)for(const t of e.staticInsensitive.values())Lt(t);if(e.dynamic?.length){e.dynamic.sort(Ro);for(const t of e.dynamic)Lt(t)}if(e.optional?.length){e.optional.sort(Ro);for(const t of e.optional)Lt(t)}if(e.wildcard?.length){e.wildcard.sort(Ro);for(const t of e.wildcard)Lt(t)}}function Jt(e){return{kind:Tn,depth:0,pathless:null,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null,parse:null,skipOnParamError:!1,parsingPriority:0}}function Io(e,t,n,r,o){return{kind:e,depth:0,pathless:null,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null,parse:null,skipOnParamError:!1,parsingPriority:0,caseSensitive:n,prefix:r,suffix:o}}function Ff(e,t){const n=Jt("/"),r=new Uint16Array(6);for(const o of e)lo(!1,r,o,1,n,0);Lt(n),t.masksTree=n,t.flatCache=qr(1e3)}function Nf(e,t){e||="/";const n=t.flatCache.get(e);if(n)return n;const r=Ns(e,t.masksTree);return t.flatCache.set(e,r),r}function Bf(e,t,n,r,o){e||="/",r||="/";const s=t?`case\0${e}`:e;let i=o.singleCache.get(s);if(!i){i=Jt("/");const a=new Uint16Array(6);lo(t,a,{from:e},1,i,0),o.singleCache.set(s,i)}return Ns(r,i,n)}function Kf(e,t,n=!1){const r=n?e:`nofuzz\0${e}`,o=t.matchCache.get(r);if(o!==void 0)return o;e||="/";const s=Ns(e,t.segmentTree,n);return s&&(s.branch=jf(s.route)),t.matchCache.set(r,s),s}function Uf(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function zf(e,t=!1,n){const r=Jt(e.fullPath),o=new Uint16Array(6),s={},i={};let a=0;return lo(t,o,e,1,r,0,l=>{if(n?.(l,a),nn(!(l.id in s),`Duplicate routes found with id: ${String(l.id)}`),s[l.id]=l,a!==0&&l.path){const u=Uf(l.fullPath);(!i[u]||l.fullPath.endsWith("/"))&&(i[u]=l)}a++}),Lt(r),{processedTree:{segmentTree:r,singleCache:qr(1e3),matchCache:qr(1e3),flatCache:null,masksTree:null},routesById:s,routesByPath:i}}function Ns(e,t,n=!1){const r=e.split("/"),o=Wf(e,r,t,n);if(!o)return null;const[s]=Tc(e,r,o);return{route:o.node.route,rawParams:s,parsedParams:o.parsedParams}}function Tc(e,t,n){const r=Vf(n.node);let o=null;const s={};let i=n.extract?.part??0,a=n.extract?.node??0,c=n.extract?.path??0;for(;a<r.length;i++,a++,c++){const l=r[a],u=t[i],d=c;if(u&&(c+=u.length),l.kind===rn){o??=n.node.fullPath.split("/");const f=o[a],h=l.prefix?.length??0;if(f.charCodeAt(h)===123){const m=l.suffix?.length??0,g=f.substring(h+2,f.length-m-1),y=u.substring(h,u.length-m);s[g]=decodeURIComponent(y)}else{const m=f.substring(1);s[m]=decodeURIComponent(u)}}else if(l.kind===or){if(n.skipped&1<<a){i--;continue}o??=n.node.fullPath.split("/");const f=o[a],h=l.prefix?.length??0,p=l.suffix?.length??0,m=f.substring(h+3,f.length-p-1),g=l.suffix||l.prefix?u.substring(h,u.length-p):u;g&&(s[m]=decodeURIComponent(g))}else if(l.kind===on){const f=l,h=e.substring(d+(f.prefix?.length??0),e.length-(f.suffix?.length??0)),p=decodeURIComponent(h);s["*"]=p,s._splat=p;break}}return n.rawParams&&Object.assign(s,n.rawParams),[s,{part:i,node:a,path:c}]}function jf(e){const t=[e];for(;e.parentRoute;)e=e.parentRoute,t.push(e);return t.reverse(),t}function Vf(e){const t=Array(e.depth+1);do t[e.depth]=e,e=e.parent;while(e);return t}function Wf(e,t,n,r){if(e==="/"&&n.index)return{node:n.index,skipped:0};const o=!Wr(t),s=o&&e!=="/",i=t.length-(o?1:0),a=[{node:n,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let c=null,l=null,u=null;for(;a.length;){const d=a.pop(),{node:f,index:h,skipped:p,depth:m,statics:g,dynamics:y,optionals:v}=d;let{extract:b,rawParams:w,parsedParams:P}=d;if(f.skipOnParamError){if(!Eo(e,t,d))continue;w=d.rawParams,b=d.extract,P=d.parsedParams}r&&f.route&&f.kind!==Sn&&Bn(l,d)&&(l=d);const T=h===i;if(T&&(f.route&&!s&&Bn(u,d)&&(u=d),!f.optional&&!f.wildcard&&!f.index&&!f.pathless))continue;const R=T?void 0:t[h];let S;if(T&&f.index){const C={node:f.index,index:h,skipped:p,depth:m+1,statics:g,dynamics:y,optionals:v,extract:b,rawParams:w,parsedParams:P};if(f.index.skipOnParamError&&!Eo(e,t,C))continue;if(g===i&&!y&&!v&&!p)return C;Bn(u,C)&&(u=C)}if(f.wildcard&&Bn(c,d))for(const C of f.wildcard){const{prefix:L,suffix:A}=C;if(L&&(T||!(C.caseSensitive?R:S??=R.toLowerCase()).startsWith(L)))continue;if(A){if(T)continue;const G=t.slice(h).join("/").slice(-A.length);if((C.caseSensitive?G:G.toLowerCase())!==A)continue}const O={node:C,index:i,skipped:p,depth:m,statics:g,dynamics:y,optionals:v,extract:b,rawParams:w,parsedParams:P};if(!(C.skipOnParamError&&!Eo(e,t,O))){c=O;break}}if(f.optional){const C=p|1<<m,L=m+1;for(let A=f.optional.length-1;A>=0;A--){const O=f.optional[A];a.push({node:O,index:h,skipped:C,depth:L,statics:g,dynamics:y,optionals:v,extract:b,rawParams:w,parsedParams:P})}if(!T)for(let A=f.optional.length-1;A>=0;A--){const O=f.optional[A],{prefix:G,suffix:B}=O;if(G||B){const q=O.caseSensitive?R:S??=R.toLowerCase();if(G&&!q.startsWith(G)||B&&!q.endsWith(B))continue}a.push({node:O,index:h+1,skipped:p,depth:L,statics:g,dynamics:y,optionals:v+1,extract:b,rawParams:w,parsedParams:P})}}if(!T&&f.dynamic&&R)for(let C=f.dynamic.length-1;C>=0;C--){const L=f.dynamic[C],{prefix:A,suffix:O}=L;if(A||O){const G=L.caseSensitive?R:S??=R.toLowerCase();if(A&&!G.startsWith(A)||O&&!G.endsWith(O))continue}a.push({node:L,index:h+1,skipped:p,depth:m+1,statics:g,dynamics:y+1,optionals:v,extract:b,rawParams:w,parsedParams:P})}if(!T&&f.staticInsensitive){const C=f.staticInsensitive.get(S??=R.toLowerCase());C&&a.push({node:C,index:h+1,skipped:p,depth:m+1,statics:g+1,dynamics:y,optionals:v,extract:b,rawParams:w,parsedParams:P})}if(!T&&f.static){const C=f.static.get(R);C&&a.push({node:C,index:h+1,skipped:p,depth:m+1,statics:g+1,dynamics:y,optionals:v,extract:b,rawParams:w,parsedParams:P})}if(f.pathless){const C=m+1;for(let L=f.pathless.length-1;L>=0;L--){const A=f.pathless[L];a.push({node:A,index:h,skipped:p,depth:C,statics:g,dynamics:y,optionals:v,extract:b,rawParams:w,parsedParams:P})}}}if(u&&c)return Bn(c,u)?u:c;if(u)return u;if(c)return c;if(r&&l){let d=l.index;for(let h=0;h<l.index;h++)d+=t[h].length;const f=d===e.length?"/":e.slice(d);return l.rawParams??={},l.rawParams["**"]=decodeURIComponent(f),l}return null}function Eo(e,t,n){try{const[r,o]=Tc(e,t,n);n.rawParams=r,n.extract=o;const s=n.node.parse(r);return n.parsedParams=Object.assign({},n.parsedParams,s),!0}catch{return null}}function Bn(e,t){return e?t.statics>e.statics||t.statics===e.statics&&(t.dynamics>e.dynamics||t.dynamics===e.dynamics&&(t.optionals>e.optionals||t.optionals===e.optionals&&((t.node.kind===Sn)>(e.node.kind===Sn)||t.node.kind===Sn==(e.node.kind===Sn)&&t.depth>e.depth))):!0}function Er(e){return Bs(e.filter(t=>t!==void 0).join("/"))}function Bs(e){return e.replace(/\/{2,}/g,"/")}function Rc(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function Qt(e){const t=e.length;return t>1&&e[t-1]==="/"?e.replace(/\/{1,}$/,""):e}function Ic(e){return Qt(Rc(e))}function Yr(e,t){return e?.endsWith("/")&&e!=="/"&&e!==`${t}/`?e.slice(0,-1):e}function Gf(e,t,n){return Yr(e,n)===Yr(t,n)}function Hf({base:e,to:t,trailingSlash:n="never",cache:r}){const o=t.startsWith("/"),s=!o&&t===".";let i;if(r){i=o?t:s?e:e+"\0"+t;const d=r.get(i);if(d)return d}let a;if(s)a=e.split("/");else if(o)a=t.split("/");else{for(a=e.split("/");a.length>1&&Wr(a)==="";)a.pop();const d=t.split("/");for(let f=0,h=d.length;f<h;f++){const p=d[f];p===""?f?f===h-1&&a.push(p):a=[p]:p===".."?a.pop():p==="."||a.push(p)}}a.length>1&&(Wr(a)===""?n==="never"&&a.pop():n==="always"&&a.push(""));let c,l="";for(let d=0;d<a.length;d++){d>0&&(l+="/");const f=a[d];if(!f)continue;c=Fs(f,0,c);const h=c[0];if(h===Tn){l+=f;continue}const p=c[5],m=f.substring(0,c[1]),g=f.substring(c[4],p),y=f.substring(c[2],c[3]);h===rn?l+=m||g?`${m}{$${y}}${g}`:`$${y}`:h===on?l+=m||g?`${m}{$}${g}`:"$":l+=`${m}{-$${y}}${g}`}l=Bs(l);const u=l||"/";return i&&r&&r.set(i,u),u}function Mo(e,t,n){const r=t[e];return typeof r!="string"?r:e==="_splat"?encodeURI(r):qf(r,n)}function Lo({path:e,params:t,decodeCharMap:n}){let r=!1;const o={};if(!e||e==="/")return{interpolatedPath:"/",usedParams:o,isMissingParams:r};if(!e.includes("$"))return{interpolatedPath:e,usedParams:o,isMissingParams:r};const s=e.length;let i=0,a,c="";for(;i<s;){const u=i;a=Fs(e,u,a);const d=a[5];if(i=d+1,u===d)continue;const f=a[0];if(f===Tn){c+="/"+e.substring(u,d);continue}if(f===on){const h=t._splat;o._splat=h,o["*"]=h;const p=e.substring(u,a[1]),m=e.substring(a[4],d);if(!h){r=!0,(p||m)&&(c+="/"+p+m);continue}const g=Mo("_splat",t,n);c+="/"+p+g+m;continue}if(f===rn){const h=e.substring(a[2],a[3]);!r&&!(h in t)&&(r=!0),o[h]=t[h];const p=e.substring(u,a[1]),m=e.substring(a[4],d),g=Mo(h,t,n)??"undefined";c+="/"+p+g+m;continue}if(f===or){const h=e.substring(a[2],a[3]),p=t[h];if(p==null)continue;o[h]=p;const m=e.substring(u,a[1]),g=e.substring(a[4],d),y=Mo(h,t,n)??"";c+="/"+m+y+g;continue}}return e.endsWith("/")&&(c+="/"),{usedParams:o,interpolatedPath:c||"/",isMissingParams:r}}function qf(e,t){let n=encodeURIComponent(e);if(t)for(const[r,o]of t)n=n.replaceAll(r,o);return n}function Ge(e){return!!e?.isNotFound}function Yf(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const Jr="tsr-scroll-restoration-v1_3",Jf=(e,t)=>{let n;return(...r)=>{n||(n=setTimeout(()=>{e(...r),n=null},t))}};function Xf(){const e=Yf();if(!e)return null;const t=e.getItem(Jr);let n=t?JSON.parse(t):{};return{state:n,set:r=>{n=Ot(r,n)||n;try{e.setItem(Jr,JSON.stringify(n))}catch{console.warn("[ts-router] Could not persist scroll restoration state to sessionStorage.")}}}}const wr=Xf(),ss=e=>e.state.__TSR_key||e.href;function Zf(e){const t=[];let n;for(;n=e.parentNode;)t.push(`${e.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,e)+1})`),e=n;return`${t.reverse().join(" > ")}`.toLowerCase()}let Xr=!1;function Ec({storageKey:e,key:t,behavior:n,shouldScrollRestoration:r,scrollToTopSelectors:o,location:s}){let i;try{i=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(l){console.error(l);return}const a=t||window.history.state?.__TSR_key,c=i[a];Xr=!0;e:{if(r&&c&&Object.keys(c).length>0){for(const d in c){const f=c[d];if(d==="window")window.scrollTo({top:f.scrollY,left:f.scrollX,behavior:n});else if(d){const h=document.querySelector(d);h&&(h.scrollLeft=f.scrollX,h.scrollTop=f.scrollY)}}break e}const l=(s??window.location).hash.split("#",2)[1];if(l){const d=window.history.state?.__hashScrollIntoViewOptions??!0;if(d){const f=document.getElementById(l);f&&f.scrollIntoView(d)}break e}const u={top:0,left:0,behavior:n};if(window.scrollTo(u),o)for(const d of o){if(d==="window")continue;const f=typeof d=="function"?d():document.querySelector(d);f&&f.scrollTo(u)}}Xr=!1}function Qf(e,t){if(!wr&&!e.isServer||((e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),e.isServer||e.isScrollRestorationSetup||!wr))return;e.isScrollRestorationSetup=!0,Xr=!1;const r=e.options.getScrollRestorationKey||ss;window.history.scrollRestoration="manual";const o=s=>{if(Xr||!e.isScrollRestoring)return;let i="";if(s.target===document||s.target===window)i="window";else{const c=s.target.getAttribute("data-scroll-restoration-id");c?i=`[data-scroll-restoration-id="${c}"]`:i=Zf(s.target)}const a=r(e.state.location);wr.set(c=>{const l=c[a]||={},u=l[i]||={};if(i==="window")u.scrollX=window.scrollX||0,u.scrollY=window.scrollY||0;else if(i){const d=document.querySelector(i);d&&(u.scrollX=d.scrollLeft||0,u.scrollY=d.scrollTop||0)}return c})};typeof document<"u"&&document.addEventListener("scroll",Jf(o,100),!0),e.subscribe("onRendered",s=>{const i=r(s.toLocation);if(!e.resetNextScroll){e.resetNextScroll=!0;return}typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation})||(Ec({storageKey:Jr,key:i,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&wr.set(a=>(a[i]||={},a)))})}function eh(e){if(typeof document<"u"&&document.querySelector){const t=e.state.location.state.__hashScrollIntoViewOptions??!0;if(t&&e.state.location.hash!==""){const n=document.getElementById(e.state.location.hash);n&&n.scrollIntoView(t)}}}function th(e,t=String){const n=new URLSearchParams;for(const r in e){const o=e[r];o!==void 0&&n.set(r,t(o))}return n.toString()}function Oo(e){return e?e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e:""}function nh(e){const t=new URLSearchParams(e),n={};for(const[r,o]of t.entries()){const s=n[r];s==null?n[r]=Oo(o):Array.isArray(s)?s.push(Oo(o)):n[r]=[s,Oo(o)]}return n}const rh=sh(JSON.parse),oh=ih(JSON.stringify,JSON.parse);function sh(e){return t=>{t[0]==="?"&&(t=t.substring(1));const n=nh(t);for(const r in n){const o=n[r];if(typeof o=="string")try{n[r]=e(o)}catch{}}return n}}function ih(e,t){const n=typeof t=="function";function r(o){if(typeof o=="object"&&o!==null)try{return e(o)}catch{}else if(n&&typeof o=="string")try{return t(o),e(o)}catch{}return o}return o=>{const s=th(o,r);return s?`?${s}`:""}}const Be="__root__";function ah(e){if(e.statusCode=e.statusCode||e.code||307,typeof e.href=="string"&&Hr(e.href))throw new Error(`Redirect blocked: unsafe protocol in href "${e.href}". Only ${kc.join(", ")} protocols are allowed.`);if(!e.reloadDocument&&typeof e.href=="string")try{new URL(e.href),e.reloadDocument=!0}catch{}const t=new Headers(e.headers);e.href&&t.get("Location")===null&&t.set("Location",e.href);const n=new Response(null,{status:e.statusCode,headers:t});if(n.options=e,e.throw)throw n;return n}function Ze(e){return e instanceof Response&&!!e.options}const Mr=e=>{if(!e.rendered)return e.rendered=!0,e.onReady?.()},uo=(e,t)=>!!(e.preload&&!e.router.state.matches.some(n=>n.id===t)),Ks=(e,t,n=!0)=>{const r={...e.router.options.context??{}},o=n?t:t-1;for(let s=0;s<=o;s++){const i=e.matches[s];if(!i)continue;const a=e.router.getMatch(i.id);a&&Object.assign(r,a.__routeContext,a.__beforeLoadContext)}return r},Mc=(e,t)=>{const n=e.router.routesById[t.routeId??""]??e.router.routeTree;!n.options.notFoundComponent&&e.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=e.router.options.defaultNotFoundComponent),nn(n.options.notFoundComponent);const r=e.matches.find(o=>o.routeId===n.id);nn(r,"Could not find match for route: "+n.id),e.updateMatch(r.id,o=>({...o,status:"notFound",error:t,isFetching:!1})),t.routerCode==="BEFORE_LOAD"&&n.parentRoute&&(t.routeId=n.parentRoute.id,Mc(e,t))},At=(e,t,n)=>{if(!(!Ze(n)&&!Ge(n))){if(Ze(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(t){t._nonReactive.beforeLoadPromise?.resolve(),t._nonReactive.loaderPromise?.resolve(),t._nonReactive.beforeLoadPromise=void 0,t._nonReactive.loaderPromise=void 0;const r=Ze(n)?"redirected":"notFound";t._nonReactive.error=n,e.updateMatch(t.id,o=>({...o,status:r,isFetching:!1,error:n})),Ge(n)&&!n.routeId&&(n.routeId=t.routeId),t._nonReactive.loadPromise?.resolve()}throw Ze(n)?(e.rendered=!0,n.options._fromLocation=e.location,n.redirectHandled=!0,n=e.router.resolveRedirect(n),n):(Mc(e,n),n)}},Lc=(e,t)=>{const n=e.router.getMatch(t);return!!(!e.router.isServer&&n._nonReactive.dehydrated||e.router.isServer&&n.ssr===!1)},Kn=(e,t,n,r)=>{const{id:o,routeId:s}=e.matches[t],i=e.router.looseRoutesById[s];if(n instanceof Promise)throw n;n.routerCode=r,e.firstBadMatchIndex??=t,At(e,e.router.getMatch(o),n);try{i.options.onError?.(n)}catch(a){n=a,At(e,e.router.getMatch(o),n)}e.updateMatch(o,a=>(a._nonReactive.beforeLoadPromise?.resolve(),a._nonReactive.beforeLoadPromise=void 0,a._nonReactive.loadPromise?.resolve(),{...a,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},ch=(e,t,n,r)=>{const o=e.router.getMatch(t),s=e.matches[n-1]?.id,i=s?e.router.getMatch(s):void 0;if(e.router.isShell()){o.ssr=r.id===Be;return}if(i?.ssr===!1){o.ssr=!1;return}const a=h=>h===!0&&i?.ssr==="data-only"?"data-only":h,c=e.router.options.defaultSsr??!0;if(r.options.ssr===void 0){o.ssr=a(c);return}if(typeof r.options.ssr!="function"){o.ssr=a(r.options.ssr);return}const{search:l,params:u}=o,d={search:Cr(l,o.searchError),params:Cr(u,o.paramsError),location:e.location,matches:e.matches.map(h=>({index:h.index,pathname:h.pathname,fullPath:h.fullPath,staticData:h.staticData,id:h.id,routeId:h.routeId,search:Cr(h.search,h.searchError),params:Cr(h.params,h.paramsError),ssr:h.ssr}))},f=r.options.ssr(d);if(Nt(f))return f.then(h=>{o.ssr=a(h??c)});o.ssr=a(f??c)},Oc=(e,t,n,r)=>{if(r._nonReactive.pendingTimeout!==void 0)return;const o=n.options.pendingMs??e.router.options.defaultPendingMs;if(!!(e.onReady&&!e.router.isServer&&!uo(e,t)&&(n.options.loader||n.options.beforeLoad||$c(n))&&typeof o=="number"&&o!==1/0&&(n.options.pendingComponent??e.router.options?.defaultPendingComponent))){const i=setTimeout(()=>{Mr(e)},o);r._nonReactive.pendingTimeout=i}},lh=(e,t,n)=>{const r=e.router.getMatch(t);if(!r._nonReactive.beforeLoadPromise&&!r._nonReactive.loaderPromise)return;Oc(e,t,n,r);const o=()=>{const s=e.router.getMatch(t);s.preload&&(s.status==="redirected"||s.status==="notFound")&&At(e,s,s.error)};return r._nonReactive.beforeLoadPromise?r._nonReactive.beforeLoadPromise.then(o):o()},uh=(e,t,n,r)=>{const o=e.router.getMatch(t),s=o._nonReactive.loadPromise;o._nonReactive.loadPromise=kn(()=>{s?.resolve()});const{paramsError:i,searchError:a}=o;i&&Kn(e,n,i,"PARSE_PARAMS"),a&&Kn(e,n,a,"VALIDATE_SEARCH"),Oc(e,t,r,o);const c=new AbortController,l=e.matches[n-1]?.id;(l?e.router.getMatch(l):void 0)?.context??e.router.options.context;let d=!1;const f=()=>{d||(d=!0,e.updateMatch(t,T=>({...T,isFetching:"beforeLoad",fetchCount:T.fetchCount+1,abortController:c})))},h=()=>{o._nonReactive.beforeLoadPromise?.resolve(),o._nonReactive.beforeLoadPromise=void 0,e.updateMatch(t,T=>({...T,isFetching:!1}))};if(!r.options.beforeLoad){tr(()=>{f(),h()});return}o._nonReactive.beforeLoadPromise=kn();const p={...Ks(e,n,!1),...o.__routeContext},{search:m,params:g,cause:y}=o,v=uo(e,t),b={search:m,abortController:c,params:g,preload:v,context:p,location:e.location,navigate:T=>e.router.navigate({...T,_fromLocation:e.location}),buildLocation:e.router.buildLocation,cause:v?"preload":y,matches:e.matches,...e.router.options.additionalContext},w=T=>{if(T===void 0){tr(()=>{f(),h()});return}(Ze(T)||Ge(T))&&(f(),Kn(e,n,T,"BEFORE_LOAD")),tr(()=>{f(),e.updateMatch(t,R=>({...R,__beforeLoadContext:T})),h()})};let P;try{if(P=r.options.beforeLoad(b),Nt(P))return f(),P.catch(T=>{Kn(e,n,T,"BEFORE_LOAD")}).then(w)}catch(T){f(),Kn(e,n,T,"BEFORE_LOAD")}w(P)},dh=(e,t)=>{const{id:n,routeId:r}=e.matches[t],o=e.router.looseRoutesById[r],s=()=>{if(e.router.isServer){const c=ch(e,n,t,o);if(Nt(c))return c.then(a)}return a()},i=()=>uh(e,n,t,o),a=()=>{if(Lc(e,n))return;const c=lh(e,n,o);return Nt(c)?c.then(i):i()};return s()},fh=(e,t,n)=>{const r=e.router.getMatch(t);if(!r||!n.options.head&&!n.options.scripts&&!n.options.headers)return;const o={matches:e.matches,match:r,params:r.params,loaderData:r.loaderData};return Promise.all([n.options.head?.(o),n.options.scripts?.(o),n.options.headers?.(o)]).then(([s,i,a])=>{const c=s?.meta,l=s?.links,u=s?.scripts,d=s?.styles;return{meta:c,links:l,headScripts:u,headers:a,scripts:i,styles:d}})},Ac=(e,t,n,r)=>{const o=e.matchPromises[n-1],{params:s,loaderDeps:i,abortController:a,cause:c}=e.router.getMatch(t),l=Ks(e,n),u=uo(e,t);return{params:s,deps:i,preload:!!u,parentMatchPromise:o,abortController:a,context:l,location:e.location,navigate:d=>e.router.navigate({...d,_fromLocation:e.location}),cause:u?"preload":c,route:r,...e.router.options.additionalContext}},Zi=async(e,t,n,r)=>{try{const o=e.router.getMatch(t);try{(!e.router.isServer||o.ssr===!0)&&Dc(r);const s=r.options.loader?.(Ac(e,t,n,r)),i=r.options.loader&&Nt(s);if((i||r._lazyPromise||r._componentsPromise||r.options.head||r.options.scripts||r.options.headers||o._nonReactive.minPendingPromise)&&e.updateMatch(t,l=>({...l,isFetching:"loader"})),r.options.loader){const l=i?await s:s;At(e,e.router.getMatch(t),l),l!==void 0&&e.updateMatch(t,u=>({...u,loaderData:l}))}r._lazyPromise&&await r._lazyPromise;const c=o._nonReactive.minPendingPromise;c&&await c,r._componentsPromise&&await r._componentsPromise,e.updateMatch(t,l=>({...l,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(s){let i=s;if(i?.name==="AbortError"){e.updateMatch(t,c=>({...c,status:c.status==="pending"?"success":c.status,isFetching:!1}));return}const a=o._nonReactive.minPendingPromise;a&&await a,Ge(s)&&await r.options.notFoundComponent?.preload?.(),At(e,e.router.getMatch(t),s);try{r.options.onError?.(s)}catch(c){i=c,At(e,e.router.getMatch(t),c)}e.updateMatch(t,c=>({...c,error:i,status:"error",isFetching:!1}))}}catch(o){const s=e.router.getMatch(t);s&&(s._nonReactive.loaderPromise=void 0),At(e,s,o)}},hh=async(e,t)=>{const{id:n,routeId:r}=e.matches[t];let o=!1,s=!1;const i=e.router.looseRoutesById[r],a=()=>{e.updateMatch(n,u=>({...u,context:Ks(e,t)}))};if(Lc(e,n)){if(e.router.isServer)return e.router.getMatch(n)}else{const u=e.router.getMatch(n);if(u._nonReactive.loaderPromise){if(u.status==="success"&&!e.sync&&!u.preload)return u;await u._nonReactive.loaderPromise;const d=e.router.getMatch(n),f=d._nonReactive.error||d.error;f&&At(e,d,f)}else{const d=Date.now()-u.updatedAt,f=uo(e,n),h=f?i.options.preloadStaleTime??e.router.options.defaultPreloadStaleTime??3e4:i.options.staleTime??e.router.options.defaultStaleTime??0,p=i.options.shouldReload,m=typeof p=="function"?p(Ac(e,n,t,i)):p,g=!!f&&!e.router.state.matches.some(w=>w.id===n),y=e.router.getMatch(n);y._nonReactive.loaderPromise=kn(),g!==y.preload&&e.updateMatch(n,w=>({...w,preload:g}));const{status:v,invalid:b}=y;o=v==="success"&&(b||(m??d>h)),f&&i.options.preload===!1||(o&&!e.sync?(s=!0,(async()=>{try{await Zi(e,n,t,i),a();const w=e.router.getMatch(n);w._nonReactive.loaderPromise?.resolve(),w._nonReactive.loadPromise?.resolve(),w._nonReactive.loaderPromise=void 0}catch(w){Ze(w)&&await e.router.navigate(w.options)}})()):(v!=="success"||o&&e.sync)&&await Zi(e,n,t,i))}}const c=e.router.getMatch(n);s||(c._nonReactive.loaderPromise?.resolve(),c._nonReactive.loadPromise?.resolve()),clearTimeout(c._nonReactive.pendingTimeout),c._nonReactive.pendingTimeout=void 0,s||(c._nonReactive.loaderPromise=void 0),c._nonReactive.dehydrated=void 0,s||a();const l=s?c.isFetching:!1;return l!==c.isFetching||c.invalid!==!1?(e.updateMatch(n,u=>({...u,isFetching:l,invalid:!1})),e.router.getMatch(n)):c};async function Qi(e){const t=Object.assign(e,{matchPromises:[]});!t.router.isServer&&t.router.state.matches.some(n=>n._forcePending)&&Mr(t);try{for(let a=0;a<t.matches.length;a++){const c=dh(t,a);Nt(c)&&await c}const n=t.firstBadMatchIndex??t.matches.length;for(let a=0;a<n;a++)t.matchPromises.push(hh(t,a));const o=(await Promise.allSettled(t.matchPromises)).filter(a=>a.status==="rejected").map(a=>a.reason);let s;for(const a of o){if(Ze(a))throw a;!s&&Ge(a)&&(s=a)}for(const a of t.matches){const{id:c,routeId:l}=a,u=t.router.looseRoutesById[l];try{const d=fh(t,c,u);if(d){const f=await d;t.updateMatch(c,h=>({...h,...f}))}}catch(d){console.error(`Error executing head for route ${l}:`,d)}}if(s)throw s;const i=Mr(t);Nt(i)&&await i}catch(n){if(Ge(n)&&!t.preload){const r=Mr(t);throw Nt(r)&&await r,n}if(Ze(n))throw n}return t.matches}async function Dc(e){if(!e._lazyLoaded&&e._lazyPromise===void 0&&(e.lazyFn?e._lazyPromise=e.lazyFn().then(t=>{const{id:n,...r}=t.options;Object.assign(e.options,r),e._lazyLoaded=!0,e._lazyPromise=void 0}):e._lazyLoaded=!0),!e._componentsLoaded&&e._componentsPromise===void 0){const t=()=>{const n=[];for(const r of Fc){const o=e.options[r]?.preload;o&&n.push(o())}if(n.length)return Promise.all(n).then(()=>{e._componentsLoaded=!0,e._componentsPromise=void 0});e._componentsLoaded=!0,e._componentsPromise=void 0};e._componentsPromise=e._lazyPromise?e._lazyPromise.then(t):t()}return e._componentsPromise}function Cr(e,t){return t?{status:"error",error:t}:{status:"success",value:e}}function $c(e){for(const t of Fc)if(e.options[t]?.preload)return!0;return!1}const Fc=["component","errorComponent","pendingComponent","notFoundComponent"];function ph(e){return{input:({url:t})=>{for(const n of e)t=is(n,t);return t},output:({url:t})=>{for(let n=e.length-1;n>=0;n--)t=Nc(e[n],t);return t}}}function gh(e){const t=Ic(e.basepath),n=`/${t}`,r=`${n}/`,o=e.caseSensitive?n:n.toLowerCase(),s=e.caseSensitive?r:r.toLowerCase();return{input:({url:i})=>{const a=e.caseSensitive?i.pathname:i.pathname.toLowerCase();return a===o?i.pathname="/":a.startsWith(s)&&(i.pathname=i.pathname.slice(n.length)),i},output:({url:i})=>(i.pathname=Er(["/",t,i.pathname]),i)}}function is(e,t){const n=e?.input?.({url:t});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return t}function Nc(e,t){const n=e?.output?.({url:t});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return t}function en(e){const t=e.resolvedLocation,n=e.location,r=t?.pathname!==n.pathname,o=t?.href!==n.href,s=t?.hash!==n.hash;return{fromLocation:t,toLocation:n,pathChanged:r,hrefChanged:o,hashChanged:s}}class mh{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=n=>n(),this.update=n=>{n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const r=this.options,o=this.basepath??r?.basepath??"/",s=this.basepath===void 0,i=r?.rewrite;this.options={...r,...n},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(f=>[encodeURIComponent(f),f])):void 0,(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.isServer||(this.history=Cf())),this.origin=this.options.origin,this.origin||(!this.isServer&&window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),!this.__store&&this.latestLocation&&(this.__store=new Sf(vh(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(f=>!["redirected"].includes(f.status))}}}),Qf(this));let a=!1;const c=this.options.basepath??"/",l=this.options.rewrite;if(s||o!==c||i!==l){this.basepath=c;const f=[];Ic(c)!==""&&f.push(gh({basepath:c})),l&&f.push(l),this.rewrite=f.length===0?void 0:f.length===1?f[0]:ph(f),this.history&&this.updateLatestLocation(),a=!0}a&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const{routesById:n,routesByPath:r,processedTree:o}=zf(this.routeTree,this.options.caseSensitive,(i,a)=>{i.init({originalIndex:a})});this.options.routeMasks&&Ff(this.options.routeMasks,o),this.routesById=n,this.routesByPath=r,this.processedTree=o;const s=this.options.notFoundRoute;s&&(s.init({originalIndex:99999999999}),this.routesById[s.id]=s)},this.subscribe=(n,r)=>{const o={eventType:n,fn:r};return this.subscribers.add(o),()=>{this.subscribers.delete(o)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const o=({href:c,state:l})=>{const u=new URL(c,this.origin),d=is(this.rewrite,u),f=this.options.parseSearch(d.search),h=this.options.stringifySearch(f);return d.search=h,{href:d.href.replace(d.origin,""),publicHref:c,url:d,pathname:Xi(d.pathname),searchStr:h,search:nt(r?.search,f),hash:d.hash.split("#").reverse()[0]??"",state:nt(r?.state,l)}},s=o(n),{__tempLocation:i,__tempKey:a}=s.state;if(i&&(!a||a===this.tempLocationKey)){const c=o(i);return c.state.key=s.state.key,c.state.__TSR_key=s.state.__TSR_key,delete c.state.__tempLocation,{...c,maskedLocation:s}}return s},this.resolvePathCache=qr(1e3),this.resolvePathWithBase=(n,r)=>Hf({base:n,to:Bs(r),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(n,r,o)=>typeof n=="string"?this.matchRoutesInternal({pathname:n,search:r},o):this.matchRoutesInternal(n,r),this.getMatchedRoutes=n=>bh({pathname:n,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r._nonReactive.pendingTimeout),r._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const n=this.state.matches.filter(s=>s.status==="pending"),r=this.state.matches.filter(s=>s.isFetching==="loader");new Set([...this.state.pendingMatches??[],...n,...r]).forEach(s=>{this.cancelMatch(s.id)})},this.buildLocation=n=>{const r=(s={})=>{const i=s._fromLocation||this.pendingBuiltLocation||this.latestLocation,a=this.matchRoutes(i,{_buildLocation:!0}),c=Wr(a);s.from;const l=s.unsafeRelative==="path"?i.pathname:s.from??c.fullPath,u=this.resolvePathWithBase(l,"."),d=c.search,f={...c.params},h=s.to?this.resolvePathWithBase(u,`${s.to}`):this.resolvePathWithBase(u,"."),p=s.params===!1||s.params===null?{}:(s.params??!0)===!0?f:Object.assign(f,Ot(s.params,f)),m=Lo({path:h,params:p}).interpolatedPath,g=this.matchRoutes(m,void 0,{_buildLocation:!0}).map(L=>this.looseRoutesById[L.routeId]);if(Object.keys(p).length>0)for(const L of g){const A=L.options.params?.stringify??L.options.stringifyParams;A&&Object.assign(p,A(p))}const y=n.leaveParams?h:Xi(Lo({path:h,params:p,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath);let v=d;if(n._includeValidateSearch&&this.options.search?.strict){const L={};g.forEach(A=>{if(A.options.validateSearch)try{Object.assign(L,as(A.options.validateSearch,{...L,...v}))}catch{}}),v=L}v=xh({search:v,dest:s,destRoutes:g,_includeValidateSearch:n._includeValidateSearch}),v=nt(d,v);const b=this.options.stringifySearch(v),w=s.hash===!0?i.hash:s.hash?Ot(s.hash,i.hash):void 0,P=w?`#${w}`:"";let T=s.state===!0?i.state:s.state?Ot(s.state,i.state):{};T=nt(i.state,T);const R=`${y}${b}${P}`,S=new URL(R,this.origin),C=Nc(this.rewrite,S);return{publicHref:C.pathname+C.search+C.hash,href:R,url:C,pathname:y,search:v,searchStr:b,state:T,hash:w??"",unmaskOnReload:s.unmaskOnReload}},o=(s={},i)=>{const a=r(s);let c=i?r(i):void 0;if(!c){const l={};if(this.options.routeMasks){const u=Nf(a.pathname,this.processedTree);if(u){Object.assign(l,u.rawParams);const{from:d,params:f,...h}=u.route,p=f===!1||f===null?{}:(f??!0)===!0?l:Object.assign(l,Ot(f,l));i={from:n.from,...h,params:p},c=r(i)}}}return c&&(a.maskedLocation=c),a};return n.mask?o(n,{from:n.from,...n.mask}):o(n)},this.commitLocation=({viewTransition:n,ignoreBlocker:r,...o})=>{const s=()=>{const c=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];c.forEach(u=>{o.state[u]=this.latestLocation.state[u]});const l=Zt(o.state,this.latestLocation.state);return c.forEach(u=>{delete o.state[u]}),l},i=Qt(this.latestLocation.href)===Qt(o.href),a=this.commitLocationPromise;if(this.commitLocationPromise=kn(()=>{a?.resolve()}),i&&s())this.load();else{let{maskedLocation:c,hashScrollIntoView:l,url:u,...d}=o;c&&(d={...c,state:{...c.state,__tempKey:void 0,__tempLocation:{...d,search:d.searchStr,state:{...d.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(d.unmaskOnReload??this.options.unmaskOnReload??!1)&&(d.state.__tempKey=this.tempLocationKey)),d.state.__hashScrollIntoViewOptions=l??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[o.replace?"replace":"push"](d.publicHref,d.state,{ignoreBlocker:r})}return this.resetNextScroll=o.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:o,viewTransition:s,ignoreBlocker:i,href:a,...c}={})=>{if(a){const d=this.history.location.state.__TSR_index,f=Vr(a,{__TSR_index:n?d:d+1}),h=new URL(f.pathname,this.origin),p=is(this.rewrite,h);c.to=p.pathname,c.search=this.options.parseSearch(f.search),c.hash=f.hash.slice(1)}const l=this.buildLocation({...c,_includeValidateSearch:!0});this.pendingBuiltLocation=l;const u=this.commitLocation({...l,viewTransition:s,replace:n,resetScroll:r,hashScrollIntoView:o,ignoreBlocker:i});return Promise.resolve().then(()=>{this.pendingBuiltLocation===l&&(this.pendingBuiltLocation=void 0)}),u},this.navigate=async({to:n,reloadDocument:r,href:o,publicHref:s,...i})=>{let a=!1;if(o)try{new URL(`${o}`),a=!0}catch{}if(a&&!r&&(r=!0),r){if(n!==void 0||!o){const l=this.buildLocation({to:n,...i});o=o??l.url.href,s=s??l.url.href}const c=!a&&s?s:o;if(Hr(c))return Promise.resolve();if(!i.ignoreBlocker){const u=this.history.getBlockers?.()??[];for(const d of u)if(d?.blockerFn&&await d.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}return i.replace?window.location.replace(c):window.location.href=c,Promise.resolve()}return this.buildAndCommitLocation({...i,href:o,to:n,_isNavigate:!0})},this.beforeLoad=()=>{if(this.cancelMatches(),this.updateLatestLocation(),this.isServer){const r=this.buildLocation({to:this.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});if(this.latestLocation.publicHref!==r.publicHref||r.url.origin!==this.origin){const o=this.getParsedLocationHref(r);throw ah({href:o})}}const n=this.matchRoutes(this.latestLocation);this.__store.setState(r=>({...r,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:n,cachedMatches:r.cachedMatches.filter(o=>!n.some(s=>s.id===o.id))}))},this.load=async n=>{let r,o,s;for(s=new Promise(a=>{this.startTransition(async()=>{try{this.beforeLoad();const c=this.latestLocation,l=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...en({resolvedLocation:l,location:c})}),this.emit({type:"onBeforeLoad",...en({resolvedLocation:l,location:c})}),await Qi({router:this,sync:n?.sync,matches:this.state.pendingMatches,location:c,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let u=[],d=[],f=[];tr(()=>{this.__store.setState(h=>{const p=h.matches,m=h.pendingMatches||h.matches;return u=p.filter(g=>!m.some(y=>y.id===g.id)),d=m.filter(g=>!p.some(y=>y.id===g.id)),f=m.filter(g=>p.some(y=>y.id===g.id)),{...h,isLoading:!1,loadedAt:Date.now(),matches:m,pendingMatches:void 0,cachedMatches:[...h.cachedMatches,...u.filter(g=>g.status!=="error"&&g.status!=="notFound")]}}),this.clearExpiredCache()}),[[u,"onLeave"],[d,"onEnter"],[f,"onStay"]].forEach(([h,p])=>{h.forEach(m=>{this.looseRoutesById[m.routeId].options[p]?.(m)})})})})}})}catch(c){Ze(c)?(r=c,this.isServer||this.navigate({...r.options,replace:!0,ignoreBlocker:!0})):Ge(c)&&(o=c),this.__store.setState(l=>({...l,statusCode:r?r.status:o?404:l.matches.some(u=>u.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===s&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),a()})}),this.latestLoadPromise=s,await s;this.latestLoadPromise&&s!==this.latestLoadPromise;)await this.latestLoadPromise;let i;this.hasNotFoundMatch()?i=404:this.__store.state.matches.some(a=>a.status==="error")&&(i=500),i!==void 0&&this.__store.setState(a=>({...a,statusCode:i}))},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let o;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const s=this.latestLocation,i=this.state.resolvedLocation,a=typeof r.types=="function"?r.types(en({resolvedLocation:i,location:s})):r.types;if(a===!1){n();return}o={update:n,types:a}}else o=n;document.startViewTransition(o)}else n()},this.updateMatch=(n,r)=>{this.startTransition(()=>{const o=this.state.pendingMatches?.some(s=>s.id===n)?"pendingMatches":this.state.matches.some(s=>s.id===n)?"matches":this.state.cachedMatches.some(s=>s.id===n)?"cachedMatches":"";o&&this.__store.setState(s=>({...s,[o]:s[o]?.map(i=>i.id===n?r(i):i)}))})},this.getMatch=n=>{const r=o=>o.id===n;return this.state.cachedMatches.find(r)??this.state.pendingMatches?.find(r)??this.state.matches.find(r)},this.invalidate=n=>{const r=o=>n?.filter?.(o)??!0?{...o,invalid:!0,...n?.forcePending||o.status==="error"||o.status==="notFound"?{status:"pending",error:void 0}:void 0}:o;return this.__store.setState(o=>({...o,matches:o.matches.map(r),cachedMatches:o.cachedMatches.map(r),pendingMatches:o.pendingMatches?.map(r)})),this.shouldViewTransition=!1,this.load({sync:n?.sync})},this.getParsedLocationHref=n=>{let r=n.url.href;return this.origin&&n.url.origin===this.origin&&(r=r.replace(this.origin,"")||"/"),r},this.resolveRedirect=n=>{const r=n.headers.get("Location");if(n.options.href){if(r)try{const o=new URL(r);if(this.origin&&o.origin===this.origin){const s=o.pathname+o.search+o.hash;n.options.href=s,n.headers.set("Location",s)}}catch{}}else{const o=this.buildLocation(n.options),s=this.getParsedLocationHref(o);n.options.href=s,n.headers.set("Location",s)}return n.headers.get("Location")||n.headers.set("Location",n.options.href),n},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(o=>({...o,cachedMatches:o.cachedMatches.filter(s=>!r(s))})):this.__store.setState(o=>({...o,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const o=this.looseRoutesById[r.routeId];if(!o.options.loader)return!0;const s=(r.preload?o.options.preloadGcTime??this.options.defaultPreloadGcTime:o.options.gcTime??this.options.defaultGcTime)??300*1e3;return r.status==="error"?!0:Date.now()-r.updatedAt>=s};this.clearCache({filter:n})},this.loadRouteChunk=Dc,this.preloadRoute=async n=>{const r=this.buildLocation(n);let o=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const s=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),i=new Set([...s,...this.state.cachedMatches.map(a=>a.id)]);tr(()=>{o.forEach(a=>{i.has(a.id)||this.__store.setState(c=>({...c,cachedMatches:[...c.cachedMatches,a]}))})});try{return o=await Qi({router:this,matches:o,location:r,preload:!0,updateMatch:(a,c)=>{s.has(a)?o=o.map(l=>l.id===a?c(l):l):this.updateMatch(a,c)}}),o}catch(a){if(Ze(a))return a.options.reloadDocument?void 0:await this.preloadRoute({...a.options,_fromLocation:r});Ge(a)||console.error(a);return}},this.matchRoute=(n,r)=>{const o={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},s=this.buildLocation(o);if(r?.pending&&this.state.status!=="pending")return!1;const a=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,c=Bf(s.pathname,r?.caseSensitive??!1,r?.fuzzy??!1,a.pathname,this.processedTree);return!c||n.params&&!Zt(c.rawParams,n.params,{partial:!0})?!1:r?.includeSearch??!0?Zt(a.search,s.search,{partial:!0})?c.rawParams:!1:c.rawParams},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,caseSensitive:t.caseSensitive??!1,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??oh,parseSearch:t.parseSearch??rh}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(t,n){const r=this.getMatchedRoutes(t.pathname),{foundRoute:o,routeParams:s,parsedParams:i}=r;let{matchedRoutes:a}=r,c=!1;(o?o.path!=="/"&&s["**"]:Qt(t.pathname))&&(this.options.notFoundRoute?a=[...a,this.options.notFoundRoute]:c=!0);const l=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let f=a.length-1;f>=0;f--){const h=a[f];if(h.children)return h.id}return Be}})(),u=[],d=f=>f?.id?f.context??this.options.context??void 0:this.options.context??void 0;return a.forEach((f,h)=>{const p=u[h-1],[m,g,y]=(()=>{const B=p?.search??t.search,q=p?._strictSearch??void 0;try{const ne=as(f.options.validateSearch,{...B})??void 0;return[{...B,...ne},{...q,...ne},void 0]}catch(ne){let N=ne;if(ne instanceof Zr||(N=new Zr(ne.message,{cause:ne})),n?.throwOnError)throw N;return[B,{},N]}})(),v=f.options.loaderDeps?.({search:m})??"",b=v?JSON.stringify(v):"",{interpolatedPath:w,usedParams:P}=Lo({path:f.fullPath,params:s,decodeCharMap:this.pathParamsDecodeCharMap}),T=f.id+w+b,R=this.getMatch(T),S=this.state.matches.find(B=>B.routeId===f.id),C=R?._strictParams??P;let L;if(!R)if(f.options.skipRouteOnParseError)for(const B in P)B in i&&(C[B]=i[B]);else{const B=f.options.params?.parse??f.options.parseParams;if(B)try{Object.assign(C,B(C))}catch(q){if(Ge(q)||Ze(q)?L=q:L=new yh(q.message,{cause:q}),n?.throwOnError)throw L}}Object.assign(s,C);const A=S?"stay":"enter";let O;if(R)O={...R,cause:A,params:S?nt(S.params,s):s,_strictParams:C,search:nt(S?S.search:R.search,m),_strictSearch:g};else{const B=f.options.loader||f.options.beforeLoad||f.lazyFn||$c(f)?"pending":"success";O={id:T,ssr:this.isServer?void 0:f.options.ssr,index:h,routeId:f.id,params:S?nt(S.params,s):s,_strictParams:C,pathname:w,updatedAt:Date.now(),search:S?nt(S.search,m):m,_strictSearch:g,searchError:void 0,status:B,isFetching:!1,error:void 0,paramsError:L,__routeContext:void 0,_nonReactive:{loadPromise:kn()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:A,loaderDeps:S?nt(S.loaderDeps,v):v,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:f.options.staticData||{},fullPath:f.fullPath}}n?.preload||(O.globalNotFound=l===f.id),O.searchError=y;const G=d(p);O.context={...G,...O.__routeContext,...O.__beforeLoadContext},u.push(O)}),u.forEach((f,h)=>{const p=this.looseRoutesById[f.routeId];if(!this.getMatch(f.id)&&n?._buildLocation!==!0){const g=u[h-1],y=d(g);if(p.options.context){const v={deps:f.loaderDeps,params:f.params,context:y??{},location:t,navigate:b=>this.navigate({...b,_fromLocation:t}),buildLocation:this.buildLocation,cause:f.cause,abortController:f.abortController,preload:!!f.preload,matches:u};f.__routeContext=p.options.context(v)??void 0}f.context={...y,...f.__routeContext,...f.__beforeLoadContext}}}),u}}class Zr extends Error{}class yh extends Error{}function vh(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function as(e,t){if(e==null)return{};if("~standard"in e){const n=e["~standard"].validate(t);if(n instanceof Promise)throw new Zr("Async validation not supported");if(n.issues)throw new Zr(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in e?e.parse(t):typeof e=="function"?e(t):{}}function bh({pathname:e,routesById:t,processedTree:n}){const r={},o=Qt(e);let s,i;const a=Kf(o,n,!0);return a&&(s=a.route,Object.assign(r,a.rawParams),i=Object.assign({},a.parsedParams)),{matchedRoutes:a?.branch||[t[Be]],routeParams:r,foundRoute:s,parsedParams:i}}function xh({search:e,dest:t,destRoutes:n,_includeValidateSearch:r}){const o=n.reduce((a,c)=>{const l=[];if("search"in c.options)c.options.search?.middlewares&&l.push(...c.options.search.middlewares);else if(c.options.preSearchFilters||c.options.postSearchFilters){const u=({search:d,next:f})=>{let h=d;"preSearchFilters"in c.options&&c.options.preSearchFilters&&(h=c.options.preSearchFilters.reduce((m,g)=>g(m),d));const p=f(h);return"postSearchFilters"in c.options&&c.options.postSearchFilters?c.options.postSearchFilters.reduce((m,g)=>g(m),p):p};l.push(u)}if(r&&c.options.validateSearch){const u=({search:d,next:f})=>{const h=f(d);try{return{...h,...as(c.options.validateSearch,h)??void 0}}catch{return h}};l.push(u)}return a.concat(l)},[])??[],s=({search:a})=>t.search?t.search===!0?a:Ot(t.search,a):{};o.push(s);const i=(a,c)=>{if(a>=o.length)return c;const l=o[a];return l({search:c,next:d=>i(a+1,d)})};return i(0,e)}const Sh="Error preloading route! ";class Bc{constructor(t){if(this.init=n=>{this.originalIndex=n.originalIndex;const r=this.options,o=!r?.path&&!r?.id;this.parentRoute=this.options.getParentRoute?.(),o?this._path=Be:this.parentRoute||nn(!1);let s=o?Be:r?.path;s&&s!=="/"&&(s=Rc(s));const i=r?.id||s;let a=o?Be:Er([this.parentRoute.id===Be?"":this.parentRoute.id,i]);s===Be&&(s="/"),a!==Be&&(a=Er(["/",a]));const c=a===Be?"/":Er([this.parentRoute.fullPath,s]);this._path=s,this._id=a,this._fullPath=c,this._to=c},this.addChildren=n=>this._addFileChildren(n),this._addFileChildren=n=>(Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this),this._addFileTypes=()=>this,this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.options=t||{},this.isRoot=!t?.getParentRoute,t?.id&&t?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class wh extends Bc{constructor(t){super(t)}}var Ch=ee("<div><div><strong>Something went wrong!</strong><button></button></div><div>"),_h=ee("<div><pre>"),Ph=ee("<code>");function Us(e){return x(Vd,{fallback:(t,n)=>(e.onCatch?.(t),W(lt([e.getResetKey],()=>n(),{defer:!0})),x(Ke,{get component(){return e.errorComponent??hr},error:t,reset:n})),get children(){return e.children}})}function hr({error:e}){const[t,n]=j(!1);return(()=>{var r=Ch(),o=r.firstChild,s=o.firstChild,i=s.nextSibling,a=o.nextSibling;return r.style.setProperty("padding",".5rem"),r.style.setProperty("max-width","100%"),o.style.setProperty("display","flex"),o.style.setProperty("align-items","center"),o.style.setProperty("gap",".5rem"),s.style.setProperty("font-size","1rem"),i.$$click=()=>n(c=>!c),i.style.setProperty("appearance","none"),i.style.setProperty("font-size",".6em"),i.style.setProperty("border","1px solid currentColor"),i.style.setProperty("padding",".1rem .2rem"),i.style.setProperty("font-weight","bold"),i.style.setProperty("border-radius",".25rem"),te(i,()=>t()?"Hide Error":"Show Error"),a.style.setProperty("height",".25rem"),te(r,(()=>{var c=pe(()=>!!t());return()=>c()?(()=>{var l=_h(),u=l.firstChild;return u.style.setProperty("font-size",".7em"),u.style.setProperty("border","1px solid red"),u.style.setProperty("border-radius",".25rem"),u.style.setProperty("padding",".3rem"),u.style.setProperty("color","red"),u.style.setProperty("overflow","auto"),te(u,(()=>{var d=pe(()=>!!e.message);return()=>d()?(()=>{var f=Ph();return te(f,()=>e.message),f})():null})()),l})():null})(),null),r})()}ao(["click"]);function kh(e){return(...t)=>{for(const n of e)n&&n(...t)}}const M=e=>typeof e=="function"&&!e.length?e():e,ea=e=>Array.isArray(e)?e:e?[e]:[];function Th(e,...t){return typeof e=="function"?e(...t):e}const Rh=Y;function Ae(...e){return kh(e)}function Ih(e,t=r=>r,n={}){const[r,o]=j(t(e.state)),s=n.equal??Eh,i=e.subscribe(()=>{const a=t(e.state);s(r(),a)||o(()=>a)});return Y(()=>{i()}),r}function Eh(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!t.has(r)||!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}const Ao=ve(null);function Kc(){return typeof document>"u"?Ao:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Ao,Ao)}function Ue(e){const t=ge(Kc());return e?.warn,t}function Uc(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Uc(e[o],t[o]))return!1;return!0}function Te(e){const t=Ue({warn:e?.router===void 0}),n=e?.router||t;return Ih(n.__store,r=>e?.select?e.select(r):r,{equal:Uc})}const Do=e=>H((t={current:null,previous:null})=>{const n=e();return t.current!==n&&(t.previous=t.current,t.current=n),t});function Mh(e,t,n={},r={}){const o=typeof IntersectionObserver=="function";let s=null;return W(()=>{const i=e();!i||!o||r.disabled||(s=new IntersectionObserver(([a])=>{t(a)},n),s.observe(i),Y(()=>{s?.disconnect()}))}),()=>s}var Lh=ee("<svg><a>");function Oh(e){const t=Ue(),[n,r]=j(!1);let o=!1;const[s,i]=Z(K({activeProps:()=>({class:"active"}),inactiveProps:()=>({})},e),["activeProps","inactiveProps","activeOptions","to","preload","preloadDelay","hashScrollIntoView","replace","startTransition","resetScroll","viewTransition","target","disabled","style","class","onClick","onFocus","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","onTouchStart","ignoreBlocker"]),[a,c]=Z(i,["params","search","hash","state","mask","reloadDocument","unsafeRelative"]),l=Te({select:N=>N.location.searchStr}),u=e.from,d=()=>({...e,from:u}),f=H(()=>(l(),t.buildLocation(d()))),h=H(()=>{if(d().disabled)return;let N;const I=f().maskedLocation;I?N=I.url.href:N=f().url.href;let ce=!1;return t.origin&&(N.startsWith(t.origin)?N=t.history.createHref(N.replace(t.origin,"")):ce=!0),{href:N,external:ce}}),p=H(()=>{const N=h();if(N?.external)return Hr(N.href)?void 0:N.href;try{return new URL(d().to),Hr(d().to)?void 0:d().to}catch{}}),m=H(()=>d().reloadDocument||p()?!1:s.preload??t.options.defaultPreload),g=()=>s.preloadDelay??t.options.defaultPreloadDelay??0,y=Te({select:N=>{if(p())return!1;if(s.activeOptions?.exact){if(!Gf(N.location.pathname,f().pathname,t.basepath))return!1}else{const I=Yr(N.location.pathname,t.basepath).split("/");if(!Yr(f()?.pathname,t.basepath)?.split("/")?.every((vt,Ye)=>vt===I[Ye]))return!1}return(s.activeOptions?.includeSearch??!0)&&!Zt(N.location.search,f().search,{partial:!s.activeOptions?.exact,ignoreUndefined:!s.activeOptions?.explicitUndefined})?!1:s.activeOptions?.includeHash?N.location.hash===f().hash:!0}}),v=()=>t.preloadRoute(d()).catch(N=>{console.warn(N),console.warn(Sh)}),b=N=>{N?.isIntersecting&&v()},[w,P]=j(null);if(Mh(w,b,{rootMargin:"100px"},{disabled:!!s.disabled||m()!=="viewport"}),W(()=>{o||!s.disabled&&m()==="render"&&(v(),o=!0)}),p())return K(c,{ref:Ae(P,d().ref),href:p()},Z(s,["target","disabled","style","class","onClick","onFocus","onMouseEnter","onMouseLeave","onMouseOut","onMouseOver","onTouchStart"])[0]);const T=N=>{const I=N.currentTarget.getAttribute("target"),ce=s.target!==void 0?s.target:I;if(!s.disabled&&!Ah(N)&&!N.defaultPrevented&&(!ce||ce==="_self")&&N.button===0){N.preventDefault(),r(!0);const qe=t.subscribe("onResolved",()=>{qe(),r(!1)});t.navigate({...d(),replace:s.replace,resetScroll:s.resetScroll,hashScrollIntoView:s.hashScrollIntoView,startTransition:s.startTransition,viewTransition:s.viewTransition,ignoreBlocker:s.ignoreBlocker})}},R=N=>{s.disabled||m()&&v()},S=R,C=N=>{if(s.disabled)return;const I=N.currentTarget||{};if(m()){if(I.preloadTimeout)return;I.preloadTimeout=setTimeout(()=>{I.preloadTimeout=null,v()},g())}},L=N=>{if(s.disabled)return;const I=N.currentTarget||{};I.preloadTimeout&&(clearTimeout(I.preloadTimeout),I.preloadTimeout=null)};function A(N,I){return I&&(typeof I=="function"?I(N):I[0](I[1],N)),N.defaultPrevented}function O(N){return I=>{for(const ce of N)A(I,ce)}}const G=()=>y()?Ot(s.activeProps,{})??{}:{},B=()=>y()?{}:Ot(s.inactiveProps,{}),q=()=>[s.class,G().class,B().class].filter(Boolean).join(" "),ne=()=>({...s.style,...G().style,...B().style});return K(c,G,B,()=>({href:h()?.href,ref:Ae(P,d().ref),onClick:O([s.onClick,T]),onFocus:O([s.onFocus,R]),onMouseEnter:O([s.onMouseEnter,C]),onMouseOver:O([s.onMouseOver,C]),onMouseLeave:O([s.onMouseLeave,L]),onMouseOut:O([s.onMouseOut,L]),onTouchStart:O([s.onTouchStart,S]),disabled:!!s.disabled,target:s.target,...(()=>{const N=ne();return Object.keys(N).length?{style:N}:{}})(),...(()=>{const N=q();return N?{class:N}:{}})(),...s.disabled&&{role:"link","aria-disabled":!0},...y()&&{"data-status":"active","aria-current":"page"},...n()&&{"data-transitioning":"transitioning"}}))}const Rn=e=>{const[t,n]=Z(e,["_asChild","children"]),[r,o]=Z(Oh(n),["type"]),s=H(()=>{const i=t.children;return typeof i=="function"?i({get isActive(){return o["data-status"]==="active"},get isTransitioning(){return o["data-transitioning"]==="transitioning"}}):i});if(t._asChild==="svg"){const[i,a]=Z(o,["class"]);return(()=>{var c=Lh(),l=c.firstChild;return co(l,a,!1,!0),te(l,s),c})()}return x(Ke,K({get component(){return t._asChild?t._asChild:"a"}},o,{get children(){return s()}}))};function Ah(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const fo=ve(()=>{}),Dh=ve(()=>{});function it(e){const t=ge(e.from?Dh:fo),n=Te({select:r=>{const o=r.matches.find(s=>e.from?e.from===s.routeId:s.id===t());return o===void 0?{match:void 0,shouldThrowError:!r.pendingMatches?.find(a=>e.from?e.from===a.routeId:a.id===t())&&!r.isTransitioning&&(e.shouldThrow??!0)}:{match:e.select?e.select(o):o,shouldThrowError:!1}}});return W(()=>{n().shouldThrowError&&nn(!1,`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`)}),H(()=>n().match)}function zs(e){return it({from:e.from,strict:e.strict,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function js(e){const{select:t,...n}=e;return it({...n,select:r=>t?t(r.loaderDeps):r.loaderDeps})}function Vs(e){return it({from:e.from,shouldThrow:e.shouldThrow,strict:e.strict,select:t=>{const n=e.strict===!1?t.params:t._strictParams;return e.select?e.select(n):n}})}function Ws(e){return it({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,select:t=>e.select?e.select(t.search):t.search})}function Gs(e){const t=Ue();return n=>t.navigate({...n,from:n.from??e?.from})}let $h=class extends Bc{constructor(t){super(t),this.useMatch=n=>it({select:n?.select,from:this.id}),this.useRouteContext=n=>it({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Ws({select:n?.select,from:this.id}),this.useParams=n=>Vs({select:n?.select,from:this.id}),this.useLoaderDeps=n=>js({...n,from:this.id}),this.useLoaderData=n=>zs({...n,from:this.id}),this.useNavigate=()=>Gs({from:this.fullPath}),this.Link=n=>{const r=this;return x(Rn,K({get from(){return r.fullPath}},n))}}};function Fh(e){return new $h(e)}class Nh extends wh{constructor(t){super(t),this.useMatch=n=>it({select:n?.select,from:this.id}),this.useRouteContext=n=>it({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Ws({select:n?.select,from:this.id}),this.useParams=n=>Vs({select:n?.select,from:this.id}),this.useLoaderDeps=n=>js({...n,from:this.id}),this.useLoaderData=n=>zs({...n,from:this.id}),this.useNavigate=()=>Gs({from:this.fullPath}),this.Link=n=>{const r=this;return x(Rn,K({get from(){return r.fullPath}},n))}}}function Bh(e){return new Nh(e)}function In(e){return typeof e=="object"?new ta(e,{silent:!0}).createRoute(e):new ta(e,{silent:!0}).createRoute}class ta{constructor(t,n){this.path=t,this.createRoute=r=>{this.silent;const o=Fh(r);return o.isRoot=!1,o},this.silent=n?.silent}}class na{constructor(t){this.useMatch=n=>it({select:n?.select,from:this.options.id}),this.useRouteContext=n=>it({from:this.options.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>Ws({select:n?.select,from:this.options.id}),this.useParams=n=>Vs({select:n?.select,from:this.options.id}),this.useLoaderDeps=n=>js({...n,from:this.options.id}),this.useLoaderData=n=>zs({...n,from:this.options.id}),this.useNavigate=()=>{const n=Ue();return Gs({from:n.routesById[this.options.id].fullPath})},this.options=t}}function ra(e){return typeof e=="object"?new na(e):t=>new na({id:e,...t})}function ho(e,t){let n,r,o;const s=()=>(n||(n=e().then(a=>(n=void 0,r=a[t],r)).catch(a=>{o=a})),n),i=function(c){if(o){if(Tf(o)&&o instanceof Error&&typeof window<"u"&&typeof sessionStorage<"u"){const l=`tanstack_router_reload:${o.message}`;if(!sessionStorage.getItem(l))return sessionStorage.setItem(l,"1"),window.location.reload(),{default:()=>null}}throw o}if(!r){const[l]=Hn(s,{initialValue:r,ssrLoadFrom:"initial"});return x(Ke,K({get component(){return l()}},c))}return x(Ke,K({component:r},c))};return i.preload=s,i}function Kh(){const e=Ue();let t={router:e,mounted:!1};const n=Te({select:({isLoading:d})=>d});if(e.isServer)return null;const[r,o]=Ad(),s=Te({select:d=>d.matches.some(f=>f.status==="pending")}),i=Do(n),a=()=>n()||r()||s(),c=Do(a),l=()=>n()||s(),u=Do(l);return e.startTransition=d=>{fc(()=>{o(d)})},dt(()=>{const d=e.history.subscribe(e.load),f=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});Qt(e.latestLocation.publicHref)!==Qt(f.publicHref)&&e.commitLocation({...f,replace:!0}),Y(()=>{d()})}),Ie(()=>{ye(()=>{if(typeof window<"u"&&e.ssr||t.router===e&&t.mounted)return;t={router:e,mounted:!0},(async()=>{try{await e.load()}catch(f){console.error(f)}})()})}),Ie(lt([i,n],([d,f])=>{d.previous&&!f&&e.emit({type:"onLoad",...en(e.state)})})),Kr(lt([l,u],([d,f])=>{f.previous&&!d&&e.emit({type:"onBeforeRouteMount",...en(e.state)})})),Ie(lt([a,c],([d,f])=>{if(f.previous&&!d){const h=en(e.state);e.emit({type:"onResolved",...h}),e.__store.setState(p=>({...p,status:"idle",resolvedLocation:p.location})),h.hrefChanged&&eh(e)}})),null}function Xt(e){return pe(()=>e.children)}var Uh=ee("<p>Not Found");function zh(e){const t=Te({select:n=>`not-found-${n.location.pathname}-${n.status}`});return x(Us,{getResetKey:()=>t(),onCatch:n=>{if(Ge(n))e.onCatch?.(n);else throw n},errorComponent:({error:n})=>{if(Ge(n))return e.fallback?.(n);throw n},get children(){return e.children}})}function jh(){return Uh()}function zc(e,t,n){return t.options.notFoundComponent?x(t.options.notFoundComponent,n):e.options.defaultNotFoundComponent?x(e.options.defaultNotFoundComponent,n):x(jh,{})}var Vh=ee("<script class=$tsr>");function Wh({children:e}){const t=Ue();return t.isServer?(()=>{var n=Vh();return n.innerHTML=e+";document.currentScript.remove()",Ie(()=>zt(n,"nonce",t.options.ssr?.nonce)),n})():null}function Gh(){const e=Ue();if(!e.isScrollRestoring||!e.isServer||typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation}))return null;const n=(e.options.getScrollRestorationKey||ss)(e.latestLocation),r=n!==ss(e.latestLocation)?n:void 0,o={storageKey:Jr,shouldScrollRestoration:!0};return r&&(o.key=r),x(Wh,{get children(){return`(${Ec.toString()})(${Mf(JSON.stringify(o))})`}})}const cs=e=>{const t=Ue(),n=Te({select:m=>{const g=m.matches.find(y=>y.id===e.matchId);return g?{routeId:g.routeId,ssr:g.ssr,_displayPending:g._displayPending}:null}});if(!n())return null;const r=()=>t.routesById[n().routeId],o=()=>r().options.pendingComponent??t.options.defaultPendingComponent,s=()=>r().options.errorComponent??t.options.defaultErrorComponent,i=()=>r().options.onCatch??t.options.defaultOnCatch,a=()=>r().isRoot?r().options.notFoundComponent??t.options.notFoundRoute?.options.component:r().options.notFoundComponent,c=n().ssr===!1||n().ssr==="data-only",l=()=>Ds,u=()=>s()?Us:Xt,d=()=>a()?zh:Xt,f=Te({select:m=>m.loadedAt}),h=Te({select:m=>{const g=m.matches.findIndex(y=>y.id===e.matchId);return m.matches[g-1]?.routeId}}),p=r().isRoot?r().options.shellComponent??Xt:Xt;return x(p,{get children(){return[x(fo.Provider,{value:()=>e.matchId,get children(){return x(Ke,{get component(){return l()},get fallback(){return pe(()=>!!(t.isServer||c))()?void 0:x(Ke,{get component(){return o()}})},get children(){return x(Ke,{get component(){return u()},getResetKey:()=>f(),get errorComponent(){return s()||hr},onCatch:m=>{if(Ge(m))throw m;`${n().routeId}`,i()?.(m)},get children(){return x(Ke,{get component(){return d()},fallback:m=>{if(!a()||m.routeId&&m.routeId!==n().routeId||!m.routeId&&!r().isRoot)throw m;return x(Ke,K({get component(){return a()}},m))},get children(){return x(Sc,{get children(){return[x(St,{when:c,get children(){return x(Se,{get when(){return!t.isServer},get fallback(){return x(Ke,{get component(){return o()}})},get children(){return x(oa,{get matchId(){return e.matchId}})}})}}),x(St,{when:!c,get children(){return x(oa,{get matchId(){return e.matchId}})}})]}})}})}})}})}}),pe(()=>pe(()=>h()===Be)()?[x(Hh,{}),x(Gh,{})]:null)]}})};function Hh(){const e=Ue(),t=Te({select:n=>n.resolvedLocation?.state.__TSR_key});return W(lt([t],()=>{e.emit({type:"onRendered",...en(e.state)})})),null}const oa=e=>{const t=Ue(),n=Te({select:c=>{const l=c.matches.find(p=>p.id===e.matchId);if(!l)return null;const u=l.routeId,f=(t.routesById[u].options.remountDeps??t.options.defaultRemountDeps)?.({routeId:u,loaderDeps:l.loaderDeps,params:l._strictParams,search:l._strictSearch});return{key:f?JSON.stringify(f):void 0,routeId:u,match:{id:l.id,status:l.status,error:l.error,_forcePending:l._forcePending,_displayPending:l._displayPending}}}});if(!n())return null;const r=()=>t.routesById[n().routeId],o=()=>n().match,s=()=>n().key??n().match.id,i=()=>{const c=r().options.component??t.options.defaultComponent;return c?x(c,{}):x(jc,{})},a=()=>x(Se,{get when(){return s()},keyed:!0,children:c=>i()});return x(Sc,{get children(){return[x(St,{get when(){return o()._displayPending},children:c=>{const[l]=Hn(()=>t.getMatch(o().id)?._nonReactive.displayPendingPromise);return pe(l)}}),x(St,{get when(){return o()._forcePending},children:c=>{const[l]=Hn(()=>t.getMatch(o().id)?._nonReactive.minPendingPromise);return pe(l)}}),x(St,{get when(){return o().status==="pending"},children:c=>{const l=r().options.pendingMinMs??t.options.defaultPendingMinMs;if(l){const f=t.getMatch(o().id);if(f&&!f._nonReactive.minPendingPromise&&!t.isServer){const h=kn();f._nonReactive.minPendingPromise=h,setTimeout(()=>{h.resolve(),f._nonReactive.minPendingPromise=void 0},l)}}const[u]=Hn(async()=>(await new Promise(f=>setTimeout(f,0)),t.getMatch(o().id)?._nonReactive.loadPromise)),d=r().options.pendingComponent??t.options.defaultPendingComponent;return[d&&l>0?x(Ke,{component:d}):null,pe(u)]}}),x(St,{get when(){return o().status==="notFound"},children:c=>(nn(Ge(o().error)),x(Se,{get when(){return n().routeId},keyed:!0,children:l=>zc(t,r(),o().error)}))}),x(St,{get when(){return o().status==="redirected"},children:c=>{nn(Ze(o().error));const[l]=Hn(async()=>(await new Promise(u=>setTimeout(u,0)),t.getMatch(o().id)?._nonReactive.loadPromise));return pe(l)}}),x(St,{get when(){return o().status==="error"},children:c=>{if(t.isServer){const l=(r().options.errorComponent??t.options.defaultErrorComponent)||hr;return x(l,{get error(){return o().error},info:{componentStack:""}})}throw o().error}}),x(St,{get when(){return o().status==="success"},get children(){return a()}})]}})},jc=()=>{const e=Ue(),t=ge(fo),n=Te({select:c=>c.matches.find(l=>l.id===t())?.routeId}),r=()=>e.routesById[n()],o=Te({select:c=>{const u=c.matches.find(d=>d.id===t());return u?u.globalNotFound:!1}}),s=Te({select:c=>{const l=c.matches,u=l.findIndex(f=>f.id===t());return l[u+1]?.id}}),i=Te({select:c=>{const l=c.matches,u=l.findIndex(d=>d.id===t());return l[u+1]?.status}}),a=()=>i()!=="redirected"&&o();return x(Se,{get when(){return pe(()=>!a())()&&s()},get fallback(){return x(Se,{get when(){return a()},get children(){return zc(e,r(),void 0)}})},children:c=>{const l=H(()=>c());return x(Se,{get when(){return n()===Be},get fallback(){return x(cs,{get matchId(){return l()}})},get children(){return x(Ds,{get fallback(){return x(Ke,{get component(){return e.options.defaultPendingComponent}})},get children(){return x(cs,{get matchId(){return l()}})}})}})}})};function qh(){const e=Ue(),t=e.isServer||typeof document<"u"&&e.ssr?Xt:Ds,r=e.routesById[Be].options.pendingComponent??e.options.defaultPendingComponent,o=e.options.InnerWrap||Xt;return x(o,{get children(){return x(t,{get fallback(){return r?x(r,{}):null},get children(){return[x(Kh,{}),x(Yh,{})]}})}})}function Yh(){const e=Ue(),t=Te({select:o=>o.matches[0]?.id}),n=Te({select:o=>o.loadedAt}),r=()=>x(Se,{get when(){return t()},get children(){return x(cs,{get matchId(){return t()}})}});return x(fo.Provider,{value:t,get children(){return pe(()=>!!e.options.disableGlobalCatchBoundary)()?r():x(Us,{getResetKey:()=>n(),errorComponent:hr,onCatch:o=>{o.message||o.toString()},get children(){return r()}})}})}const Jh=e=>new Xh(e);class Xh extends mh{constructor(t){super(t)}}typeof globalThis<"u"?(globalThis.createFileRoute=In,globalThis.createLazyFileRoute=ra):typeof window<"u"&&(window.createFileRoute=In,window.createLazyFileRoute=ra);function Zh({router:e,children:t,...n}){e.update({...e.options,...n,context:{...e.options.context,...n.context}});const r=Kc(),o=e.options.Wrap||Xt;return x(o,{get children(){return x(r.Provider,{value:e,get children(){return t()}})}})}function Qh({router:e,...t}){return x(Zh,K({router:e},t,{children:()=>x(qh,{})}))}function ep(e){return Te({select:t=>t.location})}var tp=ee('<div class="min-w-0 flex-1 p-4 flex flex-col items-center justify-center gap-6"><div class="flex gap-2 items-center flex-wrap"><button type=button class="px-2 py-1 bg-gray-600 dark:bg-gray-700 rounded text-white uppercase font-extrabold">Try Again');function Vc(e){const t=Ue(),n=it({strict:!1,select:r=>r.id===Be});return console.error("DefaultCatchBoundary Error:",e.error),(()=>{var r=tp(),o=r.firstChild,s=o.firstChild;return te(r,x(hr,{get error(){return e.error}}),o),s.$$click=()=>{t.invalidate()},te(o,(()=>{var i=pe(()=>!!n());return()=>i()?x(Rn,{to:"/",class:"px-2 py-1 bg-gray-600 dark:bg-gray-700 rounded text-white uppercase font-extrabold",children:"Home"}):x(Rn,{to:"/",class:"px-2 py-1 bg-gray-600 dark:bg-gray-700 rounded text-white uppercase font-extrabold",onClick:a=>{a.preventDefault(),window.history.back()},children:"Go Back"})})(),null),r})()}ao(["click"]);var np=ee('<div class="space-y-2 p-2"><div class="text-gray-600 dark:text-gray-400"></div><p class="flex items-center gap-2 flex-wrap"><button type=button class="bg-emerald-500 text-white px-2 py-1 rounded uppercase font-black text-sm">Go back'),rp=ee("<p>The page you are looking for does not exist.");function Wc(e){return(()=>{var t=np(),n=t.firstChild,r=n.nextSibling,o=r.firstChild;return te(n,()=>e.children||rp()),o.$$click=()=>window.history.back(),te(r,x(Rn,{to:"/",class:"bg-cyan-600 text-white px-2 py-1 rounded uppercase font-black text-sm",children:"Start Over"}),null),t})()}ao(["click"]);function op(e,t,n,r){return e.addEventListener(t,n,r),Rh(e.removeEventListener.bind(e,t,n,r))}function sp(e,t,n,r){const o=()=>{ea(M(e)).forEach(s=>{s&&ea(M(t)).forEach(i=>op(s,i,n,r))})};typeof e=="function"?W(o):Ie(o)}const ip=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g;function sa(e){const t={};let n;for(;n=ip.exec(e);)t[n[1]]=n[2];return t}function po(e,t){if(typeof e=="string"){if(typeof t=="string")return`${e};${t}`;e=sa(e)}else typeof t=="string"&&(t=sa(t));return{...e,...t}}function ap(e,t,n=-1){return n in e?[...e.slice(0,n),t,...e.slice(n)]:[...e,t]}function ls(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function cp(e){return typeof e=="number"}function vn(e){return Object.prototype.toString.call(e)==="[object String]"}function lp(e){return typeof e=="function"}function go(e){return t=>`${e()}-${t}`}function Ve(e,t){return e?e===t||e.contains(t):!1}function Yn(e,t=!1){const{activeElement:n}=ft(e);if(!n?.nodeName)return null;if(Gc(n)&&n.contentDocument)return Yn(n.contentDocument.body,t);if(t){const r=n.getAttribute("aria-activedescendant");if(r){const o=ft(n).getElementById(r);if(o)return o}}return n}function up(e){return ft(e).defaultView||window}function ft(e){return e?e.ownerDocument||e:document}function Gc(e){return e.tagName==="IFRAME"}var Hc=(e=>(e.Escape="Escape",e.Enter="Enter",e.Tab="Tab",e.Space=" ",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e))(Hc||{});function Hs(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.userAgentData?.platform||window.navigator.platform):!1}function mo(){return Hs(/^Mac/i)}function dp(){return Hs(/^iPhone/i)}function fp(){return Hs(/^iPad/i)||mo()&&navigator.maxTouchPoints>1}function hp(){return dp()||fp()}function pp(){return mo()||hp()}function me(e,t){return t&&(lp(t)?t(e):t[0](t[1],e)),e?.defaultPrevented}function ke(e){return t=>{for(const n of e)me(t,n)}}function gp(e){return mo()?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey}function Pe(e){if(e)if(mp())e.focus({preventScroll:!0});else{const t=yp(e);e.focus(),vp(t)}}var _r=null;function mp(){if(_r==null){_r=!1;try{document.createElement("div").focus({get preventScroll(){return _r=!0,!0}})}catch{}}return _r}function yp(e){let t=e.parentNode;const n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function vp(e){for(const{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}var qc=["input:not([type='hidden']):not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","[tabindex]","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]:not([contenteditable='false'])"],bp=[...qc,'[tabindex]:not([tabindex="-1"]):not([disabled])'],qs=`${qc.join(":not([hidden]),")},[tabindex]:not([disabled]):not([hidden])`,xp=bp.join(':not([hidden]):not([tabindex="-1"]),');function Yc(e,t){const r=Array.from(e.querySelectorAll(qs)).filter(ia);return t&&ia(e)&&r.unshift(e),r.forEach((o,s)=>{if(Gc(o)&&o.contentDocument){const i=o.contentDocument.body,a=Yc(i,!1);r.splice(s,1,...a)}}),r}function ia(e){return Jc(e)&&!Sp(e)}function Jc(e){return e.matches(qs)&&Ys(e)}function Sp(e){return Number.parseInt(e.getAttribute("tabindex")||"0",10)<0}function Ys(e,t){return e.nodeName!=="#comment"&&wp(e)&&Cp(e,t)&&(!e.parentElement||Ys(e.parentElement,e))}function wp(e){if(!(e instanceof HTMLElement)&&!(e instanceof SVGElement))return!1;const{display:t,visibility:n}=e.style;let r=t!=="none"&&n!=="hidden"&&n!=="collapse";if(r){if(!e.ownerDocument.defaultView)return r;const{getComputedStyle:o}=e.ownerDocument.defaultView,{display:s,visibility:i}=o(e);r=s!=="none"&&i!=="hidden"&&i!=="collapse"}return r}function Cp(e,t){return!e.hasAttribute("hidden")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function _p(e,t,n){const r=t?.tabbable?xp:qs,o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(s){return t?.from?.contains(s)?NodeFilter.FILTER_REJECT:s.matches(r)&&Ys(s)&&(!t?.accept||t.accept(s))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t?.from&&(o.currentNode=t.from),o}function aa(e){let t=e;for(;t&&!Pp(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}function Pp(e){const t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function kp(){}function Tp(e,t){const[n,r]=e;let o=!1;const s=t.length;for(let i=s,a=0,c=i-1;a<i;c=a++){const[l,u]=t[a],[d,f]=t[c],[,h]=t[c===0?i-1:c-1]||[0,0],p=(u-f)*(n-l)-(l-d)*(r-u);if(f<u){if(r>=f&&r<u){if(p===0)return!0;p>0&&(r===f?r>h&&(o=!o):o=!o)}}else if(u<f){if(r>u&&r<=f){if(p===0)return!0;p<0&&(r===f?r<h&&(o=!o):o=!o)}}else if(r===u&&(n>=d&&n<=l||n>=l&&n<=d))return!0}return o}function de(e,t){return K(e,t)}var Un=new Map,ca=new Set;function la(){if(typeof window>"u")return;const e=n=>{if(!n.target)return;let r=Un.get(n.target);r||(r=new Set,Un.set(n.target,r),n.target.addEventListener("transitioncancel",t)),r.add(n.propertyName)},t=n=>{if(!n.target)return;const r=Un.get(n.target);if(r&&(r.delete(n.propertyName),r.size===0&&(n.target.removeEventListener("transitioncancel",t),Un.delete(n.target)),Un.size===0)){for(const o of ca)o();ca.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?la():document.addEventListener("DOMContentLoaded",la));function us(e,t){const n=ua(e,t,"left"),r=ua(e,t,"top"),o=t.offsetWidth,s=t.offsetHeight;let i=e.scrollLeft,a=e.scrollTop;const c=i+e.offsetWidth,l=a+e.offsetHeight;n<=i?i=n:n+o>c&&(i+=n+o-c),r<=a?a=r:r+s>l&&(a+=r+s-l),e.scrollLeft=i,e.scrollTop=a}function ua(e,t,n){const r=n==="left"?"offsetLeft":"offsetTop";let o=0;for(;t.offsetParent&&(o+=t[r],t.offsetParent!==e);){if(t.offsetParent.contains(e)){o-=e[r];break}t=t.offsetParent}return o}function Rp(e,t){if(document.contains(e)){const n=document.scrollingElement||document.documentElement;if(window.getComputedStyle(n).overflow==="hidden"){let o=aa(e);for(;e&&o&&e!==n&&o!==n;)us(o,e),e=o,o=aa(e)}else{const{left:o,top:s}=e.getBoundingClientRect();e?.scrollIntoView?.({block:"nearest"});const{left:i,top:a}=e.getBoundingClientRect();(Math.abs(o-i)>1||Math.abs(s-a)>1)&&e.scrollIntoView?.({block:"nearest"})}}}var Ip={border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:"0",position:"absolute",width:"1px","white-space":"nowrap"};function Js(e,t){const[n,r]=j(da(t?.()));return W(()=>{r(e()?.tagName.toLowerCase()||da(t?.()))}),n}function da(e){return vn(e)?e:void 0}function Ee(e){const[t,n]=Z(e,["as"]);if(!t.as)throw new Error("[kobalte]: Polymorphic is missing the required `as` prop.");return x(Ke,K(n,{get component(){return t.as}}))}var Ep=Object.defineProperty,yo=(e,t)=>{for(var n in t)Ep(e,n,{get:t[n],enumerable:!0})},Mp={};yo(Mp,{Button:()=>Ap,Root:()=>Ln});var Lp=["button","color","file","image","reset","submit"];function Op(e){const t=e.tagName.toLowerCase();return t==="button"?!0:t==="input"&&e.type?Lp.indexOf(e.type)!==-1:!1}function Ln(e){let t;const n=de({type:"button"},e),[r,o]=Z(n,["ref","type","disabled"]),s=Js(()=>t,()=>"button"),i=H(()=>{const l=s();return l==null?!1:Op({tagName:l,type:r.type})}),a=H(()=>s()==="input"),c=H(()=>s()==="a"&&t?.getAttribute("href")!=null);return x(Ee,K({as:"button",ref(l){var u=Ae(d=>t=d,r.ref);typeof u=="function"&&u(l)},get type(){return i()||a()?r.type:void 0},get role(){return!i()&&!c()?"button":void 0},get tabIndex(){return!i()&&!c()&&!r.disabled?0:void 0},get disabled(){return i()||a()?r.disabled:void 0},get"aria-disabled"(){return!i()&&!a()&&r.disabled?!0:void 0},get"data-disabled"(){return r.disabled?"":void 0}},o))}var Ap=Ln;function vo(e){const[t,n]=j(e.defaultValue?.()),r=H(()=>e.value?.()!==void 0),o=H(()=>r()?e.value?.():t());return[o,i=>{ye(()=>{const a=Th(i,o());return Object.is(a,o())||(r()||n(a),e.onChange?.(a)),a})}]}function Xc(e){const[t,n]=vo(e);return[()=>t()??!1,n]}function Dp(e){const[t,n]=vo(e);return[()=>t()??[],n]}function $p(e={}){const[t,n]=Xc({value:()=>M(e.isSelected),defaultValue:()=>!!M(e.defaultIsSelected),onChange:s=>e.onSelectedChange?.(s)});return{isSelected:t,setIsSelected:s=>{!M(e.isReadOnly)&&!M(e.isDisabled)&&n(s)},toggle:()=>{!M(e.isReadOnly)&&!M(e.isDisabled)&&n(!t())}}}function Zc(e){let t=e.startIndex??0;const n=e.startLevel??0,r=[],o=c=>{if(c==null)return"";const l=e.getKey??"key",u=vn(l)?c[l]:l(c);return u!=null?String(u):""},s=c=>{if(c==null)return"";const l=e.getTextValue??"textValue",u=vn(l)?c[l]:l(c);return u!=null?String(u):""},i=c=>{if(c==null)return!1;const l=e.getDisabled??"disabled";return(vn(l)?c[l]:l(c))??!1},a=c=>{if(c!=null)return vn(e.getSectionChildren)?c[e.getSectionChildren]:e.getSectionChildren?.(c)};for(const c of e.dataSource){if(vn(c)||cp(c)){r.push({type:"item",rawValue:c,key:String(c),textValue:String(c),disabled:i(c),level:n,index:t}),t++;continue}if(a(c)!=null){r.push({type:"section",rawValue:c,key:"",textValue:"",disabled:!1,level:n,index:t}),t++;const l=a(c)??[];if(l.length>0){const u=Zc({dataSource:l,getKey:e.getKey,getTextValue:e.getTextValue,getDisabled:e.getDisabled,getSectionChildren:e.getSectionChildren,startIndex:t,startLevel:n+1});r.push(...u),t+=u.length}}else r.push({type:"item",rawValue:c,key:o(c),textValue:s(c),disabled:i(c),level:n,index:t}),t++}return r}function Fp(e,t=[]){return H(()=>{const n=Zc({dataSource:M(e.dataSource),getKey:M(e.getKey),getTextValue:M(e.getTextValue),getDisabled:M(e.getDisabled),getSectionChildren:M(e.getSectionChildren)});for(let r=0;r<t.length;r++)t[r]();return e.factory(n)})}var Np=new Set(["Avst","Arab","Armi","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),Bp=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function Kp(e){if(Intl.Locale){const n=new Intl.Locale(e).maximize().script??"";return Np.has(n)}const t=e.split("-")[0];return Bp.has(t)}function Up(e){return Kp(e)?"rtl":"ltr"}function Qc(){let e=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:Up(e)}}var ds=Qc(),Jn=new Set;function fa(){ds=Qc();for(const e of Jn)e(ds)}function zp(){const[e,t]=j(ds),n=H(()=>e());return dt(()=>{Jn.size===0&&window.addEventListener("languagechange",fa),Jn.add(t),Y(()=>{Jn.delete(t),Jn.size===0&&window.removeEventListener("languagechange",fa)})}),{locale:()=>n().locale,direction:()=>n().direction}}var jp=ve();function Ht(){const e=zp();return ge(jp)||e}var $o=new Map;function Vp(e){const{locale:t}=Ht(),n=H(()=>t()+(e?Object.entries(e).sort((r,o)=>r[0]<o[0]?-1:1).join():""));return H(()=>{const r=n();let o;return $o.has(r)&&(o=$o.get(r)),o||(o=new Intl.Collator(t(),e),$o.set(r,o)),o})}var wt=class el extends Set{anchorKey;currentKey;constructor(t,n,r){super(t),t instanceof el?(this.anchorKey=n||t.anchorKey,this.currentKey=r||t.currentKey):(this.anchorKey=n,this.currentKey=r)}};function Wp(e){const[t,n]=vo(e);return[()=>t()??new wt,n]}function tl(e){return pp()?e.altKey:e.ctrlKey}function bn(e){return mo()?e.metaKey:e.ctrlKey}function ha(e){return new wt(e)}function Gp(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Hp(e){const t=de({selectionMode:"none",selectionBehavior:"toggle"},e),[n,r]=j(!1),[o,s]=j(),i=H(()=>{const m=M(t.selectedKeys);return m!=null?ha(m):m}),a=H(()=>{const m=M(t.defaultSelectedKeys);return m!=null?ha(m):new wt}),[c,l]=Wp({value:i,defaultValue:a,onChange:m=>t.onSelectionChange?.(m)}),[u,d]=j(M(t.selectionBehavior)),f=()=>M(t.selectionMode),h=()=>M(t.disallowEmptySelection)??!1,p=m=>{(M(t.allowDuplicateSelectionEvents)||!Gp(m,c()))&&l(m)};return W(()=>{const m=c();M(t.selectionBehavior)==="replace"&&u()==="toggle"&&typeof m=="object"&&m.size===0&&d("replace")}),W(()=>{d(M(t.selectionBehavior)??"toggle")}),{selectionMode:f,disallowEmptySelection:h,selectionBehavior:u,setSelectionBehavior:d,isFocused:n,setFocused:r,focusedKey:o,setFocusedKey:s,selectedKeys:c,setSelectedKeys:p}}function qp(e){const[t,n]=j(""),[r,o]=j(-1);return{typeSelectHandlers:{onKeyDown:i=>{if(M(e.isDisabled))return;const a=M(e.keyboardDelegate),c=M(e.selectionManager);if(!a.getKeyForSearch)return;const l=Yp(i.key);if(!l||i.ctrlKey||i.metaKey)return;l===" "&&t().trim().length>0&&(i.preventDefault(),i.stopPropagation());let u=n(f=>f+l),d=a.getKeyForSearch(u,c.focusedKey())??a.getKeyForSearch(u);d==null&&Jp(u)&&(u=u[0],d=a.getKeyForSearch(u,c.focusedKey())??a.getKeyForSearch(u)),d!=null&&(c.setFocusedKey(d),e.onTypeSelect?.(d)),clearTimeout(r()),o(window.setTimeout(()=>n(""),500))}}}}function Yp(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function Jp(e){return e.split("").every(t=>t===e[0])}function Xp(e,t,n){const o=K({selectOnFocus:()=>M(e.selectionManager).selectionBehavior()==="replace"},e),s=()=>t(),{direction:i}=Ht();let a={top:0,left:0};sp(()=>M(o.isVirtualized)?void 0:s(),"scroll",()=>{const g=s();g&&(a={top:g.scrollTop,left:g.scrollLeft})});const{typeSelectHandlers:c}=qp({isDisabled:()=>M(o.disallowTypeAhead),keyboardDelegate:()=>M(o.keyboardDelegate),selectionManager:()=>M(o.selectionManager)}),l=()=>M(o.orientation)??"vertical",u=g=>{me(g,c.onKeyDown),g.altKey&&g.key==="Tab"&&g.preventDefault();const y=t();if(!y?.contains(g.target))return;const v=M(o.selectionManager),b=M(o.selectOnFocus),w=S=>{S!=null&&(v.setFocusedKey(S),g.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(S):b&&!tl(g)&&v.replaceSelection(S))},P=M(o.keyboardDelegate),T=M(o.shouldFocusWrap),R=v.focusedKey();switch(g.key){case(l()==="vertical"?"ArrowDown":"ArrowRight"):{if(P.getKeyBelow){g.preventDefault();let S;R!=null?S=P.getKeyBelow(R):S=P.getFirstKey?.(),S==null&&T&&(S=P.getFirstKey?.(R)),w(S)}break}case(l()==="vertical"?"ArrowUp":"ArrowLeft"):{if(P.getKeyAbove){g.preventDefault();let S;R!=null?S=P.getKeyAbove(R):S=P.getLastKey?.(),S==null&&T&&(S=P.getLastKey?.(R)),w(S)}break}case(l()==="vertical"?"ArrowLeft":"ArrowUp"):{if(P.getKeyLeftOf){g.preventDefault();const S=i()==="rtl";let C;R!=null?C=P.getKeyLeftOf(R):C=S?P.getFirstKey?.():P.getLastKey?.(),w(C)}break}case(l()==="vertical"?"ArrowRight":"ArrowDown"):{if(P.getKeyRightOf){g.preventDefault();const S=i()==="rtl";let C;R!=null?C=P.getKeyRightOf(R):C=S?P.getLastKey?.():P.getFirstKey?.(),w(C)}break}case"Home":if(P.getFirstKey){g.preventDefault();const S=P.getFirstKey(R,bn(g));S!=null&&(v.setFocusedKey(S),bn(g)&&g.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(S):b&&v.replaceSelection(S))}break;case"End":if(P.getLastKey){g.preventDefault();const S=P.getLastKey(R,bn(g));S!=null&&(v.setFocusedKey(S),bn(g)&&g.shiftKey&&v.selectionMode()==="multiple"?v.extendSelection(S):b&&v.replaceSelection(S))}break;case"PageDown":if(P.getKeyPageBelow&&R!=null){g.preventDefault();const S=P.getKeyPageBelow(R);w(S)}break;case"PageUp":if(P.getKeyPageAbove&&R!=null){g.preventDefault();const S=P.getKeyPageAbove(R);w(S)}break;case"a":bn(g)&&v.selectionMode()==="multiple"&&M(o.disallowSelectAll)!==!0&&(g.preventDefault(),v.selectAll());break;case"Escape":g.defaultPrevented||(g.preventDefault(),M(o.disallowEmptySelection)||v.clearSelection());break;case"Tab":if(!M(o.allowsTabNavigation)){if(g.shiftKey)y.focus();else{const S=_p(y,{tabbable:!0});let C,L;do L=S.lastChild(),L&&(C=L);while(L);C&&!C.contains(document.activeElement)&&Pe(C)}break}}},d=g=>{const y=M(o.selectionManager),v=M(o.keyboardDelegate),b=M(o.selectOnFocus);if(y.isFocused()){g.currentTarget.contains(g.target)||y.setFocused(!1);return}if(g.currentTarget.contains(g.target)){if(y.setFocused(!0),y.focusedKey()==null){const w=T=>{T!=null&&(y.setFocusedKey(T),b&&y.replaceSelection(T))},P=g.relatedTarget;P&&g.currentTarget.compareDocumentPosition(P)&Node.DOCUMENT_POSITION_FOLLOWING?w(y.lastSelectedKey()??v.getLastKey?.()):w(y.firstSelectedKey()??v.getFirstKey?.())}else if(!M(o.isVirtualized)){const w=s();if(w){w.scrollTop=a.top,w.scrollLeft=a.left;const P=w.querySelector(`[data-key="${y.focusedKey()}"]`);P&&(Pe(P),us(w,P))}}}},f=g=>{const y=M(o.selectionManager);g.currentTarget.contains(g.relatedTarget)||y.setFocused(!1)},h=g=>{s()===g.target&&g.preventDefault()},p=()=>{const g=M(o.autoFocus);if(!g)return;const y=M(o.selectionManager),v=M(o.keyboardDelegate);let b;g==="first"&&(b=v.getFirstKey?.()),g==="last"&&(b=v.getLastKey?.());const w=y.selectedKeys();w.size&&(b=w.values().next().value),y.setFocused(!0),y.setFocusedKey(b);const P=t();P&&b==null&&!M(o.shouldUseVirtualFocus)&&Pe(P)};return dt(()=>{o.deferAutoFocus?setTimeout(p,0):p()}),W(lt([s,()=>M(o.isVirtualized),()=>M(o.selectionManager).focusedKey()],g=>{const[y,v,b]=g;if(v)b&&o.scrollToKey?.(b);else if(b&&y){const w=y.querySelector(`[data-key="${b}"]`);w&&us(y,w)}})),{tabIndex:H(()=>{if(!M(o.shouldUseVirtualFocus))return M(o.selectionManager).focusedKey()==null?0:-1}),onKeyDown:u,onMouseDown:h,onFocusIn:d,onFocusOut:f}}function nl(e,t){const n=()=>M(e.selectionManager),r=()=>M(e.key),o=()=>M(e.shouldUseVirtualFocus),s=v=>{n().selectionMode()!=="none"&&(n().selectionMode()==="single"?n().isSelected(r())&&!n().disallowEmptySelection()?n().toggleSelection(r()):n().replaceSelection(r()):v?.shiftKey?n().extendSelection(r()):n().selectionBehavior()==="toggle"||bn(v)||"pointerType"in v&&v.pointerType==="touch"?n().toggleSelection(r()):n().replaceSelection(r()))},i=()=>n().isSelected(r()),a=()=>M(e.disabled)||n().isDisabled(r()),c=()=>!a()&&n().canSelectItem(r());let l=null;const u=v=>{c()&&(l=v.pointerType,v.pointerType==="mouse"&&v.button===0&&!M(e.shouldSelectOnPressUp)&&s(v))},d=v=>{c()&&v.pointerType==="mouse"&&v.button===0&&M(e.shouldSelectOnPressUp)&&M(e.allowsDifferentPressOrigin)&&s(v)},f=v=>{c()&&(M(e.shouldSelectOnPressUp)&&!M(e.allowsDifferentPressOrigin)||l!=="mouse")&&s(v)},h=v=>{!c()||!["Enter"," "].includes(v.key)||(tl(v)?n().toggleSelection(r()):s(v))},p=v=>{a()&&v.preventDefault()},m=v=>{const b=t();o()||a()||!b||v.target===b&&n().setFocusedKey(r())},g=H(()=>{if(!(o()||a()))return r()===n().focusedKey()?0:-1}),y=H(()=>M(e.virtualized)?void 0:r());return W(lt([t,r,o,()=>n().focusedKey(),()=>n().isFocused()],([v,b,w,P,T])=>{v&&b===P&&T&&!w&&document.activeElement!==v&&(e.focus?e.focus():Pe(v))})),{isSelected:i,isDisabled:a,allowsSelection:c,tabIndex:g,dataKey:y,onPointerDown:u,onPointerUp:d,onClick:f,onKeyDown:h,onMouseDown:p,onFocus:m}}var Zp=class{collection;state;constructor(e,t){this.collection=e,this.state=t}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}isFocused(){return this.state.isFocused()}setFocused(e){this.state.setFocused(e)}focusedKey(){return this.state.focusedKey()}setFocusedKey(e){(e==null||this.collection().getItem(e))&&this.state.setFocusedKey(e)}selectedKeys(){return this.state.selectedKeys()}isSelected(e){if(this.state.selectionMode()==="none")return!1;const t=this.getKey(e);return t==null?!1:this.state.selectedKeys().has(t)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return!1;const e=this.state.selectedKeys();return this.getAllSelectableKeys().every(t=>e.has(t))}firstSelectedKey(){let e;for(const t of this.state.selectedKeys()){const n=this.collection().getItem(t),r=n?.index!=null&&e?.index!=null&&n.index<e.index;(!e||r)&&(e=n)}return e?.key}lastSelectedKey(){let e;for(const t of this.state.selectedKeys()){const n=this.collection().getItem(t),r=n?.index!=null&&e?.index!=null&&n.index>e.index;(!e||r)&&(e=n)}return e?.key}extendSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const n=this.state.selectedKeys(),r=n.anchorKey||t,o=new wt(n,r,t);for(const s of this.getKeyRange(r,n.currentKey||t))o.delete(s);for(const s of this.getKeyRange(t,r))this.canSelectItem(s)&&o.add(s);this.state.setSelectedKeys(o)}getKeyRange(e,t){const n=this.collection().getItem(e),r=this.collection().getItem(t);return n&&r?n.index!=null&&r.index!=null&&n.index<=r.index?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){const n=[];let r=e;for(;r!=null;){const o=this.collection().getItem(r);if(o&&o.type==="item"&&n.push(r),r===t)return n;r=this.collection().getKeyAfter(r)}return[]}getKey(e){const t=this.collection().getItem(e);return t?!t||t.type!=="item"?null:t.key:e}toggleSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const n=new wt(this.state.selectedKeys());n.has(t)?n.delete(t):this.canSelectItem(t)&&(n.add(t),n.anchorKey=t,n.currentKey=t),!(this.disallowEmptySelection()&&n.size===0)&&this.state.setSelectedKeys(n)}replaceSelection(e){if(this.selectionMode()==="none")return;const t=this.getKey(e);if(t==null)return;const n=this.canSelectItem(t)?new wt([t],t,t):new wt;this.state.setSelectedKeys(n)}setSelectedKeys(e){if(this.selectionMode()==="none")return;const t=new wt;for(const n of e){const r=this.getKey(n);if(r!=null&&(t.add(r),this.selectionMode()==="single"))break}this.state.setSelectedKeys(t)}selectAll(){this.selectionMode()==="multiple"&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()))}clearSelection(){const e=this.state.selectedKeys();!this.disallowEmptySelection()&&e.size>0&&this.state.setSelectedKeys(new wt)}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode()!=="none"&&(this.selectionMode()==="single"?this.isSelected(e)&&!this.disallowEmptySelection()?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior()==="toggle"||t&&t.pointerType==="touch"?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys())return!0;const t=this.selectedKeys();if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;for(const n of t)if(!e.has(n))return!1;return!0}canSelectItem(e){if(this.state.selectionMode()==="none")return!1;const t=this.collection().getItem(e);return t!=null&&!t.disabled}isDisabled(e){const t=this.collection().getItem(e);return!t||t.disabled}getAllSelectableKeys(){const e=[];return(n=>{for(;n!=null;){if(this.canSelectItem(n)){const r=this.collection().getItem(n);if(!r)continue;r.type==="item"&&e.push(n)}n=this.collection().getKeyAfter(n)}})(this.collection().getFirstKey()),e}},pa=class{keyMap=new Map;iterable;firstKey;lastKey;constructor(e){this.iterable=e;for(const r of e)this.keyMap.set(r.key,r);if(this.keyMap.size===0)return;let t,n=0;for(const[r,o]of this.keyMap)t?(t.nextKey=r,o.prevKey=t.key):(this.firstKey=r,o.prevKey=void 0),o.type==="item"&&(o.index=n++),t=o,t.nextKey=void 0;this.lastKey=t.key}*[Symbol.iterator](){yield*this.iterable}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){return this.keyMap.get(e)?.prevKey}getKeyAfter(e){return this.keyMap.get(e)?.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}};function Qp(e){const t=Hp(e),r=Fp({dataSource:()=>M(e.dataSource),getKey:()=>M(e.getKey),getTextValue:()=>M(e.getTextValue),getDisabled:()=>M(e.getDisabled),getSectionChildren:()=>M(e.getSectionChildren),factory:s=>e.filter?new pa(e.filter(s)):new pa(s)},[()=>e.filter]),o=new Zp(r,t);return Kr(()=>{const s=t.focusedKey();s!=null&&!r().getItem(s)&&t.setFocusedKey(void 0)}),{collection:r,selectionManager:()=>o}}var rl=ve();function ol(){return ge(rl)}function eg(){const e=ol();if(e===void 0)throw new Error("[kobalte]: `useDomCollectionContext` must be used within a `DomCollectionProvider` component");return e}function sl(e,t){return!!(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}function tg(e,t){const n=t.ref();if(!n)return-1;let r=e.length;if(!r)return-1;for(;r--;){const o=e[r]?.ref();if(o&&sl(o,n))return r+1}return 0}function ng(e){const t=e.map((r,o)=>[o,r]);let n=!1;return t.sort(([r,o],[s,i])=>{const a=o.ref(),c=i.ref();return a===c||!a||!c?0:sl(a,c)?(r>s&&(n=!0),-1):(r<s&&(n=!0),1)}),n?t.map(([r,o])=>o):e}function il(e,t){const n=ng(e);e!==n&&t(n)}function rg(e){const t=e[0],n=e[e.length-1]?.ref();let r=t?.ref()?.parentElement;for(;r;){if(n&&r.contains(n))return r;r=r.parentElement}return ft(r).body}function og(e,t){W(()=>{const n=setTimeout(()=>{il(e(),t)});Y(()=>clearTimeout(n))})}function sg(e,t){if(typeof IntersectionObserver!="function"){og(e,t);return}let n=[];W(()=>{const r=()=>{const i=!!n.length;n=e(),i&&il(e(),t)},o=rg(e()),s=new IntersectionObserver(r,{root:o});for(const i of e()){const a=i.ref();a&&s.observe(a)}Y(()=>s.disconnect())})}function ig(e={}){const[t,n]=Dp({value:()=>M(e.items),onChange:s=>e.onItemsChange?.(s)});sg(t,n);const r=s=>(n(i=>{const a=tg(i,s);return ap(i,s,a)}),()=>{n(i=>{const a=i.filter(c=>c.ref()!==s.ref());return i.length===a.length?i:a})});return{DomCollectionProvider:s=>x(rl.Provider,{value:{registerItem:r},get children(){return s.children}})}}function ag(e){const t=eg(),n=de({shouldRegisterItem:!0},e);W(()=>{if(!n.shouldRegisterItem)return;const r=t.registerItem(n.getItem());Y(r)})}const cg=["top","right","bottom","left"],jt=Math.min,je=Math.max,Qr=Math.round,Pr=Math.floor,ut=e=>({x:e,y:e}),lg={left:"right",right:"left",bottom:"top",top:"bottom"},ug={start:"end",end:"start"};function fs(e,t,n){return je(e,jt(t,n))}function cn(e,t){return typeof e=="function"?e(t):e}function Vt(e){return e.split("-")[0]}function On(e){return e.split("-")[1]}function al(e){return e==="x"?"y":"x"}function Xs(e){return e==="y"?"height":"width"}const dg=new Set(["top","bottom"]);function _t(e){return dg.has(Vt(e))?"y":"x"}function Zs(e){return al(_t(e))}function fg(e,t,n){n===void 0&&(n=!1);const r=On(e),o=Zs(e),s=Xs(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=eo(i)),[i,eo(i)]}function hg(e){const t=eo(e);return[hs(e),t,hs(t)]}function hs(e){return e.replace(/start|end/g,t=>ug[t])}const ga=["left","right"],ma=["right","left"],pg=["top","bottom"],gg=["bottom","top"];function mg(e,t,n){switch(e){case"top":case"bottom":return n?t?ma:ga:t?ga:ma;case"left":case"right":return t?pg:gg;default:return[]}}function yg(e,t,n,r){const o=On(e);let s=mg(Vt(e),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),t&&(s=s.concat(s.map(hs)))),s}function eo(e){return e.replace(/left|right|bottom|top/g,t=>lg[t])}function vg(e){return{top:0,right:0,bottom:0,left:0,...e}}function cl(e){return typeof e!="number"?vg(e):{top:e,right:e,bottom:e,left:e}}function to(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function ya(e,t,n){let{reference:r,floating:o}=e;const s=_t(t),i=Zs(t),a=Xs(i),c=Vt(t),l=s==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[a]/2-o[a]/2;let h;switch(c){case"top":h={x:u,y:r.y-o.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-o.width,y:d};break;default:h={x:r.x,y:r.y}}switch(On(t)){case"start":h[i]-=f*(n&&l?-1:1);break;case"end":h[i]+=f*(n&&l?-1:1);break}return h}const bg=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:d}=ya(l,r,c),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:P}=await y({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:h,rects:l,platform:i,elements:{reference:e,floating:t}});u=v??u,d=b??d,h={...h,[g]:{...h[g],...w}},P&&p<=50&&(p++,typeof P=="object"&&(P.placement&&(f=P.placement),P.rects&&(l=P.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):P.rects),{x:u,y:d}=ya(l,f,c)),m=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:h}};async function sr(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=cn(t,e),p=cl(h),g=a[f?d==="floating"?"reference":"floating":d],y=to(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),v=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},P=to(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:c}):v);return{top:(y.top-P.top+p.top)/w.y,bottom:(P.bottom-y.bottom+p.bottom)/w.y,left:(y.left-P.left+p.left)/w.x,right:(P.right-y.right+p.right)/w.x}}const xg=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:c}=t,{element:l,padding:u=0}=cn(e,t)||{};if(l==null)return{};const d=cl(u),f={x:n,y:r},h=Zs(o),p=Xs(h),m=await i.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-f[h]-s.floating[p],P=f[h]-s.reference[h],T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l));let R=T?T[b]:0;(!R||!await(i.isElement==null?void 0:i.isElement(T)))&&(R=a.floating[b]||s.floating[p]);const S=w/2-P/2,C=R/2-m[p]/2-1,L=jt(d[y],C),A=jt(d[v],C),O=L,G=R-m[p]-A,B=R/2-m[p]/2+S,q=fs(O,B,G),ne=!c.arrow&&On(o)!=null&&B!==q&&s.reference[p]/2-(B<O?L:A)-m[p]/2<0,N=ne?B<O?B-O:B-G:0;return{[h]:f[h]+N,data:{[h]:q,centerOffset:B-q-N,...ne&&{alignmentOffset:N}},reset:ne}}}),Sg=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=cn(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Vt(o),v=_t(a),b=Vt(a)===a,w=await(c.isRTL==null?void 0:c.isRTL(l.floating)),P=f||(b||!m?[eo(a)]:hg(a)),T=p!=="none";!f&&T&&P.push(...yg(a,m,p,w));const R=[a,...P],S=await sr(t,g),C=[];let L=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&C.push(S[y]),d){const B=fg(o,i,w);C.push(S[B[0]],S[B[1]])}if(L=[...L,{placement:o,overflows:C}],!C.every(B=>B<=0)){var A,O;const B=(((A=s.flip)==null?void 0:A.index)||0)+1,q=R[B];if(q&&(!(d==="alignment"?v!==_t(q):!1)||L.every(I=>_t(I.placement)===v?I.overflows[0]>0:!0)))return{data:{index:B,overflows:L},reset:{placement:q}};let ne=(O=L.filter(N=>N.overflows[0]<=0).sort((N,I)=>N.overflows[1]-I.overflows[1])[0])==null?void 0:O.placement;if(!ne)switch(h){case"bestFit":{var G;const N=(G=L.filter(I=>{if(T){const ce=_t(I.placement);return ce===v||ce==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(ce=>ce>0).reduce((ce,qe)=>ce+qe,0)]).sort((I,ce)=>I[1]-ce[1])[0])==null?void 0:G[0];N&&(ne=N);break}case"initialPlacement":ne=a;break}if(o!==ne)return{reset:{placement:ne}}}return{}}}};function va(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ba(e){return cg.some(t=>e[t]>=0)}const wg=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=cn(e,t);switch(r){case"referenceHidden":{const s=await sr(t,{...o,elementContext:"reference"}),i=va(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:ba(i)}}}case"escaped":{const s=await sr(t,{...o,altBoundary:!0}),i=va(s,n.floating);return{data:{escapedOffsets:i,escaped:ba(i)}}}default:return{}}}}},Cg=new Set(["left","top"]);async function _g(e,t){const{placement:n,platform:r,elements:o}=e,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Vt(n),a=On(n),c=_t(n)==="y",l=Cg.has(i)?-1:1,u=s&&c?-1:1,d=cn(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),c?{x:h*u,y:f*l}:{x:f*l,y:h*u}}const Pg=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=t,c=await _g(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+c.x,y:s+c.y,data:{...c,placement:i}}}}},kg=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...c}=cn(e,t),l={x:n,y:r},u=await sr(t,c),d=_t(Vt(o)),f=al(d);let h=l[f],p=l[d];if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=h+u[g],b=h-u[y];h=fs(v,h,b)}if(i){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=p+u[g],b=p-u[y];p=fs(v,p,b)}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:s,[d]:i}}}}}},Tg=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:s,platform:i,elements:a}=t,{apply:c=()=>{},...l}=cn(e,t),u=await sr(t,l),d=Vt(o),f=On(o),h=_t(o)==="y",{width:p,height:m}=s.floating;let g,y;d==="top"||d==="bottom"?(g=d,y=f===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g=f==="end"?"top":"bottom");const v=m-u.top-u.bottom,b=p-u.left-u.right,w=jt(m-u[g],v),P=jt(p-u[y],b),T=!t.middlewareData.shift;let R=w,S=P;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(S=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(R=v),T&&!f){const L=je(u.left,0),A=je(u.right,0),O=je(u.top,0),G=je(u.bottom,0);h?S=p-2*(L!==0||A!==0?L+A:je(u.left,u.right)):R=m-2*(O!==0||G!==0?O+G:je(u.top,u.bottom))}await c({...t,availableWidth:S,availableHeight:R});const C=await i.getDimensions(a.floating);return p!==C.width||m!==C.height?{reset:{rects:!0}}:{}}}};function bo(){return typeof window<"u"}function An(e){return ll(e)?(e.nodeName||"").toLowerCase():"#document"}function He(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function mt(e){var t;return(t=(ll(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ll(e){return bo()?e instanceof Node||e instanceof He(e).Node:!1}function at(e){return bo()?e instanceof Element||e instanceof He(e).Element:!1}function ht(e){return bo()?e instanceof HTMLElement||e instanceof He(e).HTMLElement:!1}function xa(e){return!bo()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof He(e).ShadowRoot}const Rg=new Set(["inline","contents"]);function pr(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=ct(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Rg.has(o)}const Ig=new Set(["table","td","th"]);function Eg(e){return Ig.has(An(e))}const Mg=[":popover-open",":modal"];function xo(e){return Mg.some(t=>{try{return e.matches(t)}catch{return!1}})}const Lg=["transform","translate","scale","rotate","perspective"],Og=["transform","translate","scale","rotate","perspective","filter"],Ag=["paint","layout","strict","content"];function Qs(e){const t=ei(),n=at(e)?ct(e):e;return Lg.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Og.some(r=>(n.willChange||"").includes(r))||Ag.some(r=>(n.contain||"").includes(r))}function Dg(e){let t=Wt(e);for(;ht(t)&&!En(t);){if(Qs(t))return t;if(xo(t))return null;t=Wt(t)}return null}function ei(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const $g=new Set(["html","body","#document"]);function En(e){return $g.has(An(e))}function ct(e){return He(e).getComputedStyle(e)}function So(e){return at(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Wt(e){if(An(e)==="html")return e;const t=e.assignedSlot||e.parentNode||xa(e)&&e.host||mt(e);return xa(t)?t.host:t}function ul(e){const t=Wt(e);return En(t)?e.ownerDocument?e.ownerDocument.body:e.body:ht(t)&&pr(t)?t:ul(t)}function ir(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=ul(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),i=He(o);if(s){const a=ps(i);return t.concat(i,i.visualViewport||[],pr(o)?o:[],a&&n?ir(a):[])}return t.concat(o,ir(o,[],n))}function ps(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function dl(e){const t=ct(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=ht(e),s=o?e.offsetWidth:n,i=o?e.offsetHeight:r,a=Qr(n)!==s||Qr(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function ti(e){return at(e)?e:e.contextElement}function Cn(e){const t=ti(e);if(!ht(t))return ut(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:s}=dl(t);let i=(s?Qr(n.width):n.width)/r,a=(s?Qr(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const Fg=ut(0);function fl(e){const t=He(e);return!ei()||!t.visualViewport?Fg:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ng(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==He(e)?!1:t}function sn(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=ti(e);let i=ut(1);t&&(r?at(r)&&(i=Cn(r)):i=Cn(e));const a=Ng(s,n,r)?fl(s):ut(0);let c=(o.left+a.x)/i.x,l=(o.top+a.y)/i.y,u=o.width/i.x,d=o.height/i.y;if(s){const f=He(s),h=r&&at(r)?He(r):r;let p=f,m=ps(p);for(;m&&r&&h!==p;){const g=Cn(m),y=m.getBoundingClientRect(),v=ct(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;c*=g.x,l*=g.y,u*=g.x,d*=g.y,c+=b,l+=w,p=He(m),m=ps(p)}}return to({width:u,height:d,x:c,y:l})}function ni(e,t){const n=So(e).scrollLeft;return t?t.left+n:sn(mt(e)).left+n}function hl(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),o=r.left+t.scrollLeft-(n?0:ni(e,r)),s=r.top+t.scrollTop;return{x:o,y:s}}function Bg(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const s=o==="fixed",i=mt(r),a=t?xo(t.floating):!1;if(r===i||a&&s)return n;let c={scrollLeft:0,scrollTop:0},l=ut(1);const u=ut(0),d=ht(r);if((d||!d&&!s)&&((An(r)!=="body"||pr(i))&&(c=So(r)),ht(r))){const h=sn(r);l=Cn(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=i&&!d&&!s?hl(i,c,!0):ut(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+f.x,y:n.y*l.y-c.scrollTop*l.y+u.y+f.y}}function Kg(e){return Array.from(e.getClientRects())}function Ug(e){const t=mt(e),n=So(e),r=e.ownerDocument.body,o=je(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=je(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+ni(e);const a=-n.scrollTop;return ct(r).direction==="rtl"&&(i+=je(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}function zg(e,t){const n=He(e),r=mt(e),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,c=0;if(o){s=o.width,i=o.height;const l=ei();(!l||l&&t==="fixed")&&(a=o.offsetLeft,c=o.offsetTop)}return{width:s,height:i,x:a,y:c}}const jg=new Set(["absolute","fixed"]);function Vg(e,t){const n=sn(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=ht(e)?Cn(e):ut(1),i=e.clientWidth*s.x,a=e.clientHeight*s.y,c=o*s.x,l=r*s.y;return{width:i,height:a,x:c,y:l}}function Sa(e,t,n){let r;if(t==="viewport")r=zg(e,n);else if(t==="document")r=Ug(mt(e));else if(at(t))r=Vg(t,n);else{const o=fl(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return to(r)}function pl(e,t){const n=Wt(e);return n===t||!at(n)||En(n)?!1:ct(n).position==="fixed"||pl(n,t)}function Wg(e,t){const n=t.get(e);if(n)return n;let r=ir(e,[],!1).filter(a=>at(a)&&An(a)!=="body"),o=null;const s=ct(e).position==="fixed";let i=s?Wt(e):e;for(;at(i)&&!En(i);){const a=ct(i),c=Qs(i);!c&&a.position==="fixed"&&(o=null),(s?!c&&!o:!c&&a.position==="static"&&!!o&&jg.has(o.position)||pr(i)&&!c&&pl(e,i))?r=r.filter(u=>u!==i):o=a,i=Wt(i)}return t.set(e,r),r}function Gg(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?xo(t)?[]:Wg(t,this._c):[].concat(n),r],a=i[0],c=i.reduce((l,u)=>{const d=Sa(t,u,o);return l.top=je(d.top,l.top),l.right=jt(d.right,l.right),l.bottom=jt(d.bottom,l.bottom),l.left=je(d.left,l.left),l},Sa(t,a,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Hg(e){const{width:t,height:n}=dl(e);return{width:t,height:n}}function qg(e,t,n){const r=ht(t),o=mt(t),s=n==="fixed",i=sn(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const c=ut(0);function l(){c.x=ni(o)}if(r||!r&&!s)if((An(t)!=="body"||pr(o))&&(a=So(t)),r){const h=sn(t,!0,s,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else o&&l();s&&!r&&o&&l();const u=o&&!r&&!s?hl(o,a):ut(0),d=i.left+a.scrollLeft-c.x-u.x,f=i.top+a.scrollTop-c.y-u.y;return{x:d,y:f,width:i.width,height:i.height}}function Fo(e){return ct(e).position==="static"}function wa(e,t){if(!ht(e)||ct(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return mt(e)===n&&(n=n.ownerDocument.body),n}function gl(e,t){const n=He(e);if(xo(e))return n;if(!ht(e)){let o=Wt(e);for(;o&&!En(o);){if(at(o)&&!Fo(o))return o;o=Wt(o)}return n}let r=wa(e,t);for(;r&&Eg(r)&&Fo(r);)r=wa(r,t);return r&&En(r)&&Fo(r)&&!Qs(r)?n:r||Dg(e)||n}const Yg=async function(e){const t=this.getOffsetParent||gl,n=this.getDimensions,r=await n(e.floating);return{reference:qg(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Jg(e){return ct(e).direction==="rtl"}const ml={convertOffsetParentRelativeRectToViewportRelativeRect:Bg,getDocumentElement:mt,getClippingRect:Gg,getOffsetParent:gl,getElementRects:Yg,getClientRects:Kg,getDimensions:Hg,getScale:Cn,isElement:at,isRTL:Jg};function yl(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Xg(e,t){let n=null,r;const o=mt(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),s();const l=e.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=l;if(a||t(),!f||!h)return;const p=Pr(d),m=Pr(o.clientWidth-(u+f)),g=Pr(o.clientHeight-(d+h)),y=Pr(u),b={rootMargin:-p+"px "+-m+"px "+-g+"px "+-y+"px",threshold:je(0,jt(1,c))||1};let w=!0;function P(T){const R=T[0].intersectionRatio;if(R!==c){if(!w)return i();R?i(!1,R):r=setTimeout(()=>{i(!1,1e-7)},1e3)}R===1&&!yl(l,e.getBoundingClientRect())&&i(),w=!1}try{n=new IntersectionObserver(P,{...b,root:o.ownerDocument})}catch{n=new IntersectionObserver(P,b)}n.observe(e)}return i(!0),s}function Zg(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=ti(e),u=o||s?[...l?ir(l):[],...ir(t)]:[];u.forEach(y=>{o&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=l&&a?Xg(l,n):null;let f=-1,h=null;i&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!c&&h.observe(l),h.observe(t));let p,m=c?sn(e):null;c&&g();function g(){const y=sn(e);m&&!yl(m,y)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;u.forEach(v=>{o&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d?.(),(y=h)==null||y.disconnect(),h=null,c&&cancelAnimationFrame(p)}}const Qg=Pg,em=kg,tm=Sg,nm=Tg,rm=wg,om=xg,sm=(e,t,n)=>{const r=new Map,o={platform:ml,...n},s={...o.platform,_c:r};return bg(e,t,{...o,platform:s})};var im=ee('<svg display=block viewBox="0 0 30 30"style=transform:scale(1.02)><g><path fill=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z></path><path stroke=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z>'),ri=ve();function oi(){const e=ge(ri);if(e===void 0)throw new Error("[kobalte]: `usePopperContext` must be used within a `Popper` component");return e}var gs=30,Ca=gs/2,am={top:180,right:-90,bottom:0,left:90};function si(e){const t=oi(),n=de({size:gs},e),[r,o]=Z(n,["ref","style","size"]),s=()=>t.currentPlacement().split("-")[0],i=cm(t.contentRef),a=()=>i()?.getPropertyValue("background-color")||"none",c=()=>i()?.getPropertyValue(`border-${s()}-color`)||"none",l=()=>i()?.getPropertyValue(`border-${s()}-width`)||"0px",u=()=>Number.parseInt(l())*2*(gs/r.size),d=()=>`rotate(${am[s()]} ${Ca} ${Ca}) translate(0 2)`;return x(Ee,K({as:"div",ref(f){var h=Ae(t.setArrowRef,r.ref);typeof h=="function"&&h(f)},"aria-hidden":"true",get style(){return po({position:"absolute","font-size":`${r.size}px`,width:"1em",height:"1em","pointer-events":"none",fill:a(),stroke:c(),"stroke-width":u()},r.style)}},o,{get children(){var f=im(),h=f.firstChild,p=h.firstChild;return p.nextSibling,Ie(()=>zt(h,"transform",d())),f}}))}function cm(e){const[t,n]=j();return W(()=>{const r=e();r&&n(up(r).getComputedStyle(r))}),t}function lm(e){const t=oi(),[n,r]=Z(e,["ref","style"]);return x(Ee,K({as:"div",ref(o){var s=Ae(t.setPositionerRef,n.ref);typeof s=="function"&&s(o)},"data-popper-positioner":"",get style(){return po({position:"absolute",top:0,left:0,"min-width":"max-content"},n.style)}},r))}function _a(e){const{x:t=0,y:n=0,width:r=0,height:o=0}=e??{};if(typeof DOMRect=="function")return new DOMRect(t,n,r,o);const s={x:t,y:n,width:r,height:o,top:n,right:t+r,bottom:n+o,left:t};return{...s,toJSON:()=>s}}function um(e,t){return{contextElement:e,getBoundingClientRect:()=>{const r=t(e);return r?_a(r):e?e.getBoundingClientRect():_a()}}}function dm(e){return/^(?:top|bottom|left|right)(?:-(?:start|end))?$/.test(e)}var fm={top:"bottom",right:"left",bottom:"top",left:"right"};function hm(e,t){const[n,r]=e.split("-"),o=fm[n];return r?n==="left"||n==="right"?`${o} ${r==="start"?"top":"bottom"}`:r==="start"?`${o} ${t==="rtl"?"right":"left"}`:`${o} ${t==="rtl"?"left":"right"}`:`${o} center`}function pm(e){const t=de({getAnchorRect:f=>f?.getBoundingClientRect(),placement:"bottom",gutter:0,shift:0,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,hideWhenDetached:!1,detachedPadding:0,arrowPadding:4,overflowPadding:8},e),[n,r]=j(),[o,s]=j(),[i,a]=j(t.placement),c=()=>um(t.anchorRef?.(),t.getAnchorRect),{direction:l}=Ht();async function u(){const f=c(),h=n(),p=o();if(!f||!h)return;const m=(p?.clientHeight||0)/2,g=typeof t.gutter=="number"?t.gutter+m:t.gutter??m;h.style.setProperty("--kb-popper-content-overflow-padding",`${t.overflowPadding}px`),f.getBoundingClientRect();const y=[Qg(({placement:T})=>{const R=!!T.split("-")[1];return{mainAxis:g,crossAxis:R?void 0:t.shift,alignmentAxis:t.shift}})];if(t.flip!==!1){const T=typeof t.flip=="string"?t.flip.split(" "):void 0;if(T!==void 0&&!T.every(dm))throw new Error("`flip` expects a spaced-delimited list of placements");y.push(tm({padding:t.overflowPadding,fallbackPlacements:T}))}(t.slide||t.overlap)&&y.push(em({mainAxis:t.slide,crossAxis:t.overlap,padding:t.overflowPadding})),y.push(nm({padding:t.overflowPadding,apply({availableWidth:T,availableHeight:R,rects:S}){const C=Math.round(S.reference.width);T=Math.floor(T),R=Math.floor(R),h.style.setProperty("--kb-popper-anchor-width",`${C}px`),h.style.setProperty("--kb-popper-content-available-width",`${T}px`),h.style.setProperty("--kb-popper-content-available-height",`${R}px`),t.sameWidth&&(h.style.width=`${C}px`),t.fitViewport&&(h.style.maxWidth=`${T}px`,h.style.maxHeight=`${R}px`)}})),t.hideWhenDetached&&y.push(rm({padding:t.detachedPadding})),p&&y.push(om({element:p,padding:t.arrowPadding}));const v=await sm(f,h,{placement:t.placement,strategy:"absolute",middleware:y,platform:{...ml,isRTL:()=>l()==="rtl"}});if(a(v.placement),t.onCurrentPlacementChange?.(v.placement),!h)return;h.style.setProperty("--kb-popper-content-transform-origin",hm(v.placement,l()));const b=Math.round(v.x),w=Math.round(v.y);let P;if(t.hideWhenDetached&&(P=v.middlewareData.hide?.referenceHidden?"hidden":"visible"),Object.assign(h.style,{top:"0",left:"0",transform:`translate3d(${b}px, ${w}px, 0)`,visibility:P}),p&&v.middlewareData.arrow){const{x:T,y:R}=v.middlewareData.arrow,S=v.placement.split("-")[0];Object.assign(p.style,{left:T!=null?`${T}px`:"",top:R!=null?`${R}px`:"",[S]:"100%"})}}W(()=>{const f=c(),h=n();if(!f||!h)return;const p=Zg(f,h,u,{elementResize:typeof ResizeObserver=="function"});Y(p)}),W(()=>{const f=n(),h=t.contentRef?.();!f||!h||queueMicrotask(()=>{f.style.zIndex=getComputedStyle(h).zIndex})});const d={currentPlacement:i,contentRef:()=>t.contentRef?.(),setPositionerRef:r,setArrowRef:s};return x(ri.Provider,{value:d,get children(){return t.children}})}var vl=Object.assign(pm,{Arrow:si,Context:ri,usePopperContext:oi,Positioner:lm}),no="data-kb-top-layer",bl,ms=!1,Pt=[];function ar(e){return Pt.findIndex(t=>t.node===e)}function gm(e){return Pt[ar(e)]}function mm(e){return Pt[Pt.length-1].node===e}function xl(){return Pt.filter(e=>e.isPointerBlocking)}function ym(){return[...xl()].slice(-1)[0]}function ii(){return xl().length>0}function Sl(e){const t=ar(ym()?.node);return ar(e)<t}function vm(e){Pt.push(e)}function bm(e){const t=ar(e);t<0||Pt.splice(t,1)}function xm(){for(const{node:e}of Pt)e.style.pointerEvents=Sl(e)?"none":"auto"}function Sm(e){if(ii()&&!ms){const t=ft(e);bl=document.body.style.pointerEvents,t.body.style.pointerEvents="none",ms=!0}}function wm(e){if(ii())return;const t=ft(e);t.body.style.pointerEvents=bl,t.body.style.length===0&&t.body.removeAttribute("style"),ms=!1}var ze={layers:Pt,isTopMostLayer:mm,hasPointerBlockingLayer:ii,isBelowPointerBlockingLayer:Sl,addLayer:vm,removeLayer:bm,indexOf:ar,find:gm,assignPointerEventToLayers:xm,disableBodyPointerEvents:Sm,restoreBodyPointerEvents:wm},Pa="interactOutside.pointerDownOutside",ka="interactOutside.focusOutside";function Cm(e,t){let n,r=kp;const o=()=>ft(t()),s=d=>e.onPointerDownOutside?.(d),i=d=>e.onFocusOutside?.(d),a=d=>e.onInteractOutside?.(d),c=d=>{const f=d.target;return!(f instanceof Element)||f.closest(`[${no}]`)||!Ve(o(),f)||Ve(t(),f)?!1:!e.shouldExcludeElement?.(f)},l=d=>{function f(){const h=t(),p=d.target;if(!h||!p||!c(d))return;const m=ke([s,a]);p.addEventListener(Pa,m,{once:!0});const g=new CustomEvent(Pa,{bubbles:!1,cancelable:!0,detail:{originalEvent:d,isContextMenu:d.button===2||gp(d)&&d.button===0}});p.dispatchEvent(g)}d.pointerType==="touch"?(o().removeEventListener("click",f),r=f,o().addEventListener("click",f,{once:!0})):f()},u=d=>{const f=t(),h=d.target;if(!f||!h||!c(d))return;const p=ke([i,a]);h.addEventListener(ka,p,{once:!0});const m=new CustomEvent(ka,{bubbles:!1,cancelable:!0,detail:{originalEvent:d,isContextMenu:!1}});h.dispatchEvent(m)};W(()=>{M(e.isDisabled)||(n=window.setTimeout(()=>{o().addEventListener("pointerdown",l,!0)},0),o().addEventListener("focusin",u,!0),Y(()=>{window.clearTimeout(n),o().removeEventListener("click",r),o().removeEventListener("pointerdown",l,!0),o().removeEventListener("focusin",u,!0)}))})}function _m(e){const t=n=>{n.key===Hc.Escape&&e.onEscapeKeyDown?.(n)};W(()=>{if(M(e.isDisabled))return;const n=e.ownerDocument?.()??ft();n.addEventListener("keydown",t),Y(()=>{n.removeEventListener("keydown",t)})})}var wl=ve();function Pm(){return ge(wl)}function Cl(e){let t;const n=Pm(),[r,o]=Z(e,["ref","disableOutsidePointerEvents","excludedElements","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","bypassTopMostLayerCheck"]),s=new Set([]),i=d=>{s.add(d);const f=n?.registerNestedLayer(d);return()=>{s.delete(d),f?.()}};Cm({shouldExcludeElement:d=>t?r.excludedElements?.some(f=>Ve(f(),d))||[...s].some(f=>Ve(f,d)):!1,onPointerDownOutside:d=>{!t||ze.isBelowPointerBlockingLayer(t)||!r.bypassTopMostLayerCheck&&!ze.isTopMostLayer(t)||(r.onPointerDownOutside?.(d),r.onInteractOutside?.(d),d.defaultPrevented||r.onDismiss?.())},onFocusOutside:d=>{r.onFocusOutside?.(d),r.onInteractOutside?.(d),d.defaultPrevented||r.onDismiss?.()}},()=>t),_m({ownerDocument:()=>ft(t),onEscapeKeyDown:d=>{!t||!ze.isTopMostLayer(t)||(r.onEscapeKeyDown?.(d),!d.defaultPrevented&&r.onDismiss&&(d.preventDefault(),r.onDismiss()))}}),dt(()=>{if(!t)return;ze.addLayer({node:t,isPointerBlocking:r.disableOutsidePointerEvents,dismiss:r.onDismiss});const d=n?.registerNestedLayer(t);ze.assignPointerEventToLayers(),ze.disableBodyPointerEvents(t),Y(()=>{t&&(ze.removeLayer(t),d?.(),ze.assignPointerEventToLayers(),ze.restoreBodyPointerEvents(t))})}),W(lt([()=>t,()=>r.disableOutsidePointerEvents],([d,f])=>{if(!d)return;const h=ze.find(d);h&&h.isPointerBlocking!==f&&(h.isPointerBlocking=f,ze.assignPointerEventToLayers()),f&&ze.disableBodyPointerEvents(d),Y(()=>{ze.restoreBodyPointerEvents(d)})},{defer:!0}));const u={registerNestedLayer:i};return x(wl.Provider,{value:u,get children(){return x(Ee,K({as:"div",ref(d){var f=Ae(h=>t=h,r.ref);typeof f=="function"&&f(d)}},o))}})}function ai(e={}){const[t,n]=Xc({value:()=>M(e.open),defaultValue:()=>!!M(e.defaultOpen),onChange:i=>e.onOpenChange?.(i)}),r=()=>{n(!0)},o=()=>{n(!1)};return{isOpen:t,setIsOpen:n,open:r,close:o,toggle:()=>{t()?o():r()}}}function Bt(e){return t=>(e(t),()=>e(void 0))}var Me=e=>typeof e=="function"?e():e,km=e=>{const t=H(()=>{const i=Me(e.element);if(i)return getComputedStyle(i)}),n=()=>t()?.animationName??"none",[r,o]=j(Me(e.show)?"present":"hidden");let s="none";return W(i=>{const a=Me(e.show);return ye(()=>{if(i===a)return a;const c=s,l=n();a?o("present"):l==="none"||t()?.display==="none"?o("hidden"):o(i===!0&&c!==l?"hiding":"hidden")}),a}),W(()=>{const i=Me(e.element);if(!i)return;const a=l=>{l.target===i&&(s=n())},c=l=>{const d=n().includes(l.animationName);l.target===i&&d&&r()==="hiding"&&o("hidden")};i.addEventListener("animationstart",a),i.addEventListener("animationcancel",c),i.addEventListener("animationend",c),Y(()=>{i.removeEventListener("animationstart",a),i.removeEventListener("animationcancel",c),i.removeEventListener("animationend",c)})}),{present:()=>r()==="present"||r()==="hiding",state:r,setState:o}},Tm=km,ys=Tm;const vs=Symbol("store-raw"),_n=Symbol("store-node"),Ct=Symbol("store-has"),_l=Symbol("store-self");function Pl(e){let t=e[st];if(!t&&(Object.defineProperty(e,st,{value:t=new Proxy(e,Em)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const i=n[o];r[i].get&&Object.defineProperty(e,i,{enumerable:r[i].enumerable,get:r[i].get.bind(t)})}}return t}function Gt(e){let t;return e!=null&&typeof e=="object"&&(e[st]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function pt(e,t=new Set){let n,r,o,s;if(n=e!=null&&e[vs])return n;if(!Gt(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,a=e.length;i<a;i++)o=e[i],(r=pt(o,t))!==o&&(e[i]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let c=0,l=i.length;c<l;c++)s=i[c],!a[s].get&&(o=e[s],(r=pt(o,t))!==o&&(e[s]=r))}return e}function ro(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function cr(e,t,n){if(e[t])return e[t];const[r,o]=j(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function Rm(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===st||t===_n||(delete n.value,delete n.writable,n.get=()=>e[st][t]),n}function kl(e){Zo()&&cr(ro(e,_n),_l)()}function Im(e){return kl(e),Reflect.ownKeys(e)}const Em={get(e,t,n){if(t===vs)return e;if(t===st)return n;if(t===Xo)return kl(e),n;const r=ro(e,_n),o=r[t];let s=o?o():e[t];if(t===_n||t===Ct||t==="__proto__")return s;if(!o){const i=Object.getOwnPropertyDescriptor(e,t);Zo()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(s=cr(r,t,s)())}return Gt(s)?Pl(s):s},has(e,t){return t===vs||t===st||t===Xo||t===_n||t===Ct||t==="__proto__"?!0:(Zo()&&cr(ro(e,Ct),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Im,getOwnPropertyDescriptor:Rm};function Xe(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;n===void 0?(delete e[t],e[Ct]&&e[Ct][t]&&o!==void 0&&e[Ct][t].$()):(e[t]=n,e[Ct]&&e[Ct][t]&&o===void 0&&e[Ct][t].$());let i=ro(e,_n),a;if((a=cr(i,t,o))&&a.$(()=>n),Array.isArray(e)&&e.length!==s){for(let c=e.length;c<s;c++)(a=i[c])&&a.$();(a=cr(i,"length",s))&&a.$(e.length)}(a=i[_l])&&a.$()}function Tl(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];Xe(e,o,t[o])}}function Mm(e,t){if(typeof t=="function"&&(t=t(e)),t=pt(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const o=t[n];e[n]!==o&&Xe(e,n,o)}Xe(e,"length",r)}else Tl(e,t)}function Xn(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const i=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let c=0;c<r.length;c++)Xn(e,[r[c]].concat(t),n);return}else if(a&&i==="function"){for(let c=0;c<e.length;c++)r(e[c],c)&&Xn(e,[c].concat(t),n);return}else if(a&&i==="object"){const{from:c=0,to:l=e.length-1,by:u=1}=r;for(let d=c;d<=l;d+=u)Xn(e,[d].concat(t),n);return}else if(t.length>1){Xn(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(o,n),s===o)||r===void 0&&s==null||(s=pt(s),r===void 0||Gt(o)&&Gt(s)&&!Array.isArray(s)?Tl(o,s):Xe(e,r,s))}function Rl(...[e,t]){const n=pt(e||{}),r=Array.isArray(n),o=Pl(n);function s(...i){Md(()=>{r&&i.length===1?Mm(n,i[0]):Xn(n,i)})}return[o,s]}const bs=Symbol("store-root");function xn(e,t,n,r,o){const s=t[n];if(e===s)return;const i=Array.isArray(e);if(n!==bs&&(!Gt(e)||!Gt(s)||i!==Array.isArray(s)||o&&e[o]!==s[o])){Xe(t,n,e);return}if(i){if(e.length&&s.length&&(!r||o&&e[0]&&e[0][o]!=null)){let l,u,d,f,h,p,m,g;for(d=0,f=Math.min(s.length,e.length);d<f&&(s[d]===e[d]||o&&s[d]&&e[d]&&s[d][o]&&s[d][o]===e[d][o]);d++)xn(e[d],s,d,r,o);const y=new Array(e.length),v=new Map;for(f=s.length-1,h=e.length-1;f>=d&&h>=d&&(s[f]===e[h]||o&&s[f]&&e[h]&&s[f][o]&&s[f][o]===e[h][o]);f--,h--)y[h]=s[f];if(d>h||d>f){for(u=d;u<=h;u++)Xe(s,u,e[u]);for(;u<e.length;u++)Xe(s,u,y[u]),xn(e[u],s,u,r,o);s.length>e.length&&Xe(s,"length",e.length);return}for(m=new Array(h+1),u=h;u>=d;u--)p=e[u],g=o&&p?p[o]:p,l=v.get(g),m[u]=l===void 0?-1:l,v.set(g,u);for(l=d;l<=f;l++)p=s[l],g=o&&p?p[o]:p,u=v.get(g),u!==void 0&&u!==-1&&(y[u]=s[l],u=m[u],v.set(g,u));for(u=d;u<e.length;u++)u in y?(Xe(s,u,y[u]),xn(e[u],s,u,r,o)):Xe(s,u,e[u])}else for(let l=0,u=e.length;l<u;l++)xn(e[l],s,l,r,o);s.length>e.length&&Xe(s,"length",e.length);return}const a=Object.keys(e);for(let l=0,u=a.length;l<u;l++)xn(e[a[l]],s,a[l],r,o);const c=Object.keys(s);for(let l=0,u=c.length;l<u;l++)e[c[l]]===void 0&&Xe(s,c[l],void 0)}function rt(e,t={}){const{merge:n,key:r="id"}=t,o=pt(e);return s=>{if(!Gt(s)||!Gt(o))return o;const i=xn(o,{[bs]:s},bs,n,r);return i===void 0?s:i}}var No="focusScope.autoFocusOnMount",Bo="focusScope.autoFocusOnUnmount",Ta={bubbles:!1,cancelable:!0},Ra={stack:[],active(){return this.stack[0]},add(e){e!==this.active()&&this.active()?.pause(),this.stack=ls(this.stack,e),this.stack.unshift(e)},remove(e){this.stack=ls(this.stack,e),this.active()?.resume()}};function Il(e,t){const[n,r]=j(!1),o={pause(){r(!0)},resume(){r(!1)}};let s=null;const i=p=>e.onMountAutoFocus?.(p),a=p=>e.onUnmountAutoFocus?.(p),c=()=>ft(t()),l=()=>{const p=c().createElement("span");return p.setAttribute("data-focus-trap",""),p.tabIndex=0,Object.assign(p.style,Ip),p},u=()=>{const p=t();return p?Yc(p,!0).filter(m=>!m.hasAttribute("data-focus-trap")):[]},d=()=>{const p=u();return p.length>0?p[0]:null},f=()=>{const p=u();return p.length>0?p[p.length-1]:null},h=()=>{const p=t();if(!p)return!1;const m=Yn(p);return!m||Ve(p,m)?!1:Jc(m)};W(()=>{const p=t();if(!p)return;Ra.add(o);const m=Yn(p);if(!Ve(p,m)){const y=new CustomEvent(No,Ta);p.addEventListener(No,i),p.dispatchEvent(y),y.defaultPrevented||setTimeout(()=>{Pe(d()),Yn(p)===m&&Pe(p)},0)}Y(()=>{p.removeEventListener(No,i),setTimeout(()=>{const y=new CustomEvent(Bo,Ta);h()&&y.preventDefault(),p.addEventListener(Bo,a),p.dispatchEvent(y),y.defaultPrevented||Pe(m??c().body),p.removeEventListener(Bo,a),Ra.remove(o)},0)})}),W(()=>{const p=t();if(!p||!M(e.trapFocus)||n())return;const m=y=>{const v=y.target;v?.closest(`[${no}]`)||(Ve(p,v)?s=v:Pe(s))},g=y=>{const b=y.relatedTarget??Yn(p);b?.closest(`[${no}]`)||Ve(p,b)||Pe(s)};c().addEventListener("focusin",m),c().addEventListener("focusout",g),Y(()=>{c().removeEventListener("focusin",m),c().removeEventListener("focusout",g)})}),W(()=>{const p=t();if(!p||!M(e.trapFocus)||n())return;const m=l();p.insertAdjacentElement("afterbegin",m);const g=l();p.insertAdjacentElement("beforeend",g);function y(b){const w=d(),P=f();b.relatedTarget===w?Pe(P):Pe(w)}m.addEventListener("focusin",y),g.addEventListener("focusin",y);const v=new MutationObserver(b=>{for(const w of b)w.previousSibling===g&&(g.remove(),p.insertAdjacentElement("beforeend",g)),w.nextSibling===m&&(m.remove(),p.insertAdjacentElement("afterbegin",m))});v.observe(p,{childList:!0,subtree:!1}),Y(()=>{m.removeEventListener("focusin",y),g.removeEventListener("focusin",y),m.remove(),g.remove(),v.disconnect()})})}var Lm="data-live-announcer";function El(e){W(()=>{M(e.isDisabled)||Y(Om(M(e.targets),M(e.root)))})}var zn=new WeakMap,Je=[];function Om(e,t=document.body){const n=new Set(e),r=new Set,o=c=>{for(const f of c.querySelectorAll(`[${Lm}], [${no}]`))n.add(f);const l=f=>{if(n.has(f)||f.parentElement&&r.has(f.parentElement)&&f.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(const h of n)if(f.contains(h))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},u=document.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,{acceptNode:l}),d=l(c);if(d===NodeFilter.FILTER_ACCEPT&&s(c),d!==NodeFilter.FILTER_REJECT){let f=u.nextNode();for(;f!=null;)s(f),f=u.nextNode()}},s=c=>{const l=zn.get(c)??0;c.getAttribute("aria-hidden")==="true"&&l===0||(l===0&&c.setAttribute("aria-hidden","true"),r.add(c),zn.set(c,l+1))};Je.length&&Je[Je.length-1].disconnect(),o(t);const i=new MutationObserver(c=>{for(const l of c)if(!(l.type!=="childList"||l.addedNodes.length===0)&&![...n,...r].some(u=>u.contains(l.target))){for(const u of l.removedNodes)u instanceof Element&&(n.delete(u),r.delete(u));for(const u of l.addedNodes)(u instanceof HTMLElement||u instanceof SVGElement)&&(u.dataset.liveAnnouncer==="true"||u.dataset.reactAriaTopLayer==="true")?n.add(u):u instanceof Element&&o(u)}});i.observe(t,{childList:!0,subtree:!0});const a={observe(){i.observe(t,{childList:!0,subtree:!0})},disconnect(){i.disconnect()}};return Je.push(a),()=>{i.disconnect();for(const c of r){const l=zn.get(c);if(l==null)return;l===1?(c.removeAttribute("aria-hidden"),zn.delete(c)):zn.set(c,l-1)}a===Je[Je.length-1]?(Je.pop(),Je.length&&Je[Je.length-1].observe()):Je.splice(Je.indexOf(a),1)}}var xs=(e,t)=>{if(e.contains(t))return!0;let n=t;for(;n;){if(n===e)return!0;n=n._$host??n.parentElement}return!1},kr=new Map,Am=e=>{W(()=>{const t=Me(e.style)??{},n=Me(e.properties)??[],r={};for(const s in t)r[s]=e.element.style[s];const o=kr.get(e.key);o?o.activeCount++:kr.set(e.key,{activeCount:1,originalStyles:r,properties:n.map(s=>s.key)}),Object.assign(e.element.style,e.style);for(const s of n)e.element.style.setProperty(s.key,s.value);Y(()=>{const s=kr.get(e.key);if(s){if(s.activeCount!==1){s.activeCount--;return}kr.delete(e.key);for(const[i,a]of Object.entries(s.originalStyles))e.element.style[i]=a;for(const i of s.properties)e.element.style.removeProperty(i);e.element.style.length===0&&e.element.removeAttribute("style"),e.cleanup?.()}})})},Ia=Am,Dm=(e,t)=>{switch(t){case"x":return[e.clientWidth,e.scrollLeft,e.scrollWidth];case"y":return[e.clientHeight,e.scrollTop,e.scrollHeight]}},$m=(e,t)=>{const n=getComputedStyle(e),r=t==="x"?n.overflowX:n.overflowY;return r==="auto"||r==="scroll"||e.tagName==="HTML"&&r==="visible"},Fm=(e,t,n)=>{const r=t==="x"&&window.getComputedStyle(e).direction==="rtl"?-1:1;let o=e,s=0,i=0,a=!1;do{const[c,l,u]=Dm(o,t),d=u-c-r*l;(l!==0||d!==0)&&$m(o,t)&&(s+=d,i+=l),o===(n??document.documentElement)?a=!0:o=o._$host??o.parentElement}while(o&&!a);return[s,i]},[Ea,Ma]=j([]),Nm=e=>Ea().indexOf(e)===Ea().length-1,Bm=e=>{const t=K({element:null,enabled:!0,hideScrollbar:!0,preventScrollbarShift:!0,preventScrollbarShiftMode:"padding",restoreScrollPosition:!0,allowPinchZoom:!1},e),n=kt();let r=[0,0],o=null,s=null;W(()=>{Me(t.enabled)&&(Ma(l=>[...l,n]),Y(()=>{Ma(l=>l.filter(u=>u!==n))}))}),W(()=>{if(!Me(t.enabled)||!Me(t.hideScrollbar))return;const{body:l}=document,u=window.innerWidth-l.offsetWidth;if(Me(t.preventScrollbarShift)){const d={overflow:"hidden"},f=[];u>0&&(Me(t.preventScrollbarShiftMode)==="padding"?d.paddingRight=`calc(${window.getComputedStyle(l).paddingRight} + ${u}px)`:d.marginRight=`calc(${window.getComputedStyle(l).marginRight} + ${u}px)`,f.push({key:"--scrollbar-width",value:`${u}px`}));const h=window.scrollY,p=window.scrollX;Ia({key:"prevent-scroll",element:l,style:d,properties:f,cleanup:()=>{Me(t.restoreScrollPosition)&&u>0&&window.scrollTo(p,h)}})}else Ia({key:"prevent-scroll",element:l,style:{overflow:"hidden"}})}),W(()=>{!Nm(n)||!Me(t.enabled)||(document.addEventListener("wheel",a,{passive:!1}),document.addEventListener("touchstart",i,{passive:!1}),document.addEventListener("touchmove",c,{passive:!1}),Y(()=>{document.removeEventListener("wheel",a),document.removeEventListener("touchstart",i),document.removeEventListener("touchmove",c)}))});const i=l=>{r=La(l),o=null,s=null},a=l=>{const u=l.target,d=Me(t.element),f=Km(l),h=Math.abs(f[0])>Math.abs(f[1])?"x":"y",p=h==="x"?f[0]:f[1],m=Oa(u,h,p,d);let g;d&&xs(d,u)?g=!m:g=!0,g&&l.cancelable&&l.preventDefault()},c=l=>{const u=Me(t.element),d=l.target;let f;if(l.touches.length===2)f=!Me(t.allowPinchZoom);else{if(o==null||s===null){const h=La(l).map((m,g)=>r[g]-m),p=Math.abs(h[0])>Math.abs(h[1])?"x":"y";o=p,s=p==="x"?h[0]:h[1]}if(d.type==="range")f=!1;else{const h=Oa(d,o,s,u);u&&xs(u,d)?f=!h:f=!0}}f&&l.cancelable&&l.preventDefault()}},Km=e=>[e.deltaX,e.deltaY],La=e=>e.changedTouches[0]?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0],Oa=(e,t,n,r)=>{const o=r!==null&&xs(r,e),[s,i]=Fm(e,t,o?r:void 0);return!(n>0&&Math.abs(s)<=1||n<0&&Math.abs(i)<1)},Um=Bm,Ml=Um,zm=class{collection;ref;collator;constructor(e,t,n){this.collection=e,this.ref=t,this.collator=n}getKeyBelow(e){let t=this.collection().getKeyAfter(e);for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyAfter(t)}}getKeyAbove(e){let t=this.collection().getKeyBefore(e);for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyBefore(t)}}getFirstKey(){let e=this.collection().getFirstKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyAfter(e)}}getLastKey(){let e=this.collection().getLastKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyBefore(e)}}getItem(e){return this.ref?.()?.querySelector(`[data-key="${e}"]`)??null}getKeyPageAbove(e){const t=this.ref?.();let n=this.getItem(e);if(!t||!n)return;const r=Math.max(0,n.offsetTop+n.offsetHeight-t.offsetHeight);let o=e;for(;o&&n&&n.offsetTop>r;)o=this.getKeyAbove(o),n=o!=null?this.getItem(o):null;return o}getKeyPageBelow(e){const t=this.ref?.();let n=this.getItem(e);if(!t||!n)return;const r=Math.min(t.scrollHeight,n.offsetTop-n.offsetHeight+t.offsetHeight);let o=e;for(;o&&n&&n.offsetTop<r;)o=this.getKeyBelow(o),n=o!=null?this.getItem(o):null;return o}getKeyForSearch(e,t){const n=this.collator?.();if(!n)return;let r=t!=null?this.getKeyBelow(t):this.getFirstKey();for(;r!=null;){const o=this.collection().getItem(r);if(o){const s=o.textValue.slice(0,e.length);if(o.textValue&&n.compare(s,e)===0)return r}r=this.getKeyBelow(r)}}};function jm(e,t,n){const r=Vp({usage:"search",sensitivity:"base"}),o=H(()=>{const s=M(e.keyboardDelegate);return s||new zm(e.collection,t,r)});return Xp({selectionManager:()=>M(e.selectionManager),keyboardDelegate:o,autoFocus:()=>M(e.autoFocus),deferAutoFocus:()=>M(e.deferAutoFocus),shouldFocusWrap:()=>M(e.shouldFocusWrap),disallowEmptySelection:()=>M(e.disallowEmptySelection),selectOnFocus:()=>M(e.selectOnFocus),disallowTypeAhead:()=>M(e.disallowTypeAhead),shouldUseVirtualFocus:()=>M(e.shouldUseVirtualFocus),allowsTabNavigation:()=>M(e.allowsTabNavigation),isVirtualized:()=>M(e.isVirtualized),scrollToKey:s=>M(e.scrollToKey)?.(s),orientation:()=>M(e.orientation)},t)}var Vm=ve();function wo(){return ge(Vm)}var Wm=ve();function Ll(){return ge(Wm)}var Ol=ve();function Al(){return ge(Ol)}function Tt(){const e=Al();if(e===void 0)throw new Error("[kobalte]: `useMenuContext` must be used within a `Menu` component");return e}var Dl=ve();function ci(){const e=ge(Dl);if(e===void 0)throw new Error("[kobalte]: `useMenuItemContext` must be used within a `Menu.Item` component");return e}var $l=ve();function yt(){const e=ge($l);if(e===void 0)throw new Error("[kobalte]: `useMenuRootContext` must be used within a `MenuRoot` component");return e}function li(e){let t;const n=yt(),r=Tt(),o=de({id:n.generateId(`item-${kt()}`)},e),[s,i]=Z(o,["ref","textValue","disabled","closeOnSelect","checked","indeterminate","onSelect","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[a,c]=j(),[l,u]=j(),[d,f]=j(),h=()=>r.listState().selectionManager(),p=()=>i.id,m=()=>h().focusedKey()===p(),g=()=>{s.onSelect?.(),s.closeOnSelect&&setTimeout(()=>{r.close(!0)})};ag({getItem:()=>({ref:()=>t,type:"item",key:p(),textValue:s.textValue??d()?.textContent??t?.textContent??"",disabled:s.disabled??!1})});const y=nl({key:p,selectionManager:h,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>t),v=C=>{me(C,s.onPointerMove),C.pointerType==="mouse"&&(s.disabled?r.onItemLeave(C):(r.onItemEnter(C),C.defaultPrevented||(Pe(C.currentTarget),r.listState().selectionManager().setFocused(!0),r.listState().selectionManager().setFocusedKey(p()))))},b=C=>{me(C,s.onPointerLeave),C.pointerType==="mouse"&&r.onItemLeave(C)},w=C=>{me(C,s.onPointerUp),!s.disabled&&C.button===0&&g()},P=C=>{if(me(C,s.onKeyDown),!C.repeat&&!s.disabled)switch(C.key){case"Enter":case" ":g();break}},T=H(()=>{if(s.indeterminate)return"mixed";if(s.checked!=null)return s.checked}),R=H(()=>({"data-indeterminate":s.indeterminate?"":void 0,"data-checked":s.checked&&!s.indeterminate?"":void 0,"data-disabled":s.disabled?"":void 0,"data-highlighted":m()?"":void 0})),S={isChecked:()=>s.checked,dataset:R,setLabelRef:f,generateId:go(()=>i.id),registerLabel:Bt(c),registerDescription:Bt(u)};return x(Dl.Provider,{value:S,get children(){return x(Ee,K({as:"div",ref(C){var L=Ae(A=>t=A,s.ref);typeof L=="function"&&L(C)},get tabIndex(){return y.tabIndex()},get"aria-checked"(){return T()},get"aria-disabled"(){return s.disabled},get"aria-labelledby"(){return a()},get"aria-describedby"(){return l()},get"data-key"(){return y.dataKey()},get onPointerDown(){return ke([s.onPointerDown,y.onPointerDown])},get onPointerUp(){return ke([w,y.onPointerUp])},get onClick(){return ke([s.onClick,y.onClick])},get onKeyDown(){return ke([P,y.onKeyDown])},get onMouseDown(){return ke([s.onMouseDown,y.onMouseDown])},get onFocus(){return ke([s.onFocus,y.onFocus])},onPointerMove:v,onPointerLeave:b},R,i))}})}function Fl(e){const t=de({closeOnSelect:!1},e),[n,r]=Z(t,["checked","defaultChecked","onChange","onSelect"]),o=$p({isSelected:()=>n.checked,defaultIsSelected:()=>n.defaultChecked,onSelectedChange:i=>n.onChange?.(i),isDisabled:()=>r.disabled});return x(li,K({role:"menuitemcheckbox",get checked(){return o.isSelected()},onSelect:()=>{n.onSelect?.(),o.toggle()}},r))}var lr={next:(e,t)=>e==="ltr"?t==="horizontal"?"ArrowRight":"ArrowDown":t==="horizontal"?"ArrowLeft":"ArrowUp",previous:(e,t)=>lr.next(e==="ltr"?"rtl":"ltr",t)},Aa={first:e=>e==="horizontal"?"ArrowDown":"ArrowRight",last:e=>e==="horizontal"?"ArrowUp":"ArrowLeft"};function ui(e){const t=yt(),n=Tt(),r=wo(),{direction:o}=Ht(),s=de({id:t.generateId("trigger")},e),[i,a]=Z(s,["ref","id","disabled","onPointerDown","onClick","onKeyDown","onMouseOver","onFocus"]);let c=()=>t.value();r!==void 0&&(c=()=>t.value()??i.id,r.lastValue()===void 0&&r.setLastValue(c));const l=Js(()=>n.triggerRef(),()=>"button"),u=H(()=>l()==="a"&&n.triggerRef()?.getAttribute("href")!=null);W(lt(()=>r?.value(),y=>{u()&&y===c()&&n.triggerRef()?.focus()}));const d=()=>{r!==void 0?n.isOpen()?r.value()===c()&&r.closeMenu():(r.autoFocusMenu()||r.setAutoFocusMenu(!0),n.open(!1)):n.toggle(!0)},f=y=>{me(y,i.onPointerDown),y.currentTarget.dataset.pointerType=y.pointerType,!i.disabled&&y.pointerType!=="touch"&&y.button===0&&d()},h=y=>{me(y,i.onClick),i.disabled||y.currentTarget.dataset.pointerType==="touch"&&d()},p=y=>{if(me(y,i.onKeyDown),!i.disabled){if(u())switch(y.key){case"Enter":case" ":return}switch(y.key){case"Enter":case" ":case Aa.first(t.orientation()):y.stopPropagation(),y.preventDefault(),Rp(y.currentTarget),n.open("first"),r?.setAutoFocusMenu(!0),r?.setValue(c);break;case Aa.last(t.orientation()):y.stopPropagation(),y.preventDefault(),n.open("last");break;case lr.next(o(),t.orientation()):if(r===void 0)break;y.stopPropagation(),y.preventDefault(),r.nextMenu();break;case lr.previous(o(),t.orientation()):if(r===void 0)break;y.stopPropagation(),y.preventDefault(),r.previousMenu();break}}},m=y=>{me(y,i.onMouseOver),n.triggerRef()?.dataset.pointerType!=="touch"&&!i.disabled&&r!==void 0&&r.value()!==void 0&&r.setValue(c)},g=y=>{me(y,i.onFocus),r!==void 0&&y.currentTarget.dataset.pointerType!=="touch"&&r.setValue(c)};return W(()=>Y(n.registerTriggerId(i.id))),x(Ln,K({ref(y){var v=Ae(n.setTriggerRef,i.ref);typeof v=="function"&&v(y)},get"data-kb-menu-value-trigger"(){return t.value()},get id(){return i.id},get disabled(){return i.disabled},"aria-haspopup":"true",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return pe(()=>!!n.isOpen())()?n.contentId():void 0},get"data-highlighted"(){return c()!==void 0&&r?.value()===c()?!0:void 0},get tabIndex(){return r!==void 0?r.value()===c()||r.lastValue()===c()?0:-1:void 0},onPointerDown:f,onMouseOver:m,onClick:h,onKeyDown:p,onFocus:g,role:r!==void 0?"menuitem":void 0},()=>n.dataset(),a))}function Nl(e){let t;const n=yt(),r=Tt(),o=wo(),s=Ll(),{direction:i}=Ht(),a=de({id:n.generateId(`content-${kt()}`)},e),[c,l]=Z(a,["ref","id","style","onOpenAutoFocus","onCloseAutoFocus","onEscapeKeyDown","onFocusOutside","onPointerEnter","onPointerMove","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]);let u=0;const d=()=>r.parentMenuContext()==null&&o===void 0&&n.isModal(),f=jm({selectionManager:r.listState().selectionManager,collection:r.listState().collection,autoFocus:r.autoFocus,deferAutoFocus:!0,shouldFocusWrap:!0,disallowTypeAhead:()=>!r.listState().selectionManager().isFocused(),orientation:()=>n.orientation()==="horizontal"?"vertical":"horizontal"},()=>t);Il({trapFocus:()=>d()&&r.isOpen(),onMountAutoFocus:b=>{o===void 0&&c.onOpenAutoFocus?.(b)},onUnmountAutoFocus:c.onCloseAutoFocus},()=>t);const h=b=>{if(Ve(b.currentTarget,b.target)&&(b.key==="Tab"&&r.isOpen()&&b.preventDefault(),o!==void 0&&b.currentTarget.getAttribute("aria-haspopup")!=="true"))switch(b.key){case lr.next(i(),n.orientation()):b.stopPropagation(),b.preventDefault(),r.close(!0),o.setAutoFocusMenu(!0),o.nextMenu();break;case lr.previous(i(),n.orientation()):if(b.currentTarget.hasAttribute("data-closed"))break;b.stopPropagation(),b.preventDefault(),r.close(!0),o.setAutoFocusMenu(!0),o.previousMenu();break}},p=b=>{c.onEscapeKeyDown?.(b),o?.setAutoFocusMenu(!1),r.close(!0)},m=b=>{c.onFocusOutside?.(b),n.isModal()&&b.preventDefault()},g=b=>{me(b,c.onPointerEnter),r.isOpen()&&(r.parentMenuContext()?.listState().selectionManager().setFocused(!1),r.parentMenuContext()?.listState().selectionManager().setFocusedKey(void 0))},y=b=>{if(me(b,c.onPointerMove),b.pointerType!=="mouse")return;const w=b.target,P=u!==b.clientX;Ve(b.currentTarget,w)&&P&&(r.setPointerDir(b.clientX>u?"right":"left"),u=b.clientX)};W(()=>Y(r.registerContentId(c.id))),Y(()=>r.setContentRef(void 0));const v={ref:Ae(b=>{r.setContentRef(b),t=b},c.ref),role:"menu",get id(){return c.id},get tabIndex(){return f.tabIndex()},get"aria-labelledby"(){return r.triggerId()},onKeyDown:ke([c.onKeyDown,f.onKeyDown,h]),onMouseDown:ke([c.onMouseDown,f.onMouseDown]),onFocusIn:ke([c.onFocusIn,f.onFocusIn]),onFocusOut:ke([c.onFocusOut,f.onFocusOut]),onPointerEnter:g,onPointerMove:y,get"data-orientation"(){return n.orientation()}};return x(Se,{get when(){return r.contentPresent()},get children(){return x(Se,{get when(){return s===void 0||r.parentMenuContext()!=null},get fallback(){return x(Ee,K({as:"div"},()=>r.dataset(),v,l))},get children(){return x(vl.Positioner,{get children(){return x(Cl,K({get disableOutsidePointerEvents(){return pe(()=>!!d())()&&r.isOpen()},get excludedElements(){return[r.triggerRef]},bypassTopMostLayerCheck:!0,get style(){return po({"--kb-menu-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative"},c.style)},onEscapeKeyDown:p,onFocusOutside:m,get onDismiss(){return r.close}},()=>r.dataset(),v,l))}})}})}})}function Gm(e){let t;const n=yt(),r=Tt(),[o,s]=Z(e,["ref"]);return Ml({element:()=>t??null,enabled:()=>r.contentPresent()&&n.preventScroll()}),x(Nl,K({ref(i){var a=Ae(c=>{t=c},o.ref);typeof a=="function"&&a(i)}},s))}var Bl=ve();function Hm(){const e=ge(Bl);if(e===void 0)throw new Error("[kobalte]: `useMenuGroupContext` must be used within a `Menu.Group` component");return e}function di(e){const t=yt(),n=de({id:t.generateId(`group-${kt()}`)},e),[r,o]=j(),s={generateId:go(()=>n.id),registerLabelId:Bt(o)};return x(Bl.Provider,{value:s,get children(){return x(Ee,K({as:"div",role:"group",get"aria-labelledby"(){return r()}},n))}})}function Kl(e){const t=Hm(),n=de({id:t.generateId("label")},e),[r,o]=Z(n,["id"]);return W(()=>Y(t.registerLabelId(r.id))),x(Ee,K({as:"span",get id(){return r.id},"aria-hidden":"true"},o))}function Ul(e){const t=Tt(),n=de({children:""},e);return x(Ee,K({as:"span","aria-hidden":"true"},()=>t.dataset(),n))}function fi(e){return x(li,K({role:"menuitem",closeOnSelect:!0},e))}function zl(e){const t=ci(),n=de({id:t.generateId("description")},e),[r,o]=Z(n,["id"]);return W(()=>Y(t.registerDescription(r.id))),x(Ee,K({as:"div",get id(){return r.id}},()=>t.dataset(),o))}function jl(e){const t=ci(),n=de({id:t.generateId("indicator")},e),[r,o]=Z(n,["forceMount"]);return x(Se,{get when(){return r.forceMount||t.isChecked()},get children(){return x(Ee,K({as:"div"},()=>t.dataset(),o))}})}function Vl(e){const t=ci(),n=de({id:t.generateId("label")},e),[r,o]=Z(n,["ref","id"]);return W(()=>Y(t.registerLabel(r.id))),x(Ee,K({as:"div",ref(s){var i=Ae(t.setLabelRef,r.ref);typeof i=="function"&&i(s)},get id(){return r.id}},()=>t.dataset(),o))}function hi(e){const t=Tt();return x(Se,{get when(){return t.contentPresent()},get children(){return x(Cc,e)}})}var Wl=ve();function qm(){const e=ge(Wl);if(e===void 0)throw new Error("[kobalte]: `useMenuRadioGroupContext` must be used within a `Menu.RadioGroup` component");return e}function Gl(e){const n=yt().generateId(`radiogroup-${kt()}`),r=de({id:n},e),[o,s]=Z(r,["value","defaultValue","onChange","disabled"]),[i,a]=vo({value:()=>o.value,defaultValue:()=>o.defaultValue,onChange:l=>o.onChange?.(l)}),c={isDisabled:()=>o.disabled,isSelectedValue:l=>l===i(),setSelectedValue:l=>a(l)};return x(Wl.Provider,{value:c,get children(){return x(di,s)}})}function Hl(e){const t=qm(),n=de({closeOnSelect:!1},e),[r,o]=Z(n,["value","onSelect"]);return x(li,K({role:"menuitemradio",get checked(){return t.isSelectedValue(r.value)},onSelect:()=>{r.onSelect?.(),t.setSelectedValue(r.value)}},o))}function Ym(e,t,n){const r=e.split("-")[0],o=n.getBoundingClientRect(),s=[],i=t.clientX,a=t.clientY;switch(r){case"top":s.push([i,a+5]),s.push([o.left,o.bottom]),s.push([o.left,o.top]),s.push([o.right,o.top]),s.push([o.right,o.bottom]);break;case"right":s.push([i-5,a]),s.push([o.left,o.top]),s.push([o.right,o.top]),s.push([o.right,o.bottom]),s.push([o.left,o.bottom]);break;case"bottom":s.push([i,a-5]),s.push([o.right,o.top]),s.push([o.right,o.bottom]),s.push([o.left,o.bottom]),s.push([o.left,o.top]);break;case"left":s.push([i+5,a]),s.push([o.right,o.bottom]),s.push([o.left,o.bottom]),s.push([o.left,o.top]),s.push([o.right,o.top]);break}return s}function Jm(e,t){return t?Tp([e.clientX,e.clientY],t):!1}function ql(e){const t=yt(),n=ol(),r=Al(),o=wo(),s=Ll(),i=de({placement:t.orientation()==="horizontal"?"bottom-start":"right-start"},e),[a,c]=Z(i,["open","defaultOpen","onOpenChange"]);let l=0,u=null,d="right";const[f,h]=j(),[p,m]=j(),[g,y]=j(),[v,b]=j(),[w,P]=j(!0),[T,R]=j(c.placement),[S,C]=j([]),[L,A]=j([]),{DomCollectionProvider:O}=ig({items:L,onItemsChange:A}),G=ai({open:()=>a.open,defaultOpen:()=>a.defaultOpen,onOpenChange:E=>a.onOpenChange?.(E)}),{present:B}=ys({show:()=>t.forceMount()||G.isOpen(),element:()=>v()??null}),q=Qp({selectionMode:"none",dataSource:L}),ne=E=>{P(E),G.open()},N=(E=!1)=>{G.close(),E&&r&&r.close(!0)},I=E=>{P(E),G.toggle()},ce=()=>{const E=v();E&&(Pe(E),q.selectionManager().setFocused(!0),q.selectionManager().setFocusedKey(void 0))},qe=()=>{s!=null?setTimeout(()=>ce()):ce()},vt=E=>{C($=>[...$,E]);const D=r?.registerNestedMenu(E);return()=>{C($=>ls($,E)),D?.()}},Ye=E=>d===u?.side&&Jm(E,u?.area),we=E=>{Ye(E)&&E.preventDefault()},Re=E=>{Ye(E)||qe()},It=E=>{Ye(E)&&E.preventDefault()};El({isDisabled:()=>!(r==null&&G.isOpen()&&t.isModal()),targets:()=>[v(),...S()].filter(Boolean)}),W(()=>{const E=v();if(!E||!r)return;const D=r.registerNestedMenu(E);Y(()=>{D()})}),W(()=>{r===void 0&&o?.registerMenu(t.value(),[v(),...S()])}),W(()=>{r!==void 0||o===void 0||(o.value()===t.value()?(g()?.focus(),o.autoFocusMenu()&&ne(!0)):N())}),W(()=>{r!==void 0||o===void 0||G.isOpen()&&o.setValue(t.value())}),Y(()=>{r===void 0&&o?.unregisterMenu(t.value())});const k={dataset:H(()=>({"data-expanded":G.isOpen()?"":void 0,"data-closed":G.isOpen()?void 0:""})),isOpen:G.isOpen,contentPresent:B,nestedMenus:S,currentPlacement:T,pointerGraceTimeoutId:()=>l,autoFocus:w,listState:()=>q,parentMenuContext:()=>r,triggerRef:g,contentRef:v,triggerId:f,contentId:p,setTriggerRef:y,setContentRef:b,open:ne,close:N,toggle:I,focusContent:qe,onItemEnter:we,onItemLeave:Re,onTriggerLeave:It,setPointerDir:E=>d=E,setPointerGraceTimeoutId:E=>l=E,setPointerGraceIntent:E=>u=E,registerNestedMenu:vt,registerItemToParentDomCollection:n?.registerItem,registerTriggerId:Bt(h),registerContentId:Bt(m)};return x(O,{get children(){return x(Ol.Provider,{value:k,get children(){return x(Se,{when:s===void 0,get fallback(){return c.children},get children(){return x(vl,K({anchorRef:g,contentRef:v,onCurrentPlacementChange:R},c))}})}})}})}function Yl(e){const{direction:t}=Ht();return x(ql,K({get placement(){return t()==="rtl"?"left-start":"right-start"},flip:!0},e))}var Xm={close:(e,t)=>e==="ltr"?[t==="horizontal"?"ArrowLeft":"ArrowUp"]:[t==="horizontal"?"ArrowRight":"ArrowDown"]};function Jl(e){const t=Tt(),n=yt(),[r,o]=Z(e,["onFocusOutside","onKeyDown"]),{direction:s}=Ht();return x(Nl,K({onOpenAutoFocus:u=>{u.preventDefault()},onCloseAutoFocus:u=>{u.preventDefault()},onFocusOutside:u=>{r.onFocusOutside?.(u);const d=u.target;Ve(t.triggerRef(),d)||t.close()},onKeyDown:u=>{me(u,r.onKeyDown);const d=Ve(u.currentTarget,u.target),f=Xm.close(s(),n.orientation()).includes(u.key),h=t.parentMenuContext()!=null;d&&f&&h&&(t.close(),Pe(t.triggerRef()))}},o))}var Da=["Enter"," "],Zm={open:(e,t)=>e==="ltr"?[...Da,t==="horizontal"?"ArrowRight":"ArrowDown"]:[...Da,t==="horizontal"?"ArrowLeft":"ArrowUp"]};function Xl(e){let t;const n=yt(),r=Tt(),o=de({id:n.generateId(`sub-trigger-${kt()}`)},e),[s,i]=Z(o,["ref","id","textValue","disabled","onPointerMove","onPointerLeave","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]);let a=null;const c=()=>{a&&window.clearTimeout(a),a=null},{direction:l}=Ht(),u=()=>s.id,d=()=>{const b=r.parentMenuContext();if(b==null)throw new Error("[kobalte]: `Menu.SubTrigger` must be used within a `Menu.Sub` component");return b.listState().selectionManager()},f=()=>r.listState().collection(),h=()=>d().focusedKey()===u(),p=nl({key:u,selectionManager:d,shouldSelectOnPressUp:!0,allowsDifferentPressOrigin:!0,disabled:()=>s.disabled},()=>t),m=b=>{me(b,s.onClick),!r.isOpen()&&!s.disabled&&r.open(!0)},g=b=>{if(me(b,s.onPointerMove),b.pointerType!=="mouse")return;const w=r.parentMenuContext();if(w?.onItemEnter(b),!b.defaultPrevented){if(s.disabled){w?.onItemLeave(b);return}!r.isOpen()&&!a&&(r.parentMenuContext()?.setPointerGraceIntent(null),a=window.setTimeout(()=>{r.open(!1),c()},100)),w?.onItemEnter(b),b.defaultPrevented||(r.listState().selectionManager().isFocused()&&(r.listState().selectionManager().setFocused(!1),r.listState().selectionManager().setFocusedKey(void 0)),Pe(b.currentTarget),w?.listState().selectionManager().setFocused(!0),w?.listState().selectionManager().setFocusedKey(u()))}},y=b=>{if(me(b,s.onPointerLeave),b.pointerType!=="mouse")return;c();const w=r.parentMenuContext(),P=r.contentRef();if(P){w?.setPointerGraceIntent({area:Ym(r.currentPlacement(),b,P),side:r.currentPlacement().split("-")[0]}),window.clearTimeout(w?.pointerGraceTimeoutId());const T=window.setTimeout(()=>{w?.setPointerGraceIntent(null)},300);w?.setPointerGraceTimeoutId(T)}else{if(w?.onTriggerLeave(b),b.defaultPrevented)return;w?.setPointerGraceIntent(null)}w?.onItemLeave(b)},v=b=>{me(b,s.onKeyDown),!b.repeat&&(s.disabled||Zm.open(l(),n.orientation()).includes(b.key)&&(b.stopPropagation(),b.preventDefault(),d().setFocused(!1),d().setFocusedKey(void 0),r.isOpen()||r.open("first"),r.focusContent(),r.listState().selectionManager().setFocused(!0),r.listState().selectionManager().setFocusedKey(f().getFirstKey())))};return W(()=>{if(r.registerItemToParentDomCollection==null)throw new Error("[kobalte]: `Menu.SubTrigger` must be used within a `Menu.Sub` component");const b=r.registerItemToParentDomCollection({ref:()=>t,type:"item",key:u(),textValue:s.textValue??t?.textContent??"",disabled:s.disabled??!1});Y(b)}),W(lt(()=>r.parentMenuContext()?.pointerGraceTimeoutId(),b=>{Y(()=>{window.clearTimeout(b),r.parentMenuContext()?.setPointerGraceIntent(null)})})),W(()=>Y(r.registerTriggerId(s.id))),Y(()=>{c()}),x(Ee,K({as:"div",ref(b){var w=Ae(P=>{r.setTriggerRef(P),t=P},s.ref);typeof w=="function"&&w(b)},get id(){return s.id},role:"menuitem",get tabIndex(){return p.tabIndex()},"aria-haspopup":"true",get"aria-expanded"(){return r.isOpen()},get"aria-controls"(){return pe(()=>!!r.isOpen())()?r.contentId():void 0},get"aria-disabled"(){return s.disabled},get"data-key"(){return p.dataKey()},get"data-highlighted"(){return h()?"":void 0},get"data-disabled"(){return s.disabled?"":void 0},get onPointerDown(){return ke([s.onPointerDown,p.onPointerDown])},get onPointerUp(){return ke([s.onPointerUp,p.onPointerUp])},get onClick(){return ke([m,p.onClick])},get onKeyDown(){return ke([v,p.onKeyDown])},get onMouseDown(){return ke([s.onMouseDown,p.onMouseDown])},get onFocus(){return ke([s.onFocus,p.onFocus])},onPointerMove:g,onPointerLeave:y},()=>r.dataset(),i))}function Qm(e){const t=wo(),n=`menu-${kt()}`,r=de({id:n,modal:!0},e),[o,s]=Z(r,["id","modal","preventScroll","forceMount","open","defaultOpen","onOpenChange","value","orientation"]),i=ai({open:()=>o.open,defaultOpen:()=>o.defaultOpen,onOpenChange:c=>o.onOpenChange?.(c)}),a={isModal:()=>o.modal??!0,preventScroll:()=>o.preventScroll??a.isModal(),forceMount:()=>o.forceMount??!1,generateId:go(()=>o.id),value:()=>o.value,orientation:()=>o.orientation??t?.orientation()??"horizontal"};return x($l.Provider,{value:a,get children(){return x(ql,K({get open(){return i.isOpen()},get onOpenChange(){return i.setIsOpen}},s))}})}var ey={};yo(ey,{Root:()=>gr,Separator:()=>ty});function gr(e){let t;const n=de({orientation:"horizontal"},e),[r,o]=Z(n,["ref","orientation"]),s=Js(()=>t,()=>"hr");return x(Ee,K({as:"hr",ref(i){var a=Ae(c=>t=c,r.ref);typeof a=="function"&&a(i)},get role(){return s()!=="hr"?"separator":void 0},get"aria-orientation"(){return r.orientation==="vertical"?"vertical":void 0},get"data-orientation"(){return r.orientation}},o))}var ty=gr,ny={};yo(ny,{Arrow:()=>si,CheckboxItem:()=>Fl,Content:()=>pi,DropdownMenu:()=>ry,Group:()=>di,GroupLabel:()=>Kl,Icon:()=>Ul,Item:()=>fi,ItemDescription:()=>zl,ItemIndicator:()=>jl,ItemLabel:()=>Vl,Portal:()=>hi,RadioGroup:()=>Gl,RadioItem:()=>Hl,Root:()=>gi,Separator:()=>gr,Sub:()=>Yl,SubContent:()=>Jl,SubTrigger:()=>Xl,Trigger:()=>ui});function pi(e){const t=yt(),n=Tt(),[r,o]=Z(e,["onCloseAutoFocus","onInteractOutside"]);let s=!1;return x(Gm,K({onCloseAutoFocus:c=>{r.onCloseAutoFocus?.(c),s||Pe(n.triggerRef()),s=!1,c.preventDefault()},onInteractOutside:c=>{r.onInteractOutside?.(c),(!t.isModal()||c.detail.isContextMenu)&&(s=!0)}},o))}function gi(e){const t=`dropdownmenu-${kt()}`,n=de({id:t},e);return x(Qm,n)}var ry=Object.assign(gi,{Arrow:si,CheckboxItem:Fl,Content:pi,Group:di,GroupLabel:Kl,Icon:Ul,Item:fi,ItemDescription:zl,ItemIndicator:jl,ItemLabel:Vl,Portal:hi,RadioGroup:Gl,RadioItem:Hl,Separator:gr,Sub:Yl,SubContent:Jl,SubTrigger:Xl,Trigger:ui}),oy=ee("<script id=kb-color-mode-script>"),Zl=ve();function Ql(){const e=ge(Zl);if(e===void 0)throw new Error("[kobalte]: `useColorMode` must be used within a `ColorModeProvider`");return e}var eu="kb-color-mode";function sy(e){return{ssr:!1,type:"localStorage",get:t=>{let n;try{n=localStorage.getItem(e)}catch{}return n??t},set:t=>{try{localStorage.setItem(e,t)}catch{}}}}var iy=sy(eu),mi="system";function tu(){return window.matchMedia("(prefers-color-scheme: dark)")}function ay(){const e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(e)})})}}function cy(e,t=!0){const n=t?ay():void 0;document.documentElement.dataset.kbTheme=e,document.documentElement.style.colorScheme=e,n?.()}function nu(e){return tu().matches??e==="dark"?"dark":"light"}function ly(e){const t="light",n=e.get(t)??t;return n==="system"?nu():n}function uy(e){const t=tu(),n=r=>{e(r.matches?"dark":"light")};return t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}}function dy(e){const t=()=>e.initialColorMode??mi,n=()=>e.storageManager??iy;let r;const[o,s]=j(ly(n())),i=u=>{s(u),cy(u,e.disableTransitionOnChange)},a=u=>{r&&(r(),r=void 0);const d=u==="system";d&&(r=uy(i)),i(d?nu():u),n().set(u)},c=()=>{a(o()==="dark"?"light":"dark")};W(()=>{a(n().get()??t())}),Y(()=>{r?.()});const l={colorMode:o,setColorMode:a,toggleColorMode:c};return x(Zl.Provider,{value:l,get children(){return e.children}})}var fy=new Set(["light","dark","system"]);function hy(e){return fy.has(e)?e:mi}function py(e){const t=K({initialColorMode:mi,storageType:"localStorage",storageKey:eu},e),n=H(()=>{const r=hy(t.initialColorMode),o=`(function(){try{var a=function(o){var l="(prefers-color-scheme: dark)",v=window.matchMedia(l).matches?"dark":"light",e=o==="system"?v:o,d=document.documentElement,s=e==="dark";return d.style.colorScheme=e,d.dataset.kbTheme=e,o},u=a,h="${r}",r="${t.storageKey}",t=document.cookie.match(new RegExp("(^| )".concat(r,"=([^;]+)"))),c=t?t[2]:null;c?a(c):document.cookie="".concat(r,"=").concat(a(h),"; max-age=31536000; path=/")}catch(a){}})();`,s=`(function(){try{var a=function(c){var v="(prefers-color-scheme: dark)",h=window.matchMedia(v).matches?"dark":"light",r=c==="system"?h:c,o=document.documentElement,i=r==="dark";return o.style.colorScheme=r,o.dataset.kbTheme=r,c},n=a,m="${r}",e="${t.storageKey}",t=localStorage.getItem(e);t?a(t):localStorage.setItem(e,a(m))}catch(a){}})();`;return`!${t.storageType==="cookie"?o:s}`.trim()});return(()=>{var r=oy();return Ie(o=>{var s=t.nonce,i=n();return s!==o.e&&zt(r,"nonce",o.e=s),i!==o.t&&(r.innerHTML=o.t=i),o},{e:void 0,t:void 0}),r})()}var gy={};yo(gy,{CloseButton:()=>yi,Content:()=>vi,Description:()=>bi,Dialog:()=>my,Overlay:()=>xi,Portal:()=>Si,Root:()=>wi,Title:()=>Ci,Trigger:()=>_i,useDialogContext:()=>qt});var ru=ve();function qt(){const e=ge(ru);if(e===void 0)throw new Error("[kobalte]: `useDialogContext` must be used within a `Dialog` component");return e}function yi(e){const t=qt(),[n,r]=Z(e,["aria-label","onClick"]);return x(Ln,K({get"aria-label"(){return n["aria-label"]||t.translations().dismiss},onClick:s=>{me(s,n.onClick),t.close()}},r))}function vi(e){let t;const n=qt(),r=de({id:n.generateId("content")},e),[o,s]=Z(r,["ref","onOpenAutoFocus","onCloseAutoFocus","onPointerDownOutside","onFocusOutside","onInteractOutside"]);let i=!1,a=!1;const c=f=>{o.onPointerDownOutside?.(f),n.modal()&&f.detail.isContextMenu&&f.preventDefault()},l=f=>{o.onFocusOutside?.(f),n.modal()&&f.preventDefault()},u=f=>{o.onInteractOutside?.(f),!n.modal()&&(f.defaultPrevented||(i=!0,f.detail.originalEvent.type==="pointerdown"&&(a=!0)),Ve(n.triggerRef(),f.target)&&f.preventDefault(),f.detail.originalEvent.type==="focusin"&&a&&f.preventDefault())},d=f=>{o.onCloseAutoFocus?.(f),n.modal()?(f.preventDefault(),Pe(n.triggerRef())):(f.defaultPrevented||(i||Pe(n.triggerRef()),f.preventDefault()),i=!1,a=!1)};return El({isDisabled:()=>!(n.isOpen()&&n.modal()),targets:()=>t?[t]:[]}),Ml({element:()=>t??null,enabled:()=>n.contentPresent()&&n.preventScroll()}),Il({trapFocus:()=>n.isOpen()&&n.modal(),onMountAutoFocus:o.onOpenAutoFocus,onUnmountAutoFocus:d},()=>t),W(()=>Y(n.registerContentId(s.id))),x(Se,{get when(){return n.contentPresent()},get children(){return x(Cl,K({ref(f){var h=Ae(p=>{n.setContentRef(p),t=p},o.ref);typeof h=="function"&&h(f)},role:"dialog",tabIndex:-1,get disableOutsidePointerEvents(){return pe(()=>!!n.modal())()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},get"aria-labelledby"(){return n.titleId()},get"aria-describedby"(){return n.descriptionId()},get"data-expanded"(){return n.isOpen()?"":void 0},get"data-closed"(){return n.isOpen()?void 0:""},onPointerDownOutside:c,onFocusOutside:l,onInteractOutside:u,get onDismiss(){return n.close}},s))}})}function bi(e){const t=qt(),n=de({id:t.generateId("description")},e),[r,o]=Z(n,["id"]);return W(()=>Y(t.registerDescriptionId(r.id))),x(Ee,K({as:"p",get id(){return r.id}},o))}function xi(e){const t=qt(),[n,r]=Z(e,["ref","style","onPointerDown"]),o=s=>{me(s,n.onPointerDown),s.target===s.currentTarget&&s.preventDefault()};return x(Se,{get when(){return t.overlayPresent()},get children(){return x(Ee,K({as:"div",ref(s){var i=Ae(t.setOverlayRef,n.ref);typeof i=="function"&&i(s)},get style(){return po({"pointer-events":"auto"},n.style)},get"data-expanded"(){return t.isOpen()?"":void 0},get"data-closed"(){return t.isOpen()?void 0:""},onPointerDown:o},r))}})}function Si(e){const t=qt();return x(Se,{get when(){return t.contentPresent()||t.overlayPresent()},get children(){return x(Cc,e)}})}var $a={dismiss:"Dismiss"};function wi(e){const t=`dialog-${kt()}`,n=de({id:t,modal:!0,translations:$a},e),[r,o]=j(),[s,i]=j(),[a,c]=j(),[l,u]=j(),[d,f]=j(),[h,p]=j(),m=ai({open:()=>n.open,defaultOpen:()=>n.defaultOpen,onOpenChange:w=>n.onOpenChange?.(w)}),g=()=>n.forceMount||m.isOpen(),{present:y}=ys({show:g,element:()=>l()??null}),{present:v}=ys({show:g,element:()=>d()??null}),b={translations:()=>n.translations??$a,isOpen:m.isOpen,modal:()=>n.modal??!0,preventScroll:()=>n.preventScroll??b.modal(),contentId:r,titleId:s,descriptionId:a,triggerRef:h,overlayRef:l,setOverlayRef:u,contentRef:d,setContentRef:f,overlayPresent:y,contentPresent:v,close:m.close,toggle:m.toggle,setTriggerRef:p,generateId:go(()=>n.id),registerContentId:Bt(o),registerTitleId:Bt(i),registerDescriptionId:Bt(c)};return x(ru.Provider,{value:b,get children(){return n.children}})}function Ci(e){const t=qt(),n=de({id:t.generateId("title")},e),[r,o]=Z(n,["id"]);return W(()=>Y(t.registerTitleId(r.id))),x(Ee,K({as:"h2",get id(){return r.id}},o))}function _i(e){const t=qt(),[n,r]=Z(e,["ref","onClick"]);return x(Ln,K({ref(s){var i=Ae(t.setTriggerRef,n.ref);typeof i=="function"&&i(s)},"aria-haspopup":"dialog",get"aria-expanded"(){return t.isOpen()},get"aria-controls"(){return pe(()=>!!t.isOpen())()?t.contentId():void 0},get"data-expanded"(){return t.isOpen()?"":void 0},get"data-closed"(){return t.isOpen()?void 0:""},onClick:s=>{me(s,n.onClick),t.toggle()}},r))}var my=Object.assign(wi,{CloseButton:yi,Content:vi,Description:bi,Overlay:xi,Portal:Si,Title:Ci,Trigger:_i});const yy="modulepreload",vy=function(e){return"/where-to-eat/previews/pr-17/"+e},Fa={},Co=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let c=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");o=c(n.map(l=>{if(l=vy(l),l in Fa)return;Fa[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":yy,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})},by=function(){return null};var xy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},gn=xy,Sy=ee("<svg>"),Na=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wy=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Cy=e=>{const t=wy(e);return t.charAt(0).toUpperCase()+t.slice(1)},_y=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Py=e=>{const[t,n]=Z(e,["color","size","strokeWidth","children","class","name","iconNode","absoluteStrokeWidth"]);return(()=>{var r=Sy();return co(r,K(gn,{get width(){return t.size??gn.width},get height(){return t.size??gn.height},get stroke(){return t.color??gn.stroke},get"stroke-width"(){return pe(()=>!!t.absoluteStrokeWidth)()?Number(t.strokeWidth??gn["stroke-width"])*24/Number(t.size):Number(t.strokeWidth??gn["stroke-width"])},get class(){return _y("lucide","lucide-icon",...t.name!=null?[`lucide-${Na(Cy(t.name))}`,`lucide-${Na(t.name)}`]:[],t.class!=null?t.class:"")}},n),!0,!0),te(r,x(xc,{get each(){return t.iconNode},children:([o,s])=>x(Ke,K({component:o},s))})),r})()},ln=Py,ky=[["rect",{width:"18",height:"12",x:"3",y:"4",rx:"2",ry:"2",key:"1qhy41"}],["line",{x1:"2",x2:"22",y1:"20",y2:"20",key:"ni3hll"}]],Ty=e=>x(ln,K(e,{iconNode:ky,name:"laptop-minimal"})),Ry=Ty,Iy=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Ey=e=>x(ln,K(e,{iconNode:Iy,name:"moon"})),Ba=Ey,My=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ly=e=>x(ln,K(e,{iconNode:My,name:"sun"})),Ka=Ly,Oy=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ay=e=>x(ln,K(e,{iconNode:Oy,name:"users"})),Ko=Ay,Dy=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$y=e=>x(ln,K(e,{iconNode:Dy,name:"chevron-down"})),Fy=$y,Ny=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],By=e=>x(ln,K(e,{iconNode:Ny,name:"user"})),Ky=By;const ou=ve(),Uy=()=>{const e=ge(ou);if(!e)throw new Error("missing CurrentUserProvider");return e},Uo="wte-current-users";function zy(e){const t=typeof localStorage<"u"?localStorage.getItem(Uo):null,n=t?JSON.parse(t):{userByConnection:{}},[r,o]=Rl(n);W(()=>{typeof localStorage<"u"&&localStorage.setItem(Uo,JSON.stringify(r))}),dt(()=>{if(typeof window>"u")return;const i=a=>{if(a.key===Uo&&a.newValue)try{const c=JSON.parse(a.newValue);o(rt(c))}catch(c){console.error("Failed to parse current user storage update",c)}};window.addEventListener("storage",i),Y(()=>window.removeEventListener("storage",i))});const s={store:r,getCurrentUser:i=>r.userByConnection[i]??null,setCurrentUser:(i,a)=>{o("userByConnection",i,a)},clearCurrentUser:i=>{o("userByConnection",i,void 0)}};return x(ou.Provider,{value:s,get children(){return e.children}})}const su=ve(),iu=()=>{const e=ge(su);if(!e)throw new Error("missing storage settings provider");return e??{store:{connections:[]}}};function jy(e){const t=typeof localStorage<"u"?localStorage.getItem("wte-connections"):null,n=t?JSON.parse(t):[],[r,o]=Rl({connections:n});dt(()=>{if(typeof window>"u")return;const i=a=>{if(a.key==="wte-connections"&&a.newValue)try{const c=JSON.parse(a.newValue);o("connections",rt(c))}catch(c){console.error("Failed to parse storage update",c)}};window.addEventListener("storage",i),Y(()=>window.removeEventListener("storage",i))}),W(()=>{typeof localStorage<"u"&&localStorage.setItem("wte-connections",JSON.stringify(r.connections))});const s={store:r,addNewConnection:i=>{const a=crypto.randomUUID(),c=[{id:crypto.randomUUID(),name:"Pizza place on the corner",updatedAt:Date.now()},{id:crypto.randomUUID(),name:"Chinese takeout",updatedAt:Date.now()}],l=[{id:crypto.randomUUID(),name:"Ben",email:null,updatedAt:Date.now()},{id:crypto.randomUUID(),name:"Daniel",email:null,updatedAt:Date.now()}],u=[{userId:l[0].id,eateryId:c[0].id,score:75,updatedAt:Date.now()},{userId:l[0].id,eateryId:c[1].id,score:20,updatedAt:Date.now()},{userId:l[1].id,eateryId:c[0].id,score:25,updatedAt:Date.now()},{userId:l[1].id,eateryId:c[1].id,score:45,updatedAt:Date.now()}],d={id:a,settings:{connection:{name:i,updatedAt:Date.now()},eateries:c,eateryScores:u,users:l,eateryVetoes:[]}};return o("connections",r.connections.length,{...d}),a},removeConnection:i=>{o("connections",r.connections.filter(a=>a.id!==i))},updateConnection:(i,a,c)=>{const l=r.connections.findIndex(u=>u.id===i);l!==-1&&o("connections",l,"settings","connection",rt({name:a,updatedAt:c??Date.now()}))},upsertConnectionInfo:(i,a)=>{const c=r.connections.findIndex(u=>u.id===i);if(c===-1){const u={id:i,settings:{connection:a,eateries:[],users:[],eateryScores:[],eateryVetoes:[]}};o("connections",r.connections.length,u);return}const l=r.connections[c].settings.connection;(a.updatedAt??0)<=(l.updatedAt??0)||o("connections",c,"settings","connection",rt(a))},setConnection:i=>{const a=r.connections.findIndex(c=>c.id===i.id);if(a!==-1){const c=r.connections[a],l=(h,p)=>{const m=new Map;for(const g of h)m.set(g.id,g);for(const g of p){const y=m.get(g.id);(!y||(g.updatedAt??0)>(y.updatedAt??0))&&m.set(g.id,g)}return Array.from(m.values())},u=l(c.settings.users,i.settings.users),d=l(c.settings.eateries,i.settings.eateries),f=(h,p)=>{const m=new Map;for(const g of h)m.set(`${g.userId}|${g.eateryId}`,g);for(const g of p){const y=`${g.userId}|${g.eateryId}`,v=m.get(y);(!v||(g.updatedAt??0)>(v.updatedAt??0))&&m.set(y,g)}return Array.from(m.values())};o("connections",a,rt({id:c.id,settings:{connection:i.settings.connection.updatedAt>c.settings.connection.updatedAt?i.settings.connection:c.settings.connection,users:u,eateries:d,eateryScores:f(c.settings.eateryScores,i.settings.eateryScores),eateryVetoes:f(c.settings.eateryVetoes??[],i.settings.eateryVetoes??[]),knownPeers:c.settings.knownPeers??[]}}))}else o("connections",r.connections.length,i)},addUser:(i,a,c)=>{const l=r.connections.findIndex(d=>d.id===i);if(l===-1)throw new Error("Connection not found");const u={id:crypto.randomUUID(),name:a,email:c??null,updatedAt:Date.now()};return o("connections",l,"settings","users",r.connections[l].settings.users.length,{...u}),u.id},removeUser:(i,a)=>{const c=r.connections.findIndex(d=>d.id===i);if(c===-1)return;const l=r.connections[c].settings.users.findIndex(d=>d.id===a);if(l!==-1){const d=pt(r.connections[c].settings.users[l]);o("connections",c,"settings","users",l,{...d,_deleted:!0,updatedAt:Date.now()})}const u=r.connections[c].settings.eateryScores;for(let d=0;d<u.length;d++)u[d].userId===a&&o("connections",c,"settings","eateryScores",d,rt({...u[d],_deleted:!0,updatedAt:Date.now()}))},updateUser:(i,a,c,l)=>{const u=r.connections.findIndex(f=>f.id===i);if(u===-1)return;const d=r.connections[u].settings.users.findIndex(f=>f.id===a);d!==-1&&o("connections",u,"settings","users",d,rt({id:a,name:c,email:l??null,updatedAt:Date.now()}))},updateScore:(i,a,c,l)=>{const u=r.connections.findIndex(h=>h.id===i);if(u===-1)return;const d=r.connections[u].settings.eateryScores.findIndex(h=>h.userId===a&&h.eateryId===c),f={userId:a,eateryId:c,score:l,updatedAt:Date.now()};d===-1?o("connections",u,"settings","eateryScores",r.connections[u].settings.eateryScores.length,f):o("connections",u,"settings","eateryScores",d,rt(f))},addEatery:(i,a)=>{const c=r.connections.findIndex(u=>u.id===i);if(c===-1)throw new Error("Connection not found");const l={id:crypto.randomUUID(),name:a,updatedAt:Date.now()};return o("connections",c,"settings","eateries",r.connections[c].settings.eateries.length,{...l}),{eateryId:l.id,createdScores:[]}},removeEatery:(i,a)=>{const c=r.connections.findIndex(d=>d.id===i);if(c===-1)return;const l=r.connections[c].settings.eateries.findIndex(d=>d.id===a);if(l!==-1){const d=pt(r.connections[c].settings.eateries[l]);o("connections",c,"settings","eateries",l,{...d,_deleted:!0,updatedAt:Date.now()})}const u=r.connections[c].settings.eateryScores;for(let d=0;d<u.length;d++)u[d].eateryId===a&&o("connections",c,"settings","eateryScores",d,rt({...u[d],_deleted:!0,updatedAt:Date.now()}))},updateEatery:(i,a,c)=>{const l=r.connections.findIndex(d=>d.id===i);if(l===-1)return;const u=r.connections[l].settings.eateries.findIndex(d=>d.id===a);u!==-1&&o("connections",l,"settings","eateries",u,rt({id:a,name:c,updatedAt:Date.now()}))},upsertEatery:(i,a)=>{const c=r.connections.findIndex(u=>u.id===i);if(c===-1)return;const l=r.connections[c].settings.eateries.findIndex(u=>u.id===a.id);if(l===-1)o("connections",c,"settings","eateries",r.connections[c].settings.eateries.length,a);else{const u=r.connections[c].settings.eateries[l];a.updatedAt>(u.updatedAt??0)&&o("connections",c,"settings","eateries",l,a)}},upsertUser:(i,a)=>{const c=r.connections.findIndex(u=>u.id===i);if(c===-1)return;const l=r.connections[c].settings.users.findIndex(u=>u.id===a.id);if(l===-1)o("connections",c,"settings","users",r.connections[c].settings.users.length,a);else{const u=r.connections[c].settings.users[l];a.updatedAt>(u.updatedAt??0)&&o("connections",c,"settings","users",l,a)}},upsertScore:(i,a)=>{const c=r.connections.findIndex(u=>u.id===i);if(c===-1)return;const l=r.connections[c].settings.eateryScores.findIndex(u=>u.userId===a.userId&&u.eateryId===a.eateryId);if(l===-1)o("connections",c,"settings","eateryScores",u=>[...u,a]);else{const u=r.connections[c].settings.eateryScores[l];a.updatedAt>(u.updatedAt??0)&&o("connections",c,"settings","eateryScores",l,a)}},toggleVeto:(i,a,c)=>{const l=r.connections.findIndex(m=>m.id===i);if(l===-1)return;const u=r.connections[l].settings.eateryVetoes??[],d=u.findIndex(m=>m.userId===a&&m.eateryId===c),f=Date.now();if(d===-1){const m={userId:a,eateryId:c,updatedAt:f,_deleted:!1};return o("connections",l,"settings","eateryVetoes",g=>[...g??[],m]),m}const h=u[d],p={...h,_deleted:!h._deleted,updatedAt:f};return o("connections",l,"settings","eateryVetoes",d,rt(p)),p},upsertVeto:(i,a)=>{const c=r.connections.findIndex(d=>d.id===i);if(c===-1)return;const l=r.connections[c].settings.eateryVetoes??[],u=l.findIndex(d=>d.userId===a.userId&&d.eateryId===a.eateryId);if(u===-1)o("connections",c,"settings","eateryVetoes",d=>[...d??[],a]);else{const d=l[u];a.updatedAt>(d.updatedAt??0)&&o("connections",c,"settings","eateryVetoes",u,a)}},addKnownPeer:(i,a)=>{const c=r.connections.findIndex(u=>u.id===i);c===-1||(r.connections[c].settings.knownPeers??[]).includes(a)||o("connections",c,"settings","knownPeers",u=>[...u??[],a])},removeKnownPeer:(i,a)=>{const c=r.connections.findIndex(d=>d.id===i);c===-1||(r.connections[c].settings.knownPeers??[]).indexOf(a)===-1||o("connections",c,"settings","knownPeers",d=>(d??[]).filter(f=>f!==a))},getKnownPeers:i=>r.connections.find(c=>c.id===i)?.settings.knownPeers??[],getAllKnownPeers:()=>{const i=new Map;for(const a of r.connections)i.set(a.id,a.settings.knownPeers??[]);return i}};return x(su.Provider,{value:s,get children(){return e.children}})}function au(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=au(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function cu(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=au(e))&&(r&&(r+=" "),r+=t);return r}const Ua=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,za=cu,Vy=(e,t)=>n=>{var r;if(t?.variants==null)return za(e,n?.class,n?.className);const{variants:o,defaultVariants:s}=t,i=Object.keys(o).map(l=>{const u=n?.[l],d=s?.[l];if(u===null)return null;const f=Ua(u)||Ua(d);return o[l][f]}),a=n&&Object.entries(n).reduce((l,u)=>{let[d,f]=u;return f===void 0||(l[d]=f),l},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((l,u)=>{let{class:d,className:f,...h}=u;return Object.entries(h).every(p=>{let[m,g]=p;return Array.isArray(g)?g.includes({...s,...a}[m]):{...s,...a}[m]===g})?[...l,d,f]:l},[]);return za(e,i,c,n?.class,n?.className)},Pi="-",Wy=e=>{const t=Hy(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const a=i.split(Pi);return a[0]===""&&a.length!==1&&a.shift(),lu(a,t)||Gy(i)},getConflictingClassGroupIds:(i,a)=>{const c=n[i]||[];return a&&r[i]?[...c,...r[i]]:c}}},lu=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),o=r?lu(e.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const s=e.join(Pi);return t.validators.find(({validator:i})=>i(s))?.classGroupId},ja=/^\[(.+)\]$/,Gy=e=>{if(ja.test(e)){const t=ja.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Hy=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const o in n)Ss(n[o],r,o,t);return r},Ss=(e,t,n,r)=>{e.forEach(o=>{if(typeof o=="string"){const s=o===""?t:Va(t,o);s.classGroupId=n;return}if(typeof o=="function"){if(qy(o)){Ss(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,i])=>{Ss(i,Va(t,s),n,r)})})},Va=(e,t)=>{let n=e;return t.split(Pi).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},qy=e=>e.isThemeGetter,Yy=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(s,i)=>{n.set(s,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=r.get(s))!==void 0)return o(s,i),i},set(s,i){n.has(s)?n.set(s,i):o(s,i)}}},ws="!",Cs=":",Jy=Cs.length,Xy=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=o=>{const s=[];let i=0,a=0,c=0,l;for(let p=0;p<o.length;p++){let m=o[p];if(i===0&&a===0){if(m===Cs){s.push(o.slice(c,p)),c=p+Jy;continue}if(m==="/"){l=p;continue}}m==="["?i++:m==="]"?i--:m==="("?a++:m===")"&&a--}const u=s.length===0?o:o.substring(c),d=Zy(u),f=d!==u,h=l&&l>c?l-c:void 0;return{modifiers:s,hasImportantModifier:f,baseClassName:d,maybePostfixModifierPosition:h}};if(t){const o=t+Cs,s=r;r=i=>i.startsWith(o)?s(i.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:i,maybePostfixModifierPosition:void 0}}if(n){const o=r;r=s=>n({className:s,parseClassName:o})}return r},Zy=e=>e.endsWith(ws)?e.substring(0,e.length-1):e.startsWith(ws)?e.substring(1):e,Qy=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let s=[];return r.forEach(i=>{i[0]==="["||t[i]?(o.push(...s.sort(),i),s=[]):s.push(i)}),o.push(...s.sort()),o}},ev=e=>({cache:Yy(e.cacheSize),parseClassName:Xy(e),sortModifiers:Qy(e),...Wy(e)}),tv=/\s+/,nv=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:s}=t,i=[],a=e.trim().split(tv);let c="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{isExternal:d,modifiers:f,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(u);if(d){c=u+(c.length>0?" "+c:c);continue}let g=!!m,y=r(g?p.substring(0,m):p);if(!y){if(!g){c=u+(c.length>0?" "+c:c);continue}if(y=r(p),!y){c=u+(c.length>0?" "+c:c);continue}g=!1}const v=s(f).join(":"),b=h?v+ws:v,w=b+y;if(i.includes(w))continue;i.push(w);const P=o(y,g);for(let T=0;T<P.length;++T){const R=P[T];i.push(b+R)}c=u+(c.length>0?" "+c:c)}return c};function rv(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=uu(t))&&(r&&(r+=" "),r+=n);return r}const uu=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=uu(e[r]))&&(n&&(n+=" "),n+=t);return n};function ov(e,...t){let n,r,o,s=i;function i(c){const l=t.reduce((u,d)=>d(u),e());return n=ev(l),r=n.cache.get,o=n.cache.set,s=a,a(c)}function a(c){const l=r(c);if(l)return l;const u=nv(c,n);return o(c,u),u}return function(){return s(rv.apply(null,arguments))}}const Ce=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},du=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,fu=/^\((?:(\w[\w-]*):)?(.+)\)$/i,sv=/^\d+\/\d+$/,iv=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,av=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,cv=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,lv=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uv=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,mn=e=>sv.test(e),re=e=>!!e&&!Number.isNaN(Number(e)),Et=e=>!!e&&Number.isInteger(Number(e)),zo=e=>e.endsWith("%")&&re(e.slice(0,-1)),bt=e=>iv.test(e),dv=()=>!0,fv=e=>av.test(e)&&!cv.test(e),hu=()=>!1,hv=e=>lv.test(e),pv=e=>uv.test(e),gv=e=>!U(e)&&!z(e),mv=e=>Dn(e,mu,hu),U=e=>du.test(e),Yt=e=>Dn(e,yu,fv),jo=e=>Dn(e,Sv,re),Wa=e=>Dn(e,pu,hu),yv=e=>Dn(e,gu,pv),Tr=e=>Dn(e,vu,hv),z=e=>fu.test(e),jn=e=>$n(e,yu),vv=e=>$n(e,wv),Ga=e=>$n(e,pu),bv=e=>$n(e,mu),xv=e=>$n(e,gu),Rr=e=>$n(e,vu,!0),Dn=(e,t,n)=>{const r=du.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},$n=(e,t,n=!1)=>{const r=fu.exec(e);return r?r[1]?t(r[1]):n:!1},pu=e=>e==="position"||e==="percentage",gu=e=>e==="image"||e==="url",mu=e=>e==="length"||e==="size"||e==="bg-size",yu=e=>e==="length",Sv=e=>e==="number",wv=e=>e==="family-name",vu=e=>e==="shadow",Cv=()=>{const e=Ce("color"),t=Ce("font"),n=Ce("text"),r=Ce("font-weight"),o=Ce("tracking"),s=Ce("leading"),i=Ce("breakpoint"),a=Ce("container"),c=Ce("spacing"),l=Ce("radius"),u=Ce("shadow"),d=Ce("inset-shadow"),f=Ce("text-shadow"),h=Ce("drop-shadow"),p=Ce("blur"),m=Ce("perspective"),g=Ce("aspect"),y=Ce("ease"),v=Ce("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],w=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],P=()=>[...w(),z,U],T=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],S=()=>[z,U,c],C=()=>[mn,"full","auto",...S()],L=()=>[Et,"none","subgrid",z,U],A=()=>["auto",{span:["full",Et,z,U]},Et,z,U],O=()=>[Et,"auto",z,U],G=()=>["auto","min","max","fr",z,U],B=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],q=()=>["start","end","center","stretch","center-safe","end-safe"],ne=()=>["auto",...S()],N=()=>[mn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],I=()=>[e,z,U],ce=()=>[...w(),Ga,Wa,{position:[z,U]}],qe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],vt=()=>["auto","cover","contain",bv,mv,{size:[z,U]}],Ye=()=>[zo,jn,Yt],we=()=>["","none","full",l,z,U],Re=()=>["",re,jn,Yt],It=()=>["solid","dashed","dotted","double"],Fn=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],k=()=>[re,zo,Ga,Wa],E=()=>["","none",p,z,U],D=()=>["none",re,z,U],$=()=>["none",re,z,U],fe=()=>[re,z,U],le=()=>[mn,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[bt],breakpoint:[bt],color:[dv],container:[bt],"drop-shadow":[bt],ease:["in","out","in-out"],font:[gv],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[bt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[bt],shadow:[bt],spacing:["px",re],text:[bt],"text-shadow":[bt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",mn,U,z,g]}],container:["container"],columns:[{columns:[re,U,z,a]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:P()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[Et,"auto",z,U]}],basis:[{basis:[mn,"full","auto",a,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[re,mn,"auto","initial","none",U]}],grow:[{grow:["",re,z,U]}],shrink:[{shrink:["",re,z,U]}],order:[{order:[Et,"first","last","none",z,U]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:A()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:A()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":G()}],"auto-rows":[{"auto-rows":G()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...B(),"normal"]}],"justify-items":[{"justify-items":[...q(),"normal"]}],"justify-self":[{"justify-self":["auto",...q()]}],"align-content":[{content:["normal",...B()]}],"align-items":[{items:[...q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...q(),{baseline:["","last"]}]}],"place-content":[{"place-content":B()}],"place-items":[{"place-items":[...q(),"baseline"]}],"place-self":[{"place-self":["auto",...q()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:ne()}],mx:[{mx:ne()}],my:[{my:ne()}],ms:[{ms:ne()}],me:[{me:ne()}],mt:[{mt:ne()}],mr:[{mr:ne()}],mb:[{mb:ne()}],ml:[{ml:ne()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:N()}],w:[{w:[a,"screen",...N()]}],"min-w":[{"min-w":[a,"screen","none",...N()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[i]},...N()]}],h:[{h:["screen","lh",...N()]}],"min-h":[{"min-h":["screen","lh","none",...N()]}],"max-h":[{"max-h":["screen","lh",...N()]}],"font-size":[{text:["base",n,jn,Yt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,z,jo]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",zo,U]}],"font-family":[{font:[vv,U,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,z,U]}],"line-clamp":[{"line-clamp":[re,"none",z,jo]}],leading:[{leading:[s,...S()]}],"list-image":[{"list-image":["none",z,U]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",z,U]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...It(),"wavy"]}],"text-decoration-thickness":[{decoration:[re,"from-font","auto",z,Yt]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[re,"auto",z,U]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",z,U]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",z,U]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ce()}],"bg-repeat":[{bg:qe()}],"bg-size":[{bg:vt()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Et,z,U],radial:["",z,U],conic:[Et,z,U]},xv,yv]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:Ye()}],"gradient-via-pos":[{via:Ye()}],"gradient-to-pos":[{to:Ye()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:we()}],"rounded-s":[{"rounded-s":we()}],"rounded-e":[{"rounded-e":we()}],"rounded-t":[{"rounded-t":we()}],"rounded-r":[{"rounded-r":we()}],"rounded-b":[{"rounded-b":we()}],"rounded-l":[{"rounded-l":we()}],"rounded-ss":[{"rounded-ss":we()}],"rounded-se":[{"rounded-se":we()}],"rounded-ee":[{"rounded-ee":we()}],"rounded-es":[{"rounded-es":we()}],"rounded-tl":[{"rounded-tl":we()}],"rounded-tr":[{"rounded-tr":we()}],"rounded-br":[{"rounded-br":we()}],"rounded-bl":[{"rounded-bl":we()}],"border-w":[{border:Re()}],"border-w-x":[{"border-x":Re()}],"border-w-y":[{"border-y":Re()}],"border-w-s":[{"border-s":Re()}],"border-w-e":[{"border-e":Re()}],"border-w-t":[{"border-t":Re()}],"border-w-r":[{"border-r":Re()}],"border-w-b":[{"border-b":Re()}],"border-w-l":[{"border-l":Re()}],"divide-x":[{"divide-x":Re()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Re()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...It(),"hidden","none"]}],"divide-style":[{divide:[...It(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...It(),"none","hidden"]}],"outline-offset":[{"outline-offset":[re,z,U]}],"outline-w":[{outline:["",re,jn,Yt]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",u,Rr,Tr]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",d,Rr,Tr]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:Re()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[re,Yt]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":Re()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",f,Rr,Tr]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[re,z,U]}],"mix-blend":[{"mix-blend":[...Fn(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Fn()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[re]}],"mask-image-linear-from-pos":[{"mask-linear-from":k()}],"mask-image-linear-to-pos":[{"mask-linear-to":k()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":k()}],"mask-image-t-to-pos":[{"mask-t-to":k()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":k()}],"mask-image-r-to-pos":[{"mask-r-to":k()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":k()}],"mask-image-b-to-pos":[{"mask-b-to":k()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":k()}],"mask-image-l-to-pos":[{"mask-l-to":k()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":k()}],"mask-image-x-to-pos":[{"mask-x-to":k()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":k()}],"mask-image-y-to-pos":[{"mask-y-to":k()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[z,U]}],"mask-image-radial-from-pos":[{"mask-radial-from":k()}],"mask-image-radial-to-pos":[{"mask-radial-to":k()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":w()}],"mask-image-conic-pos":[{"mask-conic":[re]}],"mask-image-conic-from-pos":[{"mask-conic-from":k()}],"mask-image-conic-to-pos":[{"mask-conic-to":k()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ce()}],"mask-repeat":[{mask:qe()}],"mask-size":[{mask:vt()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",z,U]}],filter:[{filter:["","none",z,U]}],blur:[{blur:E()}],brightness:[{brightness:[re,z,U]}],contrast:[{contrast:[re,z,U]}],"drop-shadow":[{"drop-shadow":["","none",h,Rr,Tr]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",re,z,U]}],"hue-rotate":[{"hue-rotate":[re,z,U]}],invert:[{invert:["",re,z,U]}],saturate:[{saturate:[re,z,U]}],sepia:[{sepia:["",re,z,U]}],"backdrop-filter":[{"backdrop-filter":["","none",z,U]}],"backdrop-blur":[{"backdrop-blur":E()}],"backdrop-brightness":[{"backdrop-brightness":[re,z,U]}],"backdrop-contrast":[{"backdrop-contrast":[re,z,U]}],"backdrop-grayscale":[{"backdrop-grayscale":["",re,z,U]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[re,z,U]}],"backdrop-invert":[{"backdrop-invert":["",re,z,U]}],"backdrop-opacity":[{"backdrop-opacity":[re,z,U]}],"backdrop-saturate":[{"backdrop-saturate":[re,z,U]}],"backdrop-sepia":[{"backdrop-sepia":["",re,z,U]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",z,U]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[re,"initial",z,U]}],ease:[{ease:["linear","initial",y,z,U]}],delay:[{delay:[re,z,U]}],animate:[{animate:["none",v,z,U]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,z,U]}],"perspective-origin":[{"perspective-origin":P()}],rotate:[{rotate:D()}],"rotate-x":[{"rotate-x":D()}],"rotate-y":[{"rotate-y":D()}],"rotate-z":[{"rotate-z":D()}],scale:[{scale:$()}],"scale-x":[{"scale-x":$()}],"scale-y":[{"scale-y":$()}],"scale-z":[{"scale-z":$()}],"scale-3d":["scale-3d"],skew:[{skew:fe()}],"skew-x":[{"skew-x":fe()}],"skew-y":[{"skew-y":fe()}],transform:[{transform:[z,U,"","none","gpu","cpu"]}],"transform-origin":[{origin:P()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:le()}],"translate-x":[{"translate-x":le()}],"translate-y":[{"translate-y":le()}],"translate-z":[{"translate-z":le()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",z,U]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",z,U]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[re,jn,Yt,jo]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},_v=ov(Cv);function Rt(...e){return _v(cu(e))}const Pv=Vy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-150 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-border bg-background hover:bg-muted hover:text-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-muted hover:text-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 px-3 text-xs",lg:"h-11 px-6",icon:"size-10"}},defaultVariants:{variant:"default",size:"default"}}),mr=e=>{const[t,n]=Z(e,["variant","size","class"]);return x(Ln,K({get class(){return Rt(Pv({variant:t.variant,size:t.size}),t.class)}},n))},bu=ui,xu=e=>x(gi,K({gutter:4},e)),Su=e=>{const[,t]=Z(e,["class"]);return x(hi,{get children(){return x(pi,K({get class(){return Rt("z-50 min-w-32 origin-[var(--kb-menu-content-transform-origin)] animate-content-hide overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[expanded]:animate-content-show",e.class)}},t))}})},Lr=e=>{const[,t]=Z(e,["class"]);return x(fi,K({get class(){return Rt("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e.class)}},t))},kv=e=>{const[,t]=Z(e,["class"]);return x(gr,K({get class(){return Rt("-mx-1 my-1 h-px bg-muted",e.class)}},t))};var Tv=ee('<div class="flex items-center gap-1.5 px-2 py-1 rounded-md bg-muted/50 text-muted-foreground text-sm"><span class="hidden sm:inline">Select identity'),Rv=ee('<div class="w-7 h-7 rounded-full bg-primary/10 flex items-center justify-center text-primary text-sm font-semibold">'),Iv=ee('<span class="hidden sm:inline text-sm font-medium max-w-[100px] truncate">'),Ev=ee('<div class="px-2 py-1.5 text-xs text-muted-foreground">Signed in as'),Mv=ee('<div class="px-2 py-1 font-medium text-sm">'),Lv=ee('<div class="px-2 py-1.5 text-xs text-muted-foreground">Switch to'),Ov=ee('<div class="px-2 py-2 text-xs text-muted-foreground text-center">No other users'),Av=ee('<div class="w-6 h-6 rounded-full bg-secondary/50 flex items-center justify-center text-xs font-semibold">'),Dv=ee("<span class=truncate>");function $v(){const e=iu(),t=Uy(),n=ep(),r=H(()=>{const u=n()?.pathname??"";if(!u)return null;const d=u.match(/\/wheel\/([^/]+)/),f=u.match(/\/settings\/([^/]+)/);return d?.[1]??f?.[1]??null}),o=H(()=>{const l=r();return l?e.store.connections.find(u=>u.id===l):null}),s=H(()=>o()?.settings.users.filter(l=>!l._deleted)??[]),i=H(()=>{const l=r();return l?t.getCurrentUser(l):null}),a=H(()=>{const l=i();return l?s().find(u=>u.id===l)??null:null}),c=l=>{const u=r();u&&t.setCurrentUser(u,l)};return x(Se,{get when(){return pe(()=>!!r())()&&o()},get children(){return x(Se,{get when(){return a()},get fallback(){return(()=>{var l=Tv(),u=l.firstChild;return te(l,x(Ky,{class:"w-4 h-4"}),u),l})()},children:l=>x(xu,{get children(){return[x(bu,{as:mr,variant:"ghost",size:"sm",class:"h-9 gap-2 px-2","data-testid":"current-user-menu",get children(){return[(()=>{var u=Rv();return te(u,()=>l().name.charAt(0).toUpperCase()),u})(),(()=>{var u=Iv();return te(u,()=>l().name),u})(),x(Fy,{class:"w-3 h-3 text-muted-foreground"})]}}),x(Su,{class:"min-w-[160px]",get children(){return[Ev(),(()=>{var u=Mv();return te(u,()=>l().name),u})(),x(kv,{}),Lv(),x(xc,{get each(){return s().filter(u=>u.id!==l().id)},children:u=>x(Lr,{onSelect:()=>c(u.id),class:"gap-2 cursor-pointer text-sm",get"data-testid"(){return`switch-to-user-${u.id}`},get children(){return[(()=>{var d=Av();return te(d,()=>u.name.charAt(0).toUpperCase()),d})(),(()=>{var d=Dv();return te(d,()=>u.name),d})()]}})}),x(Se,{get when(){return s().filter(u=>u.id!==l().id).length===0},get children(){return Ov()}})]}})]}})})}})}var Fv=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Nv=e=>x(ln,K(e,{iconNode:Fv,name:"download"})),Bv=Nv,Kv=ee("<span class=sr-only>Install app");function Uv(){const[e,t]=j(null),[n,r]=j(!1);dt(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0){r(!0);return}const i=c=>{c.preventDefault(),t(c)},a=()=>{r(!0),t(null)};window.addEventListener("beforeinstallprompt",i),window.addEventListener("appinstalled",a),Y(()=>{window.removeEventListener("beforeinstallprompt",i),window.removeEventListener("appinstalled",a)})});const o=async()=>{const i=e();if(!i)return;await i.prompt();const{outcome:a}=await i.userChoice;a==="accepted"&&t(null)},s=()=>e()!==null&&!n();return x(Se,{get when(){return s()},get children(){return x(mr,{variant:"ghost",size:"icon",class:"w-9 h-9",onClick:o,title:"Install app",get children(){return[x(Bv,{class:"size-4"}),Kv()]}})}})}var zv=ee('<div class="fixed inset-0 z-50 flex items-start justify-center sm:items-center">'),jv=ee('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round class=size-4><path d="M18 6l-12 12"></path><path d="M6 6l12 12">'),Vv=ee("<span class=sr-only>Close"),Wv=ee("<div>");const Gv=wi,Hv=_i,qv=e=>{const[,t]=Z(e,["children"]);return x(Si,K(t,{get children(){var n=zv();return te(n,()=>e.children),n}}))},Yv=e=>{const[,t]=Z(e,["class"]);return x(xi,K({get class(){return Rt("fixed inset-0 z-50 bg-background/80 data-[expanded]:animate-in data-[closed]:animate-out data-[closed]:fade-out-0 data-[expanded]:fade-in-0",e.class)}},t))},Jv=e=>{const[t,n]=Z(e,["class","children","hideCloseButton"]);return x(qv,{get children(){return[x(Yv,{}),x(vi,K({get class(){return Rt("fixed left-1/2 top-1/2 z-50 grid max-h-screen w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 overflow-y-auto border bg-background p-6 shadow-lg duration-200 data-[expanded]:animate-in data-[closed]:animate-out data-[closed]:fade-out-0 data-[expanded]:fade-in-0 data-[closed]:zoom-out-95 data-[expanded]:zoom-in-95 data-[closed]:slide-out-to-left-1/2 data-[closed]:slide-out-to-top-[48%] data-[expanded]:slide-in-from-left-1/2 data-[expanded]:slide-in-from-top-[48%] sm:rounded-lg",t.class)}},n,{get children(){return[pe(()=>t.children),pe(()=>pe(()=>!t.hideCloseButton)()&&x(yi,{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[expanded]:bg-accent data-[expanded]:text-muted-foreground",get children(){return[jv(),Vv()]}}))]}}))]}})},Xv=e=>{const[,t]=Z(e,["class"]);return(()=>{var n=Wv();return co(n,K({get class(){return Rt("flex flex-col space-y-1.5 text-center sm:text-left",e.class)}},t),!1,!1),n})()},Zv=e=>{const[,t]=Z(e,["class"]);return x(Ci,K({get class(){return Rt("text-lg font-semibold leading-none tracking-tight",e.class)}},t))},Qv=e=>{const[,t]=Z(e,["class"]);return x(bi,K({get class(){return Rt("text-sm text-muted-foreground",e.class)}},t))};class eb{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return tb(t).buffer}}function tb(e){let t=0;for(const o of e)t+=o.byteLength;const n=new Uint8Array(t);let r=0;for(const o of e){const s=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);n.set(s,r),r+=o.byteLength}return n}function wu(e){return new nb(e).unpack()}function Cu(e){const t=new rb,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class nb{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,o="",s,i;for(;r<t;)s=n[r],s<160?(i=s,r++):(s^192)<32?(i=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(i=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(i=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),o+=String.fromCodePoint(i);return this.index+=t,o}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const o=this.unpack();n[o]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,o=t&8388607|8388608;return(n===0?1:-1)*o*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,o=(t>>20&2047)-1023,i=(t&1048575|1048576)*2**(o-20)+n*2**(o-52);return(r===0?1:-1)*i}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class rb{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=o=>{if(o<n){const s=this.pack(t[o]);return s instanceof Promise?s.then(()=>r(o+1)):r(o+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),o=t/2**r-1,s=Math.floor(o*2**52),i=2**32,a=n<<31|r+1023<<20|s/i&1048575,c=s%i;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(c)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const o=s=>{if(s<n.length){const i=n[s];if(t.hasOwnProperty(i)){this.pack(i);const a=this.pack(t[i]);if(a instanceof Promise)return a.then(()=>o(s+1))}return o(s+1)}};return o(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new eb,this._textEncoder=new TextEncoder}}let _u=!0,Pu=!0;function Zn(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseFloat(r[n],10)}function un(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(i,a){if(i!==t)return o.apply(this,arguments);const c=l=>{const u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(a,c),o.apply(this,[i,c])};const s=r.removeEventListener;r.removeEventListener=function(i,a){if(i!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(a))return s.apply(this,arguments);const c=this._eventMap[t].get(a);return this._eventMap[t].delete(a),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[i,c])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(i){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),i&&this.addEventListener(t,this["_on"+t]=i)},enumerable:!0,configurable:!0})}function ob(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(_u=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function sb(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Pu=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function ku(){if(typeof window=="object"){if(_u)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function ki(e,t){Pu&&console.warn(e+" is deprecated, please use "+t+" instead.")}function ib(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(o=>o.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=parseInt(Zn(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=parseInt(Zn(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=parseInt(Zn(n.userAgent,/AppleWebKit\/(\d+)\./,1)),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,t._safariVersion=Zn(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return t.browser="Not a supported browser.",t;return t}function Ha(e){return Object.prototype.toString.call(e)==="[object Object]"}function Tu(e){return Ha(e)?Object.keys(e).reduce(function(t,n){const r=Ha(e[n]),o=r?Tu(e[n]):e[n],s=r&&!Object.keys(o).length;return o===void 0||s?t:Object.assign(t,{[n]:o})},{}):e}function _s(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?_s(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(o=>{_s(e,e.get(o),n)})}))}function qa(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(t===null)return o;const s=[];return e.forEach(i=>{i.type==="track"&&i.trackIdentifier===t.id&&s.push(i)}),s.forEach(i=>{e.forEach(a=>{a.type===r&&a.trackId===i.id&&_s(e,a,o)})}),o}const Ya=ku;function Ru(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(u.ideal!==void 0){c.optional=c.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",l)]=u.ideal,c.optional.push(f),f={},f[d("max",l)]=u.ideal,c.optional.push(f)):(f[d("",l)]=u.ideal,c.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(f,l)]=u[f])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},o=function(a,c){if(t.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=t.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(p=>p.kind==="videoinput");let h=f.find(p=>d.some(m=>p.label.toLowerCase().includes(m)));return!h&&f.length&&d.includes("back")&&(h=f[f.length-1]),h&&(a.video.deviceId=l.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=r(a.video),Ya("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return Ya("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},i=function(a,c,l){o(a,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(s(d))})})};if(n.getUserMedia=i.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return o(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function Iu(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Eu(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",o=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===o.track.id):s={track:o.track};const i=new Event("track");i.track=o.track,i.receiver=s,i.transceiver={receiver:s},i.streams=[r.stream],this.dispatchEvent(i)}),r.stream.getTracks().forEach(o=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===o.id):s={track:o};const i=new Event("track");i.track=o,i.receiver=s,i.transceiver={receiver:s},i.streams=[r.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else un(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function Mu(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(o,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=o.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:o}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,c){let l=o.apply(this,arguments);return l||(l=t(this,a),this._senders.push(l)),l};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(i=>{this._senders.push(t(this,i))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(i=>{const a=this._senders.find(c=>c.track===i);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(o=>o._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Lu(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(i=>i._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(i=>qa(i,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o}),un(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>qa(s,o.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let o,s,i;return this.getSenders().forEach(a=>{a.track===r&&(o?i=!0:o=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?i=!0:s=a),a.track===r)),i||o&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Ou(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(i=>this._shimmedLocalStreams[i][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(i,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(i){this._shimmedLocalStreams=this._shimmedLocalStreams||{},i.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[i.id]=[i].concat(c)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(i){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[i.id],r.apply(this,arguments)};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(i){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},i&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(i);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),o.apply(this,arguments)}}function Au(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Ou(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new e.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(m=>m===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new e.MediaStream([u]);this._streams[d.id]=m,this._reverseStreams[m.id]=d,this.addStream(m)}return this.getSenders().find(m=>m.track===u)};function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function i(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=e.RTCPeerConnection.prototype[l],d={[l](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{const m=s(this,p);f[0].apply(null,[m])},p=>{f[1]&&f[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>s(this,p))}};e.RTCPeerConnection.prototype[l]=d[l]});const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=i(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:s(this,l)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(m=>u.track===m)&&(f=this._streams[h])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Ps(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],o={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=o[n]})}function Du(e,t){un(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const Ja=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Du,shimAddTrackRemoveTrack:Au,shimAddTrackRemoveTrackWithNative:Ou,shimGetSendersWithDtmf:Mu,shimGetUserMedia:Ru,shimMediaStream:Iu,shimOnTrack:Eu,shimPeerConnection:Ps,shimSenderReceiverGetStats:Lu},Symbol.toStringTag,{value:"Module"}));function $u(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(o,s,i){ki("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(o).then(s,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const o=function(i,a,c){a in i&&!(c in i)&&(i[c]=i[a],delete i[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(i){return typeof i=="object"&&typeof i.audio=="object"&&(i=JSON.parse(JSON.stringify(i)),o(i.audio,"autoGainControl","mozAutoGainControl"),o(i.audio,"noiseSuppression","mozNoiseSuppression")),s(i)},r&&r.prototype.getSettings){const i=r.prototype.getSettings;r.prototype.getSettings=function(){const a=i.apply(this,arguments);return o(a,"mozAutoGainControl","autoGainControl"),o(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const i=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),o(a,"autoGainControl","mozAutoGainControl"),o(a,"noiseSuppression","mozNoiseSuppression")),i.apply(this,[a])}}}}function ab(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function Fu(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ks(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const s=e.RTCPeerConnection.prototype[o],i={[o](){return arguments[0]=new(o==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[o]=i[o]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,i,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(t.version<53&&!i)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(i,a)}}function Nu(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=t.apply(this,[]);return o.forEach(s=>s._pc=this),o});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Bu(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(o=>o._pc=this),r}),un(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Ku(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){ki("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Uu(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function zu(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const o=r.length>0;o&&r.forEach(i=>{if("rid"in i&&!/^[a-z0-9]{0,16}$/i.test(i.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in i&&!(parseFloat(i.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in i&&!(parseFloat(i.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(o){const{sender:i}=s,a=i.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,i.sendEncodings=r,this.setParametersPromises.push(i.setParameters(a).then(()=>{delete i.sendEncodings}).catch(()=>{delete i.sendEncodings})))}return s})}function ju(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Vu(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function Wu(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const Xa=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:zu,shimCreateAnswer:Wu,shimCreateOffer:Vu,shimGetDisplayMedia:ab,shimGetParameters:ju,shimGetUserMedia:$u,shimOnTrack:Fu,shimPeerConnection:ks,shimRTCDataChannel:Uu,shimReceiverGetStats:Bu,shimRemoveStream:Ku,shimSenderGetStats:Nu},Symbol.toStringTag,{value:"Module"}));function Gu(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(o=>t.call(this,o,r)),r.getVideoTracks().forEach(o=>t.call(this,o,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...o){return o&&o.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const o=n.getTracks();this.getSenders().forEach(s=>{o.includes(s.track)&&this.removeTrack(s)})})}}function Hu(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const i=new Event("addstream");i.stream=s,r.dispatchEvent(i)})}),t.apply(r,arguments)}}}function qu(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,s=t.setRemoteDescription,i=t.addIceCandidate;t.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f},t.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f};let a=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};t.setLocalDescription=a,a=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.setRemoteDescription=a,a=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.addIceCandidate=a}function Yu(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=o=>r(Ju(o))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,o,s){t.mediaDevices.getUserMedia(r).then(o,s)}).bind(t))}function Ju(e){return e&&e.video!==void 0?Object.assign({},e,{video:Tu(e.video)}):e}function Xu(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,o){if(r&&r.iceServers){const s=[];for(let i=0;i<r.iceServers.length;i++){let a=r.iceServers[i];a.urls===void 0&&a.url?(ki("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[i])}r.iceServers=s}return new t(r,o)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function Zu(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Qu(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const o=this.getTransceivers().find(i=>i.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(i=>i.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function ed(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const Za=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:ed,shimCallbacksAPI:qu,shimConstraints:Ju,shimCreateOfferLegacy:Qu,shimGetUserMedia:Yu,shimLocalStreamsAPI:Gu,shimRTCIceServerUrls:Xu,shimRemoteStreamsAPI:Hu,shimTrackEventTransceiver:Zu},Symbol.toStringTag,{value:"Module"}));function cb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vo={exports:{}},Qa;function lb(){return Qa||(Qa=1,(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((o,s)=>(s>0?"m="+o:o).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(o=>o.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const o={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":o.relatedAddress=r[s+1];break;case"rport":o.relatedPort=parseInt(r[s+1],10);break;case"tcptype":o.tcpType=r[s+1];break;case"ufrag":o.ufrag=r[s+1],o.usernameFragment=r[s+1];break;default:o[r[s]]===void 0&&(o[r[s]]=r[s+1]);break}return o},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const o=n.component;o==="rtp"?r.push(1):o==="rtcp"?r.push(2):r.push(o),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const o={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),o.name=r[0],o.clockRate=parseInt(r[1],10),o.channels=r.length===3?parseInt(r[2],10):1,o.numChannels=o.channels,o},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const o=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(o!==1?"/"+o:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let o;const s=n.substring(n.indexOf(" ")+1).split(";");for(let i=0;i<s.length;i++)o=s[i].trim().split("="),r[o[0].trim()]=o[1];return r},t.writeFmtp=function(n){let r="",o=n.payloadType;if(n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(i=>{n.parameters[i]!==void 0?s.push(i+"="+n.parameters[i]):s.push(i)}),r+="a=fmtp:"+o+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",o=n.payloadType;return n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+o+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),o={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(o.attribute=n.substring(r+1,s),o.value=n.substring(s+1)):o.attribute=n.substring(r+1),o},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(o=>parseInt(o,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let o="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{o+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),o},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const o=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return o&&s?{usernameFragment:o.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const c=s[a],l=t.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=t.parseRtpMap(l),d=t.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?t.parseFmtp(d[0]):{},u.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(t.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(t.parseExtmap(a))});const i=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(a=>{i.forEach(c=>{a.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},t.writeRtpDescription=function(n,r){let o="";o+="m="+n+" ",o+=r.codecs.length>0?"9":"0",o+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=r.codecs.map(i=>i.preferredPayloadType!==void 0?i.preferredPayloadType:i.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(i=>{o+=t.writeRtpMap(i),o+=t.writeFmtp(i),o+=t.writeRtcpFb(i)});let s=0;return r.codecs.forEach(i=>{i.maxptime>s&&(s=i.maxptime)}),s>0&&(o+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(i=>{o+=t.writeExtmap(i)}),o},t.parseRtpEncodingParameters=function(n){const r=[],o=t.parseRtpParameters(n),s=o.fecMechanisms.indexOf("RED")!==-1,i=o.fecMechanisms.indexOf("ULPFEC")!==-1,a=t.matchPrefix(n,"a=ssrc:").map(f=>t.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const u=t.matchPrefix(n,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),o.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let h={ssrc:c,codecPayloadType:parseInt(f.parameters.apt,10)};c&&l&&(h.rtx={ssrc:l}),r.push(h),s&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:c,mechanism:i?"red+ulpfec":"red"},r.push(h))}}),r.length===0&&c&&r.push({ssrc:c});let d=t.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-2e3*8:d=void 0,r.forEach(f=>{f.maxBitrate=d})),r},t.parseRtcpParameters=function(n){const r={},o=t.matchPrefix(n,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];o&&(r.cname=o.value,r.ssrc=o.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const i=t.matchPrefix(n,"a=rtcp-mux");return r.mux=i.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const o=t.matchPrefix(n,"a=msid:");if(o.length===1)return r=o[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(i=>t.parseSsrcMedia(i)).filter(i=>i.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),o=t.matchPrefix(n,"a=max-message-size:");let s;o.length>0&&(s=parseInt(o[0].substring(19),10)),isNaN(s)&&(s=65536);const i=t.matchPrefix(n,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=t.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let o=[];return n.protocol!=="DTLS/SCTP"?o=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:o=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&o.push("a=max-message-size:"+r.maxMessageSize+`\r
`),o.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,o){let s;const i=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+s+" "+i+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const o=t.splitLines(n);for(let s=0;s<o.length;s++)switch(o[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const o=t.splitLines(n)[0].substring(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},t.parseOLine=function(n){const o=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let o=0;o<r.length;o++)if(r[o].length<2||r[o].charAt(1)!=="=")return!1;return!0},e.exports=t})(Vo)),Vo.exports}var td=lb();const Pn=cb(td),ub=kd({__proto__:null,default:Pn},[td]);function Or(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const o=new t(r),s=Pn.parseCandidate(r.candidate);for(const i in s)i in o||Object.defineProperty(o,i,{value:s[i]});return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,un(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Ts(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||un(e,"icecandidate",t=>{if(t.candidate){const n=Pn.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Ar(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=Pn.splitSections(a.sdp);return c.shift(),c.some(l=>{const u=Pn.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},o=function(a){let c=65536;return t.browser==="firefox"&&(t.version<57?a===-1?c=16384:c=2147483637:t.version<60?c=t.version===57?65535:65536:c=2147483637),c},s=function(a,c){let l=65536;t.browser==="firefox"&&t.version===57&&(l=65535);const u=Pn.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):t.browser==="firefox"&&c!==-1&&(l=2147483637),l},i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=o(c),u=s(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return i.apply(this,arguments)}}function Dr(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,o){const s=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&o.sctp&&c>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const o=n.apply(this,arguments);return t(o,this),o},un(e,"datachannel",r=>(t(r.channel,r.target),r))}function Rs(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const s=o.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const i=new Event("connectionstatechange",o);s.dispatchEvent(i)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Is(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t._safariVersion>=13.1)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=o.sdp.split(`
`).filter(i=>i.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&o instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:o.type,sdp:s}):o.sdp=s}return n.apply(this,arguments)}}function $r(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Fr(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let o=arguments[0]||{};if(typeof o!="object"||o.type&&o.sdp)return n.apply(this,arguments);if(o={type:o.type,sdp:o.sdp},!o.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":o.type="offer";break;default:o.type="answer";break}return o.sdp||o.type!=="offer"&&o.type!=="answer"?n.apply(this,[o]):(o.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(i=>n.apply(this,[i]))})}const db=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Is,shimAddIceCandidateNullOrEmpty:$r,shimConnectionState:Rs,shimMaxMessageSize:Ar,shimParameterlessSetLocalDescription:Fr,shimRTCIceCandidate:Or,shimRTCIceCandidateRelayProtocol:Ts,shimSendThrowTypeError:Dr},Symbol.toStringTag,{value:"Module"}));function fb({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=ku,r=ib(e),o={browserDetails:r,commonShim:db,extractVersion:Zn,disableLog:ob,disableWarnings:sb,sdp:ub};switch(r.browser){case"chrome":if(!Ja||!Ps||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),o;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),o;n("adapter.js shimming chrome."),o.browserShim=Ja,$r(e,r),Fr(e),Ru(e,r),Iu(e),Ps(e,r),Eu(e),Au(e,r),Mu(e),Lu(e),Du(e,r),Or(e),Ts(e),Rs(e),Ar(e,r),Dr(e),Is(e,r);break;case"firefox":if(!Xa||!ks||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),o;n("adapter.js shimming firefox."),o.browserShim=Xa,$r(e,r),Fr(e),$u(e,r),ks(e,r),Fu(e),Ku(e),Nu(e),Bu(e),Uu(e),zu(e),ju(e),Vu(e),Wu(e),Or(e),Rs(e),Ar(e,r),Dr(e);break;case"safari":if(!Za||!t.shimSafari)return n("Safari shim is not included in this adapter release."),o;n("adapter.js shimming safari."),o.browserShim=Za,$r(e,r),Fr(e),Xu(e),Qu(e),qu(e),Gu(e),Hu(e),Zu(e),Yu(e),ed(e),Or(e),Ts(e),Ar(e,r),Dr(e),Is(e,r);break;default:n("Unsupported browser!");break}return o}const ec=fb({window:typeof window>"u"?void 0:window});function dn(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class nd{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,o=Math.ceil(r/this.chunkedMTU);let s=0,i=0;for(;i<r;){const a=Math.min(r,i+this.chunkedMTU),c=t.slice(i,a),l={__peerData:this._dataCount,n:s,data:c,total:o};n.push(l),i=a,s++}return this._dataCount++,n}}}function hb(e){let t=0;for(const o of e)t+=o.byteLength;const n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.byteLength;return n}const Wo=ec.default||ec,Vn=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return Wo.browserDetails.browser}getVersion(){return Wo.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=Wo.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},pb=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),rd=()=>Math.random().toString(36).slice(2),tc={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class gb extends nd{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(o){o.target&&n(o.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=tc,this.browser=Vn.getBrowser(),this.browserVersion=Vn.getVersion(),this.pack=Cu,this.unpack=wu,this.supports=(function(){const n={browser:Vn.isBrowserSupported(),webRTC:Vn.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(tc),n.audioVideo=!0;let o;try{o=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!o.ordered;try{o.binaryType="blob",n.binaryBlob=!Vn.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{r&&r.close()}return n})(),this.validateId=pb,this.randomToken=rd}}const Ne=new gb,mb="PeerJS: ";class yb{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[mb,...n];for(const o in r)r[o]instanceof Error&&(r[o]="("+r[o].name+") "+r[o].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var V=new yb,Ti={},vb=Object.prototype.hasOwnProperty,$e="~";function ur(){}Object.create&&(ur.prototype=Object.create(null),new ur().__proto__||($e=!1));function bb(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function od(e,t,n,r,o){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new bb(n,r||e,o),i=$e?$e+t:t;return e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],s]:e._events[i].push(s):(e._events[i]=s,e._eventsCount++),e}function Nr(e,t){--e._eventsCount===0?e._events=new ur:delete e._events[t]}function De(){this._events=new ur,this._eventsCount=0}De.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)vb.call(n,r)&&t.push($e?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};De.prototype.listeners=function(t){var n=$e?$e+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i};De.prototype.listenerCount=function(t){var n=$e?$e+t:t,r=this._events[n];return r?r.fn?1:r.length:0};De.prototype.emit=function(t,n,r,o,s,i){var a=$e?$e+t:t;if(!this._events[a])return!1;var c=this._events[a],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,n),!0;case 3:return c.fn.call(c.context,n,r),!0;case 4:return c.fn.call(c.context,n,r,o),!0;case 5:return c.fn.call(c.context,n,r,o,s),!0;case 6:return c.fn.call(c.context,n,r,o,s,i),!0}for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var f=c.length,h;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(t,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,n);break;case 3:c[d].fn.call(c[d].context,n,r);break;case 4:c[d].fn.call(c[d].context,n,r,o);break;default:if(!u)for(h=1,u=new Array(l-1);h<l;h++)u[h-1]=arguments[h];c[d].fn.apply(c[d].context,u)}}return!0};De.prototype.on=function(t,n,r){return od(this,t,n,r,!1)};De.prototype.once=function(t,n,r){return od(this,t,n,r,!0)};De.prototype.removeListener=function(t,n,r,o){var s=$e?$e+t:t;if(!this._events[s])return this;if(!n)return Nr(this,s),this;var i=this._events[s];if(i.fn)i.fn===n&&(!o||i.once)&&(!r||i.context===r)&&Nr(this,s);else{for(var a=0,c=[],l=i.length;a<l;a++)(i[a].fn!==n||o&&!i[a].once||r&&i[a].context!==r)&&c.push(i[a]);c.length?this._events[s]=c.length===1?c[0]:c:Nr(this,s)}return this};De.prototype.removeAllListeners=function(t){var n;return t?(n=$e?$e+t:t,this._events[n]&&Nr(this,n)):(this._events=new ur,this._eventsCount=0),this};De.prototype.off=De.prototype.removeListener;De.prototype.addListener=De.prototype.on;De.prefixed=$e;De.EventEmitter=De;Ti=De;var fn={};dn(fn,"ConnectionType",()=>Kt);dn(fn,"PeerErrorType",()=>xe);dn(fn,"BaseConnectionErrorType",()=>Es);dn(fn,"DataConnectionErrorType",()=>Ri);dn(fn,"SerializationType",()=>_o);dn(fn,"SocketEventType",()=>Dt);dn(fn,"ServerMessageType",()=>Le);var Kt=(function(e){return e.Data="data",e.Media="media",e})({}),xe=(function(e){return e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc",e})({}),Es=(function(e){return e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed",e})({}),Ri=(function(e){return e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big",e})({}),_o=(function(e){return e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw",e})({}),Dt=(function(e){return e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close",e})({}),Le=(function(e){return e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE",e})({});const sd="1.5.5";class xb extends Ti.EventEmitter{constructor(t,n,r,o,s,i=5e3){super(),this.pingInterval=i,this._disconnected=!0,this._messagesQueue=[];const a=t?"wss://":"ws://";this._baseUrl=a+n+":"+r+o+"peerjs?key="+s}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+sd),this._disconnected=!1,this._socket.onmessage=o=>{let s;try{s=JSON.parse(o.data),V.log("Server message received:",s)}catch{V.log("Invalid server message",o.data);return}this.emit(Dt.Message,s)},this._socket.onclose=o=>{this._disconnected||(V.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit(Dt.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),V.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){V.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:Le.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Dt.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class id{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Kt.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,o={ordered:!!t.reliable},s=n.createDataChannel(r.label,o);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){V.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,o=this.connection.type,s=this.connection.provider;V.log("Listening for ICE candidates."),t.onicecandidate=i=>{!i.candidate||!i.candidate.candidate||(V.log(`Received ICE candidates for ${n}:`,i.candidate),s.socket.send({type:Le.Candidate,payload:{candidate:i.candidate,type:o,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":V.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Es.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":V.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Es.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":V.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},V.log("Listening for data channel"),t.ondatachannel=i=>{V.log("Received data channel");const a=i.channel;s.getConnection(n,r)._initializeDataChannel(a)},V.log("Listening for remote stream"),t.ontrack=i=>{V.log("Received remote stream");const a=i.streams[0],c=s.getConnection(n,r);if(c.type===Kt.Media){const l=c;this._addStreamToMediaConnection(a,l)}}}cleanup(){V.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const o=this.connection.dataChannel;o&&(r=!!o.readyState&&o.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);V.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),V.log("Set localDescription:",r,`for:${this.connection.peer}`);let o={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Kt.Data){const s=this.connection;o={...o,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:Le.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(xe.WebRTC,o),V.log("Failed to setLocalDescription, ",o))}}catch(r){n.emitError(xe.WebRTC,r),V.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();V.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),V.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Le.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){n.emitError(xe.WebRTC,o),V.log("Failed to setLocalDescription, ",o)}}catch(r){n.emitError(xe.WebRTC,r),V.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,o=this.connection.provider;V.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),V.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await s._makeAnswer()}catch(i){o.emitError(xe.WebRTC,i),V.log("Failed to setRemoteDescription, ",i)}}async handleCandidate(t){V.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),V.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(xe.WebRTC,n),V.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(V.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return V.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){V.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class ad extends Ti.EventEmitter{emitError(t,n){V.error("Error:",n),this.emit("error",new Sb(`${t}`,n))}}class Sb extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class cd extends ad{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}class oo extends cd{static#e=this.ID_PREFIX="mc_";get type(){return Kt.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||oo.ID_PREFIX+Ne.randomToken(),this._negotiator=new id(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{V.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{V.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){V.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case Le.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Le.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:V.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){V.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const o of r)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class wb{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:o,path:s,key:i}=this._options,a=new URL(`${n}://${r}:${o}${s}${i}/${t}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",sd),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){V.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Ne.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Ne.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw V.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}class so extends cd{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Kt.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||so.ID_PREFIX+rd(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new id(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{V.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{V.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{V.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(Ri.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case Le.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case Le.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:V.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}}class Ii extends so{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>so.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return V.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Go extends Ii{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new nd,this.serialization=_o.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=wu(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const o=hb(r.data);this._handleDataMessage({data:o})}}_send(t,n){const r=Cu(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);V.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class Cb extends Ii{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=_o.None}}class _b extends Ii{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=Ne.chunkedMTU){this.emitError(Ri.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=_o.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Ei extends ad{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:Cb,json:_b,binary:Go,"binary-utf8":Go,default:Go},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:Ne.CLOUD_HOST,port:Ne.CLOUD_PORT,path:"/",key:Ei.DEFAULT_KEY,token:Ne.randomToken(),config:Ne.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Ne.CLOUD_HOST?this._options.secure=Ne.isSecure():this._options.host==Ne.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&V.setLogFunction(this._options.logFunction),V.logLevel=this._options.debug||0,this._api=new wb(n),this._socket=this._createServerConnection(),!Ne.supports.audioVideo&&!Ne.supports.data){this._delayedAbort(xe.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Ne.validateId(r)){this._delayedAbort(xe.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort(xe.ServerError,o))}_createServerConnection(){const t=new xb(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Dt.Message,n=>{this._handleMessage(n)}),t.on(Dt.Error,n=>{this._abort(xe.SocketError,n)}),t.on(Dt.Disconnected,()=>{this.disconnected||(this.emitError(xe.Network,"Lost connection to server."),this.disconnect())}),t.on(Dt.Close,()=>{this.disconnected||this._abort(xe.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,o=t.src;switch(n){case Le.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Le.Error:this._abort(xe.ServerError,r.msg);break;case Le.IdTaken:this._abort(xe.UnavailableID,`ID "${this.id}" is taken`);break;case Le.InvalidKey:this._abort(xe.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Le.Leave:V.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case Le.Expire:this.emitError(xe.PeerUnavailable,`Could not connect to peer ${o}`);break;case Le.Offer:{const s=r.connectionId;let i=this.getConnection(o,s);if(i&&(i.close(),V.warn(`Offer received for existing Connection ID:${s}`)),r.type===Kt.Media){const c=new oo(o,this,{connectionId:s,_payload:r,metadata:r.metadata});i=c,this._addConnection(o,i),this.emit("call",c)}else if(r.type===Kt.Data){const c=new this._serializers[r.serialization](o,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});i=c,this._addConnection(o,i),this.emit("connection",c)}else{V.warn(`Received malformed connection type:${r.type}`);return}const a=this._getMessages(s);for(const c of a)i.handleMessage(c);break}default:{if(!r){V.warn(`You received a malformed message from ${o} of type ${n}`);return}const s=r.connectionId,i=this.getConnection(o,s);i&&i.peerConnection?i.handleMessage(t):s?this._storeMessage(s,t):V.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){V.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(xe.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){V.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(xe.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){V.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new oo(t,this,{...r,_stream:n});return this._addConnection(t,o),o}_addConnection(t,n){V.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const o of r)if(o.connectionId===n)return o;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){V.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(V.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;V.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)V.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)V.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(xe.ServerError,n))}}var Pb=Ei;let Ho;function ld(e){return{lang:e?.lang??Ho?.lang,message:e?.message,abortEarly:e?.abortEarly??Ho?.abortEarly,abortPipeEarly:e?.abortPipeEarly??Ho?.abortPipeEarly}}let kb;function Tb(e){return kb?.get(e)}let Rb;function Ib(e){return Rb?.get(e)}let Eb;function Mb(e,t){return Eb?.get(e)?.get(t)}function ud(e){const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function et(e,t,n,r,o){const s=o&&"input"in o?o.input:n.value,i=o?.expected??e.expects??null,a=o?.received??ud(s),c={kind:e.kind,type:e.type,input:s,expected:i,received:a,message:`Invalid ${t}: ${i?`Expected ${i} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o?.path,issues:o?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},l=e.kind==="schema",u=o?.message??e.message??Mb(e.reference,c.lang)??(l?Ib(c.lang):null)??r.message??Tb(c.lang);u!==void 0&&(c.message=typeof u=="function"?u(c):u),l&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function tt(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},ld())}}}function dd(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}const Lb=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu;function fd(e){return{kind:"validation",type:"email",reference:fd,expects:null,async:!1,requirement:Lb,message:e,"~run"(t,n){return t.typed&&!this.requirement.test(t.value)&&et(this,"email",t,n),t}}}function Ob(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function Mi(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function $t(e,t){return{kind:"schema",type:"array",reference:$t,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return tt(this)},"~run"(n,r){const o=n.value;if(Array.isArray(o)){n.typed=!0,n.value=[];for(let s=0;s<o.length;s++){const i=o[s],a=this.item["~run"]({value:i},r);if(a.issues){const c={type:"array",origin:"value",input:o,key:s,value:i};for(const l of a.issues)l.path?l.path.unshift(c):l.path=[c],n.issues?.push(l);if(n.issues||(n.issues=a.issues),r.abortEarly){n.typed=!1;break}}a.typed||(n.typed=!1),n.value.push(a.value)}}else et(this,"type",n,r);return n}}}function yr(e){return{kind:"schema",type:"boolean",reference:yr,expects:"boolean",async:!1,message:e,get"~standard"(){return tt(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:et(this,"type",t,n),t}}}function he(e,t){return{kind:"schema",type:"literal",reference:he,expects:ud(e),async:!1,literal:e,message:t,get"~standard"(){return tt(this)},"~run"(n,r){return n.value===this.literal?n.typed=!0:et(this,"type",n,r),n}}}function hd(e,t){return{kind:"schema",type:"nullable",reference:hd,expects:`(${e.expects} | null)`,async:!1,wrapped:e,default:t,get"~standard"(){return tt(this)},"~run"(n,r){return n.value===null&&(this.default!==void 0&&(n.value=Mi(this,n,r)),n.value===null)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function gt(e){return{kind:"schema",type:"number",reference:gt,expects:"number",async:!1,message:e,get"~standard"(){return tt(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:et(this,"type",t,n),t}}}function J(e,t){return{kind:"schema",type:"object",reference:J,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return tt(this)},"~run"(n,r){const o=n.value;if(o&&typeof o=="object"){n.typed=!0,n.value={};for(const s in this.entries){const i=this.entries[s];if(s in o||(i.type==="exact_optional"||i.type==="optional"||i.type==="nullish")&&i.default!==void 0){const a=s in o?o[s]:Mi(i),c=i["~run"]({value:a},r);if(c.issues){const l={type:"object",origin:"value",input:o,key:s,value:a};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],n.issues?.push(u);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value[s]=c.value}else if(i.fallback!==void 0)n.value[s]=Ob(i);else if(i.type!=="exact_optional"&&i.type!=="optional"&&i.type!=="nullish"&&(et(this,"key",n,r,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:o,key:s,value:o[s]}]}),r.abortEarly))break}}else et(this,"type",n,r);return n}}}function hn(e,t){return{kind:"schema",type:"optional",reference:hn,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return tt(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Mi(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function se(e){return{kind:"schema",type:"string",reference:se,expects:"string",async:!1,message:e,get"~standard"(){return tt(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:et(this,"type",t,n),t}}}function nc(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function pd(e,t){return{kind:"schema",type:"union",reference:pd,expects:dd(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,get"~standard"(){return tt(this)},"~run"(n,r){let o,s,i;for(const a of this.options){const c=a["~run"]({value:n.value},r);if(c.typed)if(c.issues)s?s.push(c):s=[c];else{o=c;break}else i?i.push(c):i=[c]}if(o)return o;if(s){if(s.length===1)return s[0];et(this,"type",n,r,{issues:nc(s)}),n.typed=!0}else{if(i?.length===1)return i[0];et(this,"type",n,r,{issues:nc(i)})}return n}}}function Ms(){return{kind:"schema",type:"unknown",reference:Ms,expects:"unknown",async:!1,get"~standard"(){return tt(this)},"~run"(e){return e.typed=!0,e}}}function Li(e,t,n){return{kind:"schema",type:"variant",reference:Li,expects:"Object",async:!1,key:e,options:t,message:n,get"~standard"(){return tt(this)},"~run"(r,o){const s=r.value;if(s&&typeof s=="object"){let i,a=0,c=this.key,l=[];const u=(d,f)=>{for(const h of d.options){if(h.type==="variant")u(h,new Set(f).add(h.key));else{let p=!0,m=0;for(const g of f){const y=h.entries[g];if(g in s?y["~run"]({typed:!1,value:s[g]},{abortEarly:!0}).issues:y.type!=="exact_optional"&&y.type!=="optional"&&y.type!=="nullish"){p=!1,c!==g&&(a<m||a===m&&g in s&&!(c in s))&&(a=m,c=g,l=[]),c===g&&l.push(h.entries[g].expects);break}m++}if(p){const g=h["~run"]({value:s},o);(!i||!i.typed&&g.typed)&&(i=g)}}if(i&&!i.issues)break}};if(u(this,new Set([this.key])),i)return i;et(this,"type",r,o,{input:s[c],expected:dd(l,"|"),path:[{type:"object",origin:"value",input:s,key:c,value:s[c]}]})}else et(this,"type",r,o);return r}}}function Ab(...e){return{...e[0],pipe:e,get"~standard"(){return tt(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function gd(e,t,n){const r=e["~run"]({value:t},ld(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}const ue={log:(...e)=>{},warn:(...e)=>{},info:(...e)=>{},error:(...e)=>{console.error(...e)},debug:(...e)=>{}};try{self["workbox:window:7.3.0"]&&_()}catch{}function rc(e,t){return new Promise((function(n){var r=new MessageChannel;r.port1.onmessage=function(o){n(o.data)},e.postMessage(t,[r.port2])}))}function oc(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Db(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fb(r.key),r)}}function $b(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=(function(o,s){if(o){if(typeof o=="string")return oc(o,s);var i={}.toString.call(o).slice(8,-1);return i==="Object"&&o.constructor&&(i=o.constructor.name),i==="Map"||i==="Set"?Array.from(o):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?oc(o,s):void 0}})(e))||t){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ls(e,t){return Ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ls(e,t)}function Fb(e){var t=(function(n,r){if(typeof n!="object"||!n)return n;var o=n[Symbol.toPrimitive];if(o!==void 0){var s=o.call(n,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)})(e,"string");return typeof t=="symbol"?t:t+""}try{self["workbox:core:7.3.0"]&&_()}catch{}var qo=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function Yo(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var Wn=function(e,t){this.type=e,Object.assign(this,t)};function Mt(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Nb(){}var Bb={type:"SKIP_WAITING"};function sc(e,t){return e&&e.then?e.then(Nb):Promise.resolve()}var Kb=(function(e){function t(s,i){var a,c;return i===void 0&&(i={}),(a=e.call(this)||this).nn={},a.tn=0,a.rn=new qo,a.en=new qo,a.on=new qo,a.un=0,a.an=new Set,a.cn=function(){var l=a.fn,u=l.installing;a.tn>0||!Yo(u.scriptURL,a.sn.toString())||performance.now()>a.un+6e4?(a.vn=u,l.removeEventListener("updatefound",a.cn)):(a.hn=u,a.an.add(u),a.rn.resolve(u)),++a.tn,u.addEventListener("statechange",a.ln)},a.ln=function(l){var u=a.fn,d=l.target,f=d.state,h=d===a.vn,p={sw:d,isExternal:h,originalEvent:l};!h&&a.mn&&(p.isUpdate=!0),a.dispatchEvent(new Wn(f,p)),f==="installed"?a.wn=self.setTimeout((function(){f==="installed"&&u.waiting===d&&a.dispatchEvent(new Wn("waiting",p))}),200):f==="activating"&&(clearTimeout(a.wn),h||a.en.resolve(d))},a.yn=function(l){var u=a.hn,d=u!==navigator.serviceWorker.controller;a.dispatchEvent(new Wn("controlling",{isExternal:d,originalEvent:l,sw:u,isUpdate:a.mn})),d||a.on.resolve(u)},a.gn=(c=function(l){var u=l.data,d=l.ports,f=l.source;return Mt(a.getSW(),(function(){a.an.has(f)&&a.dispatchEvent(new Wn("message",{data:u,originalEvent:l,ports:d,sw:f}))}))},function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];try{return Promise.resolve(c.apply(this,l))}catch(d){return Promise.reject(d)}}),a.sn=s,a.nn=i,navigator.serviceWorker.addEventListener("message",a.gn),a}var n,r;r=e,(n=t).prototype=Object.create(r.prototype),n.prototype.constructor=n,Ls(n,r);var o=t.prototype;return o.register=function(s){var i=(s===void 0?{}:s).immediate,a=i!==void 0&&i;try{var c=this;return Mt((function(l,u){var d=l();return d&&d.then?d.then(u):u(d)})((function(){if(!a&&document.readyState!=="complete")return sc(new Promise((function(l){return window.addEventListener("load",l)})))}),(function(){return c.mn=!!navigator.serviceWorker.controller,c.dn=c.pn(),Mt(c.bn(),(function(l){c.fn=l,c.dn&&(c.hn=c.dn,c.en.resolve(c.dn),c.on.resolve(c.dn),c.dn.addEventListener("statechange",c.ln,{once:!0}));var u=c.fn.waiting;return u&&Yo(u.scriptURL,c.sn.toString())&&(c.hn=u,Promise.resolve().then((function(){c.dispatchEvent(new Wn("waiting",{sw:u,wasWaitingBeforeRegister:!0}))})).then((function(){}))),c.hn&&(c.rn.resolve(c.hn),c.an.add(c.hn)),c.fn.addEventListener("updatefound",c.cn),navigator.serviceWorker.addEventListener("controllerchange",c.yn),c.fn}))})))}catch(l){return Promise.reject(l)}},o.update=function(){try{return this.fn?Mt(sc(this.fn.update())):Mt()}catch(s){return Promise.reject(s)}},o.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},o.messageSW=function(s){try{return Mt(this.getSW(),(function(i){return rc(i,s)}))}catch(i){return Promise.reject(i)}},o.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&rc(this.fn.waiting,Bb)},o.pn=function(){var s=navigator.serviceWorker.controller;return s&&Yo(s.scriptURL,this.sn.toString())?s:void 0},o.bn=function(){try{var s=this;return Mt((function(i,a){try{var c=i()}catch(l){return a(l)}return c&&c.then?c.then(void 0,a):c})((function(){return Mt(navigator.serviceWorker.register(s.sn,s.nn),(function(i){return s.un=performance.now(),i}))}),(function(i){throw i})))}catch(i){return Promise.reject(i)}},(function(s,i,a){return i&&Db(s.prototype,i),Object.defineProperty(s,"prototype",{writable:!1}),s})(t,[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])})((function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(n,r){this.jn(n).add(r)},t.removeEventListener=function(n,r){this.jn(n).delete(r)},t.dispatchEvent=function(n){n.target=this;for(var r,o=$b(this.jn(n.type));!(r=o()).done;)(0,r.value)(n)},t.jn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},e})());const md=J({id:se(),name:se(),updatedAt:gt(),_deleted:hn(yr())}),yd=J({id:se(),name:se(),email:hd(Ab(se(),fd())),updatedAt:gt(),_deleted:hn(yr())}),vd=J({userId:se(),eateryId:se(),score:gt(),updatedAt:gt(),_deleted:hn(yr())}),bd=J({userId:se(),eateryId:se(),updatedAt:gt(),_deleted:hn(yr())}),Ub=J({id:se(),settings:J({connection:J({name:se(),updatedAt:gt()}),eateries:$t(md),users:$t(yd),eateryScores:$t(vd),eateryVetoes:hn($t(bd))})}),xd=Li("type",[J({type:he("request-known-peers"),data:J({connectionId:se()})}),J({type:he("known-peers"),data:J({connectionId:se(),peerIds:$t(se())})}),J({type:he("request-connection-ids")}),J({type:he("connection-ids"),data:$t(se())}),J({type:he("request-storage"),data:J({connectionId:se()})}),J({type:he("storage"),data:Ub}),J({type:he("updated-eatery"),data:J({connectionId:se(),eatery:md})}),J({type:he("updated-eateryScore"),data:J({connectionId:se(),eateryScore:vd})}),J({type:he("updated-eateryVeto"),data:J({connectionId:se(),eateryVeto:bd})}),J({type:he("updated-user"),data:J({connectionId:se(),user:yd})}),J({type:he("updated-connection"),data:J({connectionId:se(),connection:J({name:se(),updatedAt:gt()})})}),J({type:he("removed-user"),data:J({connectionId:se(),userId:se()})}),J({type:he("removed-eatery"),data:J({connectionId:se(),eateryId:se()})})]);let Jo=null;function zb(){return typeof BroadcastChannel>"u"?null:(Jo||(Jo=new BroadcastChannel("peer-data-to-client")),Jo)}function Sd(e){const t=zb();if(!t)return()=>{};const n=r=>{const o=gd(jb,r.data);o.success&&e(o.output)};return t.addEventListener("message",n),()=>{t.removeEventListener("message",n)}}const jb=Li("type",[J({type:he("p2p-peer-count"),data:gt()}),J({type:he("p2p-status"),data:J({status:pd([he("connecting"),he("connected"),he("disconnected")]),peerId:hn(se())})}),J({type:he("p2p-debug"),data:se()}),J({type:he("p2p-received"),data:xd}),J({type:he("db-collection-share-insert"),data:J({collectionId:se(),data:Ms(),key:se()})}),J({type:he("db-collection-share-delete"),data:J({collectionId:se(),data:J({deletedAt:gt()}),key:se()})}),J({type:he("db-collection-share-update"),data:J({collectionId:se(),data:Ms(),key:se()})}),J({type:he("share-known-peers"),data:J({peers:$t(se())})})]);let ot=null,ic=!1;function wd(){if(typeof window>"u")return null;if(!ot){const e="/where-to-eat/previews/pr-17/".replace(/\/$/,"");ot=new Kb(`${e}/sw.js`)}return ic||(ic=!0,ot.addEventListener("activated",e=>{Oi()}),ot.addEventListener("waiting",()=>{Hb()}),ot.addEventListener("controlling",()=>{window.location.reload()}),ot.register()),ot}function Vb(){ot&&ot.messageSkipWaiting()}function Wb(e){const t=wd();t&&t.messageSW(e)}function Oi(){Wb({type:"p2p-request-status"})}function Os(e){return Sd(t=>{t.type==="p2p-status"&&e(t.data)})}function Gb(){return Sd(e=>{e.type==="p2p-debug"&&ue.log("[SW DEBUG]",e.data)})}typeof window<"u"&&(wd(),Gb());const As=new Set;let Cd=!1,_d=!1;if(typeof window<"u"){const e=["click","keydown","scroll","touchstart"],t=()=>{_d=!0;for(const n of e)window.removeEventListener(n,t,{capture:!0})};for(const n of e)window.addEventListener(n,t,{capture:!0,passive:!0})}function Hb(){if(Cd=!0,!_d&&ot){ot.messageSkipWaiting();return}for(const e of As)e()}function qb(e){return As.add(e),Cd&&e(),()=>{As.delete(e)}}const Yb="wte-p2p-leader",Jb=1e3,ac=3e3,xt=crypto.randomUUID(),[Xb,Pd]=j();typeof window<"u"&&(Os(e=>{e.peerId&&Pd(e.peerId)}),Oi());let yn;function Zb(){if(yn)return yn;if(typeof sessionStorage<"u"){const e=sessionStorage.getItem("fallback-peer-id");if(e)return yn=e,e;const t=crypto.randomUUID();return sessionStorage.setItem("fallback-peer-id",t),yn=t,t}return yn=crypto.randomUUID(),yn}function Kx(){return H(()=>{const t=Xb();return t||Zb()})}const Ai=ve();function Ux(){const e=ge(Ai);if(!e)throw new Error("Missing peer2peer provider");return e}function Qb(){return ge(Ai)}function ex(e){const t=iu(),[n,r]=j(!1),[o,s]=j(null),[i,a]=j(0),[c,l]=j(),[u,d]=j(),[f,h]=j("connecting"),[p,m]=j([]),[g,y]=j([]),[v,b]=j(new Set),[w,P]=j(new Set,{equals(k,E){return k.symmetricDifference(E).size===0}}),T=new Map,[R,S]=j(0);let C=null;const L=H(()=>{const k=v();return new Set([...p(),...g()].filter(E=>k.has(E.peer)).map(E=>E.peer))},void 0,{equals(k,E){return k.symmetricDifference(E).size===0}}),A=H(()=>n()?L().size:R()),O=H(()=>{const k=n()?Array.from(L()):Array.from(v());return k.sort(),k});W(()=>{if(!n())return;const k=L().size;C?.postMessage({type:"peer-count-update",count:k})}),W(()=>{const k=Os(E=>{E.peerId&&(l(E.peerId),Pd(E.peerId))});Y(k)}),dt(()=>{Oi(),C=new BroadcastChannel(Yb),C.onmessage=D=>{const $=D.data;switch($.type){case"heartbeat":$.tabId!==xt&&(s($.tabId),a($.timestamp));break;case"claim-leader":n()&&(C?.postMessage({type:"leader-announce",tabId:xt}),C?.postMessage({type:"heartbeat",tabId:xt,timestamp:Date.now()}));break;case"leader-announce":ue.log("P2P: Leader announced:",$.tabId),s($.tabId),a(Date.now()),$.tabId!==xt&&r(!1);break;case"p2p-incoming":I($.data,!0);break;case"add-known-peer":if(n()){t.addKnownPeer($.connectionId,$.peerId);const fe=u(),le=c();if(fe&&f()==="connected"&&le&&$.peerId!==le&&!L().has($.peerId)){ue.log("P2P [Leader]: Directly connecting to peer from follower request:",$.peerId);const ae=fe.connect($.peerId,{serialization:"binary"});ne(ae,"outgoing")}}break;case"p2p-outgoing":n()&&ce($.data);break;case"peer-count-update":n()||S($.count);break;case"open-connections":n()||b(new Set($.peerIds));break}},G();const k=setInterval(()=>{const D=Date.now(),$=i();n()?C?.postMessage({type:"heartbeat",tabId:xt,timestamp:D}):o()&&D-$>ac&&G()},Jb);Y(()=>{clearInterval(k),C?.close()});const E=localStorage.getItem("knownPeers");if(E)try{const D=JSON.parse(E);if(D.length>0){for(const $ of t.store.connections)for(const fe of D)t.addKnownPeer($.id,fe);ue.log("P2P: Migrated global known peers to per-connection storage:",D)}localStorage.removeItem("knownPeers"),ue.log("P2P: Removed legacy global knownPeers from localStorage")}catch(D){ue.error("P2P: Failed to migrate global known peers:",D)}});function G(){C?.postMessage({type:"claim-leader",tabId:xt}),setTimeout(()=>{const k=Date.now(),E=i();(!o()||k-E>ac)&&(r(!0),s(xt),a(k),C?.postMessage({type:"leader-announce",tabId:xt}),C?.postMessage({type:"heartbeat",tabId:xt,timestamp:k}),B())},300)}function B(){const k=c();if(!k){const $=Os(fe=>{fe.peerId&&($(),B())});return}const E=void 0,D=new Pb(k,E);D.on("open",$=>{h("connected")}),D.on("error",$=>{ue.error("P2P [Leader]: Peer error:",$.type,$.message)}),D.on("disconnected",()=>{h("disconnected"),setTimeout(()=>{n()&&(h("connecting"),D.reconnect())},1e3)}),D.on("close",()=>{h("disconnected")}),D.on("connection",$=>{ue.log("P2P [Leader]: Incoming peer connection from:",$.peer),ne($,"incoming")}),Y(()=>{n()&&D.destroy()}),d(D)}function q(k,E){k.open&&k.send(E)}function ne(k,E){k.on("open",()=>{ue.log(`P2P [Leader]: ${E} connection opened to:`,k.peer),b(D=>{const $=new Set(D).add(k.peer);return C?.postMessage({type:"open-connections",peerIds:Array.from($)}),$}),q(k,{type:"request-connection-ids"}),q(k,{type:"connection-ids",data:t.store.connections.map(D=>D.id)})}),k.on("data",D=>{N(k,D)}),k.on("close",()=>{ue.log(`P2P [Leader]: ${E} connection closed to:`,k.peer),b(D=>{const $=new Set(D);return $.delete(k.peer),C?.postMessage({type:"open-connections",peerIds:Array.from($)}),$}),P(D=>{const $=new Set(D);return $.delete(k.peer),$}),E==="incoming"?m(D=>D.filter($=>$!==k)):y(D=>D.filter($=>$!==k))}),k.on("error",D=>{ue.error(`P2P [Leader]: ${E} connection error:`,D)}),E==="incoming"?m(D=>[...D,k]):y(D=>[...D,k])}function N(k,E){const $=(oe=>{if(typeof oe=="string")try{return JSON.parse(oe)}catch{return oe}if(oe instanceof ArrayBuffer)try{const ae=new TextDecoder().decode(new Uint8Array(oe));return JSON.parse(ae)}catch{return oe}if(ArrayBuffer.isView(oe))try{const ae=new Uint8Array(oe.buffer,oe.byteOffset,oe.byteLength),Fe=new TextDecoder().decode(ae);return JSON.parse(Fe)}catch{return oe}return oe})(E),fe=gd(xd,$);if(!fe.success)return;const le=fe.output;switch(ue.log("P2P [Leader]: Received peer message type:",le.type),le.type){case"request-known-peers":{const oe=le.data.connectionId,ae=t.getKnownPeers(oe);q(k,{type:"known-peers",data:{connectionId:oe,peerIds:ae}});return}case"known-peers":{const{connectionId:oe,peerIds:ae}=le.data;for(const Fe of ae)t.addKnownPeer(oe,Fe);return}case"request-connection-ids":q(k,{type:"connection-ids",data:t.store.connections.map(oe=>oe.id)});return;case"connection-ids":{const oe=new Set(le.data),ae=t.store.connections,Fe=new Set(ae.map(be=>be.id));for(const be of ae)if(oe.has(be.id)){t.addKnownPeer(be.id,k.peer);const Nn=pt(be);Nn&&(ue.log("P2P [Leader]: Sending storage to peer for shared connection:",Nn.id),q(k,{type:"storage",data:Nn})),q(k,{type:"request-known-peers",data:{connectionId:be.id}})}for(const be of oe)Fe.has(be)||(ue.log("P2P [Leader]: Marking peer as pending for connection we don't have:",be,k.peer),T.has(be)||T.set(be,new Set),T.get(be).add(k.peer));w().has(k.peer)||(P(be=>new Set(be).add(k.peer)),q(k,{type:"connection-ids",data:ae.map(be=>be.id)}));return}case"request-storage":{const oe=le.data.connectionId;ue.log("P2P [Leader]: Received request-storage for:",oe,"from:",k.peer);const ae=pt(t.store.connections.find(Fe=>Fe.id===oe));ae&&(t.addKnownPeer(oe,k.peer),ue.log("P2P [Leader]: Sending storage directly to requester:",k.peer),q(k,{type:"storage",data:ae}));return}}I(le),C?.postMessage({type:"p2p-incoming",data:le})}function I(k,E=!1){switch(k.type){case"known-peers":case"request-known-peers":case"request-connection-ids":case"connection-ids":case"request-storage":break;case"storage":{const D=k.data.id;t.setConnection(k.data);const $=T.get(D);if($&&$.size>0){ue.log("P2P: Adding pending peers to connection:",D,Array.from($));for(const fe of $)t.addKnownPeer(D,fe);T.delete(D)}Ye(D,{type:"request-known-peers",data:{connectionId:D}});break}case"updated-eatery":t.upsertEatery(k.data.connectionId,k.data.eatery);break;case"updated-user":t.upsertUser(k.data.connectionId,k.data.user);break;case"updated-eateryScore":t.upsertScore(k.data.connectionId,k.data.eateryScore);break;case"updated-eateryVeto":t.upsertVeto(k.data.connectionId,k.data.eateryVeto);break;case"removed-eatery":t.removeEatery(k.data.connectionId,k.data.eateryId);break;case"removed-user":t.removeUser(k.data.connectionId,k.data.userId);break;case"updated-connection":t.upsertConnectionInfo(k.data.connectionId,k.data.connection);break;default:ue.warn("P2P: Unknown message type:",k.type)}}W(()=>ue.log("P2P: Leader changed",n())),W(()=>ue.log("P2P: Peer status changed",f())),W(()=>ue.log("P2P: Peer changed",u())),W(()=>ue.log("P2P: My peer ID changed",c())),W(()=>{const k=t.getAllKnownPeers(),E={};for(const[D,$]of k)E[D]=$}),W(()=>ue.log("P2P: Currently connected peers changed",Array.from(L()))),W(()=>{const k=n(),E=f(),D=u(),$=c(),fe=L(),le=new Set;for(const oe of t.store.connections){const ae=oe.settings.knownPeers??[];for(const Fe of ae)le.add(Fe)}if(ue.log("P2P: Connect effect running",{isLeader:k,peerStatus:E,hasPeer:!!D,selfId:$,knownPeers:Array.from(le),alreadyConnected:Array.from(fe)}),!!k&&E==="connected"&&D&&$)for(const oe of le){if(oe===$||fe.has(oe))continue;const ae=D.connect(oe,{serialization:"binary"});ne(ae,"outgoing")}}),dt(()=>{const E=setInterval(()=>{if(!n()||f()!=="connected")return;const D=u(),$=c();if(!D||!$)return;const fe=new Set;for(const ae of t.store.connections){const Fe=ae.settings.knownPeers??[];for(const be of Fe)fe.add(be)}const le=L(),oe=Array.from(fe).filter(ae=>ae!==$&&!le.has(ae));if(oe.length>0)for(const ae of oe){const Fe=g().find(Nn=>Nn.peer===ae);Fe&&Fe.close();const be=D.connect(ae,{serialization:"binary"});ne(be,"outgoing")}},5e3);Y(()=>clearInterval(E))});function ce(k){[...p(),...g()].forEach(D=>q(D,k))}function qe(k,E){t.addKnownPeer(E,k),C?.postMessage({type:"add-known-peer",peerId:k,connectionId:E});const D=()=>{const $=u(),fe=c();if(n()&&$&&f()==="connected"&&fe&&k!==fe&&!L().has(k)){const oe=$.connect(k,{serialization:"binary"});ne(oe,"outgoing")}};D(),setTimeout(D,500),Fn(E)}function vt(k){ue.log("P2P: Broadcasting event:",k.type),n()?ce(k):C?.postMessage({type:"p2p-outgoing",data:k})}function Ye(k,E){ue.log("P2P: Broadcasting to connection:",k,"event:",E.type),n()?we(k,E):C?.postMessage({type:"p2p-outgoing",data:E})}function we(k,E){const D=new Set(t.getKnownPeers(k));[...p(),...g()].filter(le=>D.has(le.peer)).forEach(le=>q(le,E))}function Re(k,E){if(ue.log("P2P: Sending to peer:",k,E.type),n()){const D=[...p(),...g()].find($=>$.peer===k&&$.open);return D?(q(D,E),!0):(ce(E),!1)}else return C?.postMessage({type:"p2p-outgoing",data:E}),!0}function It(k){return v().has(k)}function Fn(k){vt({type:"request-storage",data:{connectionId:k}})}return x(Ai.Provider,{value:{broadcast:vt,broadcastToConnection:Ye,sendToPeer:Re,addNewPeer:qe,isPeerConnected:It,connectedPeerCount:A,connectedPeerIds:O,myPeerId:c,serverStatus:f,isLeader:n},get children(){return e.children}})}var tx=ee('<img alt=Logo class="w-9 h-9 rounded-lg object-cover group-hover:opacity-90 transition-opacity">'),nx=ee('<div class="flex flex-col"><span class="font-semibold text-lg text-foreground leading-none">Where to Eat</span><span class="text-xs text-muted-foreground">Decide together'),rx=ee('<header class="sticky top-0 z-50 backdrop-blur-md bg-background/95 border-b border-border"><div class="max-w-5xl mx-auto px-4 py-3"><div class="flex items-center justify-between"><div class="flex items-center gap-1">'),ox=ee('<div class="min-h-screen flex flex-col"><main class=flex-1></main><footer class="border-t border-border py-4 mt-auto"><div class="max-w-5xl mx-auto px-4 text-center"><p class="text-xs text-muted-foreground">Where to Eat  Collaborative restaurant decisions'),sx=ee('<div class="fixed bottom-4 right-4 z-50 animate-in fade-in slide-in-from-bottom-5"><div class="bg-card text-card-foreground border border-border shadow-lg rounded-lg p-4 max-w-sm flex items-start gap-4"><div class=flex-1><h4 class="text-sm font-semibold">Update Available</h4><p class="text-xs text-muted-foreground mt-1">A new version of the app is available. Refresh to update.'),ix=ee("<span class=sr-only>Toggle theme"),ax=ee("<span>Light"),cx=ee("<span>Dark"),lx=ee("<span>System"),ux=ee("<div class=relative><span>"),dx=ee('<span class="text-sm text-muted-foreground hidden sm:inline"data-testid=peer-count-value>'),fx=ee('<div class="space-y-4 pt-2"><div class="p-3 rounded-md bg-muted border border-border"><div class="flex items-center justify-between mb-2"><p class="text-sm font-medium">Server Status</p><div class="flex items-center gap-2"><span></span><span class="text-xs text-muted-foreground capitalize"></span></div></div><div class="grid grid-cols-2 gap-2 text-xs"><div><span class=text-muted-foreground>Role</span><p class=font-medium></p></div><div><span class=text-muted-foreground>Connected Peers</span><p class=font-medium></p></div></div></div><div class="p-3 rounded-md bg-muted border border-border"><p class="text-xs text-muted-foreground mb-1">Your Peer ID</p><p class="font-mono text-xs break-all"></p></div><div class=space-y-2><p class="text-sm font-medium">Connected Peers'),hx=ee('<span class="absolute -top-1 -right-1 w-3.5 h-3.5 rounded-full bg-primary text-[9px] font-medium text-primary-foreground flex items-center justify-center">'),px=ee('<div class="text-center py-6 text-muted-foreground border border-dashed border-border rounded-md"><p class=text-sm>No peers connected</p><p class="text-xs mt-1">Share your session to invite others'),gx=ee("<ul class=space-y-1.5>"),mx=ee('<li class="flex items-center gap-2 p-2 rounded-md bg-muted border border-border"data-testid=active-connection-item><div class="w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center"></div><span class="font-mono text-xs truncate flex-1"></span><span class="w-2 h-2 rounded-full bg-green-500">');const vr=Bh({errorComponent:Vc,notFoundComponent:()=>x(Wc,{}),component:vx});function yx(){const{colorMode:e}=Ql();return(()=>{var t=rx(),n=t.firstChild,r=n.firstChild,o=r.firstChild;return te(r,x(Rn,{to:"/",class:"flex items-center gap-3 group",get children(){return[(()=>{var s=tx();return Ie(()=>zt(s,"src",e()==="dark"?"/where-to-eat/previews/pr-17/icon-dark-192x192.png":"/where-to-eat/previews/pr-17/icon-light-192x192.png")),s})(),nx()]}}),o),te(o,x($v,{}),null),te(o,x(xx,{}),null),te(o,x(Uv,{}),null),te(o,x(bx,{}),null),t})()}function vx(){return[x(py,{}),x(dy,{get children(){return[x(jy,{get children(){return x(zy,{get children(){return x(ex,{get children(){var t=ox(),n=t.firstChild;return te(t,x(yx,{}),n),te(t,x(e,{}),n),te(n,x(jc,{})),t}})}})}}),x(by,{position:"bottom-right"})]}})];function e(){const[t,n]=j(!1);return dt(()=>{const r=qb(()=>{n(!0)});Y(r)}),x(Se,{get when(){return t()},get children(){var r=sx(),o=r.firstChild;return o.firstChild,te(o,x(mr,{size:"sm",onClick:()=>Vb(),class:"shrink-0",children:"Update"}),null),r}})}}function bx(){const{setColorMode:e,colorMode:t}=Ql();return x(xu,{get children(){return[x(bu,{as:mr,variant:"ghost",size:"icon",class:"w-9 h-9",get children(){return[x(Ka,{class:"size-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),x(Ba,{class:"absolute size-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),ix()]}}),x(Su,{class:"min-w-[120px]",get children(){return[x(Lr,{onSelect:()=>e("light"),class:"gap-2 cursor-pointer text-sm",get children(){return[x(Ka,{class:"size-4"}),ax()]}}),x(Lr,{onSelect:()=>e("dark"),class:"gap-2 cursor-pointer text-sm",get children(){return[x(Ba,{class:"size-4"}),cx()]}}),x(Lr,{onSelect:()=>e("system"),class:"gap-2 cursor-pointer text-sm",get children(){return[x(Ry,{class:"size-4"}),lx()]}})]}})]}})}function xx(){const e=Qb(),t=()=>e?.connectedPeerIds()??[],n=()=>e?.connectedPeerCount()??0,r=()=>e?.serverStatus()??"connecting",o=()=>e?.isLeader()??!1,s=()=>{switch(r()){case"connected":return"bg-green-500";case"connecting":return"bg-yellow-500 animate-pulse";case"disconnected":return"bg-red-500"}},i=()=>{switch(r()){case"connected":return"Connected to server";case"connecting":return"Connecting to server...";case"disconnected":return"Disconnected from server"}};return x(Gv,{get children(){return[x(Hv,{as:mr,variant:"ghost",size:"sm",class:"h-9 px-2 gap-1.5","data-testid":"connected-peer-count",title:"Active connections",get children(){return[(()=>{var a=ux(),c=a.firstChild;return te(a,x(Ko,{class:"size-4 text-muted-foreground"}),c),te(a,(()=>{var l=pe(()=>n()>0);return()=>l()&&(()=>{var u=hx();return te(u,n),u})()})(),c),Ie(l=>{var u=`absolute -bottom-0.5 -right-0.5 w-2 h-2 rounded-full ${s()}`,d=i();return u!==l.e&&ns(c,l.e=u),d!==l.t&&zt(c,"title",l.t=d),l},{e:void 0,t:void 0}),a})(),(()=>{var a=dx();return te(a,n),a})()]}}),x(Jv,{"data-testid":"active-connections-dialog",class:"sm:max-w-md",get children(){return[x(Xv,{get children(){return[x(Zv,{class:"flex items-center gap-2",get children(){return[x(Ko,{class:"w-4 h-4 text-primary"}),"Active Connections"]}}),x(Qv,{children:"Peers currently connected to your session"})]}}),(()=>{var a=fx(),c=a.firstChild,l=c.firstChild,u=l.firstChild,d=u.nextSibling,f=d.firstChild,h=f.nextSibling,p=l.nextSibling,m=p.firstChild,g=m.firstChild,y=g.nextSibling,v=m.nextSibling,b=v.firstChild,w=b.nextSibling,P=c.nextSibling,T=P.firstChild,R=T.nextSibling,S=P.nextSibling;return S.firstChild,te(h,r),te(y,()=>o()?"Leader":"Follower"),te(w,n),te(R,()=>e?.myPeerId()??""),te(S,(()=>{var C=pe(()=>t().length===0);return()=>C()?px():(()=>{var L=gx();return te(L,()=>t().map(A=>(()=>{var O=mx(),G=O.firstChild,B=G.nextSibling;return te(G,x(Ko,{class:"w-3 h-3 text-primary"})),te(B,A),O})())),L})()})(),null),Ie(()=>ns(f,`w-2 h-2 rounded-full ${s()}`)),a})()]}})]}})}const Sx=()=>Co(()=>import("./connect-to-D23FwqwU.js"),__vite__mapDeps([0,1,2,3])),wx=J({peerId:se(),connectionId:se()}),Cx=In("/connect-to")({component:ho(Sx,"component"),validateSearch:wx}),_x=()=>Co(()=>import("./index-DC8gRpT7.js"),__vite__mapDeps([4,5,6,1])),Px=In("/")({component:ho(_x,"component")}),kx=()=>Co(()=>import("./wheel._connectionId-BE_dsf1K.js"),__vite__mapDeps([7,2,3,8,5,1])),Tx=In("/wheel/$connectionId")({component:ho(kx,"component")}),Rx=()=>Co(()=>import("./settings._connectionId-CC7_8ofu.js"),__vite__mapDeps([9,3,5,6,8,1])),Ix=In("/settings/$connectionId")({component:ho(Rx,"component")}),Ex=Cx.update({id:"/connect-to",path:"/connect-to",getParentRoute:()=>vr}),Mx=Px.update({id:"/",path:"/",getParentRoute:()=>vr}),Lx=Tx.update({id:"/wheel/$connectionId",path:"/wheel/$connectionId",getParentRoute:()=>vr}),Ox=Ix.update({id:"/settings/$connectionId",path:"/settings/$connectionId",getParentRoute:()=>vr}),Ax={IndexRoute:Mx,ConnectToRoute:Ex,SettingsConnectionIdRoute:Ox,WheelConnectionIdRoute:Lx},Dx=vr._addFileChildren(Ax)._addFileTypes(),$x="/where-to-eat/previews/pr-17/";function Fx(){return Jh({routeTree:Dx,basepath:$x,defaultPreload:"intent",defaultErrorComponent:Vc,defaultNotFoundComponent:()=>x(Wc,{})})}const Nx=Fx();nf(()=>x(Qh,{router:Nx}),document.getElementById("root"));export{Js as $,Xv as A,mr as B,Zv as C,Gv as D,Qv as E,xc as F,lf as G,zt as H,ln as I,ns as J,cf as K,Rn as L,St as M,ao as N,Ix as O,af as P,Ky as Q,Cx as R,Se as S,ve as T,kt as U,de as V,M as W,Bt as X,go as Y,ge as Z,Ee as _,Ue as a,Ae as a0,lt as a1,vo as a2,ke as a3,yo as a4,iu as b,x as c,j as d,H as e,Y as f,W as g,Ie as h,te as i,pe as j,Sc as k,ue as l,K as m,Ko as n,dt as o,co as p,Rt as q,Vy as r,Z as s,ee as t,Ux as u,Tx as v,Uy as w,Kx as x,Hv as y,Jv as z};
