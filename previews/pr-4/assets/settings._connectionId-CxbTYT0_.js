import{j,K as tt,e,m as D,N as nt,O as rt,P as st,g as ie,Q as he,_ as ze,r as F,T as Ee,U as Ae,V as at,W as lt,X as k,Y as Fe,c as T,Z as it,$ as ot,a0 as ct,a1 as dt,a2 as Ue,a3 as ut,a4 as gt,a5 as Ve,I as fe,n as ht,l as Re,a6 as ft,a as mt,b as pt,u as vt,d as _e,t as g,i as a,L as Ce,B as S,D as $e,w as Se,x as Ie,y as ke,z as De,A as Ke,f as N,F as Y,h as Z,s as ue,E as ge,a7 as xt}from"./index-XF9XlXpD.js";import{h as yt}from"./house-CJIuVrxh.js";import{T as J,a as ee,b as te,p as ne,t as Pe}from"./text-field-Qa7EKbq8.js";import{e as re,C as se,a as ae,c as le}from"./card-CTapl3vM.js";var bt={};ze(bt,{Root:()=>me,ToggleButton:()=>_t});function me(t){const[n,s]=j(t,["children","pressed","defaultPressed","onChange","onClick"]),p=tt({isSelected:()=>n.pressed,defaultIsSelected:()=>n.defaultPressed,onSelectedChange:o=>n.onChange?.(o),isDisabled:()=>s.disabled});return e(nt,D({get"aria-pressed"(){return p.isSelected()},get"data-pressed"(){return p.isSelected()?"":void 0},onClick:o=>{he(o,n.onClick),p.toggle()}},s,{get children(){return e(wt,{get state(){return{pressed:p.isSelected}},get children(){return n.children}})}}))}function wt(t){const n=rt(()=>{const s=t.children;return st(s)?s(t.state):s});return ie(n)}var _t=me,Ct=class{collection;direction;orientation;constructor(t,n,s){this.collection=t,this.direction=n,this.orientation=s}flipDirection(){return this.direction()==="rtl"&&this.orientation()==="horizontal"}getKeyLeftOf(t){if(this.flipDirection())return this.getNextKey(t);if(this.orientation()==="horizontal")return this.getPreviousKey(t)}getKeyRightOf(t){if(this.flipDirection())return this.getPreviousKey(t);if(this.orientation()==="horizontal")return this.getNextKey(t)}getKeyAbove(t){if(this.orientation()==="vertical")return this.getPreviousKey(t)}getKeyBelow(t){if(this.orientation()==="vertical")return this.getNextKey(t)}getFirstKey(){let t=this.collection().getFirstKey();return t==null?void 0:(this.collection().getItem(t)?.disabled&&(t=this.getNextKey(t)),t)}getLastKey(){let t=this.collection().getLastKey();return t==null?void 0:(this.collection().getItem(t)?.disabled&&(t=this.getPreviousKey(t)),t)}getNextKey(t){let n=t,s;do if(n=this.collection().getKeyAfter(n)??this.collection().getFirstKey(),n==null||(s=this.collection().getItem(n),s==null))return;while(s.disabled);return n}getPreviousKey(t){let n=t,s;do if(n=this.collection().getKeyBefore(n)??this.collection().getLastKey(),n==null||(s=this.collection().getItem(n),s==null))return;while(s.disabled);return n}},$t={};ze($t,{Item:()=>pe,Root:()=>ve,ToggleGroup:()=>It,useToggleGroupContext:()=>Le});var Ge=Ue();function Le(){const t=Ve(Ge);if(t===void 0)throw new Error("[kobalte]: `useToggleGroupContext` must be used within a `ToggleGroup` component");return t}function pe(t){let n;const s=Le(),p=s.generateId(`item-${Ee()}`),i=Ae({id:p},t),[o,I]=j(i,["ref","value","disabled","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),M=()=>s.listState().selectionManager(),K=()=>s.isDisabled()||o.disabled;at({getItem:()=>({ref:()=>n,type:"item",key:o.value,textValue:"",disabled:o.disabled||s.isDisabled()})});const y=lt({key:()=>o.value,selectionManager:M,disabled:K},()=>n);return e(me,D({ref(_){var $=Fe(z=>n=z,o.ref);typeof $=="function"&&$(_)},get pressed(){return M().isSelected(o.value)},get tabIndex(){return y.tabIndex()},get"data-orientation"(){return s.orientation()},get disabled(){return K()},get onPointerDown(){return k([o.onPointerDown,y.onPointerDown])},get onPointerUp(){return k([o.onPointerUp,y.onPointerUp])},get onClick(){return k([o.onClick,y.onClick])},onKeyDown:_=>{["Enter"," "].includes(_.key)&&_.preventDefault(),he(_,o.onKeyDown),he(_,y.onKeyDown)},get onMouseDown(){return k([o.onMouseDown,y.onMouseDown])},get onFocus(){return k([o.onFocus,y.onFocus])}},I))}function St(t){let n;const s=`group-${Ee()}`,p=Ae({id:s,selectionMode:"single",orientation:"horizontal"},t),[i,o]=j(p,["ref","value","defaultValue","disabled","orientation","selectionMode","onChange","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]),[I,M]=T([]),{DomCollectionProvider:K}=it({items:I,onItemsChange:M}),y=ot({selectedKeys:()=>i.value,defaultSelectedKeys:()=>i.defaultValue,onSelectionChange:w=>i.onChange?.(Array.from(w)),disallowEmptySelection:!1,selectionMode:()=>i.selectionMode,dataSource:I}),{direction:q}=ct(),_=new Ct(()=>z.listState().collection(),q,()=>i.orientation),$=dt({selectionManager:()=>y.selectionManager(),keyboardDelegate:()=>_,disallowEmptySelection:()=>y.selectionManager().disallowEmptySelection(),disallowTypeAhead:!0},()=>n),z={listState:()=>y,isDisabled:()=>i.disabled??!1,isMultiple:()=>i.selectionMode==="multiple",generateId:ut(()=>o.id),orientation:()=>i.orientation};return e(K,{get children(){return e(Ge.Provider,{value:z,get children(){return e(gt,D({as:"div",role:"group",ref(w){var C=Fe(b=>n=b,i.ref);typeof C=="function"&&C(w)},get tabIndex(){return ie(()=>!i.disabled)()?$.tabIndex():void 0},get"data-orientation"(){return i.orientation},get onKeyDown(){return k([i.onKeyDown,$.onKeyDown])},get onMouseDown(){return k([i.onMouseDown,$.onMouseDown])},get onFocusIn(){return k([i.onFocusIn,$.onFocusIn])},get onFocusOut(){return k([i.onFocusOut,$.onFocusOut])}},o))}})}})}function ve(t){const[n,s]=j(t,["value","defaultValue","onChange","multiple"]),p=F(()=>n.value!=null?n.multiple?n.value:[n.value]:n.value),i=F(()=>n.defaultValue!=null?n.multiple?n.defaultValue:[n.defaultValue]:n.defaultValue);return e(St,D({get value(){return p()},get defaultValue(){return i()},onChange:I=>{n.multiple?n.onChange?.(I):n.onChange?.(I[0]??null)},get selectionMode(){return n.multiple?"multiple":"single"}},s))}var It=Object.assign(ve,{Item:pe}),kt=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Dt=t=>e(fe,D(t,{iconNode:kt,name:"ban"})),Ne=Dt,Kt=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Pt=t=>e(fe,D(t,{iconNode:Kt,name:"arrow-left"})),Nt=Pt,Tt=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Mt=t=>e(fe,D(t,{iconNode:Tt,name:"save"})),zt=Mt;const Et=ht("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm"},size:{default:"h-9 px-3",sm:"h-8 px-2",lg:"h-10 px-3"}},defaultVariants:{variant:"default",size:"default"}}),je=Ue({size:"default",variant:"default"}),At=t=>{const[n,s]=j(t,["class","children","size","variant"]);return e(ve,D({get class(){return Re("flex items-center justify-center gap-1",n.class)}},s,{get children(){return e(je.Provider,{value:{get size(){return n.size},get variant(){return n.variant}},get children(){return n.children}})}}))},Ft=t=>{const[n,s]=j(t,["class","size","variant"]),p=Ve(je);return e(pe,D({get class(){return Re(Et({size:p.size||n.size,variant:p.variant||n.variant}),"hover:bg-muted hover:text-muted-foreground data-[pressed]:bg-accent data-[pressed]:text-accent-foreground",n.class)}},s))};var Ut=g("<span class=text-xl>ğŸ“"),Vt=g('<div class="flex flex-col sm:flex-row gap-3 sm:items-end"><div class=flex-1>'),Rt=g('<span class="flex items-center gap-2 text-lg"><span class=text-xl>ğŸ½ï¸</span>Restaurants (<!>)'),Gt=g("<span class=text-xl>ğŸ•"),Te=g('<div class="space-y-4 pt-2">'),Me=g('<div class="space-y-2 max-h-80 overflow-y-auto pr-1">'),Lt=g('<span class="flex items-center gap-2 text-lg"><span class=text-xl>ğŸ‘¥</span>People (<!>)'),jt=g("<span class=text-xl>ğŸ‘¤"),Bt=g("<span class=text-xl>â­"),Ot=g('<div class=space-y-6><div class=space-y-3><p class="text-sm font-medium text-muted-foreground">Select a person to rate for:'),Ht=g('<div class="py-6 px-4"><div class="max-w-5xl mx-auto space-y-6"><div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 page-section"><div><h1 class="text-3xl font-bold flex items-center gap-3"><span class=text-3xl>âš™ï¸</span>Settings</h1><p class="text-muted-foreground mt-1">Manage restaurants, users, and preferences</p></div><div class="flex gap-2"></div></div><div class="grid md:grid-cols-2 gap-6 page-section">'),Wt=g('<div class="text-center py-10 text-muted-foreground"><span class="text-4xl block mb-3">ğŸ½ï¸</span><p class=font-medium>No restaurants yet</p><p class=text-sm>Add your favorite places to get started!'),qt=g('<div class="food-list-item flex items-center justify-between animate-slide-up"><div class="flex items-center gap-3 flex-1 min-w-0"><div class="w-10 h-10 rounded-xl bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-lg flex-shrink-0">ğŸ´</div><div class=min-w-0><h3 class="font-semibold truncate">'),Qt=g('<div class="text-center py-10 text-muted-foreground"><span class="text-4xl block mb-3">ğŸ‘¥</span><p class=font-medium>No people yet</p><p class=text-sm>Add your hungry friends!'),Xt=g('<div class="food-list-item flex items-center justify-between animate-slide-up"><div class="flex items-center gap-3 flex-1 min-w-0"><div class="w-10 h-10 rounded-full bg-gradient-to-br from-secondary to-accent/30 flex items-center justify-center text-lg flex-shrink-0">ğŸ‘¤</div><div class=min-w-0><h3 class="font-semibold truncate"></h3><p class="text-xs text-muted-foreground"> ratings'),Yt=g("<span class=mr-1>ğŸ‘¤"),Zt=g('<div class=space-y-4><div class="flex items-center gap-2"><span class=text-lg>ğŸ“</span><h3 class=font-semibold>Rating as </h3></div><div class="grid gap-3">'),Jt=g('<span class="text-xs text-destructive font-medium flex items-center gap-1"> Never pick'),en=g('<div class="text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent min-w-[3ch] text-right">'),tn=g('<div class="space-y-2 mt-3 pt-3 border-t border-border/50"><div class="flex justify-between text-xs font-medium text-muted-foreground"><span>ğŸ¤® Nope</span><span>ğŸ˜ Love it!</span></div><input type=range min=0 max=100 class="w-full h-3 rounded-full appearance-none cursor-pointer accent-primary"data-testid=score-slider>'),nn=g('<div class="food-list-item p-4 space-y-3 animate-slide-up"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-xl bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center text-lg flex-shrink-0">ğŸ½ï¸</div><div><h4 class=font-semibold></h4></div></div><div class="flex items-center gap-3">'),rn=g(`<div class="text-sm text-muted-foreground italic flex items-center gap-2 mt-2"><span>ğŸš«</span> This restaurant won't appear in wheel spins`);function cn(){const t=ft.useParams({select:r=>r.connectionId}),n=mt(),[s,p]=T(""),[i,o]=T(""),[I,M]=T(""),[K,y]=T(""),[q,_]=T(!1),[$,z]=T(!1),w=pt(),C=vt(),b=F(()=>w.store.connections.find(r=>r.id===t()));_e(()=>{const r=b();r&&p(r.settings.connection.name??"")});const U=F(()=>b()?.settings.eateries.filter(r=>!r._deleted)??[]),E=F(()=>b()?.settings.users.filter(r=>!r._deleted)??[]);_e(()=>{const r=b();r===void 0?(console.log("settings: redirecting - connection not found"),n.navigate({to:"/",replace:!0})):console.log("settings: loaded connection",{id:r.id,users:r.settings.users.length,activeUsers:E().length,eateries:r.settings.eateries.length,activeEateries:U().length})});const[Q,oe]=T(b()?.settings.users[0]),Be=()=>{if(!i().trim())return;const{eateryId:r,createdScores:c}=w.addEatery(t(),i().trim());o(""),M(""),_(!1);const h=b()?.settings.eateries.find(B=>B.id===r);if(h){C.broadcast({type:"updated-eatery",data:{connectionId:t(),eatery:h}});for(const B of c)C.broadcast({type:"updated-eateryScore",data:{connectionId:t(),eateryScore:B}})}},Oe=r=>{w.removeEatery(t(),r),C.broadcast({type:"removed-eatery",data:{connectionId:t(),eateryId:r}})},He=()=>{if(!K().trim())return;const r=w.addUser(t(),K().trim(),void 0);y(""),z(!1);const c=b()?.settings.users.find(h=>h.id===r);oe(c),c&&C.broadcast({type:"updated-user",data:{connectionId:t(),user:c}})},We=r=>{w.removeUser(t(),r);const c=b()?.settings.users;Q()?.id===r&&c&&c.length!==0&&oe(c[0]),C.broadcast({type:"removed-user",data:{connectionId:t(),userId:r}})},qe=(r,c,h)=>{w.updateScore(t(),r,c,h),C.broadcast({type:"updated-eateryScore",data:{connectionId:t(),eateryScore:{eateryId:c,userId:r,score:h,updatedAt:Date.now()}}})},ce=F(()=>b()?.settings.eateryScores.filter(r=>r.userId===Q()?.id)),Qe=F(()=>(b()?.settings.eateryVetoes??[]).filter(r=>!r._deleted)),Xe=(r,c)=>Qe().some(h=>h.userId===r&&h.eateryId===c),Ye=(r,c)=>{const h=w.toggleVeto(t(),r,c);h&&C.broadcast({type:"updated-eateryVeto",data:{connectionId:t(),eateryVeto:h}})},Ze=()=>{const r=s().trim(),c=b();if(!c||!r||r===c.settings.connection.name)return;const h=Date.now();w.updateConnection(t(),r,h),C.broadcast({type:"updated-connection",data:{connectionId:t(),connection:{name:r,updatedAt:h}}})};return e(N,{get when(){return b()},fallback:null,get children(){var r=Ht(),c=r.firstChild,h=c.firstChild,B=h.firstChild,xe=B.nextSibling,de=h.nextSibling;return a(xe,e(Ce,{to:"/wheel/$connectionId",get params(){return{connectionId:t()}},get children(){return e(S,{variant:"outline",size:"sm",class:"gap-2",get children(){return[e(Nt,{class:"w-4 h-4"}),"Back to Wheel"]}})}}),null),a(xe,e(Ce,{to:"/",get children(){return e(S,{variant:"ghost",size:"sm",class:"gap-2",get children(){return e(yt,{class:"w-4 h-4"})}})}}),null),a(c,e(re,{class:"food-card border-2 page-section",get children(){return[e(se,{class:"pb-3",get children(){return e(ae,{class:"flex items-center gap-2 text-lg",get children(){return[Ut(),"Wheel Name"]}})}}),e(le,{get children(){var l=Vt(),d=l.firstChild;return a(d,e(J,{get value(){return s()},onChange:f=>p(f),get children(){return[e(ee,{for:"connection-name",class:"text-sm font-medium",children:"Name"}),e(te,{type:"text",id:"connection-name",placeholder:"Friday Lunch Gang ğŸ•",class:"h-11 rounded-xl","data-testid":"connection-name-input"})]}})),a(l,e(S,{onClick:Ze,"data-testid":"connection-name-save",class:"gap-2",get children(){return[e(zt,{class:"w-4 h-4"}),"Save"]}}),null),l}})]}}),de),a(de,e(re,{class:"food-card border-2",get children(){return[e(se,{class:"pb-3",get children(){return e(ae,{class:"flex items-center justify-between",get children(){return[(()=>{var l=Rt(),d=l.firstChild,f=d.nextSibling,u=f.nextSibling;return u.nextSibling,a(l,()=>U().length,u),l})(),e($e,{get open(){return q()},onOpenChange:_,get children(){return[e(Se,{get children(){return e(S,{size:"sm","data-testid":"add-eatery-open",class:"gap-2",get children(){return[e(ne,{class:"w-4 h-4"}),"Add"]}})}}),e(Ie,{class:"sm:max-w-md",get children(){return[e(ke,{get children(){return[e(De,{class:"flex items-center gap-2",get children(){return[Gt(),"Add Restaurant"]}}),e(Ke,{children:"Add a new restaurant or food place to the wheel"})]}}),(()=>{var l=Te();return a(l,e(J,{get value(){return i()},onChange:d=>o(d),get children(){return[e(ee,{for:"eatery-name",class:"text-sm font-medium",children:"Restaurant Name *"}),e(te,{type:"text",id:"eatery-name",placeholder:"e.g., Pizza Palace",class:"h-11 rounded-xl","data-testid":"add-eatery-name"})]}}),null),a(l,e(J,{get value(){return I()},onChange:d=>M(d),get children(){return[e(ee,{for:"eatery-cuisine",class:"text-sm font-medium",children:"Cuisine Type (Optional)"}),e(te,{type:"text",id:"eatery-cuisine",placeholder:"e.g., Italian, Chinese, Mexican",class:"h-11 rounded-xl"})]}}),null),a(l,e(S,{onClick:Be,class:"w-full gap-2","data-testid":"add-eatery-submit",get children(){return[e(ne,{class:"w-4 h-4"}),"Add Restaurant"]}}),null),l})()]}})]}})]}})}}),e(le,{get children(){var l=Me();return a(l,e(N,{get when(){return U().length>0},get fallback(){return Wt()},get children(){return e(Y,{get each(){return U()},children:(d,f)=>(()=>{var u=qt(),V=u.firstChild,O=V.firstChild,R=O.nextSibling,G=R.firstChild;return a(G,()=>d.name),a(u,e(S,{size:"icon",variant:"ghost",onClick:()=>Oe(d.id),"data-testid":"delete-eatery",class:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 flex-shrink-0",get children(){return e(Pe,{class:"w-4 h-4"})}}),null),Z(v=>{var H=`animation-delay: ${f()*.03}s`,x=d.name;return v.e=ue(u,H,v.e),x!==v.t&&ge(u,"data-eatery-name",v.t=x),v},{e:void 0,t:void 0}),u})()})}})),l}})]}}),null),a(de,e(re,{class:"food-card border-2",get children(){return[e(se,{class:"pb-3",get children(){return e(ae,{class:"flex items-center justify-between",get children(){return[(()=>{var l=Lt(),d=l.firstChild,f=d.nextSibling,u=f.nextSibling;return u.nextSibling,a(l,()=>E().length,u),l})(),e($e,{get open(){return $()},onOpenChange:z,get children(){return[e(Se,{get children(){return e(S,{size:"sm","data-testid":"add-user-open",class:"gap-2",get children(){return[e(ne,{class:"w-4 h-4"}),"Add"]}})}}),e(Ie,{class:"sm:max-w-md",get children(){return[e(ke,{get children(){return[e(De,{class:"flex items-center gap-2",get children(){return[jt(),"Add Person"]}}),e(Ke,{children:"Add someone who will rate and vote on restaurants"})]}}),(()=>{var l=Te();return a(l,e(J,{get value(){return K()},onChange:d=>y(d),get children(){return[e(ee,{for:"user-name",class:"text-sm font-medium",children:"Name *"}),e(te,{type:"text",id:"user-name",placeholder:"e.g., Alex",class:"h-11 rounded-xl","data-testid":"add-user-name"})]}}),null),a(l,e(S,{onClick:He,class:"w-full gap-2","data-testid":"add-user-submit",get children(){return[e(ne,{class:"w-4 h-4"}),"Add Person"]}}),null),l})()]}})]}})]}})}}),e(le,{get children(){var l=Me();return a(l,e(N,{get when(){return E().length>0},get fallback(){return Qt()},get children(){return e(Y,{get each(){return E()},children:(d,f)=>(()=>{var u=Xt(),V=u.firstChild,O=V.firstChild,R=O.nextSibling,G=R.firstChild,v=G.nextSibling,H=v.firstChild;return a(G,()=>d.name),a(v,()=>ce()?.length??0,H),a(u,e(S,{size:"icon",variant:"ghost",onClick:()=>We(d.id),"data-testid":"delete-user",class:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 flex-shrink-0",get children(){return e(Pe,{class:"w-4 h-4"})}}),null),Z(x=>{var P=`animation-delay: ${f()*.03}s`,X=d.name;return x.e=ue(u,P,x.e),X!==x.t&&ge(u,"data-user-name",x.t=X),x},{e:void 0,t:void 0}),u})()})}})),l}})]}}),null),a(c,e(N,{get when(){return ie(()=>E().length>0)()&&U().length>0},get children(){return e(re,{class:"food-card border-2 page-section",get children(){return[e(se,{class:"pb-3",get children(){return e(ae,{class:"flex items-center gap-2 text-lg",get children(){return[Bt(),"Rate Restaurants"]}})}}),e(le,{get children(){var l=Ot(),d=l.firstChild;return d.firstChild,a(d,e(At,{multiple:!1,get value(){return Q()?.id??null},onChange:f=>oe(E().find(u=>u.id===f)),"data-testid":"user-selector",class:"flex flex-wrap gap-2",get children(){return e(Y,{get each(){return E()},children:f=>e(Ft,{get value(){return f.id},class:"px-4 py-2 rounded-full border-2 data-[pressed]:bg-primary data-[pressed]:text-primary-foreground data-[pressed]:border-primary transition-all",get children(){return[Yt()," ",ie(()=>f.name)]}})})}}),null),a(l,e(N,{get when(){return Q()},children:f=>(()=>{var u=Zt(),V=u.firstChild,O=V.firstChild,R=O.nextSibling;R.firstChild;var G=V.nextSibling;return a(R,()=>f().name,null),a(G,e(Y,{get each(){return U()},children:(v,H)=>{const x=()=>Xe(f().id,v.id);return(()=>{var P=nn(),X=P.firstChild,ye=X.firstChild,Je=ye.firstChild,be=Je.nextSibling,et=be.firstChild,we=ye.nextSibling;return a(et,()=>v.name),a(be,e(N,{get when(){return x()},get children(){var m=Jt(),A=m.firstChild;return a(m,e(Ne,{class:"w-3 h-3"}),A),m}}),null),a(we,e(S,{size:"icon",get variant(){return x()?"destructive":"ghost"},onClick:()=>Ye(f().id,v.id),get title(){return x()?"Remove never pick":"Never pick this place"},"data-testid":"veto-toggle",class:"rounded-full",get children(){return e(Ne,{class:"w-4 h-4"})}}),null),a(we,e(N,{get when(){return!x()},get children(){var m=en();return a(m,()=>ce()?.find(A=>A.eateryId===v.id)?.score??0),m}}),null),a(P,e(N,{get when(){return!x()},get fallback(){return rn()},get children(){var m=tn(),A=m.firstChild,W=A.nextSibling;return W.addEventListener("change",L=>qe(f().id,v.id,Number.parseInt(L.target.value))),W.style.setProperty("background","linear-gradient(to right, oklch(65% 0.2 25) 0%, oklch(75% 0.15 60) 50%, oklch(70% 0.18 145) 100%)"),Z(()=>W.value=ce()?.find(L=>L.eateryId===v.id)?.score??0),m}}),null),Z(m=>{var A={"!border-destructive/50 !bg-destructive/5":x()},W=`animation-delay: ${H()*.03}s`,L=v.name;return m.e=xt(P,A,m.e),m.t=ue(P,W,m.t),L!==m.a&&ge(P,"data-eatery-name",m.a=L),m},{e:void 0,t:void 0,a:void 0}),P})()}})),u})()}),null),l}})]}})}}),null),r}})}export{cn as component};
